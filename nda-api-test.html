<!DOCTYPE html>
<html>
<head>
    <title>NDA API Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
        button { padding: 10px 15px; margin: 5px; cursor: pointer; }
        .result { margin: 10px 0; padding: 10px; background: #f5f5f5; }
        textarea { width: 100%; height: 100px; }
    </style>
</head>
<body>
    <h1>NDA API Test Page</h1>
    
    <div class="test-section">
        <h3>Test 1: Check if API endpoint exists</h3>
        <button onclick="testAPI()">Test API Connection</button>
        <div id="apiTest" class="result"></div>
    </div>

    <div class="test-section">
        <h3>Test 2: Test Groq Integration</h3>
        <button onclick="testGroq()">Test Groq API</button>
        <div id="groqTest" class="result"></div>
    </div>

    <div class="test-section">
        <h3>Test 3: Test NDA Analysis</h3>
        <textarea id="ndaText" placeholder="Paste a sample NDA text here...">
This Non-Disclosure Agreement ("Agreement") is entered into by Company A and Company B for the purpose of evaluating a potential business relationship.

1. Confidential Information means any and all information disclosed by either party.
2. Term: This agreement shall remain in effect for 5 years.
3. The receiving party agrees not to disclose confidential information.
        </textarea>
        <br>
        <button onclick="testNDAAnalysis()">Test NDA Analysis</button>
        <div id="ndaAnalysisTest" class="result"></div>
    </div>

    <script>
        async function testAPI() {
            const result = document.getElementById('apiTest');
            result.innerHTML = 'Testing...';
            
            try {
                const response = await fetch('https://template-generator-aob3.vercel.app/api/nda-test');
                const data = await response.json();
                result.innerHTML = `<strong>Success:</strong> ${JSON.stringify(data, null, 2)}`;
            } catch (error) {
                result.innerHTML = `<strong>Error:</strong> ${error.message}`;
            }
        }

        async function testGroq() {
            const result = document.getElementById('groqTest');
            result.innerHTML = 'Testing Groq API...';
            
            try {
                const response = await fetch('https://template-generator-aob3.vercel.app/api/nda-test', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ ndaText: 'test' })
                });
                const data = await response.json();
                result.innerHTML = `<strong>Groq Test:</strong><pre>${JSON.stringify(data, null, 2)}</pre>`;
            } catch (error) {
                result.innerHTML = `<strong>Error:</strong> ${error.message}`;
            }
        }

        async function testNDAAnalysis() {
            const result = document.getElementById('ndaAnalysisTest');
            const ndaText = document.getElementById('ndaText').value;
            result.innerHTML = 'Analyzing NDA...';
            
            try {
                const response = await fetch('https://template-generator-aob3.vercel.app/api/nda-risk-chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        ndaText: ndaText,
                        industry: 'technology'
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    result.innerHTML = `<strong>Analysis Result:</strong><div style="border: 1px solid #ddd; padding: 10px; margin: 10px 0;">${data.response}</div><p><strong>Model Used:</strong> ${data.model}</p>`;
                } else {
                    const errorData = await response.json();
                    result.innerHTML = `<strong>Error ${response.status}:</strong> ${JSON.stringify(errorData, null, 2)}`;
                }
            } catch (error) {
                result.innerHTML = `<strong>Error:</strong> ${error.message}`;
            }
        }
    </script>
</body>
</html>