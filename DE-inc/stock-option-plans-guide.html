<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stock Option Plans for Startups: ISO, NSO, RSU Complete Guide | 409A & 83(b) Election</title>
  <meta name="description" content="Complete guide to startup equity compensation: ISO vs NSO vs RSU, 409A valuations, 83(b) elections, early grants, and Delaware vs California law. Interactive tax calculators and decision tools.">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary: #6366f1;
      --primary-dark: #4f46e5;
      --secondary: #8b5cf6;
      --iso-color: #059669;
      --nso-color: #dc2626;
      --rsu-color: #ea580c;
      --gray-50: #f9fafb;
      --gray-100: #f3f4f6;
      --gray-200: #e5e7eb;
      --gray-300: #d1d5db;
      --gray-700: #374151;
      --gray-900: #111827;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      line-height: 1.6;
      color: var(--gray-900);
      background: #fff;
    }

    .hero {
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      color: white;
      padding: 4rem 1.5rem;
      text-align: center;
    }

    .hero h1 {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 1rem;
      line-height: 1.2;
    }

    .hero p {
      font-size: 1.25rem;
      max-width: 900px;
      margin: 0 auto 2rem;
      opacity: 0.95;
    }

    .equity-types {
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      flex-wrap: wrap;
      margin-top: 2rem;
    }

    .equity-badge {
      background: rgba(255,255,255,0.15);
      backdrop-filter: blur(10px);
      padding: 1rem 1.5rem;
      border-radius: 12px;
      border: 2px solid rgba(255,255,255,0.3);
      min-width: 150px;
    }

    .equity-badge h3 {
      font-size: 1.25rem;
      margin-bottom: 0.25rem;
    }

    .equity-badge p {
      font-size: 0.9rem;
      opacity: 0.9;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1.5rem;
    }

    .tabs-nav {
      display: flex;
      gap: 0.5rem;
      border-bottom: 2px solid var(--gray-200);
      background: var(--gray-50);
      padding: 1rem 1.5rem 0;
      overflow-x: auto;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .tab-btn {
      background: none;
      border: none;
      padding: 0.75rem 1.5rem;
      font-size: 0.95rem;
      font-weight: 600;
      color: var(--gray-700);
      cursor: pointer;
      border-radius: 8px 8px 0 0;
      transition: all 0.2s;
      white-space: nowrap;
    }

    .tab-btn:hover {
      background: var(--gray-100);
      color: var(--primary);
    }

    .tab-btn.active {
      background: white;
      color: var(--primary);
      border-bottom: 3px solid var(--primary);
    }

    .tab-content {
      display: none;
      padding: 3rem 0;
    }

    .tab-content.active {
      display: block;
    }

    .section {
      margin-bottom: 3rem;
    }

    .section h2 {
      font-size: 2rem;
      color: var(--gray-900);
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 3px solid var(--primary);
    }

    .section h3 {
      font-size: 1.5rem;
      color: var(--gray-900);
      margin: 2rem 0 1rem;
    }

    .section h4 {
      font-size: 1.25rem;
      color: var(--gray-700);
      margin: 1.5rem 0 0.75rem;
    }

    .section p, .section li {
      color: var(--gray-700);
      margin-bottom: 1rem;
    }

    .section ul, .section ol {
      margin-left: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      margin: 2rem 0;
      background: white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      border-radius: 8px;
      overflow: hidden;
    }

    .comparison-table th {
      background: var(--primary);
      color: white;
      padding: 1rem;
      text-align: left;
      font-weight: 600;
    }

    .comparison-table td {
      padding: 1rem;
      border-bottom: 1px solid var(--gray-200);
    }

    .comparison-table tr:last-child td {
      border-bottom: none;
    }

    .comparison-table tr:hover {
      background: var(--gray-50);
    }

    .comparison-table th:first-child {
      width: 25%;
    }

    .iso-badge {
      background: rgba(5, 150, 105, 0.1);
      color: var(--iso-color);
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
    }

    .nso-badge {
      background: rgba(220, 38, 38, 0.1);
      color: var(--nso-color);
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
    }

    .rsu-badge {
      background: rgba(234, 88, 12, 0.1);
      color: var(--rsu-color);
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
    }

    .calculator-tool {
      background: linear-gradient(135deg, #f0f9ff 0%, #faf5ff 100%);
      border: 2px solid var(--gray-200);
      border-radius: 12px;
      padding: 2rem;
      margin: 2rem 0;
    }

    .calculator-tool h3 {
      margin-top: 0;
      color: var(--primary);
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: var(--gray-900);
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid var(--gray-300);
      border-radius: 6px;
      font-size: 1rem;
      transition: border-color 0.2s;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: var(--primary);
    }

    .btn {
      background: var(--primary);
      color: white;
      border: none;
      padding: 0.75rem 2rem;
      font-size: 1rem;
      font-weight: 600;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
    }

    .btn-secondary {
      background: var(--gray-200);
      color: var(--gray-900);
    }

    .btn-secondary:hover {
      background: var(--gray-300);
    }

    .result-box {
      background: white;
      border: 2px solid var(--primary);
      border-radius: 8px;
      padding: 1.5rem;
      margin-top: 1.5rem;
    }

    .result-box h4 {
      color: var(--primary);
      margin: 0 0 1rem 0;
    }

    .tax-breakdown {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1rem;
      margin: 1rem 0;
    }

    .tax-item {
      background: var(--gray-50);
      padding: 1rem;
      border-radius: 6px;
      border-left: 4px solid var(--primary);
    }

    .tax-item.iso {
      border-left-color: var(--iso-color);
    }

    .tax-item.nso {
      border-left-color: var(--nso-color);
    }

    .tax-item.rsu {
      border-left-color: var(--rsu-color);
    }

    .tax-item strong {
      display: block;
      font-size: 1.25rem;
      margin-bottom: 0.25rem;
    }

    .tax-item span {
      color: var(--gray-700);
      font-size: 0.9rem;
    }

    .alert {
      background: #fef3c7;
      border-left: 4px solid #f59e0b;
      padding: 1rem 1.5rem;
      margin: 1.5rem 0;
      border-radius: 6px;
    }

    .alert h4 {
      color: #92400e;
      margin: 0 0 0.5rem 0;
    }

    .alert p {
      color: #78350f;
      margin: 0;
    }

    .alert ul {
      margin: 0.5rem 0 0 1.5rem;
    }

    .alert li {
      color: #78350f;
    }

    .info-box {
      background: #dbeafe;
      border-left: 4px solid #3b82f6;
      padding: 1rem 1.5rem;
      margin: 1.5rem 0;
      border-radius: 6px;
    }

    .info-box h4 {
      color: #1e40af;
      margin: 0 0 0.5rem 0;
    }

    .info-box p {
      color: #1e3a8a;
      margin: 0;
    }

    .info-box ul {
      margin: 0.5rem 0 0 1.5rem;
    }

    .info-box li {
      color: #1e3a8a;
      margin-bottom: 0.5rem;
    }

    .success-box {
      background: #dcfce7;
      border-left: 4px solid #16a34a;
      padding: 1rem 1.5rem;
      margin: 1.5rem 0;
      border-radius: 6px;
    }

    .success-box h4 {
      color: #15803d;
      margin: 0 0 0.5rem 0;
    }

    .success-box p {
      color: #166534;
      margin: 0;
    }

    .success-box ul {
      margin: 0.5rem 0 0 1.5rem;
    }

    .success-box li {
      color: #166534;
      margin-bottom: 0.5rem;
    }

    .danger-box {
      background: #fee2e2;
      border-left: 4px solid #dc2626;
      padding: 1rem 1.5rem;
      margin: 1.5rem 0;
      border-radius: 6px;
    }

    .danger-box h4 {
      color: #991b1b;
      margin: 0 0 0.5rem 0;
    }

    .danger-box p {
      color: #991b1b;
      margin: 0;
    }

    .danger-box ul {
      margin: 0.5rem 0 0 1.5rem;
    }

    .danger-box li {
      color: #991b1b;
      margin-bottom: 0.5rem;
    }

    .comparison-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin: 2rem 0;
    }

    .equity-card {
      background: white;
      border: 2px solid var(--gray-200);
      border-radius: 12px;
      padding: 2rem;
      transition: all 0.3s;
    }

    .equity-card:hover {
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      transform: translateY(-5px);
    }

    .equity-card.iso {
      border-top: 4px solid var(--iso-color);
    }

    .equity-card.nso {
      border-top: 4px solid var(--nso-color);
    }

    .equity-card.rsu {
      border-top: 4px solid var(--rsu-color);
    }

    .equity-card h3 {
      margin: 0 0 1rem 0;
    }

    .equity-card.iso h3 {
      color: var(--iso-color);
    }

    .equity-card.nso h3 {
      color: var(--nso-color);
    }

    .equity-card.rsu h3 {
      color: var(--rsu-color);
    }

    .pros-cons {
      margin: 1rem 0;
    }

    .pros-cons h4 {
      font-size: 1rem;
      margin: 1rem 0 0.5rem 0;
    }

    .pros-cons ul {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .pros-cons li {
      padding: 0.5rem 0;
      margin: 0;
    }

    .pros-cons .pros li::before {
      content: "✓ ";
      color: #16a34a;
      font-weight: bold;
      margin-right: 0.5rem;
    }

    .pros-cons .cons li::before {
      content: "✗ ";
      color: #dc2626;
      font-weight: bold;
      margin-right: 0.5rem;
    }

    .timeline {
      position: relative;
      padding-left: 2rem;
      margin: 2rem 0;
    }

    .timeline::before {
      content: "";
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 3px;
      background: var(--primary);
    }

    .timeline-item {
      position: relative;
      padding-bottom: 2rem;
    }

    .timeline-item::before {
      content: "";
      position: absolute;
      left: -2.5rem;
      top: 0.25rem;
      width: 1rem;
      height: 1rem;
      background: var(--primary);
      border-radius: 50%;
      border: 3px solid white;
      box-shadow: 0 0 0 3px var(--primary);
    }

    .timeline-item h4 {
      margin: 0 0 0.5rem 0;
      color: var(--primary);
    }

    .code-block {
      background: #1e293b;
      color: #e2e8f0;
      padding: 1.5rem;
      border-radius: 8px;
      overflow-x: auto;
      margin: 1rem 0;
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
      line-height: 1.5;
    }

    .intake-form {
      background: white;
      border: 2px solid var(--gray-200);
      border-radius: 12px;
      padding: 2rem;
      margin: 2rem 0;
    }

    .intake-form h3 {
      margin-top: 0;
      color: var(--primary);
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1rem;
    }

    .checklist {
      background: var(--gray-50);
      border: 2px solid var(--gray-200);
      border-radius: 8px;
      padding: 1.5rem;
      margin: 1.5rem 0;
    }

    .checklist h4 {
      margin: 0 0 1rem 0;
      color: var(--primary);
    }

    .checklist ul {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .checklist li {
      padding: 0.5rem 0;
      margin: 0;
      border-bottom: 1px solid var(--gray-200);
    }

    .checklist li:last-child {
      border-bottom: none;
    }

    .checklist li::before {
      content: "☐ ";
      margin-right: 0.5rem;
      color: var(--primary);
      font-weight: bold;
    }

    @media (max-width: 768px) {
      .hero h1 {
        font-size: 2rem;
      }

      .hero p {
        font-size: 1rem;
      }

      .tabs-nav {
        padding: 0.5rem 0.5rem 0;
      }

      .tab-btn {
        padding: 0.6rem 1rem;
        font-size: 0.85rem;
      }

      .tab-content {
        padding: 2rem 0;
      }

      .section h2 {
        font-size: 1.5rem;
      }

      .comparison-grid {
        grid-template-columns: 1fr;
      }

      .equity-types {
        flex-direction: column;
        align-items: stretch;
      }

      .equity-badge {
        min-width: 0;
      }

      .comparison-table {
        font-size: 0.9rem;
      }

      .comparison-table th,
      .comparison-table td {
        padding: 0.75rem 0.5rem;
      }

      .form-row {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>

<div class="hero">
  <div class="container">
    <h1>Stock Option Plans for Startups</h1>
    <p>Complete guide to equity compensation: ISO vs NSO vs RSU, 409A valuations, 83(b) elections, early grants, and Delaware vs California law differences. Interactive tax calculators included.</p>
    <div class="equity-types">
      <div class="equity-badge">
        <h3>ISO</h3>
        <p>Best Tax Treatment</p>
      </div>
      <div class="equity-badge">
        <h3>NSO</h3>
        <p>Most Flexible</p>
      </div>
      <div class="equity-badge">
        <h3>RSU</h3>
        <p>No Purchase Required</p>
      </div>
    </div>
  </div>
</div>

<div class="tabs-nav">
  <button class="tab-btn active" onclick="switchTab(event, 'overview')">Overview</button>
  <button class="tab-btn" onclick="switchTab(event, 'iso-nso-rsu')">ISO vs NSO vs RSU</button>
  <button class="tab-btn" onclick="switchTab(event, '409a')">409A Valuations</button>
  <button class="tab-btn" onclick="switchTab(event, '83b')">83(b) Elections</button>
  <button class="tab-btn" onclick="switchTab(event, 'early-grants')">Early Grants</button>
  <button class="tab-btn" onclick="switchTab(event, 'tax-calculator')">Tax Calculator</button>
  <button class="tab-btn" onclick="switchTab(event, 'state-law')">DE vs CA Law</button>
  <button class="tab-btn" onclick="switchTab(event, 'contact')">Get Help</button>
</div>

<div class="container">

<!-- OVERVIEW TAB -->
<div id="overview" class="tab-content active">
  <div class="section">
    <h2>Understanding Startup Equity Compensation</h2>
    <p>Equity compensation is how startups attract and retain talent when cash is tight. But the tax and legal complexity is significant. This guide explains the three main types of equity awards, how they're valued, and how to avoid costly tax mistakes.</p>

    <h3>Quick Comparison: ISO vs NSO vs RSU</h3>

    <div class="comparison-grid">
      <div class="equity-card iso">
        <h3>Incentive Stock Options (ISO)</h3>
        <p><strong>Best For:</strong> Employees (not contractors, not advisors)</p>
        <p><strong>Tax Advantage:</strong> If you hold for 2 years from grant + 1 year from exercise, all gains are taxed as long-term capital gains (0-20%) instead of ordinary income (up to 37%)</p>
        <div class="pros-cons">
          <h4>Pros:</h4>
          <ul class="pros">
            <li>Lowest tax rate possible (long-term capital gains)</li>
            <li>No tax on exercise if you hold the shares</li>
            <li>Can result in 50%+ tax savings vs NSO</li>
          </ul>
          <h4>Cons:</h4>
          <ul class="cons">
            <li>AMT risk (Alternative Minimum Tax on spread at exercise)</li>
            <li>Only for W-2 employees</li>
            <li>$100K/year vesting limit</li>
            <li>Must exercise within 90 days of termination or lose ISO treatment</li>
          </ul>
        </div>
      </div>

      <div class="equity-card nso">
        <h3>Non-Qualified Stock Options (NSO)</h3>
        <p><strong>Best For:</strong> Contractors, advisors, or when ISO limits are exceeded</p>
        <p><strong>Tax Treatment:</strong> Spread at exercise is taxed as ordinary income (W-2 wages). Future gains taxed as capital gains.</p>
        <div class="pros-cons">
          <h4>Pros:</h4>
          <ul class="pros">
            <li>Can grant to anyone (contractors, advisors, board members)</li>
            <li>No $100K vesting limit</li>
            <li>Simpler tax treatment (no AMT complexity)</li>
            <li>Can negotiate longer exercise windows</li>
          </ul>
          <h4>Cons:</h4>
          <ul class="cons">
            <li>Spread at exercise is ordinary income (37% federal + state)</li>
            <li>Requires cash to pay taxes at exercise (even if can't sell)</li>
            <li>Higher total tax burden vs ISO</li>
          </ul>
        </div>
      </div>

      <div class="equity-card rsu">
        <h3>Restricted Stock Units (RSU)</h3>
        <p><strong>Best For:</strong> Later-stage companies with high 409A valuations</p>
        <p><strong>Tax Treatment:</strong> Entire value taxed as ordinary income at vest (no purchase required)</p>
        <div class="pros-cons">
          <h4>Pros:</h4>
          <ul class="pros">
            <li>No money out of pocket to acquire shares</li>
            <li>Simple to understand (vests = you get shares)</li>
            <li>No 409A strike price complexity</li>
            <li>Common at late-stage startups and public companies</li>
          </ul>
          <h4>Cons:</h4>
          <ul class="cons">
            <li>Taxed at ordinary income rates on full value at vest</li>
            <li>No ability to start capital gains holding period early</li>
            <li>Less common at early-stage startups</li>
            <li>May trigger withholding (auto-sell shares to pay taxes)</li>
          </ul>
        </div>
      </div>
    </div>

    <h3>My Recommendation Framework</h3>
    <p>When I help founders design equity compensation plans, I use this decision tree:</p>

    <div class="info-box">
      <h4>For Employees (W-2):</h4>
      <ul>
        <li><strong>Early-stage (409A &lt; $1.00):</strong> Grant ISOs. Tax benefit is massive when strike price is pennies.</li>
        <li><strong>Series A+ (409A $1-10):</strong> Still use ISOs for most employees, but watch AMT risk on large grants.</li>
        <li><strong>Late-stage (409A &gt; $10):</strong> Consider switching to RSUs to avoid employees needing $50K+ to exercise.</li>
      </ul>
    </div>

    <div class="info-box">
      <h4>For Contractors, Advisors, Board Members:</h4>
      <ul>
        <li>Must use NSOs (ISOs not allowed for non-employees)</li>
        <li>Negotiate for extended exercise windows (7-10 years vs standard 10 years from grant)</li>
        <li>Consider early exercise rights to start capital gains clock</li>
      </ul>
    </div>

    <div class="alert">
      <h4>⚠️ The 409A Valuation Is Critical</h4>
      <p>You cannot legally grant stock options without a 409A valuation that establishes the "fair market value" of your common stock. Granting options below 409A FMV triggers immediate taxes for the recipient and penalties for the company. I explain 409A valuations in detail in the dedicated tab.</p>
    </div>

    <h3>Common Founder Mistakes</h3>
    <p>I've seen these mistakes cost founders and employees hundreds of thousands in unnecessary taxes:</p>

    <ol>
      <li><strong>Granting options before getting a 409A valuation</strong> → IRS treats this as taxable compensation at current FMV, not the intended low strike price</li>
      <li><strong>Not filing 83(b) elections within 30 days of early exercise</strong> → Millions in tax savings lost permanently</li>
      <li><strong>Granting ISOs to contractors</strong> → Disqualified immediately, recipient thinks they have ISO but actually has NSO</li>
      <li><strong>Not planning for AMT on ISO exercises</strong> → Employees exercise, can't pay AMT, forced to sell shares to cover taxes</li>
      <li><strong>Using NSOs for employees when ISOs would work</strong> → Employees pay 2x the tax for no reason</li>
      <li><strong>90-day exercise window on termination</strong> → Employees can't afford to exercise, lose all their equity</li>
    </ol>

    <p>This guide will help you avoid all of these mistakes.</p>
  </div>
</div>

<!-- ISO VS NSO VS RSU TAB -->
<div id="iso-nso-rsu" class="tab-content">
  <div class="section">
    <h2>ISO vs NSO vs RSU: Complete Comparison</h2>

    <table class="comparison-table">
      <thead>
        <tr>
          <th>Feature</th>
          <th><span class="iso-badge">ISO</span></th>
          <th><span class="nso-badge">NSO</span></th>
          <th><span class="rsu-badge">RSU</span></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Who Can Receive</strong></td>
          <td>W-2 employees only</td>
          <td>Anyone (employees, contractors, advisors)</td>
          <td>Anyone (typically employees)</td>
        </tr>
        <tr>
          <td><strong>Purchase Required?</strong></td>
          <td>Yes (exercise price = 409A FMV at grant)</td>
          <td>Yes (exercise price = 409A FMV at grant)</td>
          <td>No (shares delivered automatically at vest)</td>
        </tr>
        <tr>
          <td><strong>Vesting Schedule</strong></td>
          <td>Typically 4-year vest, 1-year cliff</td>
          <td>Typically 4-year vest, 1-year cliff</td>
          <td>Typically 4-year vest, 1-year cliff</td>
        </tr>
        <tr>
          <td><strong>Tax on Grant</strong></td>
          <td>$0 (no tax at grant)</td>
          <td>$0 (no tax at grant)</td>
          <td>$0 (no tax at grant)</td>
        </tr>
        <tr>
          <td><strong>Tax on Vest</strong></td>
          <td>$0 (no tax at vest, only at exercise)</td>
          <td>$0 (no tax at vest, only at exercise)</td>
          <td><strong>Ordinary income tax on full FMV</strong></td>
        </tr>
        <tr>
          <td><strong>Tax on Exercise</strong></td>
          <td>$0 regular tax, but AMT on spread (FMV - strike price)</td>
          <td><strong>Ordinary income tax on spread</strong> (FMV - strike price)</td>
          <td>N/A (no exercise)</td>
        </tr>
        <tr>
          <td><strong>Tax on Sale</strong></td>
          <td>Long-term capital gains (0-20%) if hold 2 years from grant + 1 year from exercise</td>
          <td>Capital gains on appreciation after exercise</td>
          <td>Capital gains on appreciation after vest</td>
        </tr>
        <tr>
          <td><strong>Best Tax Outcome</strong></td>
          <td>Entire gain taxed at 0-20% (long-term capital gains)</td>
          <td>Spread taxed at 37%+ ordinary; gains at 15-20% capital gains</td>
          <td>All value taxed at 37%+ ordinary until you sell</td>
        </tr>
        <tr>
          <td><strong>AMT Risk</strong></td>
          <td>⚠️ Yes (can be significant if 409A is high at exercise)</td>
          <td>No AMT</td>
          <td>No AMT</td>
        </tr>
        <tr>
          <td><strong>Vesting Limit</strong></td>
          <td>$100K FMV/year (excess becomes NSO)</td>
          <td>No limit</td>
          <td>No limit</td>
        </tr>
        <tr>
          <td><strong>Exercise Window After Termination</strong></td>
          <td>90 days (or lose ISO treatment and become NSO)</td>
          <td>90 days standard (but negotiable)</td>
          <td>N/A (unvested RSUs forfeit; vested RSUs are yours)</td>
        </tr>
        <tr>
          <td><strong>Early Exercise Allowed?</strong></td>
          <td>Yes (if plan allows), requires 83(b) election</td>
          <td>Yes (if plan allows), requires 83(b) election</td>
          <td>No (RSUs cannot be early exercised)</td>
        </tr>
        <tr>
          <td><strong>Typical Use Case</strong></td>
          <td>Early employees at startups (strike price $0.10-$5.00)</td>
          <td>Contractors, advisors, or when ISO limits exceeded</td>
          <td>Later-stage startups (409A &gt; $10) or public companies</td>
        </tr>
      </tbody>
    </table>

    <h3>Example: $100K Option Grant</h3>
    <p>Let's compare tax outcomes for an employee receiving 100,000 options with a $1.00 strike price. Company exits 5 years later at $50/share.</p>

    <table class="comparison-table">
      <thead>
        <tr>
          <th>Scenario</th>
          <th>ISO (Qualifying Disposition)</th>
          <th>NSO</th>
          <th>RSU (100K shares worth $1 at grant)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Cost to Exercise</strong></td>
          <td>$100,000 (100K options × $1 strike)</td>
          <td>$100,000 (100K options × $1 strike)</td>
          <td>$0 (no exercise required)</td>
        </tr>
        <tr>
          <td><strong>Tax at Exercise (assuming $10 FMV)</strong></td>
          <td>$0 regular tax<br>AMT: ($10 - $1) × 100K × 28% = $252K AMT (may get credit later)</td>
          <td>Ordinary income tax: ($10 - $1) × 100K = $900K income<br>Tax: ~$333K (37% federal)</td>
          <td>N/A</td>
        </tr>
        <tr>
          <td><strong>Tax at Vest (assuming $10 FMV)</strong></td>
          <td>N/A</td>
          <td>N/A</td>
          <td>Ordinary income tax: $10 × 100K = $1M income<br>Tax: ~$370K (37% federal)</td>
        </tr>
        <tr>
          <td><strong>Tax at Sale ($50/share)</strong></td>
          <td>Long-term capital gains: ($50 - $1) × 100K = $4.9M gain<br>Tax: ~$980K (20% federal)</td>
          <td>Capital gains: ($50 - $10) × 100K = $4M gain<br>Tax: ~$800K (20% federal)</td>
          <td>Capital gains: ($50 - $10) × 100K = $4M gain<br>Tax: ~$800K (20% federal)</td>
        </tr>
        <tr style="background: var(--gray-100); font-weight: bold;">
          <td><strong>TOTAL TAX</strong></td>
          <td>~$980K<br>(AMT credit may reduce this)</td>
          <td>~$1,133K<br>($333K + $800K)</td>
          <td>~$1,170K<br>($370K + $800K)</td>
        </tr>
        <tr style="background: var(--gray-100); font-weight: bold;">
          <td><strong>NET PROCEEDS</strong></td>
          <td>~$3,920K</td>
          <td>~$3,767K</td>
          <td>~$3,830K</td>
        </tr>
        <tr>
          <td><strong>Cash Required Upfront</strong></td>
          <td>$100K (exercise) + up to $252K (AMT)</td>
          <td>$100K (exercise) + $333K (tax)</td>
          <td>$0 (but $370K withheld from shares at vest)</td>
        </tr>
      </tbody>
    </table>

    <div class="success-box">
      <h4>Key Takeaway</h4>
      <p><strong>ISOs save ~$150K-200K in taxes vs NSOs or RSUs</strong> in this scenario, but require significant cash upfront ($100K exercise + potential $252K AMT bill). NSOs and RSUs have similar total tax but different timing.</p>
    </div>

    <div class="alert">
      <h4>⚠️ The AMT Trap</h4>
      <p>The $252K AMT in the ISO scenario above is not a permanent tax—it's a timing difference. You get an AMT credit you can use in future years when your regular tax exceeds your AMT. <strong>However:</strong></p>
      <ul>
        <li>You must pay the AMT in cash the year you exercise (even though you haven't sold shares)</li>
        <li>If the company fails and shares become worthless, you may never recover the AMT paid</li>
        <li>This is what destroyed many employees during the 2000 dot-com crash</li>
      </ul>
      <p>I help clients model AMT risk and decide whether to exercise ISOs early (when 409A is low and AMT is minimal).</p>
    </div>
  </div>
</div>

<!-- 409A VALUATIONS TAB -->
<div id="409a" class="tab-content">
  <div class="section">
    <h2>409A Valuations Explained</h2>
    <p>A 409A valuation is an independent appraisal of your company's common stock fair market value (FMV). It's required by IRS Section 409A to avoid immediate taxation and penalties when granting stock options.</p>

    <h3>Why 409A Valuations Matter</h3>
    <p>If you grant options with a strike price below the 409A FMV, the IRS treats the discount as immediate taxable compensation to the recipient, plus:</p>
    <ul>
      <li><strong>20% penalty tax</strong> on the recipient</li>
      <li><strong>Interest charges</strong> on the unpaid tax</li>
      <li><strong>No deferral allowed</strong> — tax is due immediately, even though the options are unvested and can't be sold</li>
    </ul>

    <div class="danger-box">
      <h4>Real-World Disaster Example</h4>
      <p>A startup granted its first 10 employees options at $0.10/share in 2018 without a 409A. In 2019, they got a 409A showing FMV was actually $5.00/share in 2018. IRS determined each employee with 100K options received $490K of taxable compensation ($5.00 - $0.10 × 100K), triggering:</p>
      <ul>
        <li>~$181K regular income tax</li>
        <li>~$98K penalty (20%)</li>
        <li>Interest charges</li>
        <li><strong>Total: ~$290K owed per employee for shares they couldn't sell</strong></li>
      </ul>
      <p>Several employees quit and sued the company. Never grant options without a 409A.</p>
    </div>

    <h3>How 409A Valuations Work</h3>

    <h4>1. When You Need a 409A</h4>
    <ul>
      <li><strong>Before first option grant:</strong> You need a 409A in place before granting any options</li>
      <li><strong>Every 12 months:</strong> 409A valuations expire after 12 months</li>
      <li><strong>After a material event:</strong> Funding round, acquisition offer, major revenue change, new business line, etc.</li>
    </ul>

    <h4>2. Safe Harbor Methods</h4>
    <p>The IRS provides "safe harbor" — if you follow these methods, the IRS presumes your valuation is correct unless they can prove it's unreasonable:</p>

    <div class="info-box">
      <h4>Independent Appraisal (Most Common)</h4>
      <p>Hire a qualified valuation firm (409A specialist). They use one or more methods:</p>
      <ul>
        <li><strong>Market approach:</strong> Comparable company analysis (rare for early startups)</li>
        <li><strong>Income approach:</strong> Discounted cash flow (DCF) based on financial projections</li>
        <li><strong>Asset approach:</strong> Book value (rarely used except for asset-heavy businesses)</li>
        <li><strong>Preferred stock backsolve:</strong> Most common for VC-backed startups. Uses recent preferred stock price and option pricing model (Black-Scholes or binomial) to "back into" common stock value.</li>
      </ul>
      <p><strong>Cost:</strong> $2,000-5,000 for early-stage; $5,000-15,000 for later-stage</p>
      <p><strong>Timeline:</strong> 1-3 weeks</p>
    </div>

    <h4>3. The Preferred Stock Backsolve Method (Most Common for Startups)</h4>
    <p>This is the method you'll encounter most if you raise VC money:</p>

    <ol>
      <li>You just raised a Series A at $10/share preferred stock with $10M invested</li>
      <li>Valuation firm uses an option pricing model to determine what common stock is worth, given that preferred has liquidation preference, anti-dilution rights, etc.</li>
      <li>Typical result: Common stock valued at 10-40% of preferred stock price</li>
      <li>If preferred is $10/share, common might be $1.50-4.00/share</li>
    </ol>

    <div class="info-box">
      <h4>Why Is Common Stock Worth Less Than Preferred?</h4>
      <p>Preferred stock has valuable rights that common stock lacks:</p>
      <ul>
        <li><strong>Liquidation preference:</strong> Gets money back before common in a sale</li>
        <li><strong>Anti-dilution:</strong> Protection if company does a down round</li>
        <li><strong>Dividends:</strong> Sometimes cumulative dividends</li>
        <li><strong>Conversion rights:</strong> Can convert to common if beneficial</li>
      </ul>
      <p>The 409A model values these rights and discounts common stock accordingly. The discount increases as more preferred rounds stack on top (Series B preferred is senior to Series A, which is senior to common).</p>
    </div>

    <h3>409A Valuation Timeline</h3>

    <div class="timeline">
      <div class="timeline-item">
        <h4>Week 0: Incorporate</h4>
        <p>You form a Delaware C-Corp and issue founder stock (83(b) election filed). No 409A needed yet — founder stock purchases are at par value ($0.0001/share).</p>
      </div>
      <div class="timeline-item">
        <h4>Month 2-6: Hire First Employees</h4>
        <p><strong>CRITICAL:</strong> Before granting first employee stock options, you MUST get a 409A valuation. Budget $2,000-3,500.</p>
        <p>For pre-revenue companies, 409A common stock FMV is typically $0.05-0.25/share.</p>
      </div>
      <div class="timeline-item">
        <h4>Month 12-18: Raise Seed Round</h4>
        <p>You raise $2M on a SAFE or convertible note. Technically no 409A update required yet (no preferred stock issued), but advisable if valuation changed significantly.</p>
      </div>
      <div class="timeline-item">
        <h4>Month 20: Raise Series A</h4>
        <p>You raise $10M Series A at $10/share preferred (post-money $50M). You MUST get a new 409A immediately after closing.</p>
        <p>New 409A uses "backsolve" method. Common stock FMV jumps from $0.10 to $2.50/share (25% of preferred).</p>
      </div>
      <div class="timeline-item">
        <h4>Every 12 Months Thereafter</h4>
        <p>Update 409A annually or after any material event (new funding, acquisition offer, 3x revenue growth, etc.).</p>
      </div>
    </div>

    <h3>How to Keep Your 409A Low (Legally)</h3>
    <p>Since higher 409A = higher strike price = worse for option recipients, founders often ask how to keep 409A valuations low. Legal strategies:</p>

    <ul>
      <li><strong>Get your first 409A early:</strong> Before you have revenue, customers, or product, your common stock is worth very little ($0.05-0.10/share common).</li>
      <li><strong>Grant options to early employees before raising a priced round:</strong> Once you raise Series A, 409A will jump 10-50x.</li>
      <li><strong>Use conservative financial projections:</strong> The DCF model uses your projections. Conservative (but reasonable) projections = lower valuation.</li>
      <li><strong>Raise on SAFEs instead of priced equity initially:</strong> SAFEs don't create preferred stock, so there's no recent preferred price to "backsolve" from. This can delay the 409A spike.</li>
      <li><strong>Highlight risks and uncertainties:</strong> Regulatory risks, competitive threats, customer concentration, etc. increase discount rate and lower valuation.</li>
    </ul>

    <div class="alert">
      <h4>⚠️ Don't Manipulate the 409A</h4>
      <p>The IRS heavily scrutinizes 409A valuations. If your valuation is unreasonably low and the IRS challenges it, you lose safe harbor protection. Strategies above are legal, but outright manipulation (lying about revenue, hiding term sheets, etc.) is illegal and will backfire.</p>
    </div>

    <h3>409A Providers I Recommend</h3>
    <p>I don't receive referral fees from these companies — these are just the firms my clients have had good experiences with:</p>

    <ul>
      <li><strong>Carta:</strong> $1,000-2,500 for early-stage. Integrated with cap table management. Fast turnaround (1-2 weeks). Good for most startups.</li>
      <li><strong>Aranca:</strong> $2,000-4,000. High quality, detailed reports. Good if you need to defend valuation to IRS or in litigation.</li>
      <li><strong>Valor:</strong> $1,500-3,000. Responsive, good for Series A-B companies.</li>
      <li><strong>Scalar:</strong> $1,200-2,500. Fast, works well with AngelList/Rolling Funds ecosystem.</li>
    </ul>

    <p>For simple pre-revenue companies, Carta is usually the best value. For complex situations (multiple classes of preferred, warrants, etc.), Aranca or Valor provide more sophisticated analysis.</p>
  </div>
</div>

<!-- 83(B) ELECTION TAB -->
<div id="83b" class="tab-content">
  <div class="section">
    <h2>83(b) Elections: The $1 Million Tax Savings Strategy</h2>
    <p>An 83(b) election is a letter you send to the IRS within 30 days of receiving restricted stock or early exercising stock options. It can save founders and early employees millions in taxes, but <strong>if you miss the 30-day deadline, the opportunity is lost forever</strong>.</p>

    <h3>What Is an 83(b) Election?</h3>
    <p>Normally, when you receive restricted stock or exercise options that vest over time, you're taxed as the shares vest. With an 83(b) election, you elect to be taxed on the full value immediately (at grant/exercise), even though the shares are restricted.</p>

    <div class="success-box">
      <h4>Why This Saves Taxes</h4>
      <p>Imagine you're a founder. You receive 1,000,000 shares of restricted stock (4-year vest) at $0.001/share when the company is worth nothing. Without 83(b):</p>
      <ul>
        <li>Year 1: 250K shares vest, company worth $1/share → taxed on $250K ordinary income</li>
        <li>Year 2: 250K shares vest, company worth $3/share → taxed on $750K ordinary income</li>
        <li>Year 3: 250K shares vest, company worth $8/share → taxed on $2M ordinary income</li>
        <li>Year 4: 250K shares vest, company worth $20/share → taxed on $5M ordinary income</li>
        <li><strong>Total ordinary income: $8 million (taxed at 37% + state = ~45% = $3.6M tax)</strong></li>
      </ul>
      <p><strong>With 83(b) filed at grant:</strong></p>
      <ul>
        <li>Year 0: Taxed on $1,000 (1M shares × $0.001) = $370 tax at 37%</li>
        <li>Years 1-4: No tax as shares vest</li>
        <li>When you sell: All gains taxed as long-term capital gains (20%) instead of ordinary income (37%+)</li>
        <li><strong>Tax savings: ~$3.6M - $370 = $3,599,630 saved</strong></li>
      </ul>
    </div>

    <h3>When to File an 83(b) Election</h3>

    <table class="comparison-table">
      <thead>
        <tr>
          <th>Scenario</th>
          <th>83(b) Required?</th>
          <th>Why</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Founder purchasing restricted stock at incorporation</strong></td>
          <td>✅ YES (critical)</td>
          <td>Without 83(b), you're taxed as shares vest over 4 years. With company growth, this can mean millions in ordinary income tax.</td>
        </tr>
        <tr>
          <td><strong>Early employee early exercising unvested ISOs</strong></td>
          <td>✅ YES (critical)</td>
          <td>Starts the 1-year capital gains holding period and avoids AMT on future appreciation.</td>
        </tr>
        <tr>
          <td><strong>Early employee early exercising unvested NSOs</strong></td>
          <td>✅ YES (critical)</td>
          <td>Avoid ordinary income tax on spread as shares vest. Start capital gains holding period.</td>
        </tr>
        <tr>
          <td><strong>Employee exercising vested ISOs</strong></td>
          <td>❌ NO (not applicable)</td>
          <td>Shares are already vested, so no restriction = no 83(b) election needed.</td>
        </tr>
        <tr>
          <td><strong>Employee receiving RSUs</strong></td>
          <td>❌ NO (cannot file)</td>
          <td>RSUs are not actual stock — they're a promise to deliver stock at vest. 83(b) only applies to actual restricted stock.</td>
        </tr>
        <tr>
          <td><strong>Contractor receiving restricted stock for services</strong></td>
          <td>✅ YES</td>
          <td>If stock is restricted/vests over time, you'll be taxed as it vests unless you file 83(b).</td>
        </tr>
      </tbody>
    </table>

    <h3>How to File an 83(b) Election</h3>
    <p>The 83(b) election is surprisingly simple — it's a one-page letter you mail to the IRS. But the <strong>30-day deadline is absolute</strong>. If you miss it by even one day, you cannot file and lose the tax benefit forever.</p>

    <div class="checklist">
      <h4>83(b) Election Filing Checklist</h4>
      <ul>
        <li>Receive restricted stock or early exercise stock options</li>
        <li>Prepare 83(b) election letter (template below)</li>
        <li>Sign the letter</li>
        <li>Make 3 copies of signed letter</li>
        <li>Mail original to IRS within 30 days (use certified mail, return receipt requested)</li>
        <li>Mail copy to IRS address for your state (different from where you file tax return)</li>
        <li>Attach copy to your tax return for the year</li>
        <li>Keep copy for your personal records</li>
        <li>Send copy to your company (so they have record you filed)</li>
      </ul>
    </div>

    <h3>83(b) Election Template</h3>

    <div class="code-block">Election Under Section 83(b) of the Internal Revenue Code

To: Internal Revenue Service Center
    [Your IRS Service Center Address]

Re: Election Under Section 83(b) of the Internal Revenue Code

Taxpayer: [Your Full Legal Name]
SSN: [Your Social Security Number]
Address: [Your Street Address]
         [City, State, ZIP]

The undersigned taxpayer hereby makes an election pursuant to Section 83(b) of the Internal Revenue Code with respect to the property described below:

1. The name, address, and taxpayer identification number of the taxpayer:
   Name: [Your Full Legal Name]
   Address: [Your Full Address]
   SSN: [Your SSN]

2. Description of property:
   [Number] shares of common stock of [Company Legal Name], a Delaware corporation

3. The date on which the property was transferred:
   [Date of Grant/Exercise - MM/DD/YYYY]

4. The taxable year for which the election is made:
   [Year - YYYY]

5. Nature of restriction:
   The shares are subject to a vesting schedule requiring continued service to the Company.
   [Describe vesting: e.g., "25% vest on [Date], remainder vests monthly over 36 months"]

6. Fair market value of property at time of transfer:
   $[FMV per share × number of shares]
   (Based on 409A valuation dated [Date] establishing FMV of $[X.XX] per share)

7. Amount paid for property:
   $[Amount paid - for early exercise, this is strike price × shares]
   ($[Strike price] per share × [Number] shares)

8. Computation of taxable income:
   Fair Market Value:     $[FMV total]
   Less: Amount Paid:     $[Amount paid]
   Taxable Income:        $[FMV - Amount paid]

The undersigned taxpayer will file this election with the IRS office where the taxpayer files their annual income tax return no later than the due date of the tax return (including extensions) for the taxable year in which the property was transferred.

A copy of this statement has been furnished to [Company Legal Name].


_________________________                    __________
[Your Signature]                             Date


Spouse (if applicable):

_________________________                    __________
[Spouse Signature]                           Date
    </div>

    <div class="alert">
      <h4>⚠️ Critical 83(b) Filing Rules</h4>
      <ul>
        <li><strong>30-day deadline is absolute:</strong> Counted from date of grant/exercise, not date of vesting. Weekends and holidays do NOT extend deadline.</li>
        <li><strong>Use certified mail:</strong> Get proof of mailing date. Save the certified mail receipt.</li>
        <li><strong>Mail to correct IRS address:</strong> NOT the same address where you file your tax return. Use IRS Service Center for your state.</li>
        <li><strong>File even if taxable income is $0:</strong> If you pay FMV for the stock (common for founders buying at $0.0001/share), your taxable income is $0, but you still must file to get capital gains treatment.</li>
        <li><strong>Cannot revoke:</strong> Once filed, you cannot undo it. If you forfeit shares (quit before vesting), you don't get a tax refund on the 83(b) income reported.</li>
      </ul>
    </div>

    <h3>Interactive 83(b) Savings Calculator</h3>

    <div class="calculator-tool">
      <h3>Calculate Your 83(b) Tax Savings</h3>
      <form id="calc-83b">
        <div class="form-group">
          <label for="shares-83b">Number of Shares:</label>
          <input type="number" id="shares-83b" value="250000" required>
        </div>

        <div class="form-group">
          <label for="purchase-price-83b">Purchase Price per Share:</label>
          <input type="number" step="0.0001" id="purchase-price-83b" value="0.001" required>
        </div>

        <div class="form-group">
          <label for="fmv-grant-83b">FMV at Grant (409A valuation):</label>
          <input type="number" step="0.01" id="fmv-grant-83b" value="0.01" required>
        </div>

        <div class="form-group">
          <label for="fmv-vest-83b">Expected FMV at Full Vest (4 years):</label>
          <input type="number" step="0.01" id="fmv-vest-83b" value="5.00" required>
        </div>

        <div class="form-group">
          <label for="tax-rate-83b">Your Tax Rate (ordinary income):</label>
          <select id="tax-rate-83b">
            <option value="0.50">50% (37% federal + ~13% state - CA, NY)</option>
            <option value="0.45" selected>45% (37% federal + ~8% state)</option>
            <option value="0.40">40% (37% federal + ~3% state)</option>
            <option value="0.37">37% (federal only, no state tax)</option>
          </select>
        </div>

        <button type="button" class="btn" onclick="calculate83bSavings()">Calculate Savings</button>
      </form>

      <div id="result-83b" style="display: none;">
        <div class="result-box">
          <h4>83(b) Election Tax Impact</h4>
          <div class="tax-breakdown">
            <div class="tax-item">
              <strong id="tax-with-83b">$2,500</strong>
              <span>Tax with 83(b) election (paid immediately)</span>
            </div>
            <div class="tax-item nso">
              <strong id="tax-without-83b">$562,500</strong>
              <span>Tax without 83(b) (paid as shares vest)</span>
            </div>
            <div class="tax-item iso">
              <strong id="savings-83b">$560,000</strong>
              <span>TAX SAVINGS from filing 83(b)</span>
            </div>
          </div>
          <div id="breakdown-83b" style="margin-top: 1.5rem;"></div>
        </div>
      </div>
    </div>

    <h3>Common 83(b) Mistakes</h3>

    <ol>
      <li><strong>Missing the 30-day deadline:</strong> Set calendar reminder for day 20 (give yourself buffer). I've seen people lose millions because they forgot to mail the letter.</li>
      <li><strong>Mailing to wrong IRS address:</strong> Must mail to IRS Service Center for your region, not where you file returns.</li>
      <li><strong>Not using certified mail:</strong> If IRS claims they never received it, you have no proof. Always use certified mail with return receipt.</li>
      <li><strong>Forgetting to attach to tax return:</strong> You must attach a copy to your tax return for the year, or IRS may deny the election.</li>
      <li><strong>Not filing when taxable income is $0:</strong> Even if you pay full FMV (taxable income = $0), you must file to get capital gains treatment later.</li>
    </ol>
  </div>
</div>

<!-- EARLY GRANTS TAB -->
<div id="early-grants" class="tab-content">
  <div class="section">
    <h2>Early Grants: How to Grant Options Before You Have a Plan</h2>
    <p>You've incorporated, you need to hire your first employee, and they want equity. But you don't have a formal stock option plan yet (and creating one costs $5,000-10,000 in legal fees). What do you do?</p>

    <h3>The Problem</h3>
    <p>Most startup lawyers will tell you: "You need to adopt a formal equity incentive plan (2023 Stock Plan), have your board approve it, get a 409A valuation, then grant options pursuant to the plan."</p>

    <p>But this takes 2-4 weeks and costs $5K-10K (lawyer) + $2K-4K (409A) = $7K-14K. If you're pre-funding, you don't have this cash.</p>

    <h3>The Solution: Non-Plan Stock Options</h3>
    <p>You can grant stock options <strong>outside of a formal plan</strong> using standalone option agreements. This is completely legal and commonly done by early-stage startups.</p>

    <div class="info-box">
      <h4>How Non-Plan Options Work</h4>
      <ul>
        <li>Draft a standalone Stock Option Agreement between the company and the employee</li>
        <li>Board approves the specific grant (board resolution)</li>
        <li>Get a 409A valuation to establish strike price (this you cannot skip)</li>
        <li>Employee signs the option agreement</li>
        <li>File with corporate records</li>
      </ul>
      <p><strong>Cost:</strong> $500-1,500 in legal fees (vs $5K-10K for a full plan)</p>
    </div>

    <h3>When to Use Non-Plan Options vs Formal Plan</h3>

    <table class="comparison-table">
      <thead>
        <tr>
          <th>Scenario</th>
          <th>Recommendation</th>
          <th>Why</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Pre-seed, first 1-3 employees</strong></td>
          <td>Non-plan options</td>
          <td>Save $5K-8K. You can fold these into a formal plan later.</td>
        </tr>
        <tr>
          <td><strong>Post-seed, hiring 5+ employees</strong></td>
          <td>Adopt formal plan</td>
          <td>Easier to administer, standardized terms, VC/investor expectation.</td>
        </tr>
        <tr>
          <td><strong>Post-Series A</strong></td>
          <td>Formal plan (required)</td>
          <td>VCs require it. Board/compensation committee oversight. ISO $100K limit tracking.</td>
        </tr>
        <tr>
          <td><strong>Advisor equity</strong></td>
          <td>Either works</td>
          <td>Advisors typically get small grants (0.1-0.5%), non-plan is fine.</td>
        </tr>
      </tbody>
    </table>

    <h3>Step-by-Step: Granting Non-Plan Options</h3>

    <div class="timeline">
      <div class="timeline-item">
        <h4>Step 1: Get a 409A Valuation</h4>
        <p>This is non-negotiable. You cannot grant options without a 409A, whether using a plan or not.</p>
        <p><strong>Cost:</strong> $1,500-3,000 for early-stage company</p>
        <p><strong>Timeline:</strong> 1-2 weeks</p>
      </div>
      <div class="timeline-item">
        <h4>Step 2: Negotiate Terms with Employee</h4>
        <p>Agree on:</p>
        <ul>
          <li>Number of options (or % of fully diluted cap)</li>
          <li>Vesting schedule (standard: 4 years, 1-year cliff)</li>
          <li>ISO vs NSO (ISO if they're W-2 employee; NSO if contractor)</li>
          <li>Exercise window after termination (90 days standard, negotiate longer if possible)</li>
          <li>Early exercise allowed? (recommended for early employees)</li>
        </ul>
      </div>
      <div class="timeline-item">
        <h4>Step 3: Draft Stock Option Agreement</h4>
        <p>Your lawyer drafts a standalone option agreement including:</p>
        <ul>
          <li>Grant details (number of shares, strike price from 409A)</li>
          <li>Vesting schedule</li>
          <li>Exercise provisions (how to buy the shares)</li>
          <li>Early exercise provisions (if applicable)</li>
          <li>Termination provisions (what happens if they quit/get fired)</li>
          <li>ISO vs NSO designation</li>
        </ul>
        <p><strong>Cost:</strong> $500-1,000 (first agreement); $200-400 for subsequent grants (template reuse)</p>
      </div>
      <div class="timeline-item">
        <h4>Step 4: Board Approval</h4>
        <p>Board of directors (even if it's just you, the founder) must approve the grant via written consent or board meeting minutes.</p>
        <p>Board resolution should state:</p>
        <ul>
          <li>Number of shares granted</li>
          <li>Recipient name</li>
          <li>Strike price ($X.XX per share, based on 409A valuation dated MM/DD/YYYY)</li>
          <li>Vesting schedule</li>
          <li>ISO vs NSO</li>
        </ul>
      </div>
      <div class="timeline-item">
        <h4>Step 5: Employee Signs Agreement</h4>
        <p>Employee reviews and signs the stock option agreement. Provide them with:</p>
        <ul>
          <li>Signed copy of their option agreement</li>
          <li>Cap table showing their ownership %</li>
          <li>Explanation of ISO vs NSO taxation</li>
          <li>83(b) election instructions if early exercise is allowed</li>
        </ul>
      </div>
      <div class="timeline-item">
        <h4>Step 6: Update Cap Table and Records</h4>
        <p>Add the option grant to your cap table (use Carta, Pulley, or a spreadsheet). File the signed agreement and board resolution with corporate records.</p>
      </div>
    </div>

    <h3>Converting Non-Plan Options to a Formal Plan Later</h3>
    <p>When you raise a seed or Series A round, investors will want you to adopt a formal equity incentive plan. Your non-plan options can be:</p>

    <ul>
      <li><strong>Option 1: Rolled into the plan</strong> — Amend the plan to assume the previously granted options. This is cleanest.</li>
      <li><strong>Option 2: Left outside the plan</strong> — Continue to honor the standalone agreements. This is also fine, just requires tracking two systems.</li>
    </ul>

    <p>Either way, the employee's rights don't change. They keep their original strike price, vesting schedule, and terms.</p>

    <div class="alert">
      <h4>⚠️ What You Cannot Skip: The 409A</h4>
      <p>Some founders ask: "Can I just grant options at $0.0001/share like I did for founder stock, without a 409A?"</p>
      <p><strong>NO.</strong> Founder stock at incorporation is different — founders are purchasing at par value (legally acceptable). Employees receiving options months later, after you've built product/raised money, cannot use par value. You must use 409A FMV or face severe tax penalties.</p>
    </div>

    <h3>Sample Non-Plan Option Grant Terms</h3>

    <div class="info-box">
      <h4>Example: First Employee at Pre-Seed Startup</h4>
      <p><strong>Employee:</strong> First engineering hire, employee #1</p>
      <p><strong>Negotiated equity:</strong> 1% of fully diluted cap</p>
      <p><strong>Current cap table:</strong> 8M shares outstanding (founders only)</p>
      <p><strong>Option pool (planned):</strong> 15% = 1.4M shares</p>
      <p><strong>This employee's grant:</strong> 1% × (8M + 1.4M) = 94,000 options</p>
      <p><strong>409A FMV:</strong> $0.10/share (just completed)</p>
      <p><strong>Strike price:</strong> $0.10/share</p>
      <p><strong>Vesting:</strong> 4 years, 1-year cliff, monthly thereafter</p>
      <p><strong>Early exercise:</strong> Allowed (employee can buy unvested shares and file 83(b))</p>
      <p><strong>Exercise window:</strong> 90 days post-termination (negotiate for 7-10 years if possible)</p>
      <p><strong>Type:</strong> ISO (they're W-2 employee)</p>
    </div>

    <h3>Alternatives to Options for Advisors</h3>
    <p>For advisors (not employees), you have additional alternatives to options:</p>

    <ul>
      <li><strong>Restricted stock:</strong> Grant actual shares (not options) that vest over time (typically 2 years for advisors). Requires 83(b) election. Simpler than options.</li>
      <li><strong>Warrant:</strong> Similar to options but typically used for investors/advisors. Can have longer terms (10 years).</li>
      <li><strong>SAFE for advisors:</strong> Advisor gets a SAFE (same instrument as investors) that converts to equity at next funding round. No 409A needed.</li>
    </ul>

    <p>I typically recommend <strong>NSO grants</strong> for advisors (4-year vest, 0.1-0.5% equity) or <strong>restricted stock with 83(b)</strong> if the 409A is very low ($0.01-0.10).</p>
  </div>
</div>

<!-- TAX CALCULATOR TAB -->
<div id="tax-calculator" class="tab-content">
  <div class="section">
    <h2>Interactive Tax Calculator: ISO vs NSO vs RSU</h2>
    <p>Use this calculator to compare tax outcomes for different equity compensation types:</p>

    <div class="calculator-tool">
      <h3>Compare Tax Impact</h3>
      <form id="tax-calc-form">
        <div class="form-row">
          <div class="form-group">
            <label for="num-options">Number of Options/RSUs:</label>
            <input type="number" id="num-options" value="100000" required>
          </div>

          <div class="form-group">
            <label for="strike-price">Strike Price (options only):</label>
            <input type="number" step="0.01" id="strike-price" value="1.00" required>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="fmv-exercise">FMV at Exercise/Vest:</label>
            <input type="number" step="0.01" id="fmv-exercise" value="10.00" required>
          </div>

          <div class="form-group">
            <label for="sale-price">Sale Price (exit):</label>
            <input type="number" step="0.01" id="sale-price" value="50.00" required>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="ordinary-rate">Ordinary Income Tax Rate:</label>
            <select id="ordinary-rate">
              <option value="0.50">50% (37% fed + 13.3% CA)</option>
              <option value="0.45" selected>45% (37% fed + 8% state avg)</option>
              <option value="0.40">40% (37% fed + 3% state)</option>
              <option value="0.37">37% (federal only)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="ltcg-rate">Long-Term Capital Gains Rate:</label>
            <select id="ltcg-rate">
              <option value="0.238">23.8% (20% fed + 3.8% NIIT)</option>
              <option value="0.33" selected>33% (20% fed + 13.3% CA)</option>
              <option value="0.25">25% (20% fed + 5% state)</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label for="amt-rate">AMT Rate (for ISO):</label>
          <select id="amt-rate">
            <option value="0.28" selected>28% (federal AMT)</option>
            <option value="0.35">35% (28% fed + 7% state AMT)</option>
          </select>
        </div>

        <button type="button" class="btn" onclick="calculateTaxComparison()">Calculate</button>
      </form>

      <div id="tax-calc-result" style="display: none;">
        <div class="result-box">
          <h4>Tax Comparison Results</h4>
          <div class="tax-breakdown">
            <div class="tax-item iso">
              <strong id="iso-total-tax">$980,000</strong>
              <span>ISO Total Tax</span>
            </div>
            <div class="tax-item nso">
              <strong id="nso-total-tax">$1,133,000</strong>
              <span>NSO Total Tax</span>
            </div>
            <div class="tax-item rsu">
              <strong id="rsu-total-tax">$1,170,000</strong>
              <span>RSU Total Tax</span>
            </div>
          </div>

          <h4 style="margin-top: 2rem;">Detailed Breakdown</h4>
          <div id="tax-detail"></div>

          <div id="recommendation" style="margin-top: 1.5rem;"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- STATE LAW TAB -->
<div id="state-law" class="tab-content">
  <div class="section">
    <h2>Delaware vs California Stock Option Law</h2>
    <p>Most venture-backed startups are Delaware corporations, but many have employees in California. This creates tension between Delaware corporate law and California employment law.</p>

    <h3>Key Differences</h3>

    <table class="comparison-table">
      <thead>
        <tr>
          <th>Issue</th>
          <th>Delaware Law</th>
          <th>California Law</th>
          <th>What Applies</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Exercise Window After Termination</strong></td>
          <td>Company decides (typically 90 days)</td>
          <td>No specific law, but CA courts may find very short windows (30 days) unconscionable</td>
          <td>Delaware law governs (you're a DE corp), but CA employees may challenge in court</td>
        </tr>
        <tr>
          <td><strong>Acceleration on Termination Without Cause</strong></td>
          <td>Not required</td>
          <td>Not required</td>
          <td>Negotiable (some employees negotiate partial acceleration)</td>
        </tr>
        <tr>
          <td><strong>Repurchase Rights (Company Can Buy Back Vested Shares)</strong></td>
          <td>Allowed (common in early grants)</td>
          <td>Allowed, but must be at FMV</td>
          <td>Both allow it; DE corp docs govern terms</td>
        </tr>
        <tr>
          <td><strong>Non-Compete Restrictions</strong></td>
          <td>Enforceable (if reasonable)</td>
          <td><strong>Void</strong> (CA Bus. & Prof. Code § 16600)</td>
          <td><strong>CA law wins for CA employees</strong> — non-competes unenforceable even in DE corp option agreements</td>
        </tr>
        <tr>
          <td><strong>Forfeiture-for-Competition Clauses</strong></td>
          <td>Allowed</td>
          <td><strong>Void</strong> (cannot forfeit vested equity for competing)</td>
          <td><strong>CA law wins for CA employees</strong> — cannot force vested equity forfeiture</td>
        </tr>
        <tr>
          <td><strong>Disclosure Requirements</strong></td>
          <td>Minimal (provide plan document)</td>
          <td>CA Labor Code § 2803: Must disclose all material terms, tax consequences</td>
          <td><strong>CA law applies to CA employees</strong> — must provide detailed disclosures</td>
        </tr>
        <tr>
          <td><strong>Right to Transfer/Assign Options</strong></td>
          <td>Company decides (typically prohibited)</td>
          <td>Same, but CA may require allowing transfer to family trusts</td>
          <td>DE corp plan governs, but allow trust transfers to avoid CA challenge</td>
        </tr>
        <tr>
          <td><strong>Clawback Provisions (Forfeit Equity for Misconduct)</strong></td>
          <td>Allowed (increasingly common post-Dodd-Frank)</td>
          <td>Allowed for unvested equity; vested equity clawback must be reasonable</td>
          <td>Both allow it for misconduct (fraud, violation of fiduciary duty)</td>
        </tr>
      </tbody>
    </table>

    <h3>The Non-Compete Problem in California</h3>
    <p>This is the biggest landmine for Delaware corporations with California employees:</p>

    <div class="danger-box">
      <h4>California Invalidates Non-Compete Clauses</h4>
      <p>Many Delaware stock option plans include provisions like:</p>
      <ul>
        <li>"If employee competes with the Company within 12 months of termination, all vested but unexercised options are forfeited."</li>
        <li>"Employee cannot work for a competitor for 18 months after termination or forfeit equity."</li>
      </ul>
      <p><strong>These clauses are VOID and unenforceable for California employees</strong> under California Business & Professions Code § 16600, which states:</p>
      <blockquote style="border-left: 3px solid #dc2626; padding-left: 1rem; margin: 1rem 0; font-style: italic;">"Except as provided in this chapter, every contract by which anyone is restrained from engaging in a lawful profession, trade, or business of any kind is to that extent void."</blockquote>
      <p>California courts interpret this <strong>very broadly</strong>. Even Delaware choice-of-law provisions don't save you — CA courts will apply CA law to CA employees' equity.</p>
    </div>

    <h3>How to Handle CA Employees (Delaware Corp)</h3>

    <div class="info-box">
      <h4>My Recommendations:</h4>
      <ul>
        <li><strong>Remove forfeiture-for-competition clauses</strong> from your plan, or make them explicitly inapplicable to CA employees</li>
        <li><strong>Extend exercise windows to 7-10 years</strong> (or at minimum 6 months) to avoid CA unconscionability challenges</li>
        <li><strong>Include detailed tax disclosures</strong> with every CA employee grant (ISO vs NSO, AMT risk, 83(b) elections, etc.) to comply with CA Labor Code § 2803</li>
        <li><strong>Allow transfer to revocable trusts</strong> for estate planning (CA courts favor this)</li>
        <li><strong>Consult CA employment lawyer</strong> if you have 10+ CA employees (complex compliance issues)</li>
      </ul>
    </div>

    <h3>Other State Considerations</h3>

    <p>Beyond Delaware and California, a few other states have unique equity compensation rules:</p>

    <ul>
      <li><strong>Massachusetts:</strong> Also limits non-competes (effective Oct 2018). Non-compete must be reasonable in duration (≤12 months), geography, and scope. "Garden leave" or other consideration required.</li>
      <li><strong>Colorado:</strong> Prohibits non-competes for employees earning less than certain threshold (~$112K in 2024, adjusted annually).</li>
      <li><strong>Illinois:</strong> Non-competes void for employees earning ≤$75K/year (adjusted for inflation).</li>
      <li><strong>Washington:</strong> Non-competes unenforceable for employees earning less than $120K/year (as of 2024).</li>
    </ul>

    <p>If you have employees in these states, review your stock option plan for non-compete/forfeiture clauses that may be unenforceable.</p>

    <h3>Delaware Corporate Law Advantages for Equity</h3>

    <p>While California employment law creates challenges, Delaware corporate law offers key advantages for equity compensation:</p>

    <div class="success-box">
      <h4>Why VCs Require Delaware for Equity Plans</h4>
      <ul>
        <li><strong>§ 157: Flexible option terms</strong> — Delaware allows maximum flexibility in designing stock option plans, vesting schedules, exercise terms, etc.</li>
        <li><strong>Court of Chancery expertise:</strong> Judges understand complex equity compensation disputes (forfeiture, vesting acceleration, change of control definitions, etc.)</li>
        <li><strong>Predictable case law:</strong> 200+ years of precedent on equity disputes. Lawyers can predict outcomes.</li>
        <li><strong>Director protection (§ 102(b)(7)):</strong> Protects directors from liability for equity grant decisions (except bad faith/fraud)</li>
        <li><strong>Fast dispute resolution:</strong> Court of Chancery resolves cases in months, not years. Critical for equity disputes (employee suing over wrongful forfeiture, etc.)</li>
      </ul>
    </div>

    <h3>Practical Recommendations</h3>

    <div class="info-box">
      <h4>If You're a Delaware Corp with California Employees:</h4>
      <ol>
        <li><strong>Adopt a Delaware stock option plan</strong> (standard 2023 Equity Incentive Plan)</li>
        <li><strong>Include CA-specific addendum</strong> for CA employees that:
          <ul>
            <li>Removes/disclaims forfeiture-for-competition provisions</li>
            <li>Provides required CA labor code disclosures</li>
            <li>Extends exercise window to ≥6 months (better: 10 years)</li>
          </ul>
        </li>
        <li><strong>Provide detailed grant letters</strong> explaining ISO vs NSO, tax treatment, AMT, 83(b) elections</li>
        <li><strong>Track compliance by state</strong> — if you have employees in MA, CO, WA, etc., ensure plan complies with those states' laws too</li>
      </ol>
    </div>

    <div class="alert">
      <h4>⚠️ Don't Try to "Override" CA Law with DE Choice-of-Law Clauses</h4>
      <p>Some lawyers draft option agreements with provisions like: "This agreement is governed by Delaware law, regardless of employee's location."</p>
      <p><strong>This doesn't work for California employees.</strong> CA courts will apply CA employment law to CA employees, period. Attempting to override this with choice-of-law clauses just creates false confidence and exposes you to liability when the clause is later invalidated.</p>
    </div>
  </div>
</div>

<!-- CONTACT TAB -->
<div id="contact" class="tab-content">
  <div class="section">
    <h2>Get Help with Your Equity Compensation Plan</h2>
    <p>Designing and implementing a stock option plan is complex. Tax mistakes can cost employees hundreds of thousands of dollars. Legal mistakes can expose your company to liability. Let me help you get it right.</p>

    <h3>Services I Provide</h3>
    <ul>
      <li><strong>Stock option plan drafting:</strong> Delaware 2023 Equity Incentive Plan customized for your company</li>
      <li><strong>409A valuation coordination:</strong> I work with valuation firms to get your 409A done efficiently</li>
      <li><strong>Early grant strategy:</strong> Non-plan options for your first 1-5 employees (save $5K+ vs formal plan)</li>
      <li><strong>83(b) election preparation:</strong> Drafting and filing 83(b) elections for founders and early exercisers</li>
      <li><strong>ISO vs NSO analysis:</strong> Tax modeling to determine which is best for each employee</li>
      <li><strong>California compliance review:</strong> Ensure your DE plan complies with CA employment law for CA employees</li>
      <li><strong>Board resolutions and corporate records:</strong> Proper documentation for every grant</li>
      <li><strong>Employee education:</strong> Explaining equity compensation to your team (tax implications, exercise strategies, AMT risk)</li>
    </ul>

    <h3>Pricing</h3>
    <ul>
      <li><strong>Standalone option agreement (non-plan):</strong> $750 for first grant, $300 for subsequent grants</li>
      <li><strong>Full equity incentive plan:</strong> $5,000-8,000 (includes plan document, board resolutions, grant templates, CA addendum)</li>
      <li><strong>409A valuation coordination:</strong> $500 (I review the draft valuation and negotiate with the firm)</li>
      <li><strong>83(b) election preparation:</strong> $250 per person (includes drafting, filing instructions, IRS mailing)</li>
      <li><strong>Equity compensation audit:</strong> $2,000-4,000 (review your existing plan for tax/legal issues, CA compliance, etc.)</li>
    </ul>

    <div class="intake-form">
      <h3>Request a Consultation</h3>
      <p>Fill out this form and I'll email you within 24 hours with recommendations and a quote:</p>

      <form action="https://formsubmit.co/owner@terms.law" method="POST">
        <input type="hidden" name="_subject" value="Stock Option Plan Inquiry">
        <input type="hidden" name="_template" value="table">
        <input type="hidden" name="_next" value="https://terms.law/thank-you">

        <div class="form-row">
          <div class="form-group">
            <label for="contact-name">Name: *</label>
            <input type="text" id="contact-name" name="Name" required>
          </div>

          <div class="form-group">
            <label for="contact-email">Email: *</label>
            <input type="email" id="contact-email" name="Email" required>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="contact-phone">Phone:</label>
            <input type="tel" id="contact-phone" name="Phone">
          </div>

          <div class="form-group">
            <label for="company-name">Company Name:</label>
            <input type="text" id="company-name" name="Company Name">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="incorporation-state">State of Incorporation:</label>
            <select id="incorporation-state" name="State of Incorporation">
              <option value="">-- Select --</option>
              <option value="Delaware">Delaware</option>
              <option value="California">California</option>
              <option value="Wyoming">Wyoming</option>
              <option value="Not yet incorporated">Not yet incorporated</option>
              <option value="Other">Other</option>
            </select>
          </div>

          <div class="form-group">
            <label for="funding-stage">Funding Stage:</label>
            <select id="funding-stage" name="Funding Stage">
              <option value="">-- Select --</option>
              <option value="Pre-incorporation">Pre-incorporation</option>
              <option value="Incorporated, pre-revenue">Incorporated, pre-revenue</option>
              <option value="Pre-seed">Pre-seed</option>
              <option value="Seed">Seed</option>
              <option value="Series A">Series A</option>
              <option value="Series B+">Series B+</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label for="num-employees">Number of Employees:</label>
          <input type="number" id="num-employees" name="Number of Employees" placeholder="Including founders">
        </div>

        <div class="form-group">
          <label for="help-needed">What do you need help with? *</label>
          <select id="help-needed" name="Help Needed" required>
            <option value="">-- Select --</option>
            <option value="Create first equity plan (no plan exists yet)">Create first equity plan (no plan exists yet)</option>
            <option value="Grant options to first 1-3 employees (non-plan)">Grant options to first 1-3 employees (non-plan)</option>
            <option value="Get a 409A valuation">Get a 409A valuation</option>
            <option value="83(b) election filing">83(b) election filing</option>
            <option value="Review existing plan for CA compliance">Review existing plan for CA compliance</option>
            <option value="Advise employee on equity offer">Advise employee on equity offer (I'm joining a startup)</option>
            <option value="ISO vs NSO tax analysis">ISO vs NSO tax analysis</option>
            <option value="Other">Other</option>
          </select>
        </div>

        <div class="form-group">
          <label for="have-409a">Do you have a current 409A valuation?</label>
          <select id="have-409a" name="Have 409A">
            <option value="">-- Select --</option>
            <option value="Yes, current (less than 12 months old)">Yes, current (less than 12 months old)</option>
            <option value="Yes, but expired">Yes, but expired</option>
            <option value="No">No</option>
            <option value="Not sure">Not sure</option>
          </select>
        </div>

        <div class="form-group">
          <label for="ca-employees">Do you have employees in California?</label>
          <select id="ca-employees" name="CA Employees">
            <option value="">-- Select --</option>
            <option value="Yes">Yes</option>
            <option value="No">No</option>
            <option value="I am in CA">I am in CA</option>
          </select>
        </div>

        <div class="form-group">
          <label for="additional-info">Additional Details:</label>
          <textarea id="additional-info" name="Additional Details" rows="4" placeholder="Any other information that would help me advise you (timeline, specific questions, etc.)"></textarea>
        </div>

        <button type="submit" class="btn">Send Inquiry</button>
      </form>
    </div>

    <div style="margin-top: 3rem; padding: 2rem; background: var(--gray-50); border-radius: 8px;">
      <h3>About Me</h3>
      <p><strong>Sergei Tokmakov, Esq.</strong></p>
      <p>I'm a business attorney specializing in startup equity compensation, Delaware corporations, and 409A compliance. I've helped hundreds of founders design equity plans, avoid tax mistakes, and navigate the complexity of ISO/NSO/RSU taxation.</p>
      <p>I work with early-stage founders who need pragmatic, cost-effective solutions (non-plan options, 83(b) filings) and later-stage companies that need sophisticated equity plans with California compliance.</p>
      <p><strong>Contact:</strong> Use the form above or email directly at <a href="mailto:owner@terms.law">owner@terms.law</a></p>
    </div>
  </div>
</div>

</div>

<script>
// Tab switching
function switchTab(event, tabId) {
  const contents = document.querySelectorAll('.tab-content');
  contents.forEach(content => content.classList.remove('active'));

  const buttons = document.querySelectorAll('.tab-btn');
  buttons.forEach(btn => btn.classList.remove('active'));

  document.getElementById(tabId).classList.add('active');
  event.target.classList.add('active');

  window.scrollTo({ top: document.querySelector('.tabs-nav').offsetTop, behavior: 'smooth' });
}

// 83(b) Savings Calculator
function calculate83bSavings() {
  const shares = parseFloat(document.getElementById('shares-83b').value);
  const purchasePrice = parseFloat(document.getElementById('purchase-price-83b').value);
  const fmvGrant = parseFloat(document.getElementById('fmv-grant-83b').value);
  const fmvVest = parseFloat(document.getElementById('fmv-vest-83b').value);
  const taxRate = parseFloat(document.getElementById('tax-rate-83b').value);

  // With 83(b): taxed on spread at grant
  const spreadAtGrant = (fmvGrant - purchasePrice) * shares;
  const taxWith83b = spreadAtGrant * taxRate;

  // Without 83(b): taxed on spread as shares vest (assume linear vesting over 4 years)
  // Simplified: use average FMV between grant and full vest
  const avgFMV = (fmvGrant + fmvVest) / 2;
  const spreadAtVest = (avgFMV - purchasePrice) * shares;
  const taxWithout83b = spreadAtVest * taxRate;

  const savings = taxWithout83b - taxWith83b;

  document.getElementById('tax-with-83b').textContent = '$' + Math.round(taxWith83b).toLocaleString();
  document.getElementById('tax-without-83b').textContent = '$' + Math.round(taxWithout83b).toLocaleString();
  document.getElementById('savings-83b').textContent = '$' + Math.round(savings).toLocaleString();

  let breakdownHTML = '<p><strong>Scenario With 83(b) Election:</strong></p>';
  breakdownHTML += '<ul>';
  breakdownHTML += '<li>Taxable income at grant: $' + spreadAtGrant.toLocaleString(undefined, {maximumFractionDigits: 0}) + ' (' + shares.toLocaleString() + ' shares × ($' + fmvGrant + ' - $' + purchasePrice + '))</li>';
  breakdownHTML += '<li>Tax at grant (' + (taxRate*100) + '%): <strong>$' + Math.round(taxWith83b).toLocaleString() + '</strong></li>';
  breakdownHTML += '<li>Tax at vest: $0 (already taxed)</li>';
  breakdownHTML += '<li>Future gains taxed as long-term capital gains (20%) instead of ordinary income (' + (taxRate*100) + '%)</li>';
  breakdownHTML += '</ul>';

  breakdownHTML += '<p style="margin-top: 1.5rem;"><strong>Scenario Without 83(b) Election:</strong></p>';
  breakdownHTML += '<ul>';
  breakdownHTML += '<li>Taxable income at grant: $0</li>';
  breakdownHTML += '<li>Taxable income at vest (4 years): $' + spreadAtVest.toLocaleString(undefined, {maximumFractionDigits: 0}) + ' (' + shares.toLocaleString() + ' shares × ($' + avgFMV.toFixed(2) + ' avg FMV - $' + purchasePrice + '))</li>';
  breakdownHTML += '<li>Tax at vest (' + (taxRate*100) + '%): <strong>$' + Math.round(taxWithout83b).toLocaleString() + '</strong></li>';
  breakdownHTML += '<li>This is ordinary income, taxed at highest rate</li>';
  breakdownHTML += '</ul>';

  breakdownHTML += '<div class="success-box" style="margin-top: 1.5rem;"><h4>💰 Tax Savings: $' + Math.round(savings).toLocaleString() + '</h4>';
  breakdownHTML += '<p>By filing an 83(b) election within 30 days, you save <strong>$' + Math.round(savings).toLocaleString() + '</strong> in taxes. You pay $' + Math.round(taxWith83b).toLocaleString() + ' now instead of $' + Math.round(taxWithout83b).toLocaleString() + ' over 4 years, AND all future appreciation is taxed at lower capital gains rates.</p></div>';

  document.getElementById('breakdown-83b').innerHTML = breakdownHTML;
  document.getElementById('result-83b').style.display = 'block';
  document.getElementById('result-83b').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

// Tax Comparison Calculator
function calculateTaxComparison() {
  const numOptions = parseFloat(document.getElementById('num-options').value);
  const strikePrice = parseFloat(document.getElementById('strike-price').value);
  const fmvExercise = parseFloat(document.getElementById('fmv-exercise').value);
  const salePrice = parseFloat(document.getElementById('sale-price').value);
  const ordinaryRate = parseFloat(document.getElementById('ordinary-rate').value);
  const ltcgRate = parseFloat(document.getElementById('ltcg-rate').value);
  const amtRate = parseFloat(document.getElementById('amt-rate').value);

  // ISO (assuming qualifying disposition)
  const isoSpreadAtExercise = (fmvExercise - strikePrice) * numOptions;
  const isoAMT = isoSpreadAtExercise * amtRate;
  const isoGainAtSale = (salePrice - strikePrice) * numOptions;
  const isoTaxAtSale = isoGainAtSale * ltcgRate;
  const isoTotalTax = isoTaxAtSale; // AMT is a credit, simplified here

  // NSO
  const nsoSpreadAtExercise = (fmvExercise - strikePrice) * numOptions;
  const nsoTaxAtExercise = nsoSpreadAtExercise * ordinaryRate;
  const nsoGainAtSale = (salePrice - fmvExercise) * numOptions;
  const nsoTaxAtSale = nsoGainAtSale * ltcgRate;
  const nsoTotalTax = nsoTaxAtExercise + nsoTaxAtSale;

  // RSU
  const rsuValueAtVest = fmvExercise * numOptions;
  const rsuTaxAtVest = rsuValueAtVest * ordinaryRate;
  const rsuGainAtSale = (salePrice - fmvExercise) * numOptions;
  const rsuTaxAtSale = rsuGainAtSale * ltcgRate;
  const rsuTotalTax = rsuTaxAtVest + rsuTaxAtSale;

  document.getElementById('iso-total-tax').textContent = '$' + Math.round(isoTotalTax).toLocaleString();
  document.getElementById('nso-total-tax').textContent = '$' + Math.round(nsoTotalTax).toLocaleString();
  document.getElementById('rsu-total-tax').textContent = '$' + Math.round(rsuTotalTax).toLocaleString();

  let detailHTML = '<table class="comparison-table"><thead><tr><th>Tax Event</th><th>ISO</th><th>NSO</th><th>RSU</th></tr></thead><tbody>';

  detailHTML += '<tr><td><strong>Tax at Grant</strong></td><td>$0</td><td>$0</td><td>$0</td></tr>';

  detailHTML += '<tr><td><strong>Tax at Exercise/Vest</strong></td>';
  detailHTML += '<td>$0 regular tax<br>AMT: $' + Math.round(isoAMT).toLocaleString() + '</td>';
  detailHTML += '<td>Ordinary income: $' + Math.round(nsoTaxAtExercise).toLocaleString() + '</td>';
  detailHTML += '<td>Ordinary income: $' + Math.round(rsuTaxAtVest).toLocaleString() + '</td></tr>';

  detailHTML += '<tr><td><strong>Tax at Sale</strong></td>';
  detailHTML += '<td>LTCG: $' + Math.round(isoTaxAtSale).toLocaleString() + '</td>';
  detailHTML += '<td>LTCG: $' + Math.round(nsoTaxAtSale).toLocaleString() + '</td>';
  detailHTML += '<td>LTCG: $' + Math.round(rsuTaxAtSale).toLocaleString() + '</td></tr>';

  detailHTML += '<tr style="background: var(--gray-100); font-weight: bold;"><td><strong>TOTAL TAX</strong></td>';
  detailHTML += '<td>$' + Math.round(isoTotalTax).toLocaleString() + '</td>';
  detailHTML += '<td>$' + Math.round(nsoTotalTax).toLocaleString() + '</td>';
  detailHTML += '<td>$' + Math.round(rsuTotalTax).toLocaleString() + '</td></tr>';

  detailHTML += '<tr><td><strong>Net Proceeds</strong></td>';
  detailHTML += '<td>$' + Math.round((salePrice * numOptions) - (strikePrice * numOptions) - isoTotalTax).toLocaleString() + '</td>';
  detailHTML += '<td>$' + Math.round((salePrice * numOptions) - (strikePrice * numOptions) - nsoTotalTax).toLocaleString() + '</td>';
  detailHTML += '<td>$' + Math.round((salePrice * numOptions) - rsuTotalTax).toLocaleString() + '</td></tr>';

  detailHTML += '</tbody></table>';

  document.getElementById('tax-detail').innerHTML = detailHTML;

  // Recommendation
  let recHTML = '';
  const isoSavings = nsoTotalTax - isoTotalTax;
  if (isoSavings > 0) {
    recHTML = '<div class="success-box"><h4>Recommendation: ISO</h4>';
    recHTML += '<p><strong>ISOs save $' + Math.round(isoSavings).toLocaleString() + '</strong> vs NSOs in this scenario. The entire gain is taxed at long-term capital gains rates (' + (ltcgRate*100) + '%) instead of ordinary income (' + (ordinaryRate*100) + '%) on the spread.</p>';
    recHTML += '<p><strong>Warning:</strong> You face AMT of $' + Math.round(isoAMT).toLocaleString() + ' when you exercise (even if you don\'t sell). Make sure you have cash to cover this, or exercise early when 409A is low to minimize AMT.</p></div>';
  } else {
    recHTML = '<div class="info-box"><h4>Note</h4><p>In this scenario, NSO and ISO have similar tax outcomes. This can happen when the spread at exercise is small or AMT is high.</p></div>';
  }

  document.getElementById('recommendation').innerHTML = recHTML;
  document.getElementById('tax-calc-result').style.display = 'block';
  document.getElementById('tax-calc-result').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}
</script>

</body>
</html>