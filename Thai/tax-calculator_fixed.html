<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-901N2Y3CDZ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-901N2Y3CDZ');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thailand Income Tax Calculator for Expats | Personal Tax & Remittance Calculator | Terms.Law</title>
    <meta name="description" content="Calculate your Thailand income tax as an expat. Includes progressive tax brackets, remittance tax rules (2024 changes), LTR visa benefits, tax treaty analysis, and resident vs non-resident comparison.">
    <link rel="canonical" href="https://terms.law/Thai/tools/tax-calculator.html">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --thai-red: #EF3340;
            --thai-red-light: #ff4d5a;
            --thai-red-dark: #A51931;
            --thai-blue: #00205B;
            --thai-blue-light: #1a3a7a;
            --thai-blue-dark: #001845;
            --thai-white: #ffffff;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
            --success: #10b981;
            --success-light: #d1fae5;
            --warning: #f59e0b;
            --warning-light: #fef3c7;
            --danger: #ef4444;
            --danger-light: #fee2e2;
            --info: #3b82f6;
            --info-light: #dbeafe;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        html { scroll-behavior: smooth; }
        h2[id], h3[id] { scroll-margin-top: 100px; }

        body {
            font-family: 'Inter', system-ui, sans-serif;
            background: var(--gray-50);
            color: var(--gray-800);
            line-height: 1.7;
        }

        /* Breadcrumbs */
        .breadcrumbs {
            background: var(--gray-100);
            padding: 12px 24px;
            border-bottom: 1px solid var(--gray-200);
        }

        .breadcrumbs-content {
            max-width: 1100px;
            margin: 0 auto;
            font-size: 0.9rem;
            color: var(--gray-600);
        }

        .breadcrumbs a {
            color: var(--thai-blue);
            text-decoration: none;
        }

        .breadcrumbs a:hover {
            text-decoration: underline;
        }

        .breadcrumbs span {
            margin: 0 8px;
            color: var(--gray-400);
        }

        /* Container */
        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 40px 24px 80px;
        }

        /* Header */
        .page-header {
            margin-bottom: 40px;
            text-align: center;
        }

        .page-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            color: var(--gray-900);
            margin-bottom: 12px;
        }

        .page-header p {
            font-size: 1.1rem;
            color: var(--gray-600);
            max-width: 700px;
            margin: 0 auto;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 32px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .tab-btn {
            padding: 12px 24px;
            background: white;
            border: 2px solid var(--gray-200);
            border-radius: 8px;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--gray-600);
            cursor: pointer;
            transition: all 0.2s;
        }

        .tab-btn:hover {
            border-color: var(--thai-blue);
            color: var(--thai-blue);
        }

        .tab-btn.active {
            background: var(--thai-blue);
            border-color: var(--thai-blue);
            color: white;
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Form Card */
        .form-card {
            background: white;
            border-radius: 16px;
            padding: 32px;
            border: 1px solid var(--gray-200);
            margin-bottom: 32px;
        }

        .form-section {
            margin-bottom: 28px;
        }

        .form-section:last-of-type {
            margin-bottom: 0;
        }

        .form-section h2 {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--thai-blue);
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--thai-red);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            color: var(--gray-700);
            margin-bottom: 8px;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--gray-200);
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: border-color 0.2s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--thai-blue);
        }

        .form-group small {
            display: block;
            margin-top: 6px;
            font-size: 0.85rem;
            color: var(--gray-500);
        }

        .input-with-prefix {
            position: relative;
        }

        .input-prefix {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray-500);
            font-weight: 500;
        }

        .input-with-prefix input {
            padding-left: 50px;
        }

        .currency-row {
            display: flex;
            gap: 12px;
            align-items: flex-end;
        }

        .currency-row .form-group:first-child {
            flex: 2;
        }

        .currency-row .form-group:last-child {
            flex: 1;
        }

        /* Toggle Switch */
        .toggle-group {
            display: flex;
            background: var(--gray-100);
            border-radius: 8px;
            padding: 4px;
        }

        .toggle-option {
            flex: 1;
            text-align: center;
        }

        .toggle-option input {
            display: none;
        }

        .toggle-option label {
            display: block;
            padding: 10px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            font-size: 0.9rem;
            transition: all 0.2s;
            margin-bottom: 0;
        }

        .toggle-option input:checked + label {
            background: var(--thai-blue);
            color: white;
        }

        /* Deductions Grid */
        .deductions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .deduction-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--gray-50);
            border-radius: 8px;
            border: 1px solid var(--gray-200);
        }

        .deduction-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .deduction-item label {
            flex: 1;
            font-size: 0.9rem;
            cursor: pointer;
            margin-bottom: 0;
        }

        .deduction-item .amount {
            color: var(--success);
            font-weight: 600;
            font-size: 0.85rem;
        }

        .deduction-input {
            width: 80px !important;
            padding: 8px !important;
            font-size: 0.85rem !important;
        }

        /* Submit Button */
        .submit-btn {
            width: 100%;
            padding: 16px 32px;
            background: linear-gradient(135deg, var(--thai-red) 0%, var(--thai-red-dark) 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 24px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(165, 25, 49, 0.3);
        }

        /* Results Section */
        .results-section {
            display: none;
        }

        .results-section.active {
            display: block;
        }

        .results-header {
            background: linear-gradient(135deg, var(--thai-blue) 0%, var(--thai-blue-light) 100%);
            color: white;
            border-radius: 16px;
            padding: 24px 32px;
            margin-bottom: 24px;
        }

        .results-header h2 {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .results-header p {
            opacity: 0.9;
            font-size: 0.95rem;
        }

        /* Tax Breakdown Card */
        .breakdown-card {
            background: white;
            border-radius: 12px;
            border: 1px solid var(--gray-200);
            overflow: hidden;
            margin-bottom: 24px;
        }

        .breakdown-header {
            background: var(--gray-50);
            padding: 16px 24px;
            border-bottom: 1px solid var(--gray-200);
        }

        .breakdown-header h3 {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--gray-900);
        }

        .breakdown-body {
            padding: 24px;
        }

        .breakdown-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--gray-100);
        }

        .breakdown-row:last-child {
            border-bottom: none;
        }

        .breakdown-row.total {
            border-top: 2px solid var(--gray-200);
            margin-top: 12px;
            padding-top: 16px;
        }

        .breakdown-label {
            color: var(--gray-600);
            font-size: 0.95rem;
        }

        .breakdown-label small {
            display: block;
            font-size: 0.8rem;
            color: var(--gray-400);
        }

        .breakdown-value {
            font-weight: 700;
            color: var(--gray-900);
            text-align: right;
        }

        .breakdown-value.negative {
            color: var(--success);
        }

        .breakdown-value.highlight {
            color: var(--thai-red);
            font-size: 1.2rem;
        }

        /* Tax Bracket Visual */
        .tax-brackets {
            margin: 24px 0;
        }

        .bracket-bar {
            display: flex;
            height: 40px;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .bracket-segment {
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.75rem;
            font-weight: 600;
            min-width: 30px;
            transition: all 0.3s;
        }

        .bracket-segment:hover {
            filter: brightness(1.1);
        }

        .bracket-segment.rate-0 { background: #10b981; }
        .bracket-segment.rate-5 { background: #3b82f6; }
        .bracket-segment.rate-10 { background: #8b5cf6; }
        .bracket-segment.rate-15 { background: #f59e0b; }
        .bracket-segment.rate-20 { background: #f97316; }
        .bracket-segment.rate-25 { background: #ef4444; }
        .bracket-segment.rate-30 { background: #dc2626; }
        .bracket-segment.rate-35 { background: #991b1b; }

        .bracket-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            font-size: 0.8rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
        }

        /* Comparison Grid */
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .comparison-card {
            background: white;
            border-radius: 12px;
            border: 2px solid var(--gray-200);
            overflow: hidden;
        }

        .comparison-card.resident {
            border-color: var(--success);
        }

        .comparison-card.non-resident {
            border-color: var(--warning);
        }

        .comparison-header {
            padding: 16px 20px;
            font-weight: 700;
        }

        .comparison-card.resident .comparison-header {
            background: var(--success-light);
            color: var(--success);
        }

        .comparison-card.non-resident .comparison-header {
            background: var(--warning-light);
            color: var(--warning);
        }

        .comparison-body {
            padding: 20px;
        }

        .comparison-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
        }

        .comparison-total {
            border-top: 2px solid var(--gray-200);
            margin-top: 12px;
            padding-top: 12px;
            font-weight: 700;
        }

        /* Info Box */
        .info-box {
            background: var(--info-light);
            border: 1px solid var(--info);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
        }

        .info-box h4 {
            color: var(--thai-blue);
            font-weight: 700;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-box p, .info-box li {
            color: var(--gray-700);
            font-size: 0.9rem;
        }

        .info-box ul {
            margin: 12px 0 0 20px;
        }

        /* Warning Box */
        .warning-box {
            background: var(--warning-light);
            border: 1px solid var(--warning);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
        }

        .warning-box h4 {
            color: #92400e;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .warning-box p {
            color: var(--gray-700);
            font-size: 0.9rem;
        }

        /* LTR Benefits Card */
        .ltr-card {
            background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
            border: 2px solid #a855f7;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .ltr-card h3 {
            color: #7c3aed;
            font-size: 1.1rem;
            margin-bottom: 16px;
        }

        .ltr-benefit {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px 0;
        }

        .ltr-icon {
            width: 32px;
            height: 32px;
            background: #a855f7;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .ltr-benefit-content h4 {
            font-size: 0.95rem;
            color: var(--gray-900);
            margin-bottom: 4px;
        }

        .ltr-benefit-content p {
            font-size: 0.85rem;
            color: var(--gray-600);
        }

        /* Reset Button */
        .reset-btn {
            display: block;
            width: 100%;
            padding: 14px;
            background: var(--gray-100);
            color: var(--gray-700);
            border: 2px solid var(--gray-200);
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .reset-btn:hover {
            background: var(--gray-200);
        }

        /* Disclaimer */
        .disclaimer {
            background: var(--gray-100);
            border-radius: 12px;
            padding: 20px;
            margin-top: 32px;
        }

        .disclaimer h4 {
            color: var(--gray-800);
            font-weight: 700;
            margin-bottom: 8px;
        }

        .disclaimer p {
            font-size: 0.85rem;
            color: var(--gray-600);
        }

        /* Cross Links */
        .cross-links {
            background: var(--gray-100);
            border-radius: 12px;
            padding: 24px;
            margin-top: 40px;
        }

        .cross-links h3 {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--gray-800);
            margin-bottom: 16px;
        }

        .cross-links-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
        }

        .cross-link {
            display: block;
            padding: 12px 16px;
            background: white;
            border-radius: 8px;
            text-decoration: none;
            color: var(--thai-blue);
            font-weight: 500;
            font-size: 0.9rem;
            transition: all 0.2s;
            border: 1px solid var(--gray-200);
        }

        .cross-link:hover {
            border-color: var(--thai-blue);
            box-shadow: 0 4px 12px rgba(0,32,91,0.1);
        }

        /* Footer */
        .footer {
            background: var(--thai-blue-dark);
            color: var(--gray-400);
            padding: 40px 24px;
        }

        .footer-content {
            max-width: 1100px;
            margin: 0 auto;
        }

        .footer-brand {
            color: white;
            font-weight: 700;
        }

        .footer-disclaimer {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid rgba(255,255,255,0.1);
            font-size: 0.85rem;
        }

        .footer-links {
            display: flex;
            gap: 24px;
            margin-top: 16px;
        }

        .footer-links a {
            color: var(--gray-400);
            text-decoration: none;
            font-size: 0.9rem;
        }

        .footer-links a:hover {
            color: white;
        }

        /* Chart Container */
        .chart-container {
            height: 300px;
            margin: 24px 0;
            position: relative;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .page-header h1 { font-size: 1.8rem; }
            .form-grid { grid-template-columns: 1fr; }
            .comparison-grid { grid-template-columns: 1fr; }
            .currency-row { flex-direction: column; gap: 0; }
            .tabs { gap: 4px; }
            .tab-btn { padding: 10px 16px; font-size: 0.85rem; }
            .form-card { padding: 20px; }
        }
    </style>
</head>
<body>
<script src="/Thai/shared/lang-switcher.js"></script>
    <!-- Sitewide Header -->
    <div id="site-header"></div>
    <script src="/Thai/shared/header-loader.js"></script>

    <!-- Breadcrumbs -->
    <nav class="breadcrumbs">
        <div class="breadcrumbs-content">
            <a href="/">Home</a>
            <span>></span>
            <a href="/Thai/">Thai Legal Hub</a>
            <span>></span>
            <a href="/Thai/tools/">Tools</a>
            <span>></span>
            Income Tax Calculator
        </div>
    </nav>

    <div class="container">
        <!-- Header -->
        <header class="page-header">
            <h1>Thailand Income Tax Calculator for Expats</h1>
            <p>Calculate your Thai tax liability including progressive tax rates, remittance tax implications, and LTR visa benefits. Updated for 2024 tax law changes.</p>
        </header>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab-btn active" onclick="showTab('income')">Income Tax</button>
            <button class="tab-btn" onclick="showTab('remittance')">Remittance Tax</button>
            <button class="tab-btn" onclick="showTab('ltr')">LTR Visa Benefits</button>
            <button class="tab-btn" onclick="showTab('brackets')">Tax Brackets Reference</button>
        </div>

        <!-- Income Tax Tab -->
        <div id="income-tab" class="tab-content active">
            <form id="income-form" class="form-card">
                <div class="form-section">
                    <h2>Tax Residency Status</h2>
                    <div class="form-group">
                        <label>Are you a Thai tax resident?</label>
                        <div class="toggle-group">
                            <div class="toggle-option">
                                <input type="radio" id="resident-yes" name="residency" value="resident" checked>
                                <label for="resident-yes">Resident (180+ days/year)</label>
                            </div>
                            <div class="toggle-option">
                                <input type="radio" id="resident-no" name="residency" value="non-resident">
                                <label for="resident-no">Non-Resident (&lt;180 days)</label>
                            </div>
                        </div>
                        <small>Tax residents are taxed on assessable income from sources in Thailand and, from 2024, on foreign income remitted to Thailand.</small>
                    </div>
                </div>

                <div class="form-section">
                    <h2>Annual Income</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="thai-income">Thailand-Sourced Income</label>
                            <div class="currency-row">
                                <div class="form-group">
                                    <div class="input-with-prefix">
                                        <span class="input-prefix">THB</span>
                                        <input type="number" id="thai-income" name="thai_income" min="0" placeholder="e.g. 1200000" value="0">
                                    </div>
                                </div>
                            </div>
                            <small>Employment income, business income, or any income earned in Thailand</small>
                        </div>

                        <div class="form-group">
                            <label for="foreign-income">Foreign Income (if remitted to Thailand)</label>
                            <div class="currency-row">
                                <div class="form-group">
                                    <div class="input-with-prefix">
                                        <span class="input-prefix">USD</span>
                                        <input type="number" id="foreign-income" name="foreign_income" min="0" placeholder="e.g. 50000" value="0">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <select id="foreign-currency" name="foreign_currency">
                                        <option value="USD">USD</option>
                                        <option value="EUR">EUR</option>
                                        <option value="GBP">GBP</option>
                                        <option value="AUD">AUD</option>
                                        <option value="JPY">JPY</option>
                                        <option value="THB">THB</option>
                                    </select>
                                </div>
                            </div>
                            <small>Foreign-sourced income remitted to Thailand. For Thai tax residents, income earned from 1 Jan 2024 onward is generally taxable when remitted (even in a later year); pre-2024 income is generally treated under the prior rule.</small>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="exchange-rate">Exchange Rate to THB</label>
                        <input type="number" id="exchange-rate" name="exchange_rate" step="0.01" value="35.00" min="0">
                        <small>Current approximate rate. Adjust as needed for your calculation.</small>
                    </div>
                </div>

                <div class="form-section">
                    <h2>Personal Deductions & Allowances</h2>
                    <p style="color: var(--gray-600); font-size: 0.9rem; margin-bottom: 16px;">Select all that apply. Thai tax law provides various deductions to reduce taxable income.</p>

                    <div class="deductions-grid">
                        <div class="deduction-item">
                            <input type="checkbox" id="ded-personal" checked disabled>
                            <label for="ded-personal">Personal Allowance</label>
                            <span class="amount">60,000</span>
                        </div>

                        <div class="deduction-item">
                            <input type="checkbox" id="ded-spouse">
                            <label for="ded-spouse">Spouse Allowance</label>
                            <span class="amount">60,000</span>
                        </div>

                        <div class="deduction-item">
                            <input type="checkbox" id="ded-children">
                            <label for="ded-children">Children</label>
                            <input type="number" id="ded-children-count" class="deduction-input" value="0" min="0" max="10">
                            <span class="amount">x30,000</span>
                        </div>

                        <div class="deduction-item">
                            <input type="checkbox" id="ded-parents">
                            <label for="ded-parents">Parent Support</label>
                            <input type="number" id="ded-parents-count" class="deduction-input" value="0" min="0" max="4">
                            <span class="amount">x30,000</span>
                        </div>

                        <div class="deduction-item">
                            <input type="checkbox" id="ded-life-insurance">
                            <label for="ded-life-insurance">Life Insurance Premium (THB)</label>
                            <input type="number" id="ded-life-insurance-amount" class="deduction-input" value="0" min="0" max="100000" disabled>
                            <span class="amount">max 100,000</span>
                        </div>

                        <div class="deduction-item">
                            <input type="checkbox" id="ded-health-insurance">
                            <label for="ded-health-insurance">Health Insurance (THB)</label>
                            <input type="number" id="ded-health-insurance-amount" class="deduction-input" value="0" min="0" max="25000" disabled>
                            <span class="amount">max 25,000</span>
                        </div>

                        <div class="deduction-item">
                            <input type="checkbox" id="ded-ssf">
                            <label for="ded-ssf">SSF Contribution (THB)</label>
                            <input type="number" id="ded-ssf-amount" class="deduction-input" value="0" min="0" max="200000" disabled>
                            <span class="amount">max 200,000*</span>
                        </div>

                        <div class="deduction-item">
                            <input type="checkbox" id="ded-rmf">
                            <label for="ded-rmf">RMF / Other Retirement (THB)</label>
                            <input type="number" id="ded-rmf-amount" class="deduction-input" value="0" min="0" max="500000" disabled>
                            <span class="amount">combined max 500,000*</span>
                        </div>

                        <div class="deduction-item">
                            <input type="checkbox" id="ded-social-security">
                            <label for="ded-social-security">Social Security</label>
                            <span class="amount">up to 9,000</span>
                        </div>
                    </div>
                    <p style="color: var(--gray-600); font-size: 0.85rem; margin-top: 10px;">
                        * Retirement deductions in Thailand are subject to percentage-of-income rules and combined statutory caps that may include multiple plan types (e.g., SSF, RMF, provident fund, pension insurance). This tool applies a simplified cap logic.
                    </p>

                    <div class="form-group" style="margin-top: 20px;">
                        <label for="expense-deduction">Income Expense Deduction Method</label>
                        <select id="expense-deduction" name="expense_deduction">
                            <option value="standard">Standard 50% (max 100,000 THB)</option>
                            <option value="actual">Actual Expenses (itemized)</option>
                        </select>
                        <small>Employment income typically uses the standard 50% deduction capped at 100,000 THB</small>
                    </div>

                    <div class="form-group" id="actual-expenses-group" style="display: none;">
                        <label for="actual-expenses">Actual Expenses Amount (THB)</label>
                        <div class="input-with-prefix">
                            <span class="input-prefix">THB</span>
                            <input type="number" id="actual-expenses" name="actual_expenses" min="0" value="0">
                        </div>
                    </div>
                </div>

                <button type="submit" class="submit-btn">Calculate Tax Liability</button>
            </form>

            <!-- Income Tax Results -->
            <div id="income-results" class="results-section">
                <div class="results-header">
                    <h2>Your Tax Calculation Results</h2>
                    <p>Based on your inputs as a <span id="result-residency-status">tax resident</span></p>
                </div>

                <!-- Tax Breakdown -->
                <div class="breakdown-card">
                    <div class="breakdown-header">
                        <h3>Income & Deductions Breakdown</h3>
                    </div>
                    <div class="breakdown-body">
                        <div class="breakdown-row">
                            <span class="breakdown-label">Thailand-Sourced Income</span>
                            <span class="breakdown-value" id="result-thai-income">0</span>
                        </div>
                        <div class="breakdown-row">
                            <span class="breakdown-label">Foreign Income (converted to THB)</span>
                            <span class="breakdown-value" id="result-foreign-income">0</span>
                        </div>
                        <div class="breakdown-row total">
                            <span class="breakdown-label">Total Assessable Income</span>
                            <span class="breakdown-value" id="result-total-income">0</span>
                        </div>
                        <div class="breakdown-row">
                            <span class="breakdown-label">Expense Deduction<small id="expense-method-display">Standard 50%</small></span>
                            <span class="breakdown-value negative" id="result-expense-deduction">-0</span>
                        </div>
                        <div class="breakdown-row">
                            <span class="breakdown-label">Personal Allowances<small id="allowances-detail"></small></span>
                            <span class="breakdown-value negative" id="result-allowances">-0</span>
                        </div>
                        <div class="breakdown-row total">
                            <span class="breakdown-label">Net Taxable Income</span>
                            <span class="breakdown-value highlight" id="result-taxable-income">0</span>
                        </div>
                    </div>
                </div>

                <!-- Tax by Bracket -->
                <div class="breakdown-card">
                    <div class="breakdown-header">
                        <h3>Tax Calculation by Bracket</h3>
                    </div>
                    <div class="breakdown-body">
                        <div class="tax-brackets">
                            <div class="bracket-bar" id="bracket-bar"></div>
                            <div class="bracket-legend" id="bracket-legend"></div>
                        </div>
                        <div id="bracket-breakdown"></div>
                        <div class="breakdown-row total">
                            <span class="breakdown-label">Total Tax Liability</span>
                            <span class="breakdown-value highlight" id="result-total-tax">0</span>
                        </div>
                        <div class="breakdown-row">
                            <span class="breakdown-label">Effective Tax Rate</span>
                            <span class="breakdown-value" id="result-effective-rate">0%</span>
                        </div>
                    </div>
                </div>

                <!-- Comparison -->
                <div class="comparison-grid">
                    <div class="comparison-card resident">
                        <div class="comparison-header">Tax Resident Scenario</div>
                        <div class="comparison-body">
                            <div class="comparison-item">
                                <span>Taxable Income</span>
                                <span id="compare-resident-income">-</span>
                            </div>
                            <div class="comparison-item">
                                <span>Tax Rate Range</span>
                                <span id="compare-resident-rate">0-35%</span>
                            </div>
                            <div class="comparison-item comparison-total">
                                <span>Total Tax</span>
                                <span id="compare-resident-tax">-</span>
                            </div>
                        </div>
                    </div>
                    <div class="comparison-card non-resident">
                        <div class="comparison-header">Non-Resident Scenario</div>
                        <div class="comparison-body">
                            <div class="comparison-item">
                                <span>Thai Income Only</span>
                                <span id="compare-nonresident-income">-</span>
                            </div>
                            <div class="comparison-item">
                                <span>Tax Rate</span>
                                <span id="compare-nonresident-rate">Flat 15%</span>
                            </div>
                            <div class="comparison-item comparison-total">
                                <span>Total Tax</span>
                                <span id="compare-nonresident-tax">-</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <h4>Key Points</h4>
                    <ul id="result-notes">
                    </ul>
                </div>

                <button type="button" class="reset-btn" onclick="resetIncomeForm()">Calculate Again</button>
            </div>
        </div>

        <!-- Remittance Tax Tab -->
        <div id="remittance-tab" class="tab-content">
            <div class="warning-box">
                <h4>2024 Tax Law Change</h4>
                <p>Effective January 1, 2024, Thailand taxes foreign-sourced income remitted to Thailand regardless of when it was earned. Previously, only income earned and remitted in the same year was taxable.</p>
            </div>

            <form id="remittance-form" class="form-card">
                <div class="form-section">
                    <h2>Remittance Details</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="remit-amount">Amount Being Remitted</label>
                            <div class="currency-row">
                                <div class="form-group">
                                    <div class="input-with-prefix">
                                        <span class="input-prefix">USD</span>
                                        <input type="number" id="remit-amount" name="remit_amount" min="0" placeholder="e.g. 50000">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <select id="remit-currency" name="remit_currency">
                                        <option value="USD">USD</option>
                                        <option value="EUR">EUR</option>
                                        <option value="GBP">GBP</option>
                                        <option value="AUD">AUD</option>
                                        <option value="THB">THB</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="remit-exchange">Exchange Rate to THB</label>
                            <input type="number" id="remit-exchange" name="remit_exchange" step="0.01" value="35.00" min="0">
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h2>Income Source & Timing</h2>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="income-year">Year Income Was Earned</label>
                            <select id="income-year" name="income_year">
                                <option value="2024">2024 or later</option>
                                <option value="2023">2023</option>
                                <option value="before2023">Before 2023</option>
                            </select>
                            <small>Pre-2024 income may have different treatment depending on when earned vs remitted</small>
                        </div>

                        <div class="form-group">
                            <label for="income-type">Type of Foreign Income</label>
                            <select id="income-type" name="income_type">
                                <option value="employment">Employment Income</option>
                                <option value="business">Business/Self-Employment</option>
                                <option value="investment">Investment Income (dividends, interest)</option>
                                <option value="capital-gains">Capital Gains</option>
                                <option value="pension">Pension/Retirement</option>
                                <option value="rental">Rental Income</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h2>Tax Treaty Analysis</h2>
                    <div class="form-group">
                        <label for="treaty-country">Country Where Income Was Earned</label>
                        <select id="treaty-country" name="treaty_country">
                            <option value="">Select country</option>
                            <option value="US">United States</option>
                            <option value="UK">United Kingdom</option>
                            <option value="DE">Germany</option>
                            <option value="FR">France</option>
                            <option value="JP">Japan</option>
                            <option value="AU">Australia</option>
                            <option value="SG">Singapore</option>
                            <option value="HK">Hong Kong</option>
                            <option value="AE">UAE (Dubai)</option>
                            <option value="MY">Malaysia</option>
                            <option value="NL">Netherlands</option>
                            <option value="CH">Switzerland</option>
                            <option value="CA">Canada</option>
                            <option value="NZ">New Zealand</option>
                            <option value="other-treaty">Other (with tax treaty)</option>
                            <option value="no-treaty">Other (no tax treaty)</option>
                        </select>
                        <small>Thailand has tax treaties with 60+ countries that may provide relief from double taxation</small>
                    </div>

                    <div class="form-group">
                        <label for="foreign-tax-paid">Tax Already Paid in Foreign Country (USD)</label>
                        <div class="input-with-prefix">
                            <span class="input-prefix">USD</span>
                            <input type="number" id="foreign-tax-paid" name="foreign_tax_paid" min="0" value="0">
                        </div>
                        <small>You may be able to claim a foreign tax credit for taxes paid abroad</small>
                    </div>
                </div>

                <button type="submit" class="submit-btn">Analyze Remittance Tax</button>
            </form>

            <!-- Remittance Results -->
            <div id="remittance-results" class="results-section">
                <div class="results-header">
                    <h2>Remittance Tax Analysis</h2>
                    <p>Understanding the tax implications of bringing foreign income into Thailand</p>
                </div>

                <div class="breakdown-card">
                    <div class="breakdown-header">
                        <h3>Remittance Summary</h3>
                    </div>
                    <div class="breakdown-body">
                        <div class="breakdown-row">
                            <span class="breakdown-label">Remittance Amount (THB)</span>
                            <span class="breakdown-value" id="remit-result-amount">0</span>
                        </div>
                        <div class="breakdown-row">
                            <span class="breakdown-label">Income Type</span>
                            <span class="breakdown-value" id="remit-result-type">-</span>
                        </div>
                        <div class="breakdown-row">
                            <span class="breakdown-label">Tax Treaty Status</span>
                            <span class="breakdown-value" id="remit-result-treaty">-</span>
                        </div>
                        <div class="breakdown-row">
                            <span class="breakdown-label">Potential Thai Tax (before credits)</span>
                            <span class="breakdown-value" id="remit-result-thai-tax">0</span>
                        </div>
                        <div class="breakdown-row">
                            <span class="breakdown-label">Foreign Tax Credit<small>Subject to limitations</small></span>
                            <span class="breakdown-value negative" id="remit-result-credit">-0</span>
                        </div>
                        <div class="breakdown-row total">
                            <span class="breakdown-label">Estimated Net Thai Tax</span>
                            <span class="breakdown-value highlight" id="remit-result-net-tax">0</span>
                        </div>
                    </div>
                </div>

                <div class="info-box" id="remit-treaty-info">
                    <h4>Tax Treaty Considerations</h4>
                    <p id="remit-treaty-details"></p>
                </div>

                <div class="warning-box">
                    <h4>Important Disclaimer</h4>
                    <p>Tax treaty application is complex and depends on specific circumstances. The foreign tax credit is limited to the Thai tax on that income. This analysis is for educational purposes only. Consult a tax professional for your specific situation.</p>
                </div>

                <button type="button" class="reset-btn" onclick="resetRemittanceForm()">Calculate Again</button>
            </div>
        </div>

        <!-- LTR Visa Tab -->
        <div id="ltr-tab" class="tab-content">
            <div class="ltr-card">
                <h3>Long-Term Resident (LTR) Visa Tax Benefits</h3>
                <div class="ltr-benefit">
                    <div class="ltr-icon">1</div>
                    <div class="ltr-benefit-content">
                        <h4>17% Flat Tax Rate</h4>
                        <p>Highly Skilled Professionals under LTR visa enjoy a flat 17% income tax rate instead of the progressive rates up to 35%.</p>
                    </div>
                </div>
                <div class="ltr-benefit">
                    <div class="ltr-icon">2</div>
                    <div class="ltr-benefit-content">
                        <h4>Foreign Income Exemption</h4>
                        <p>Wealthy Global Citizens and Wealthy Pensioners categories may be exempt from tax on foreign-sourced income, even when remitted to Thailand.</p>
                    </div>
                </div>
                <div class="ltr-benefit">
                    <div class="ltr-icon">3</div>
                    <div class="ltr-benefit-content">
                        <h4>Work Permit Benefits</h4>
                        <p>Digital work permit, no 4:1 Thai employee ratio requirement, streamlined processing.</p>
                    </div>
                </div>
            </div>

            <form id="ltr-form" class="form-card">
                <div class="form-section">
                    <h2>LTR Tax Calculator</h2>
                    <div class="form-group">
                        <label for="ltr-category">LTR Visa Category</label>
                        <select id="ltr-category" name="ltr_category">
                            <option value="professional">Highly Skilled Professional (17% flat rate)</option>
                            <option value="wealthy-citizen">Wealthy Global Citizen (foreign income exempt)</option>
                            <option value="wealthy-pensioner">Wealthy Pensioner (foreign income exempt)</option>
                            <option value="remote-worker">Work-From-Thailand Professional</option>
                        </select>
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label for="ltr-thai-income">Thailand-Sourced Income (THB/year)</label>
                            <div class="input-with-prefix">
                                <span class="input-prefix">THB</span>
                                <input type="number" id="ltr-thai-income" name="ltr_thai_income" min="0" value="0">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="ltr-foreign-income">Foreign Income Remitted (THB/year)</label>
                            <div class="input-with-prefix">
                                <span class="input-prefix">THB</span>
                                <input type="number" id="ltr-foreign-income" name="ltr_foreign_income" min="0" value="0">
                            </div>
                        </div>
                    </div>
                </div>

                <button type="submit" class="submit-btn">Calculate LTR Tax Benefit</button>
            </form>

            <!-- LTR Results -->
            <div id="ltr-results" class="results-section">
                <div class="results-header">
                    <h2>LTR Tax Benefit Analysis</h2>
                    <p>Comparing your tax under LTR visa vs standard tax treatment</p>
                </div>

                <div class="comparison-grid">
                    <div class="comparison-card resident">
                        <div class="comparison-header">With LTR Visa</div>
                        <div class="comparison-body">
                            <div class="comparison-item">
                                <span>Thai Income Tax</span>
                                <span id="ltr-with-thai-tax">-</span>
                            </div>
                            <div class="comparison-item">
                                <span>Foreign Income Tax</span>
                                <span id="ltr-with-foreign-tax">-</span>
                            </div>
                            <div class="comparison-item comparison-total">
                                <span>Total Tax</span>
                                <span id="ltr-with-total">-</span>
                            </div>
                        </div>
                    </div>
                    <div class="comparison-card non-resident">
                        <div class="comparison-header">Without LTR (Standard Rates)</div>
                        <div class="comparison-body">
                            <div class="comparison-item">
                                <span>Thai Income Tax</span>
                                <span id="ltr-without-thai-tax">-</span>
                            </div>
                            <div class="comparison-item">
                                <span>Foreign Income Tax</span>
                                <span id="ltr-without-foreign-tax">-</span>
                            </div>
                            <div class="comparison-item comparison-total">
                                <span>Total Tax</span>
                                <span id="ltr-without-total">-</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="breakdown-card">
                    <div class="breakdown-header">
                        <h3>Your Tax Savings</h3>
                    </div>
                    <div class="breakdown-body">
                        <div class="breakdown-row total">
                            <span class="breakdown-label">Annual Tax Savings with LTR</span>
                            <span class="breakdown-value highlight" id="ltr-savings">0</span>
                        </div>
                        <div class="breakdown-row">
                            <span class="breakdown-label">Percentage Reduction</span>
                            <span class="breakdown-value" id="ltr-savings-pct">0%</span>
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <h4>LTR Visa Eligibility Reminder</h4>
                    <ul>
                        <li><strong>Highly Skilled Professional:</strong> $80,000+ annual income, employed by Thai company or established foreign company</li>
                        <li><strong>Wealthy Global Citizen:</strong> $1M+ assets, $80,000+ income, $500,000+ Thailand investment</li>
                        <li><strong>Wealthy Pensioner:</strong> Age 50+, $80,000+ annual pension, $250,000+ Thailand investment</li>
                        <li><strong>Work-From-Thailand:</strong> $80,000+ income, work for established foreign company</li>
                    </ul>
                </div>

                <button type="button" class="reset-btn" onclick="resetLTRForm()">Calculate Again</button>
            </div>
        </div>

        <!-- Tax Brackets Reference Tab -->
        <div id="brackets-tab" class="tab-content">
            <div class="form-card">
                <div class="form-section">
                    <h2>Thailand Personal Income Tax Rates (2024)</h2>
                    <p style="color: var(--gray-600); margin-bottom: 20px;">Progressive tax rates apply to tax residents. These rates apply to net taxable income after deductions.</p>

                    <table style="width: 100%; border-collapse: collapse; margin-bottom: 24px;">
                        <thead>
                            <tr style="background: var(--thai-blue); color: white;">
                                <th style="padding: 12px 16px; text-align: left; border-radius: 8px 0 0 0;">Taxable Income (THB)</th>
                                <th style="padding: 12px 16px; text-align: center;">Tax Rate</th>
                                <th style="padding: 12px 16px; text-align: right; border-radius: 0 8px 0 0;">Tax on Bracket</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="background: #d1fae5;">
                                <td style="padding: 12px 16px; border-bottom: 1px solid var(--gray-200);">0 - 150,000</td>
                                <td style="padding: 12px 16px; text-align: center; border-bottom: 1px solid var(--gray-200); font-weight: 600;">0%</td>
                                <td style="padding: 12px 16px; text-align: right; border-bottom: 1px solid var(--gray-200);">0</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px 16px; border-bottom: 1px solid var(--gray-200);">150,001 - 300,000</td>
                                <td style="padding: 12px 16px; text-align: center; border-bottom: 1px solid var(--gray-200); font-weight: 600; color: #3b82f6;">5%</td>
                                <td style="padding: 12px 16px; text-align: right; border-bottom: 1px solid var(--gray-200);">7,500</td>
                            </tr>
                            <tr style="background: var(--gray-50);">
                                <td style="padding: 12px 16px; border-bottom: 1px solid var(--gray-200);">300,001 - 500,000</td>
                                <td style="padding: 12px 16px; text-align: center; border-bottom: 1px solid var(--gray-200); font-weight: 600; color: #8b5cf6;">10%</td>
                                <td style="padding: 12px 16px; text-align: right; border-bottom: 1px solid var(--gray-200);">20,000</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px 16px; border-bottom: 1px solid var(--gray-200);">500,001 - 750,000</td>
                                <td style="padding: 12px 16px; text-align: center; border-bottom: 1px solid var(--gray-200); font-weight: 600; color: #f59e0b;">15%</td>
                                <td style="padding: 12px 16px; text-align: right; border-bottom: 1px solid var(--gray-200);">37,500</td>
                            </tr>
                            <tr style="background: var(--gray-50);">
                                <td style="padding: 12px 16px; border-bottom: 1px solid var(--gray-200);">750,001 - 1,000,000</td>
                                <td style="padding: 12px 16px; text-align: center; border-bottom: 1px solid var(--gray-200); font-weight: 600; color: #f97316;">20%</td>
                                <td style="padding: 12px 16px; text-align: right; border-bottom: 1px solid var(--gray-200);">50,000</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px 16px; border-bottom: 1px solid var(--gray-200);">1,000,001 - 2,000,000</td>
                                <td style="padding: 12px 16px; text-align: center; border-bottom: 1px solid var(--gray-200); font-weight: 600; color: #ef4444;">25%</td>
                                <td style="padding: 12px 16px; text-align: right; border-bottom: 1px solid var(--gray-200);">250,000</td>
                            </tr>
                            <tr style="background: var(--gray-50);">
                                <td style="padding: 12px 16px; border-bottom: 1px solid var(--gray-200);">2,000,001 - 5,000,000</td>
                                <td style="padding: 12px 16px; text-align: center; border-bottom: 1px solid var(--gray-200); font-weight: 600; color: #dc2626;">30%</td>
                                <td style="padding: 12px 16px; text-align: right; border-bottom: 1px solid var(--gray-200);">900,000</td>
                            </tr>
                            <tr style="background: #fee2e2;">
                                <td style="padding: 12px 16px; border-radius: 0 0 0 8px;">Over 5,000,000</td>
                                <td style="padding: 12px 16px; text-align: center; font-weight: 700; color: #991b1b;">35%</td>
                                <td style="padding: 12px 16px; text-align: right; border-radius: 0 0 8px 0;">Unlimited</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="info-box">
                        <h4>Key Deductions Summary</h4>
                        <ul>
                            <li><strong>Personal Allowance:</strong> 60,000 THB (mandatory)</li>
                            <li><strong>Spouse Allowance:</strong> 60,000 THB (if spouse has no income)</li>
                            <li><strong>Child Allowance:</strong> 30,000 THB per child (special rules may increase this in some cases)</li>
                            <li><strong>Parent Support:</strong> 30,000 THB per parent (max 4 parents including in-laws)</li>
                            <li><strong>Expense Deduction:</strong> 50% of income, max 100,000 THB for employment income</li>
                            <li><strong>Life Insurance:</strong> Up to 100,000 THB</li>
                            <li><strong>Health Insurance:</strong> Up to 25,000 THB</li>
                            <li><strong>SSF/RMF/Retirement:</strong> Percentage limits and combined caps apply (see inputs below)</li>
                            <li><strong>Social Security:</strong> Up to 9,000 THB</li>
                        </ul>
                    </div>
                </div>

                <div class="form-section">
                    <h2>Non-Resident Note</h2>
                    <p style="color: var(--gray-600); margin-bottom: 16px;">
                        Thailand taxes both residents and non-residents on Thailand-sourced income from employment or business carried on in Thailand. 
                        The <strong>withholding</strong> and <strong>final tax</strong> outcome for non-residents can vary by income type (salary, services, dividends, interest, royalties), payer status, and treaty position. 
                        This calculator is primarily designed as an <strong>annual filing estimate for Thai tax residents</strong>; if you are a non-resident, treat the tax resident vs non-resident comparison as out of scope and use the withholding rates applicable to your specific income stream.
                    </p>
                </div>

<!-- Disclaimer -->
        <div class="disclaimer">
            <h4>Important Disclaimer</h4>
            <p>This calculator provides estimates for educational purposes only. Thai tax law is complex and subject to change. The 2024 remittance rules are new and interpretation may evolve. Tax treaty benefits depend on specific circumstances and proper documentation. Always consult a qualified Thai tax advisor or accountant for advice on your specific situation. This tool does not constitute tax advice.</p>
        </div>

        <!-- Cross Links -->
        <div class="cross-links">
            <h3>Related Resources</h3>
            <div class="cross-links-grid">
                <a href="/Thai/visas/ltr-10-year-visa.html" class="cross-link">LTR Visa Guide</a>
                <a href="/Thai/visas/dtv-digital-nomad-visa.html" class="cross-link">DTV Visa Guide</a>
                <a href="/Thai/tools/visa-eligibility-checker.html" class="cross-link">Visa Eligibility Checker</a>
                <a href="/Thai/banking/" class="cross-link">Thailand Banking</a>
                <a href="/Thai/tools/" class="cross-link">All Tools</a>
                <a href="/Thai/" class="cross-link">Thai Legal Hub</a>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div>
                <span class="footer-brand">Terms.Law</span> - Thailand Tax Calculator
            </div>
            <div class="footer-disclaimer">
                <strong>Educational Disclaimer:</strong> This calculator provides estimates for educational purposes only and does not constitute tax advice. Thai tax laws are complex and subject to change. Remittance rules effective from 2024 are still being interpreted. Always consult qualified Thai tax professionals for advice specific to your situation.
            </div>
            <div class="footer-links">
                <a href="/">Home</a>
                <a href="/Thai/">Thai Legal Hub</a>
                <a href="/Thai/tools/">All Tools</a>
                <a href="/Thai/visas/">Visa Guides</a>
            </div>
        </div>
    </footer>

    <script>
        // Thai Tax Brackets (2024)
        const TAX_BRACKETS = [
            { min: 0, max: 150000, rate: 0 },
            { min: 150000, max: 300000, rate: 0.05 },
            { min: 300000, max: 500000, rate: 0.10 },
            { min: 500000, max: 750000, rate: 0.15 },
            { min: 750000, max: 1000000, rate: 0.20 },
            { min: 1000000, max: 2000000, rate: 0.25 },
            { min: 2000000, max: 5000000, rate: 0.30 },
            { min: 5000000, max: Infinity, rate: 0.35 }
        ];

        // Exchange rates (approximate)
        const EXCHANGE_RATES = {
            USD: 35.00,
            EUR: 38.00,
            GBP: 44.00,
            AUD: 23.00,
            JPY: 0.24,
            THB: 1
        };

        // Tax Treaty Countries with Thailand
        const TAX_TREATIES = {
            US: { name: 'United States', hasCredit: true, notes: 'US-Thailand tax treaty allows foreign tax credits. Pension may have special treatment.' },
            UK: { name: 'United Kingdom', hasCredit: true, notes: 'UK-Thailand treaty provides relief from double taxation. Different rules for employment vs investment income.' },
            DE: { name: 'Germany', hasCredit: true, notes: 'Germany-Thailand treaty includes provisions for pensions and employment income.' },
            FR: { name: 'France', hasCredit: true, notes: 'France-Thailand treaty covers most income types with credit method.' },
            JP: { name: 'Japan', hasCredit: true, notes: 'Japan-Thailand treaty allows tax credits and has specific dividend/interest rates.' },
            AU: { name: 'Australia', hasCredit: true, notes: 'Australia-Thailand treaty provides comprehensive double tax relief.' },
            SG: { name: 'Singapore', hasCredit: true, notes: 'Singapore-Thailand treaty. Note: Singapore has no capital gains tax.' },
            HK: { name: 'Hong Kong', hasCredit: true, notes: 'Hong Kong-Thailand treaty covers limited income types.' },
            AE: { name: 'UAE', hasCredit: false, notes: 'No tax treaty with Thailand. UAE has no income tax, so no foreign tax credit available.' },
            MY: { name: 'Malaysia', hasCredit: true, notes: 'Malaysia-Thailand treaty provides standard double tax relief.' },
            NL: { name: 'Netherlands', hasCredit: true, notes: 'Netherlands-Thailand treaty with comprehensive coverage.' },
            CH: { name: 'Switzerland', hasCredit: true, notes: 'Switzerland-Thailand treaty includes specific rates for dividends and interest.' },
            CA: { name: 'Canada', hasCredit: true, notes: 'Canada-Thailand treaty allows foreign tax credits.' },
            NZ: { name: 'New Zealand', hasCredit: true, notes: 'New Zealand-Thailand treaty provides double tax relief.' },
            'other-treaty': { name: 'Other Treaty Country', hasCredit: true, notes: 'Thailand has treaties with 60+ countries. Check specific treaty provisions.' },
            'no-treaty': { name: 'No Treaty', hasCredit: false, notes: 'Without a tax treaty, you may face double taxation. Limited relief options available.' }
        };

        // Format currency
        function formatTHB(amount) {
            return new Intl.NumberFormat('th-TH', {
                style: 'currency',
                currency: 'THB',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }

        // Calculate progressive tax
        function calculateProgressiveTax(taxableIncome) {
            let totalTax = 0;
            let breakdown = [];

            for (const bracket of TAX_BRACKETS) {
                if (taxableIncome <= bracket.min) break;

                const taxableInBracket = Math.min(taxableIncome - bracket.min, bracket.max - bracket.min);
                const taxInBracket = taxableInBracket * bracket.rate;

                if (taxableInBracket > 0) {
                    breakdown.push({
                        min: bracket.min,
                        max: Math.min(bracket.max, taxableIncome),
                        rate: bracket.rate,
                        amount: taxableInBracket,
                        tax: taxInBracket
                    });
                    totalTax += taxInBracket;
                }
            }

            return { totalTax, breakdown };
        }

        // Tab switching
        function showTab(tabName) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            document.querySelector(`[onclick="showTab('${tabName}')"]`).classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }

        // Toggle actual expenses field
        document.getElementById('expense-deduction').addEventListener('change', function() {
            const actualGroup = document.getElementById('actual-expenses-group');
            actualGroup.style.display = this.value === 'actual' ? 'block' : 'none';
        });

        // Income Tax Form
        document.getElementById('income-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const isResident = document.querySelector('input[name="residency"]:checked').value === 'resident';
            const thaiIncome = parseFloat(document.getElementById('thai-income').value) || 0;
            const foreignIncome = parseFloat(document.getElementById('foreign-income').value) || 0;
            const foreignCurrency = document.getElementById('foreign-currency').value;
            const exchangeRate = parseFloat(document.getElementById('exchange-rate').value) || EXCHANGE_RATES[foreignCurrency];

            // Convert foreign income to THB
            const foreignIncomeTHB = foreignIncome * exchangeRate;
            const totalIncome = thaiIncome + (isResident ? foreignIncomeTHB : 0);

            // Calculate expense deduction
            const expenseMethod = document.getElementById('expense-deduction').value;
            let expenseDeduction;
            if (expenseMethod === 'standard') {
                expenseDeduction = Math.min(totalIncome * 0.5, 100000);
            } else {
                expenseDeduction = parseFloat(document.getElementById('actual-expenses').value) || 0;
            }

            // Calculate allowances
            let allowances = 60000; // Personal allowance always included
            let allowanceDetails = ['Personal: 60,000'];

            if (document.getElementById('ded-spouse').checked) {
                allowances += 60000;
                allowanceDetails.push('Spouse: 60,000');
            }

            if (document.getElementById('ded-children').checked) {
                const children = parseInt(document.getElementById('ded-children-count').value) || 0;
                const childAllowance = children * 30000;
                allowances += childAllowance;
                if (children > 0) allowanceDetails.push(`Children: ${childAllowance.toLocaleString()}`);
            }

            if (document.getElementById('ded-parents').checked) {
                const parents = Math.min(parseInt(document.getElementById('ded-parents-count').value) || 0, 4);
                const parentAllowance = parents * 30000;
                allowances += parentAllowance;
                if (parents > 0) allowanceDetails.push(`Parents: ${parentAllowance.toLocaleString()}`);
            }

            
            if (document.getElementById('ded-life-insurance').checked) {
                const amt = Math.min(parseFloat(document.getElementById('ded-life-insurance-amount').value) || 0, 100000);
                if (amt > 0) {
                    allowances += amt;
                    allowanceDetails.push(`Life Insurance: ${amt.toLocaleString()}`);
                }
            }

            if (document.getElementById('ded-health-insurance').checked) {
                const amt = Math.min(parseFloat(document.getElementById('ded-health-insurance-amount').value) || 0, 25000);
                if (amt > 0) {
                    allowances += amt;
                    allowanceDetails.push(`Health Insurance: ${amt.toLocaleString()}`);
                }
            }

            // Retirement deductions (simplified cap logic)
            let ssfDeduction = 0;
            if (document.getElementById('ded-ssf').checked) {
                const raw = parseFloat(document.getElementById('ded-ssf-amount').value) || 0;
                ssfDeduction = Math.min(raw, 200000, totalIncome * 0.30);
            }

            let rmfDeduction = 0;
            if (document.getElementById('ded-rmf') && document.getElementById('ded-rmf').checked) {
                const raw = parseFloat(document.getElementById('ded-rmf-amount').value) || 0;
                rmfDeduction = Math.min(raw, totalIncome * 0.30);
            }

            // Combined statutory cap (simplified): 500,000 for SSF + RMF/other retirement
            if (ssfDeduction + rmfDeduction > 500000) {
                rmfDeduction = Math.max(0, 500000 - ssfDeduction);
            }

            if (ssfDeduction > 0) {
                allowances += ssfDeduction;
                allowanceDetails.push(`SSF: ${ssfDeduction.toLocaleString()}`);
            }
            if (rmfDeduction > 0) {
                allowances += rmfDeduction;
                allowanceDetails.push(`RMF/Retirement: ${rmfDeduction.toLocaleString()}`);
            }

if (document.getElementById('ded-social-security').checked) {
                allowances += 9000;
                allowanceDetails.push('Social Security: 9,000');
            }

            // Calculate taxable income
            const taxableIncome = Math.max(0, totalIncome - expenseDeduction - allowances);

            // Calculate tax
            const { totalTax, breakdown } = calculateProgressiveTax(taxableIncome);

            // Calculate effective rate
            const effectiveRate = totalIncome > 0 ? (totalTax / totalIncome * 100) : 0;

            // Non-resident calculation (Thai income only at 15%)
            const nonResidentTax = thaiIncome * 0.15;
            const { totalTax: residentTax } = calculateProgressiveTax(Math.max(0, thaiIncome + foreignIncomeTHB - expenseDeduction - allowances));

            // Display results
            document.getElementById('result-residency-status').textContent = isResident ? 'tax resident' : 'non-resident';
            document.getElementById('result-thai-income').textContent = formatTHB(thaiIncome);
            document.getElementById('result-foreign-income').textContent = formatTHB(foreignIncomeTHB);
            document.getElementById('result-total-income').textContent = formatTHB(totalIncome);
            document.getElementById('expense-method-display').textContent = expenseMethod === 'standard' ? 'Standard 50% (max 100,000)' : 'Actual Expenses';
            document.getElementById('result-expense-deduction').textContent = '-' + formatTHB(expenseDeduction);
            document.getElementById('allowances-detail').textContent = allowanceDetails.join(', ');
            document.getElementById('result-allowances').textContent = '-' + formatTHB(allowances);
            document.getElementById('result-taxable-income').textContent = formatTHB(taxableIncome);
            document.getElementById('result-total-tax').textContent = formatTHB(totalTax);
            document.getElementById('result-effective-rate').textContent = effectiveRate.toFixed(2) + '%';

            // Build bracket visualization
            const bracketBar = document.getElementById('bracket-bar');
            const bracketLegend = document.getElementById('bracket-legend');
            const bracketBreakdown = document.getElementById('bracket-breakdown');

            bracketBar.innerHTML = '';
            bracketLegend.innerHTML = '';
            bracketBreakdown.innerHTML = '';

            if (breakdown.length > 0) {
                const totalAmount = breakdown.reduce((sum, b) => sum + b.amount, 0);

                breakdown.forEach(b => {
                    const widthPct = (b.amount / totalAmount * 100);
                    const rateClass = 'rate-' + (b.rate * 100);

                    bracketBar.innerHTML += `<div class="bracket-segment ${rateClass}" style="width: ${widthPct}%">${(b.rate * 100)}%</div>`;

                    bracketBreakdown.innerHTML += `
                        <div class="breakdown-row">
                            <span class="breakdown-label">${formatTHB(b.min)} - ${formatTHB(b.max)}<small>@ ${(b.rate * 100)}%</small></span>
                            <span class="breakdown-value">${formatTHB(b.tax)}</span>
                        </div>
                    `;
                });

                const legendItems = [
                    { rate: 0, color: '#10b981' },
                    { rate: 5, color: '#3b82f6' },
                    { rate: 10, color: '#8b5cf6' },
                    { rate: 15, color: '#f59e0b' },
                    { rate: 20, color: '#f97316' },
                    { rate: 25, color: '#ef4444' },
                    { rate: 30, color: '#dc2626' },
                    { rate: 35, color: '#991b1b' }
                ];

                legendItems.forEach(item => {
                    bracketLegend.innerHTML += `
                        <div class="legend-item">
                            <div class="legend-color" style="background: ${item.color}"></div>
                            <span>${item.rate}%</span>
                        </div>
                    `;
                });
            }

            // Comparison
            document.getElementById('compare-resident-income').textContent = formatTHB(taxableIncome);
            document.getElementById('compare-resident-tax').textContent = formatTHB(residentTax);
            document.getElementById('compare-nonresident-income').textContent = formatTHB(thaiIncome);
            document.getElementById('compare-nonresident-tax').textContent = formatTHB(nonResidentTax);

            // Notes
            const notes = document.getElementById('result-notes');
            notes.innerHTML = '';

            if (isResident && foreignIncomeTHB > 0) {
                notes.innerHTML += '<li>As a tax resident, your foreign income remitted to Thailand is taxable under 2024 rules.</li>';
            }

            if (!isResident) {
                notes.innerHTML += '<li>As a non-resident, only Thailand-sourced income is taxable at a flat 15% withholding rate.</li>';
            }

            if (taxableIncome <= 150000) {
                notes.innerHTML += '<li>Your taxable income falls within the 0% tax bracket - no income tax due!</li>';
            }

            if (effectiveRate > 0) {
                notes.innerHTML += `<li>Your effective tax rate is ${effectiveRate.toFixed(2)}%, which accounts for all deductions and progressive brackets.</li>`;
            }

            notes.innerHTML += '<li>Filing deadline: typically March 31 for paper filing, and April 8 for e-filing (following year) (check Revenue Department announcements for extensions).</li>';

            // Show results
            document.getElementById('income-results').classList.add('active');
            document.getElementById('income-form').style.display = 'none';
            document.getElementById('income-results').scrollIntoView({ behavior: 'smooth' });
        });

        // Remittance Form
        document.getElementById('remittance-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const remitAmount = parseFloat(document.getElementById('remit-amount').value) || 0;
            const remitCurrency = document.getElementById('remit-currency').value;
            const exchangeRate = parseFloat(document.getElementById('remit-exchange').value) || EXCHANGE_RATES[remitCurrency];
            const incomeYear = document.getElementById('income-year').value;
            const incomeType = document.getElementById('income-type').value;
            const treatyCountry = document.getElementById('treaty-country').value;
            const foreignTaxPaid = parseFloat(document.getElementById('foreign-tax-paid').value) || 0;

            const remitTHB = remitAmount * exchangeRate;
            const foreignTaxPaidTHB = foreignTaxPaid * exchangeRate;

            // Calculate potential Thai tax (using progressive rates as estimate)
            let potentialThaiTax = 0;
// Simplified interpretation for this tool: the tax-on-remittance rule applies to foreign income derived from 1 Jan 2024 onward.
// If the income was derived before 2024 and is remitted in/after 2024, it is generally treated under the prior rule (often not taxable unless remitted in the same year earned).
if (incomeYear === '2024') {
    potentialThaiTax = calculateProgressiveTax(remitTHB).totalTax;
} else {
    potentialThaiTax = 0;
}

            // Foreign tax credit (limited to Thai tax on that income)
            const foreignTaxCredit = Math.min(foreignTaxPaidTHB, potentialThaiTax);
            const netThaiTax = Math.max(0, potentialThaiTax - foreignTaxCredit);

            // Get treaty info
            const treatyInfo = TAX_TREATIES[treatyCountry] || { name: 'Unknown', hasCredit: false, notes: 'Please select a country.' };

            // Income type display
            const incomeTypeLabels = {
                'employment': 'Employment Income',
                'business': 'Business/Self-Employment',
                'investment': 'Investment Income',
                'capital-gains': 'Capital Gains',
                'pension': 'Pension/Retirement',
                'rental': 'Rental Income'
            };

            // Display results
            document.getElementById('remit-result-amount').textContent = formatTHB(remitTHB);
            document.getElementById('remit-result-type').textContent = incomeTypeLabels[incomeType];
            document.getElementById('remit-result-treaty').textContent = treatyInfo.name + (treatyInfo.hasCredit ? ' (Treaty)' : ' (No Treaty)');
            document.getElementById('remit-result-thai-tax').textContent = formatTHB(potentialThaiTax);
            document.getElementById('remit-result-credit').textContent = '-' + formatTHB(foreignTaxCredit);
            document.getElementById('remit-result-net-tax').textContent = formatTHB(netThaiTax);

            // Treaty details
            let treatyDetails = treatyInfo.notes;

            if (incomeYear === 'before2023') {
                treatyDetails += ' Note: Income earned before 2023 that was not remitted in the same year it was earned may have been tax-free under the old rules. However, the 2024 changes apply to all remittances regardless of when earned.';
            }

            if (incomeType === 'capital-gains' && treatyCountry === 'SG') {
                treatyDetails += ' Singapore does not tax capital gains, so there may be no foreign tax credit available for capital gains income.';
            }

            if (incomeType === 'pension') {
                treatyDetails += ' Pension income often has special provisions in tax treaties. Some treaties allow the source country to tax pensions while others give taxation rights to the residence country.';
            }

            document.getElementById('remit-treaty-details').textContent = treatyDetails;

            // Show results
            document.getElementById('remittance-results').classList.add('active');
            document.getElementById('remittance-form').style.display = 'none';
            document.getElementById('remittance-results').scrollIntoView({ behavior: 'smooth' });
        });

        // LTR Form
        document.getElementById('ltr-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const category = document.getElementById('ltr-category').value;
            const thaiIncome = parseFloat(document.getElementById('ltr-thai-income').value) || 0;
            const foreignIncome = parseFloat(document.getElementById('ltr-foreign-income').value) || 0;
            const totalIncome = thaiIncome + foreignIncome;

            let ltrThaiTax = 0;
            let ltrForeignTax = 0;

            // LTR tax calculation based on category
            switch (category) {
                case 'professional':
                    // 17% flat rate on Thai income
                    ltrThaiTax = thaiIncome * 0.17;
                    // Foreign income still taxed at progressive rates if remitted
                    const { totalTax: foreignProgressive } = calculateProgressiveTax(foreignIncome);
                    ltrForeignTax = foreignProgressive;
                    break;
                case 'wealthy-citizen':
                case 'wealthy-pensioner':
                    // Foreign income exempt
                    const { totalTax: thaiProgressive } = calculateProgressiveTax(thaiIncome);
                    ltrThaiTax = thaiProgressive;
                    ltrForeignTax = 0;
                    break;
                case 'remote-worker':
                    // Work-from-Thailand Professionals: foreign-sourced income is generally exempt under the LTR program (simplified)
                    const { totalTax: remoteThaiTax } = calculateProgressiveTax(thaiIncome);
                    ltrThaiTax = remoteThaiTax;
                    ltrForeignTax = 0;
                    break;
            }

            const ltrTotal = ltrThaiTax + ltrForeignTax;

            // Standard tax calculation (without LTR)
            const { totalTax: standardThaiTax } = calculateProgressiveTax(thaiIncome);
            const { totalTax: standardForeignTax } = calculateProgressiveTax(foreignIncome);
            const standardTotal = standardThaiTax + standardForeignTax;

            // Savings
            const savings = standardTotal - ltrTotal;
            const savingsPct = standardTotal > 0 ? (savings / standardTotal * 100) : 0;

            // Display results
            document.getElementById('ltr-with-thai-tax').textContent = formatTHB(ltrThaiTax);
            document.getElementById('ltr-with-foreign-tax').textContent = formatTHB(ltrForeignTax);
            document.getElementById('ltr-with-total').textContent = formatTHB(ltrTotal);

            document.getElementById('ltr-without-thai-tax').textContent = formatTHB(standardThaiTax);
            document.getElementById('ltr-without-foreign-tax').textContent = formatTHB(standardForeignTax);
            document.getElementById('ltr-without-total').textContent = formatTHB(standardTotal);

            document.getElementById('ltr-savings').textContent = formatTHB(savings);
            document.getElementById('ltr-savings-pct').textContent = savingsPct.toFixed(1) + '%';

            // Show results
            document.getElementById('ltr-results').classList.add('active');
            document.getElementById('ltr-form').style.display = 'none';
            document.getElementById('ltr-results').scrollIntoView({ behavior: 'smooth' });
        });

        // Reset functions
        function resetIncomeForm() {
            document.getElementById('income-form').reset();
            document.getElementById('income-form').style.display = 'block';
            document.getElementById('income-results').classList.remove('active');
            document.getElementById('actual-expenses-group').style.display = 'none';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function resetRemittanceForm() {
            document.getElementById('remittance-form').reset();
            document.getElementById('remittance-form').style.display = 'block';
            document.getElementById('remittance-results').classList.remove('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function resetLTRForm() {
            document.getElementById('ltr-form').reset();
            document.getElementById('ltr-form').style.display = 'block';
            document.getElementById('ltr-results').classList.remove('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Update exchange rate when currency changes
        document.getElementById('foreign-currency').addEventListener('change', function() {
            document.getElementById('exchange-rate').value = EXCHANGE_RATES[this.value] || 35.00;
        });

        document.getElementById('remit-currency').addEventListener('change', function() {
            document.getElementById('remit-exchange').value = EXCHANGE_RATES[this.value] || 35.00;
        });


        // Link deduction checkboxes to their amount inputs (so the calculator doesn't assume the max)
        function linkCheckboxToInput(cbId, inputId) {
            const cb = document.getElementById(cbId);
            const input = document.getElementById(inputId);
            if (!cb || !input) return;
            const update = () => {
                input.disabled = !cb.checked;
                if (!cb.checked) input.value = 0;
            };
            cb.addEventListener('change', update);
            update();
        }

        linkCheckboxToInput('ded-life-insurance', 'ded-life-insurance-amount');
        linkCheckboxToInput('ded-health-insurance', 'ded-health-insurance-amount');
        linkCheckboxToInput('ded-ssf', 'ded-ssf-amount');
        linkCheckboxToInput('ded-rmf', 'ded-rmf-amount');

    </script>
</body>
</html>
