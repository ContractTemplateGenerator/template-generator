<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Training Data License Agreement Generator | terms.law</title>
    <style>
        /* Global Styles */
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #4f46e5;
            --secondary-dark: #4338ca;
            --accent: #e11d48;
            --accent-dark: #be123c;
            --gray-50: #f8fafc;
            --gray-100: #f1f5f9;
            --gray-200: #e2e8f0;
            --gray-300: #cbd5e1;
            --gray-400: #94a3b8;
            --gray-500: #64748b;
            --gray-600: #475569;
            --gray-700: #334155;
            --gray-800: #1e293b;
            --gray-900: #0f172a;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: var(--gray-800);
            background-color: var(--gray-50);
            padding: 20px;
        }
        
        /* Container */
        #app {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        /* Header Styles */
        .header {
            padding: 1.75rem;
            background-color: var(--gray-100);
            border-bottom: 1px solid var(--gray-200);
        }
        
        .header h1 {
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 0.5rem;
        }
        
        .header p {
            color: var(--gray-600);
            font-size: 1rem;
        }
        
        /* Tab Navigation */
        .tabs {
            display: flex;
            padding: 0 1rem;
            background-color: var(--gray-100);
            border-bottom: 1px solid var(--gray-200);
            overflow-x: auto;
            white-space: nowrap;
        }
        
        .tab-btn {
            padding: 0.75rem 1rem;
            background: none;
            border: none;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--gray-600);
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
        }
        
        .tab-btn:hover {
            color: var(--gray-800);
        }
        
        .tab-btn.active {
            color: var(--secondary);
        }
        
        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--secondary);
        }
        
        /* Main Content */
        .content {
            display: flex;
            min-height: 500px;
        }
        
        .form-panel {
            flex: 1;
            padding: 1.5rem;
            border-right: 1px solid var(--gray-200);
            overflow-y: auto;
            max-height: 600px;
        }
        
        .preview-panel {
            flex: 1;
            padding: 1.5rem;
            background-color: var(--gray-50);
            overflow-y: auto;
            max-height: 600px;
        }
        
        .form-panel h2, .preview-panel h2 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1.25rem;
            color: var(--gray-800);
        }
        
        /* Form Elements */
        .form-section {
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--gray-200);
        }
        
        .form-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .form-section h3 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--gray-700);
        }
        
        .form-row {
            margin-bottom: 1rem;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--gray-700);
        }
        
        .form-group small {
            display: block;
            margin-top: 0.25rem;
            font-size: 0.75rem;
            color: var(--gray-500);
        }
        
        .form-control {
            width: 100%;
            padding: 0.5rem 0.75rem;
            font-size: 0.95rem;
            line-height: 1.5;
            border: 1px solid var(--gray-300);
            border-radius: 0.375rem;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
        
        .form-control:focus {
            border-color: var(--secondary);
            outline: 0;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2);
        }
        
        select.form-control {
            -webkit-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748b'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1em;
            padding-right: 2.5rem;
        }
        
        .form-group.inline {
            display: flex;
            gap: 1rem;
        }
        
        .form-group.inline > div {
            flex: 1;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .checkbox-group input[type="checkbox"] {
            margin-right: 0.5rem;
        }
        
        /* Preview Content */
        .preview-content {
            background-color: white;
            padding: 2rem;
            border-radius: 0.375rem;
            border: 1px solid var(--gray-300);
            font-family: 'Times New Roman', Times, serif;
            font-size: 0.95rem;
            line-height: 1.5;
            white-space: pre-wrap;
            height: calc(100% - 50px);
            overflow-y: auto;
        }
        
        .preview-content h3 {
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
        }
        
        .highlighted {
            background-color: #fff9c4;
            padding: 2px 0;
            transition: background-color 0.5s ease-in-out;
        }
        
        /* Footer & Buttons */
        .footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            background-color: var(--gray-100);
            border-top: 1px solid var(--gray-200);
        }
        
        .nav-buttons {
            display: flex;
            gap: 0.75rem;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem 1rem;
            font-size: 0.95rem;
            font-weight: 500;
            line-height: 1.5;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            cursor: pointer;
            user-select: none;
            border: 1px solid transparent;
            border-radius: 0.375rem;
            transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
        
        .btn-primary {
            color: white;
            background-color: var(--primary);
            border-color: var(--primary);
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
            border-color: var(--primary-dark);
        }
        
        .btn-secondary {
            color: white;
            background-color: var(--secondary);
            border-color: var(--secondary);
        }
        
        .btn-secondary:hover {
            background-color: var(--secondary-dark);
            border-color: var(--secondary-dark);
        }
        
        .btn-accent {
            color: white;
            background-color: var(--accent);
            border-color: var(--accent);
        }
        
        .btn-accent:hover {
            background-color: var(--accent-dark);
            border-color: var(--accent-dark);
        }
        
        .btn-outline {
            color: var(--gray-700);
            background-color: transparent;
            border-color: var(--gray-300);
        }
        
        .btn-outline:hover {
            background-color: var(--gray-100);
        }
        
        .btn-icon {
            margin-right: 0.375rem;
            width: 1rem;
            height: 1rem;
        }
        
        .btn-prev .btn-icon {
            margin-right: 0.375rem;
            margin-left: 0;
        }
        
        .btn-next .btn-icon {
            margin-left: 0.375rem;
            margin-right: 0;
        }
        
        .btn.disabled {
            opacity: 0.65;
            pointer-events: none;
        }
        
        /* Risk Assessment */
        .risk-item {
            margin-bottom: 1rem;
            padding: 1rem;
            border-radius: 0.375rem;
        }
        
        .risk-high {
            background-color: rgba(254, 202, 202, 0.6);
            border-left: 4px solid #ef4444;
        }
        
        .risk-medium {
            background-color: rgba(254, 240, 138, 0.6);
            border-left: 4px solid #eab308;
        }
        
        .risk-low {
            background-color: rgba(187, 247, 208, 0.6);
            border-left: 4px solid #22c55e;
        }
        
        .risk-item h4 {
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }
        
        .risk-item p {
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }
        
        .risk-item .recommendation {
            font-style: italic;
            margin-top: 0.5rem;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="header">
            <h1>AI Training Data License Agreement Generator</h1>
            <p>Create a customized agreement for licensing data for AI model training purposes</p>
        </div>
        
        <div class="tabs">
            <button class="tab-btn active" data-tab="0">1. Parties</button>
            <button class="tab-btn" data-tab="1">2. License Terms</button>
            <button class="tab-btn" data-tab="2">3. Data Usage</button>
            <button class="tab-btn" data-tab="3">4. Compensation</button>
            <button class="tab-btn" data-tab="4">5. Legal Terms</button>
            <button class="tab-btn" data-tab="5">6. Finalization</button>
        </div>
        
        <div class="content">
            <div class="form-panel" id="form-container">
                <!-- Tab content will be dynamically inserted here -->
            </div>
            
            <div class="preview-panel">
                <h2>Live Preview</h2>
                <div class="preview-content" id="preview-content"></div>
            </div>
        </div>
        
        <div class="footer">
            <div class="nav-buttons">
                <button class="btn btn-outline btn-prev" id="prev-btn">
                    <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                    Previous
                </button>
            </div>
            
            <div class="nav-buttons">
                <button class="btn btn-secondary" id="copy-btn">
                    <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                    </svg>
                    Copy
                </button>
                
                <button class="btn btn-primary" id="download-btn">
                    <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10 9 9 9 8 9"></polyline>
                    </svg>
                    Download
                </button>
                
                <button class="btn btn-accent" id="consult-btn">
                    <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    Consult
                </button>
                
                <button class="btn btn-primary btn-next" id="next-btn">
                    Next
                    <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="9 18 15 12 9 6"></polyline>
                    </svg>
                </button>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // State management
            const state = {
                currentTab: 0,
                lastChanged: null,
                formData: {
                    // Basic Info
                    licensorName: 'ABC Data Corp',
                    licensorEntity: 'Corporation',
                    licensorAddress: '123 Data Street, San Francisco',
                    licensorState: 'California',
                    licenseeCompany: 'XYZ AI Solutions',
                    licenseeEntity: 'Limited Liability Company',
                    licenseeAddress: '456 Tech Avenue, Seattle',
                    licenseeState: 'Washington',
                    effectiveDate: '',
                    
                    // License Terms
                    licenseType: 'non-exclusive',
                    sublicensing: 'not-permitted',
                    dataTypes: {
                        text: true,
                        images: true,
                        audio: false,
                        video: false,
                        userGenerated: true,
                        proprietaryContent: false
                    },
                    
                    // Data Usage
                    purposeRestrictions: 'specific-models',
                    modelTypes: {
                        generativeText: true,
                        generativeImage: false,
                        classTrain: false,
                        dataAnalytics: false,
                        customizedSpecific: false
                    },
                    ownershipModels: 'licensee-owns',
                    attributionRequired: 'no',
                    
                    // Compensation
                    compensationType: 'one-time',
                    initialFee: '50000',
                    royaltyPercent: '5',
                    minimumGuarantee: '10000',
                    term: '3',
                    termUnit: 'years',
                    terminationRights: 'both-parties',
                    
                    // Legal Terms
                    licensorWarranty: 'limited',
                    rightsToClaim: 'all-necessary-rights',
                    dataComplianceWarranty: true,
                    indemnification: 'mutual',
                    liabilityLimit: 'fees-paid',
                    
                    // Document options
                    fileName: 'AI-Training-Data-License-Agreement'
                }
            };
            
            // Tab templates
            const tabTemplates = [
                // Tab 0: Basic Info
                function() {
                    return `
                        <h2>Parties & Basic Information</h2>
                        
                        <div class="form-section">
                            <h3>Licensor (Data Owner) Details</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="licensorName">Licensor Name:</label>
                                    <input type="text" id="licensorName" name="licensorName" class="form-control" 
                                        value="${state.formData.licensorName}" placeholder="Company or entity providing the data">
                                </div>
                                
                                <div class="form-group">
                                    <label for="licensorEntity">Entity Type:</label>
                                    <select id="licensorEntity" name="licensorEntity" class="form-control">
                                        <option value="Corporation" ${state.formData.licensorEntity === 'Corporation' ? 'selected' : ''}>Corporation</option>
                                        <option value="Limited Liability Company" ${state.formData.licensorEntity === 'Limited Liability Company' ? 'selected' : ''}>Limited Liability Company (LLC)</option>
                                        <option value="Partnership" ${state.formData.licensorEntity === 'Partnership' ? 'selected' : ''}>Partnership</option>
                                        <option value="Sole Proprietorship" ${state.formData.licensorEntity === 'Sole Proprietorship' ? 'selected' : ''}>Sole Proprietorship</option>
                                        <option value="Individual" ${state.formData.licensorEntity === 'Individual' ? 'selected' : ''}>Individual</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="licensorAddress">Address:</label>
                                    <input type="text" id="licensorAddress" name="licensorAddress" class="form-control" 
                                        value="${state.formData.licensorAddress}" placeholder="Principal place of business">
                                </div>
                                
                                <div class="form-group">
                                    <label for="licensorState">State/Jurisdiction:</label>
                                    <input type="text" id="licensorState" name="licensorState" class="form-control" 
                                        value="${state.formData.licensorState}" placeholder="State or jurisdiction of incorporation">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3>Licensee (AI Developer) Details</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="licenseeCompany">Licensee Name:</label>
                                    <input type="text" id="licenseeCompany" name="licenseeCompany" class="form-control" 
                                        value="${state.formData.licenseeCompany}" placeholder="Company or entity using the data">
                                </div>
                                
                                <div class="form-group">
                                    <label for="licenseeEntity">Entity Type:</label>
                                    <select id="licenseeEntity" name="licenseeEntity" class="form-control">
                                        <option value="Corporation" ${state.formData.licenseeEntity === 'Corporation' ? 'selected' : ''}>Corporation</option>
                                        <option value="Limited Liability Company" ${state.formData.licenseeEntity === 'Limited Liability Company' ? 'selected' : ''}>Limited Liability Company (LLC)</option>
                                        <option value="Partnership" ${state.formData.licenseeEntity === 'Partnership' ? 'selected' : ''}>Partnership</option>
                                        <option value="Sole Proprietorship" ${state.formData.licenseeEntity === 'Sole Proprietorship' ? 'selected' : ''}>Sole Proprietorship</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="licenseeAddress">Address:</label>
                                    <input type="text" id="licenseeAddress" name="licenseeAddress" class="form-control" 
                                        value="${state.formData.licenseeAddress}" placeholder="Principal place of business">
                                </div>
                                
                                <div class="form-group">
                                    <label for="licenseeState">State/Jurisdiction:</label>
                                    <input type="text" id="licenseeState" name="licenseeState" class="form-control" 
                                        value="${state.formData.licenseeState}" placeholder="State or jurisdiction of incorporation">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="effectiveDate">Effective Date:</label>
                                    <input type="date" id="effectiveDate" name="effectiveDate" class="form-control" value="${state.formData.effectiveDate}">
                                    <small>If left blank, the agreement will use the current date.</small>
                                </div>
                            </div>
                        </div>
                    `;
                },
                
                // Tab 1: License Terms
                function() {
                    return `
                        <h2>License Terms</h2>
                        
                        <div class="form-section">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="licenseType">License Type:</label>
                                    <select id="licenseType" name="licenseType" class="form-control">
                                        <option value="non-exclusive" ${state.formData.licenseType === 'non-exclusive' ? 'selected' : ''}>Non-Exclusive (Licensor can license to others)</option>
                                        <option value="exclusive" ${state.formData.licenseType === 'exclusive' ? 'selected' : ''}>Exclusive (Only Licensee can use the data)</option>
                                        <option value="sole" ${state.formData.licenseType === 'sole' ? 'selected' : ''}>Sole (Licensor can use but not license to others)</option>
                                    </select>
                                    <small>Non-exclusive is most common for AI training data.</small>
                                </div>
                                
                                <div class="form-group">
                                    <label for="sublicensing">Sublicensing Rights:</label>
                                    <select id="sublicensing" name="sublicensing" class="form-control">
                                        <option value="not-permitted" ${state.formData.sublicensing === 'not-permitted' ? 'selected' : ''}>Not Permitted</option>
                                        <option value="limited-permitted" ${state.formData.sublicensing === 'limited-permitted' ? 'selected' : ''}>Limited (Contractors/Service Providers Only)</option>
                                        <option value="permitted" ${state.formData.sublicensing === 'permitted' ? 'selected' : ''}>Fully Permitted</option>
                                    </select>
                                    <small>Controls whether the Licensee can share the data with others.</small>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3>Data Types Included</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="dataTypes.text" name="dataTypes.text" ${state.formData.dataTypes.text ? 'checked' : ''}>
                                        <label for="dataTypes.text">Text Data</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="dataTypes.images" name="dataTypes.images" ${state.formData.dataTypes.images ? 'checked' : ''}>
                                        <label for="dataTypes.images">Image Data</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="dataTypes.audio" name="dataTypes.audio" ${state.formData.dataTypes.audio ? 'checked' : ''}>
                                        <label for="dataTypes.audio">Audio Data</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="dataTypes.video" name="dataTypes.video" ${state.formData.dataTypes.video ? 'checked' : ''}>
                                        <label for="dataTypes.video">Video Data</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="dataTypes.userGenerated" name="dataTypes.userGenerated" ${state.formData.dataTypes.userGenerated ? 'checked' : ''}>
                                        <label for="dataTypes.userGenerated">User-Generated Content</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="dataTypes.proprietaryContent" name="dataTypes.proprietaryContent" ${state.formData.dataTypes.proprietaryContent ? 'checked' : ''}>
                                        <label for="dataTypes.proprietaryContent">Proprietary/Curated Content</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                },
                
                // Tab 2: Data Usage
                function() {
                    return `
                        <h2>Data Usage & Restrictions</h2>
                        
                        <div class="form-section">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="purposeRestrictions">Purpose Restrictions:</label>
                                    <select id="purposeRestrictions" name="purposeRestrictions" class="form-control">
                                        <option value="specific-models" ${state.formData.purposeRestrictions === 'specific-models' ? 'selected' : ''}>Specific Model Types Only</option>
                                        <option value="product-specific" ${state.formData.purposeRestrictions === 'product-specific' ? 'selected' : ''}>Licensee's Products Only</option>
                                        <option value="all-ai" ${state.formData.purposeRestrictions === 'all-ai' ? 'selected' : ''}>Any AI Systems (No Restrictions)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        ${state.formData.purposeRestrictions === 'specific-models' ? `
                        <div class="form-section">
                            <h3>Allowed Model Types</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="modelTypes.generativeText" name="modelTypes.generativeText" ${state.formData.modelTypes.generativeText ? 'checked' : ''}>
                                        <label for="modelTypes.generativeText">Generative Text Models</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="modelTypes.generativeImage" name="modelTypes.generativeImage" ${state.formData.modelTypes.generativeImage ? 'checked' : ''}>
                                        <label for="modelTypes.generativeImage">Generative Image Models</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="modelTypes.classTrain" name="modelTypes.classTrain" ${state.formData.modelTypes.classTrain ? 'checked' : ''}>
                                        <label for="modelTypes.classTrain">Classification/Prediction Models</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="modelTypes.dataAnalytics" name="modelTypes.dataAnalytics" ${state.formData.modelTypes.dataAnalytics ? 'checked' : ''}>
                                        <label for="modelTypes.dataAnalytics">Data Analytics Systems</label>
                                    </div>
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="modelTypes.customizedSpecific" name="modelTypes.customizedSpecific" ${state.formData.modelTypes.customizedSpecific ? 'checked' : ''}>
                                        <label for="modelTypes.customizedSpecific">Customized/Fine-tuned Models</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        ` : ''}
                        
                        <div class="form-section">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="ownershipModels">Ownership of Resulting AI Models:</label>
                                    <select id="ownershipModels" name="ownershipModels" class="form-control">
                                        <option value="licensee-owns" ${state.formData.ownershipModels === 'licensee-owns' ? 'selected' : ''}>Licensee Fully Owns</option>
                                        <option value="licensor-royalty" ${state.formData.ownershipModels === 'licensor-royalty' ? 'selected' : ''}>Licensee Owns (with Licensor Royalty Rights)</option>
                                        <option value="joint-ownership" ${state.formData.ownershipModels === 'joint-ownership' ? 'selected' : ''}>Joint Ownership</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="attributionRequired">Attribution Required:</label>
                                    <select id="attributionRequired" name="attributionRequired" class="form-control">
                                        <option value="no" ${state.formData.attributionRequired === 'no' ? 'selected' : ''}>No</option>
                                        <option value="yes" ${state.formData.attributionRequired === 'yes' ? 'selected' : ''}>Yes</option>
                                    </select>
                                    <small>Requires Licensee to credit Licensor in public materials.</small>
                                </div>
                            </div>
                        </div>
                    `;
                },
                
                // Tab 3: Compensation
                function() {
                    return `
                        <h2>Compensation & Term</h2>
                        
                        <div class="form-section">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="compensationType">Compensation Structure:</label>
                                    <select id="compensationType" name="compensationType" class="form-control">
                                        <option value="one-time" ${state.formData.compensationType === 'one-time' ? 'selected' : ''}>One-Time Fee</option>
                                        <option value="royalty" ${state.formData.compensationType === 'royalty' ? 'selected' : ''}>Royalty-Based</option>
                                        <option value="hybrid" ${state.formData.compensationType === 'hybrid' ? 'selected' : ''}>Hybrid (Initial Fee + Royalty)</option>
                                    </select>
                                </div>
                            </div>
                            
                            ${(state.formData.compensationType === 'one-time' || state.formData.compensationType === 'hybrid') ? `
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="initialFee">Initial Fee (USD):</label>
                                    <input type="text" id="initialFee" name="initialFee" class="form-control" 
                                        value="${state.formData.initialFee}" placeholder="e.g., 50000">
                                </div>
                            </div>
                            ` : ''}
                            
                            ${(state.formData.compensationType === 'royalty' || state.formData.compensationType === 'hybrid') ? `
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="royaltyPercent">Royalty Percentage (%):</label>
                                    <input type="text" id="royaltyPercent" name="royaltyPercent" class="form-control" 
                                        value="${state.formData.royaltyPercent}" placeholder="e.g., 5">
                                </div>
                                
                                <div class="form-group">
                                    <label for="minimumGuarantee">Minimum Annual Guarantee (USD):</label>
                                    <input type="text" id="minimumGuarantee" name="minimumGuarantee" class="form-control" 
                                        value="${state.formData.minimumGuarantee}" placeholder="e.g., 10000">
                                </div>
                            </div>
                            ` : ''}
                        </div>
                        
                        <div class="form-section">
                            <div class="form-row">
                                <div class="form-group inline">
                                    <div>
                                        <label for="term">Term Duration:</label>
                                        <input type="number" id="term" name="term" class="form-control" 
                                            value="${state.formData.term}" min="1" placeholder="e.g., 3">
                                    </div>
                                    <div>
                                        <label for="termUnit">Unit:</label>
                                        <select id="termUnit" name="termUnit" class="form-control">
                                            <option value="years" ${state.formData.termUnit === 'years' ? 'selected' : ''}>Years</option>
                                            <option value="months" ${state.formData.termUnit === 'months' ? 'selected' : ''}>Months</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="terminationRights">Termination Rights:</label>
                                    <select id="terminationRights" name="terminationRights" class="form-control">
                                        <option value="both-parties" ${state.formData.terminationRights === 'both-parties' ? 'selected' : ''}>Both Parties (for Breach)</option>
                                        <option value="licensor-only" ${state.formData.terminationRights === 'licensor-only' ? 'selected' : ''}>Licensor Only</option>
                                        <option value="licensee-only" ${state.formData.terminationRights === 'licensee-only' ? 'selected' : ''}>Licensee Only (Termination for Convenience)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    `;
                },
                
                // Tab 4: Legal Terms
                function() {
                    return `
                        <h2>Warranties & Legal Protections</h2>
                        
                        <div class="form-section">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="licensorWarranty">Licensor Warranty Level:</label>
                                    <select id="licensorWarranty" name="licensorWarranty" class="form-control">
                                        <option value="limited" ${state.formData.licensorWarranty === 'limited' ? 'selected' : ''}>Limited Warranty</option>
                                        <option value="as-is" ${state.formData.licensorWarranty === 'as-is' ? 'selected' : ''}>As-Is (No Warranty)</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="rightsToClaim">Rights to Data:</label>
                                    <select id="rightsToClaim" name="rightsToClaim" class="form-control">
                                        <option value="all-necessary-rights" ${state.formData.rightsToClaim === 'all-necessary-rights' ? 'selected' : ''}>All Necessary Rights</option>
                                        <option value="right-to-license" ${state.formData.rightsToClaim === 'right-to-license' ? 'selected' : ''}>Right to License Only</option>
                                    </select>
                                    <small>The warranty the Licensor makes about their rights to the data.</small>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="dataComplianceWarranty" name="dataComplianceWarranty" ${state.formData.dataComplianceWarranty ? 'checked' : ''}>
                                        <label for="dataComplianceWarranty">Include Data Compliance Warranty</label>
                                    </div>
                                    <small>Licensor warrants data was collected in compliance with laws.</small>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="indemnification">Indemnification:</label>
                                    <select id="indemnification" name="indemnification" class="form-control">
                                        <option value="mutual" ${state.formData.indemnification === 'mutual' ? 'selected' : ''}>Mutual Indemnification</option>
                                        <option value="licensee-only" ${state.formData.indemnification === 'licensee-only' ? 'selected' : ''}>Licensee Indemnifies Licensor</option>
                                        <option value="licensor-only" ${state.formData.indemnification === 'licensor-only' ? 'selected' : ''}>Licensor Indemnifies Licensee</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="liabilityLimit">Limitation of Liability:</label>
                                    <select id="liabilityLimit" name="liabilityLimit" class="form-control">
                                        <option value="fees-paid" ${state.formData.liabilityLimit === 'fees-paid' ? 'selected' : ''}>Limited to Fees Paid</option>
                                        <option value="no-consequential" ${state.formData.liabilityLimit === 'no-consequential' ? 'selected' : ''}>No Consequential Damages</option>
                                        <option value="both-limits" ${state.formData.liabilityLimit === 'both-limits' ? 'selected' : ''}>Both Limitations</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    `;
                },
                
                // Tab 5: Finalization
                function() {
                    // Generate risk assessment based on form data
                    const risks = [];
                    
                    // Check for empty required fields
                    if (!state.formData.licensorName || !state.formData.licensorAddress || !state.formData.licenseeCompany || !state.formData.licenseeAddress) {
                        risks.push({
                            level: 'high',
                            title: 'Missing Party Information',
                            description: 'Basic party information is incomplete. This could make the agreement unenforceable.',
                            recommendation: 'Complete all party information fields in the Basic Info tab.'
                        });
                    }
                    
                    // Check for data compliance warranties
                    if (!state.formData.dataComplianceWarranty) {
                        risks.push({
                            level: 'high',
                            title: 'No Data Compliance Warranty',
                            description: 'The agreement lacks warranties about data collection compliance, which could expose the Licensee to legal risks if the data was collected illegally.',
                            recommendation: 'Enable the data compliance warranty or ensure separate data compliance documentation exists.'
                        });
                    }
                    
                    // Check license type risks
                    if (state.formData.licenseType === 'exclusive' && state.formData.compensationType === 'one-time') {
                        risks.push({
                            level: 'medium',
                            title: 'Exclusive License with One-Time Fee',
                            description: 'An exclusive license with only a one-time fee may undervalue the data, especially if the AI models become highly profitable.',
                            recommendation: 'Consider a hybrid compensation model with both an initial fee and ongoing royalties.'
                        });
                    }
                    
                    // Check sublicensing risks
                    if (state.formData.sublicensing === 'permitted' && state.formData.compensationType !== 'royalty' && state.formData.compensationType !== 'hybrid') {
                        risks.push({
                            level: 'medium',
                            title: 'Unrestricted Sublicensing Without Royalties',
                            description: 'Allowing unrestricted sublicensing without royalty provisions means Licensor won't benefit from widespread use.',
                            recommendation: 'Either restrict sublicensing or implement a royalty structure that accounts for sublicensee revenue.'
                        });
                    }
                    
                    // Check for attribution
                    if (state.formData.licensorName && state.formData.attributionRequired === 'no') {
                        risks.push({
                            level: 'low',
                            title: 'No Attribution Requirement',
                            description: 'The agreement does not require attribution to the Licensor, which may limit brand exposure and recognition.',
                            recommendation: 'Consider requiring attribution in public-facing materials that reference the AI systems.'
                        });
                    }
                    
                    // If no risks found, add a "low risk" message
                    if (risks.length === 0) {
                        risks.push({
                            level: 'low',
                            title: 'No Major Risks Identified',
                            description: 'Based on your selections, no significant risks were identified in the agreement.',
                            recommendation: 'Always review the final agreement with legal counsel before signing.'
                        });
                    }
                    
                    // Generate risk assessment HTML
                    let riskHtml = '<div class="risk-assessment">';
                    risks.forEach(risk => {
                        riskHtml += `
                            <div class="risk-item risk-${risk.level}">
                                <h4>${risk.title}</h4>
                                <p>${risk.description}</p>
                                <p class="recommendation"><strong>Recommendation:</strong> ${risk.recommendation}</p>
                            </div>
                        `;
                    });
                    riskHtml += '</div>';
                    
                    return `
                        <h2>Risk Assessment & Finalization</h2>
                        
                        <div class="form-section">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="fileName">File Name:</label>
                                    <input type="text" id="fileName" name="fileName" class="form-control" 
                                        value="${state.formData.fileName}">
                                    <small>Used when downloading the document as MS Word.</small>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3>Risk Assessment</h3>
                            <p>Based on your selections, the following risks or issues have been identified:</p>
                            
                            ${riskHtml}
                        </div>
                        
                        <div class="form-section">
                            <h3>Next Steps</h3>
                            <p>Review the complete agreement in the preview pane. Once you're satisfied, you can download it as a Word document or copy to clipboard. For legal advice specific to your situation, click the "Consult" button to schedule a consultation with an attorney.</p>
                        </div>
                    `;
                }
            ];
            
            // Helper function to format date
            function formatDate(dateString) {
                if (!dateString) {
                    return new Date().toLocaleDateString('en-US');
                }
                return new Date(dateString).toLocaleDateString('en-US');
            }
            
            // Helper function to format lists
            function formatList(items, conjunction = 'and') {
                const filtered = Object.entries(items)
                    .filter(([, isSelected]) => isSelected)
                    .map(([key]) => {
                        // Convert camelCase to Title Case with spaces
                        return key
                            .replace(/([A-Z])/g, ' $1')
                            .replace(/^./, str => str.toUpperCase());
                    });
                
                if (filtered.length === 0) return 'None';
                if (filtered.length === 1) return filtered[0];
                
                return filtered.slice(0, -1).join(', ') + ` ${conjunction} ` + filtered.slice(-1);
            }
            
            // Generate agreement text based on form data
            function generateAgreementText() {
                // Helper function to capitalize first letter
                function capitalize(str) {
                    return str.charAt(0).toUpperCase() + str.slice(1);
                }
                
                let text = `AI TRAINING DATA LICENSE AGREEMENT

This AI Training Data License Agreement (the "Agreement") is entered into as of ${formatDate(state.formData.effectiveDate)} (the "Effective Date"), by and between:

${state.formData.licensorName || '[LICENSOR NAME]'}, a ${state.formData.licensorEntity.toLowerCase()} having its principal place of business at ${state.formData.licensorAddress || '[ADDRESS]'}, ${state.formData.licensorState || '[STATE/JURISDICTION]'} (the "Licensor"), and

${state.formData.licenseeCompany || '[LICENSEE NAME]'}, a ${state.formData.licenseeEntity.toLowerCase()} having its principal place of business at ${state.formData.licenseeAddress || '[ADDRESS]'}, ${state.formData.licenseeState || '[STATE/JURISDICTION]'} (the "Licensee").

WHEREAS, Licensor owns or controls certain data that may be useful for artificial intelligence training purposes; and

WHEREAS, Licensee desires to obtain a license to use such data for developing, training, and improving artificial intelligence systems and models; and

WHEREAS, Licensor is willing to grant such license subject to the terms and conditions set forth herein;

NOW, THEREFORE, in consideration of the mutual covenants contained herein and for other good and valuable consideration, the receipt and sufficiency of which are hereby acknowledged, the parties agree as follows:

1. DEFINITIONS

1.1 "Data" means the information, materials, text, images, or other content provided by Licensor to Licensee under this Agreement, specifically including ${formatList(state.formData.dataTypes, 'and')}.

1.2 "AI System" means any machine learning model, neural network, or artificial intelligence algorithm or software developed, trained, or improved using the Data.

1.3 "Training" means the process of using the Data to develop, test, improve, or otherwise inform the development of AI Systems.

2. LICENSE GRANT

2.1 Subject to the terms and conditions of this Agreement, Licensor hereby grants to Licensee a${state.formData.licenseType === 'exclusive' ? 'n' : ''} ${state.formData.licenseType}, ${state.formData.sublicensing === 'permitted' ? 'sublicensable, ' : ''}license during the Term to use the Data solely for the purpose of Training AI Systems as further specified in Section 3.

${state.formData.sublicensing === 'limited-permitted' ? 
`2.2 Licensee may sublicense the rights granted herein to its contractors and service providers solely for the purpose of Training AI Systems on behalf of Licensee, provided that Licensee ensures that all such sublicensees are bound by terms no less protective of Licensor's rights than the terms of this Agreement.` : 
state.formData.sublicensing === 'not-permitted' ? 
`2.2 Licensee shall not sublicense, distribute, sell, lease, or otherwise make the Data available to any third party without Licensor's prior written consent.` : ''}

3. PERMITTED USES AND RESTRICTIONS

${state.formData.purposeRestrictions === 'specific-models' ? 
`3.1 Permitted Uses. Licensee may use the Data solely for Training AI Systems in the following categories: ${formatList(state.formData.modelTypes, 'and')}.` : 
state.formData.purposeRestrictions === 'all-ai' ? 
`3.1 Permitted Uses. Licensee may use the Data for Training any AI Systems within Licensee's business operations.` : 
`3.1 Permitted Uses. Licensee may use the Data solely for Training AI Systems specifically for use in Licensee's products and services.`}

3.2 Prohibited Uses. Licensee shall not use the Data to Train AI Systems that are designed to: (a) generate deepfakes or impersonate specific individuals; (b) promote discrimination, harassment, or violence; (c) violate applicable laws or regulations; or (d) infringe upon third-party intellectual property or privacy rights.

${state.formData.attributionRequired === 'yes' ? 
`3.3 Attribution. Licensee shall provide attribution to Licensor in any public-facing documentation or marketing materials that reference AI Systems trained using the Data. The format of such attribution shall be: "Trained in part using data licensed from ${state.formData.licensorName || '[LICENSOR]'}."` : ''}

4. OWNERSHIP

${state.formData.ownershipModels === 'licensee-owns' ? 
`4.1 AI Systems. Licensee shall own all right, title, and interest in and to any AI Systems developed, trained, or improved using the Data, including all intellectual property rights therein. Licensor expressly disclaims any rights in AI Systems developed by Licensee.` : 
state.formData.ownershipModels === 'licensor-royalty' ? 
`4.1 AI Systems. Licensee shall own all right, title, and interest in and to any AI Systems developed, trained, or improved using the Data, subject to Licensor's rights to receive compensation as set forth in Section 5.` : 
`4.1 AI Systems. The parties shall jointly own all right, title, and interest in and to any AI Systems developed, trained, or improved using the Data, including all intellectual property rights therein, with each party having the right to use, license, and exploit such AI Systems without accounting to the other party.`}

4.2 Data. Licensor retains all right, title, and interest in and to the Data, including all intellectual property rights therein. Nothing in this Agreement shall be construed as a transfer or assignment of ownership in the Data to Licensee.

5. COMPENSATION

${state.formData.compensationType === 'one-time' ? 
`5.1 License Fee. In consideration for the license granted herein, Licensee shall pay Licensor a one-time fee of $${state.formData.initialFee || '0'} within thirty (30) days of the Effective Date.` : 
state.formData.compensationType === 'royalty' ? 
`5.1 Royalty. In consideration for the license granted herein, Licensee shall pay Licensor a royalty of ${state.formData.royaltyPercent || '0'}% of the Net Revenue derived from AI Systems trained using the Data. "Net Revenue" means gross revenue received by Licensee from the commercialization of AI Systems, less taxes, returns, and standard deductions.

5.2 Minimum Guarantee. Regardless of the actual royalties earned, Licensee guarantees a minimum payment to Licensor of $${state.formData.minimumGuarantee || '0'} per year during the Term.

5.3 Reporting. Licensee shall provide quarterly reports detailing the calculation of royalties due, along with payment of such royalties, within thirty (30) days after the end of each calendar quarter.` : 
`5.1 Initial Fee. Licensee shall pay Licensor an initial fee of $${state.formData.initialFee || '0'} within thirty (30) days of the Effective Date.

5.2 Royalty. In addition to the initial fee, Licensee shall pay Licensor a royalty of ${state.formData.royaltyPercent || '0'}% of the Net Revenue derived from AI Systems trained using the Data. "Net Revenue" means gross revenue received by Licensee from the commercialization of AI Systems, less taxes, returns, and standard deductions.

5.3 Minimum Guarantee. Regardless of the actual royalties earned, Licensee guarantees a minimum payment to Licensor of $${state.formData.minimumGuarantee || '0'} per year during the Term.

5.4 Reporting. Licensee shall provide quarterly reports detailing the calculation of royalties due, along with payment of such royalties, within thirty (30) days after the end of each calendar quarter.`}

6. TERM AND TERMINATION

6.1 Term. This Agreement shall commence on the Effective Date and continue for a period of ${state.formData.term || '1'} ${state.formData.termUnit || 'years'} (the "Term"), unless earlier terminated as provided herein.

${state.formData.terminationRights === 'both-parties' ? 
`6.2 Termination for Breach. Either party may terminate this Agreement upon written notice if the other party materially breaches any provision of this Agreement and fails to cure such breach within thirty (30) days after receiving written notice thereof.` : 
state.formData.terminationRights === 'licensor-only' ? 
`6.2 Termination for Breach. Licensor may terminate this Agreement upon written notice if Licensee materially breaches any provision of this Agreement and fails to cure such breach within thirty (30) days after receiving written notice thereof.` : 
`6.2 Termination for Convenience. Licensee may terminate this Agreement at any time upon thirty (30) days' written notice to Licensor.`}

6.3 Effect of Termination. Upon termination or expiration of this Agreement: (a) all rights granted to Licensee hereunder shall immediately terminate; (b) Licensee shall immediately cease all use of the Data; and (c) Licensee shall promptly return or destroy all copies of the Data in its possession or control, as directed by Licensor.

6.4 Survival. The following provisions shall survive the termination or expiration of this Agreement: Sections 4 (Ownership), 5 (Compensation) with respect to amounts accrued prior to termination, 7 (Representations and Warranties), 8 (Indemnification), 9 (Limitation of Liability), and 11 (General Provisions).

7. REPRESENTATIONS AND WARRANTIES

${state.formData.licensorWarranty === 'limited' ? 
`7.1 Licensor Warranties. Licensor represents and warrants that: (a) it has ${state.formData.rightsToClaim === 'all-necessary-rights' ? 'all necessary rights and authority to grant the licenses and rights granted herein' : 'the right to license the Data as specified in this Agreement'}; and (b) the Data does not infringe upon the intellectual property rights of any third party.` : 
`7.1 Disclaimer. THE DATA IS PROVIDED "AS IS" AND WITHOUT WARRANTIES OF ANY KIND. LICENSOR HEREBY DISCLAIMS ALL WARRANTIES, WHETHER EXPRESS, IMPLIED, STATUTORY, OR OTHERWISE, INCLUDING WITHOUT LIMITATION ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE, AND NON-INFRINGEMENT.`}

${state.formData.dataComplianceWarranty ? 
`7.2 Compliance with Laws. Licensor represents and warrants that the Data was collected in compliance with all applicable laws and regulations, including data protection and privacy laws, and that Licensor has all necessary rights, consents, and permissions to license the Data to Licensee for the purposes set forth in this Agreement.` : ''}

7.3 Licensee Warranties. Licensee represents and warrants that: (a) it will use the Data in compliance with all applicable laws and regulations; and (b) it will not use the Data in any manner that violates the rights of any third party.

8. INDEMNIFICATION

${state.formData.indemnification === 'mutual' ? 
`8.1 Mutual Indemnification. Each party shall indemnify, defend, and hold harmless the other party from and against any and all claims, damages, liabilities, costs, and expenses (including reasonable attorneys' fees) arising out of or related to: (a) any breach by the indemnifying party of its representations, warranties, or covenants under this Agreement; or (b) the indemnifying party's negligence or willful misconduct.` : 
state.formData.indemnification === 'licensee-only' ? 
`8.1 Licensee Indemnification. Licensee shall indemnify, defend, and hold harmless Licensor from and against any and all claims, damages, liabilities, costs, and expenses (including reasonable attorneys' fees) arising out of or related to: (a) Licensee's use of the Data; (b) any breach by Licensee of its representations, warranties, or covenants under this Agreement; or (c) Licensee's negligence or willful misconduct.` : 
`8.1 Licensor Indemnification. Licensor shall indemnify, defend, and hold harmless Licensee from and against any and all claims, damages, liabilities, costs, and expenses (including reasonable attorneys' fees) arising out of or related to: (a) any claim that the Data infringes upon the intellectual property rights of any third party; (b) any breach by Licensor of its representations, warranties, or covenants under this Agreement; or (c) Licensor's negligence or willful misconduct.`}

9. LIMITATION OF LIABILITY

${state.formData.liabilityLimit === 'fees-paid' ? 
`9.1 EXCEPT FOR OBLIGATIONS UNDER SECTION 8 (INDEMNIFICATION), IN NO EVENT SHALL EITHER PARTY'S AGGREGATE LIABILITY ARISING OUT OF OR RELATED TO THIS AGREEMENT EXCEED THE TOTAL AMOUNT PAID BY LICENSEE TO LICENSOR UNDER THIS AGREEMENT.` : 
state.formData.liabilityLimit === 'no-consequential' ? 
`9.1 EXCEPT FOR OBLIGATIONS UNDER SECTION 8 (INDEMNIFICATION), IN NO EVENT SHALL EITHER PARTY BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, INCLUDING WITHOUT LIMITATION DAMAGES FOR LOST PROFITS, LOSS OF USE, OR LOSS OF DATA, WHETHER IN AN ACTION IN CONTRACT, TORT, OR OTHERWISE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.` : 
`9.1 EXCEPT FOR OBLIGATIONS UNDER SECTION 8 (INDEMNIFICATION), IN NO EVENT SHALL EITHER PARTY'S AGGREGATE LIABILITY ARISING OUT OF OR RELATED TO THIS AGREEMENT EXCEED THE TOTAL AMOUNT PAID BY LICENSEE TO LICENSOR UNDER THIS AGREEMENT.

9.2 EXCEPT FOR OBLIGATIONS UNDER SECTION 8 (INDEMNIFICATION), IN NO EVENT SHALL EITHER PARTY BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, INCLUDING WITHOUT LIMITATION DAMAGES FOR LOST PROFITS, LOSS OF USE, OR LOSS OF DATA, WHETHER IN AN ACTION IN CONTRACT, TORT, OR OTHERWISE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.`}

10. CONFIDENTIALITY

10.1 Confidential Information. Each party acknowledges that it may receive confidential or proprietary information of the other party in the performance of this Agreement ("Confidential Information"). Each party shall maintain the confidentiality of the other party's Confidential Information using at least the same degree of care that it uses to protect its own confidential information, but in no event less than reasonable care.

10.2 Exclusions. Confidential Information shall not include information that: (a) is or becomes publicly available through no fault of the receiving party; (b) was in the receiving party's possession prior to its disclosure by the disclosing party; (c) is rightfully received by the receiving party from a third party without a duty of confidentiality; or (d) is independently developed by the receiving party without reference to the disclosing party's Confidential Information.

11. GENERAL PROVISIONS

11.1 Entire Agreement. This Agreement constitutes the entire agreement between the parties with respect to the subject matter hereof and supersedes all prior and contemporaneous agreements or communications.

11.2 Amendment. This Agreement may be amended only by a written document signed by both parties.

11.3 Assignment. Neither party may assign or transfer this Agreement without the prior written consent of the other party, except that either party may assign this Agreement in connection with a merger, acquisition, or sale of all or substantially all of its assets.

11.4 Governing Law. This Agreement shall be governed by and construed in accordance with the laws of ${state.formData.licensorState || '[STATE/JURISDICTION]'}, without regard to its conflict of laws principles.

11.5 Dispute Resolution. Any dispute arising out of or in connection with this Agreement shall be resolved through binding arbitration in accordance with the rules of the American Arbitration Association.

11.6 Notices. All notices under this Agreement shall be in writing and shall be deemed given when delivered personally, by email with confirmation of receipt, or by certified mail, return receipt requested, to the address set forth above or to such other address as may be specified in writing.

11.7 No Waiver. The failure of either party to enforce any provision of this Agreement shall not be construed as a waiver of such provision or the right to enforce such provision.

11.8 Severability. If any provision of this Agreement is found to be invalid or unenforceable, the remaining provisions shall remain in full force and effect.

11.9 Counterparts. This Agreement may be executed in counterparts, each of which shall be deemed an original, but all of which together shall constitute one and the same instrument.

IN WITNESS WHEREOF, the parties have executed this Agreement as of the Effective Date.

LICENSOR: ${state.formData.licensorName || '[LICENSOR NAME]'}

By: ____________________________
Name: _________________________
Title: __________________________

LICENSEE: ${state.formData.licenseeCompany || '[LICENSEE NAME]'}

By: ____________________________
Name: _________________________
Title: __________________________`;

                return text;
            }
            
            // Get page elements
            const formContainer = document.getElementById('form-container');
            const previewContent = document.getElementById('preview-content');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const copyBtn = document.getElementById('copy-btn');
            const downloadBtn = document.getElementById('download-btn');
            const consultBtn = document.getElementById('consult-btn');
            const tabButtons = document.querySelectorAll('.tab-btn');
            
            // Render the current tab
            function renderCurrentTab() {
                formContainer.innerHTML = tabTemplates[state.currentTab]();
                
                // Add event listeners to form inputs
                const inputs = formContainer.querySelectorAll('input, select');
                inputs.forEach(input => {
                    input.addEventListener('change', handleInputChange);
                });
                
                // Update tab buttons
                tabButtons.forEach((btn, index) => {
                    if (index === state.currentTab) {
                        btn.classList.add('active');
                    } else {
                        btn.classList.remove('active');
                    }
                });
                
                // Update navigation buttons
                if (state.currentTab === 0) {
                    prevBtn.classList.add('disabled');
                } else {
                    prevBtn.classList.remove('disabled');
                }
                
                if (state.currentTab === tabTemplates.length - 1) {
                    nextBtn.classList.add('disabled');
                } else {
                    nextBtn.classList.remove('disabled');
                }
                
                // Update preview
                updatePreview();
            }
            
            // Handle input changes
            function handleInputChange(e) {
                const input = e.target;
                const name = input.name;
                const value = input.type === 'checkbox' ? input.checked : input.value;
                
                state.lastChanged = name;
                
                // Handle nested object properties (e.g., dataTypes.text)
                if (name.includes('.')) {
                    const [parentKey, childKey] = name.split('.');
                    state.formData[parentKey] = {
                        ...state.formData[parentKey],
                        [childKey]: value
                    };
                } else {
                    state.formData[name] = value;
                }
                
                // Special case: handle purposeRestrictions changes to dynamically update form
                if (name === 'purposeRestrictions') {
                    renderCurrentTab();
                } else {
                    // Update preview
                    updatePreview();
                }
            }
            
            // Update preview content
            function updatePreview() {
                const text = generateAgreementText();
                
                // If nothing changed, just set the text
                if (!state.lastChanged) {
                    previewContent.innerText = text;
                    return;
                }
                
                // Find sections to highlight based on what changed
                let highlightedText = text;
                
                // Handle nested object properties (e.g., dataTypes.text)
                if (state.lastChanged.includes('.')) {
                    const [parentKey, childKey] = state.lastChanged.split('.');
                    
                    if (parentKey === 'dataTypes') {
                        // Find and highlight the data types list in Section 1.1
                        const dataTypes = formatList(state.formData.dataTypes, 'and');
                        const regex = new RegExp(`(1\\.1 "Data" means.+specifically including )(.+?)(\\.)`);
                        highlightedText = text.replace(regex, `$1<span class="highlighted">${ dataTypes }</span>$3`);
                    } else if (parentKey === 'modelTypes' && state.formData.purposeRestrictions === 'specific-models') {
                        // Find and highlight model types in Section 3.1
                        const modelTypes = formatList(state.formData.modelTypes, 'and');
                        const regex = new RegExp(`(3\\.1 Permitted Uses.+categories: )(.+?)(\\.)`);
                        highlightedText = text.replace(regex, `$1<span class="highlighted">${ modelTypes }</span>$3`);
                    }
                } else {
                    // Handle regular fields
                    const highlightPatterns = {
                        // Basic Info
                        licensorName: new RegExp(`(${state.formData.licensorName})`, 'g'),
                        licensorEntity: new RegExp(`(a ${state.formData.licensorEntity.toLowerCase()})`, 'g'),
                        licensorAddress: new RegExp(`(${state.formData.licensorAddress})`, 'g'),
                        licensorState: new RegExp(`(${state.formData.licensorState})`, 'g'),
                        licenseeCompany: new RegExp(`(${state.formData.licenseeCompany})`, 'g'),
                        licenseeEntity: new RegExp(`(a ${state.formData.licenseeEntity.toLowerCase()})`, 'g'),
                        licenseeAddress: new RegExp(`(${state.formData.licenseeAddress})`, 'g'),
                        licenseeState: new RegExp(`(${state.formData.licenseeState})`, 'g'),
                        
                        // License Terms
                        licenseType: new RegExp(`(${state.formData.licenseType})`, 'g'),
                        
                        // Compensation
                        initialFee: new RegExp(`(\\$${state.formData.initialFee})`, 'g'),
                        royaltyPercent: new RegExp(`(${state.formData.royaltyPercent}%)`, 'g'),
                        minimumGuarantee: new RegExp(`(\\$${state.formData.minimumGuarantee})`, 'g'),
                        term: new RegExp(`(${state.formData.term} ${state.formData.termUnit})`, 'g'),
                    };
                    
                    // Apply highlighting if a pattern exists
                    if (highlightPatterns[state.lastChanged]) {
                        highlightedText = text.replace(highlightPatterns[state.lastChanged], '<span class="highlighted">$1</span>');
                    }
                }
                
                // Set the highlighted content
                previewContent.innerHTML = highlightedText;
            }
            
            // Navigate to next tab
            function goToNextTab() {
                if (state.currentTab < tabTemplates.length - 1) {
                    state.currentTab++;
                    renderCurrentTab();
                }
            }
            
            // Navigate to previous tab
            function goToPrevTab() {
                if (state.currentTab > 0) {
                    state.currentTab--;
                    renderCurrentTab();
                }
            }
            
            // Go to specific tab
            function goToTab(index) {
                if (index >= 0 && index < tabTemplates.length) {
                    state.currentTab = index;
                    renderCurrentTab();
                }
            }
            
            // Copy to clipboard
            function copyToClipboard() {
                const text = generateAgreementText();
                
                navigator.clipboard.writeText(text)
                    .then(() => {
                        alert('Agreement copied to clipboard!');
                    })
                    .catch(err => {
                        console.error('Error copying to clipboard:', err);
                        alert('Failed to copy to clipboard. Please try again.');
                    });
            }
            
            // Download as Word document
            function downloadAsWord() {
                try {
                    const text = generateAgreementText();
                    const fileName = state.formData.fileName || 'AI-Training-Data-License-Agreement';
                    
                    // Create Word-compatible HTML
                    const htmlContent = `
                        <!DOCTYPE html>
                        <html>
                        <head>
                            <meta charset="UTF-8">
                            <title>AI Training Data License Agreement</title>
                            <style>
                                body {
                                    font-family: 'Times New Roman', Times, serif;
                                    font-size: 12pt;
                                    line-height: 1.5;
                                }
                                h1 {
                                    text-align: center;
                                    font-size: 14pt;
                                    font-weight: bold;
                                    margin-bottom: 20pt;
                                }
                                p {
                                    margin-bottom: 10pt;
                                }
                            </style>
                        </head>
                        <body>
                            ${text.split('\n\n').map(para => `<p>${para.replace(/\n/g, '<br>')}</p>`).join('')}
                        </body>
                        </html>
                    `;
                    
                    // Create a Blob with the HTML content
                    const blob = new Blob([htmlContent], { type: 'application/msword;charset=utf-8' });
                    
                    // Create a download link
                    const link = document.createElement('a');
                    link.href = URL.createObjectURL(blob);
                    link.download = `${fileName}.doc`;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                } catch (error) {
                    console.error('Error downloading Word document:', error);
                    alert('Error generating Word document. Please try again or use the copy option.');
                }
            }
            
            // Open consultation scheduling
            function openConsultation() {
                window.open('https://calendly.com/sergei-tokmakov/30-minute-zoom-meeting?hide_gdpr_banner=1', '_blank');
            }
            
            // Set up event listeners
            nextBtn.addEventListener('click', goToNextTab);
            prevBtn.addEventListener('click', goToPrevTab);
            copyBtn.addEventListener('click', copyToClipboard);
            downloadBtn.addEventListener('click', downloadAsWord);
            consultBtn.addEventListener('click', openConsultation);
            
            // Tab navigation event listeners
            tabButtons.forEach((btn, index) => {
                btn.addEventListener('click', () => {
                    goToTab(index);
                });
            });
            
            // Initial render
            renderCurrentTab();
        });
    </script>
</body>
</html>