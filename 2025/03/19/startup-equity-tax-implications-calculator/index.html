<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Startup Equity Tax Implications Calculator | Terms.Law</title>
  <meta name="description" content="The Startup Equity Tax Implications Calculator helps users evaluate tax consequences of various equity compensation types like ISOs, NSOs, RSUs, and RSAs. It pr">
  <link rel="canonical" href="https://terms.law/2025/03/19/startup-equity-tax-implications-calculator/">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/shared/styles.css">
</head>
<body>
  <div id="site-header"></div>
  <script src="/shared/header-loader.js"></script>

  <main>
    <article>
      <h1>Startup Equity Tax Implications Calculator</h1>
      <div class="meta">Published: March 19, 2025 â€¢ Document Generators, Tax Law</div>
      <div class="content">
<!-- Startup Equity Tax Implications Calculator - Terms.Law -->
<div id="equity-tax-calculator" class="terms-law-tool">
  <div class="tool-container">
    <div class="tool-header">
      <h2>Startup Equity Tax Implications Calculator</h2>
      <p class="tool-intro">Compare tax implications of different equity compensation structures offered by startups. Understand the timing and amount of taxes for ISOs, NSOs, RSUs, and more.</p>
    </div>
    
    <!-- Progress Bar -->
    <div class="tool-progress-container">
      <div class="tool-progress-bar">
        <div id="progress-bar"></div>
      </div>
      <div class="tool-progress-text"><span id="current-step">1</span>/<span id="total-steps">4</span></div>
    </div>
    
    <!-- Question Container -->
    <div id="question-container">
      <!-- Questions will be inserted here by JavaScript -->
    </div>
    
    <!-- Results Container -->
    <div id="results-container" style="display: none;">
      <div class="results-header">
        <h3>Your Equity Compensation Tax Analysis</h3>
        <p>Based on the information provided, here&#8217;s a breakdown of the tax implications for your equity compensation:</p>
      </div>
      
      <!-- Summary Cards -->
      <div class="tax-results-summary">
        <div class="summary-row">
          <div class="summary-label">Equity Type:</div>
          <div id="summary-equity-type" class="summary-value">ISO</div>
        </div>
        <div class="summary-row">
          <div class="summary-label">Total Shares:</div>
          <div id="summary-shares" class="summary-value">0</div>
        </div>
        <div class="summary-row">
          <div class="summary-label">Grant Price:</div>
          <div id="summary-grant-price" class="summary-value">$0.00</div>
        </div>
        <div class="summary-row">
          <div class="summary-label">Current FMV:</div>
          <div id="summary-current-fmv" class="summary-value">$0.00</div>
        </div>
        <div class="summary-row">
          <div class="summary-label">Expected Sale Price:</div>
          <div id="summary-sale-price" class="summary-value">$0.00</div>
        </div>
      </div>
      
      <!-- Tax Timeline Visualization -->
      <div class="equity-timeline">
        <h4>Equity Event Tax Timeline</h4>
        <div class="timeline-container">
          <div class="timeline-track">
            <div class="timeline-node" id="node-grant">
              <div class="node-point"></div>
              <div class="node-label">Grant</div>
            </div>
            <div class="timeline-node" id="node-vest">
              <div class="node-point"></div>
              <div class="node-label">Vest</div>
            </div>
            <div class="timeline-node" id="node-exercise">
              <div class="node-point"></div>
              <div class="node-label">Exercise</div>
            </div>
            <div class="timeline-node" id="node-sale">
              <div class="node-point"></div>
              <div class="node-label">Sale</div>
            </div>
          </div>
        </div>
        <div id="timeline-description">
          <!-- Will be filled by JavaScript -->
        </div>
      </div>
      
      <!-- Tax Breakdown -->
      <div class="tax-breakdown">
        <h4>Tax Breakdown By Event</h4>
        <div class="tax-events-container" id="tax-events">
          <!-- Will be filled by JavaScript -->
        </div>
      </div>
      
      <!-- Total Tax Impact -->
      <div class="total-tax-impact">
        <h4>Total Tax Impact</h4>
        <div class="tax-total-container">
          <div class="tax-total-row">
            <div class="tax-total-label">Total Ordinary Income:</div>
            <div id="total-ordinary-income" class="tax-total-value">$0</div>
          </div>
          <div class="tax-total-row">
            <div class="tax-total-label">Est. Ordinary Income Tax:</div>
            <div id="total-ordinary-tax" class="tax-total-value">$0</div>
          </div>
          <div class="tax-total-row">
            <div class="tax-total-label">Total Capital Gains:</div>
            <div id="total-capital-gains" class="tax-total-value">$0</div>
          </div>
          <div class="tax-total-row">
            <div class="tax-total-label">Est. Capital Gains Tax:</div>
            <div id="total-capital-tax" class="tax-total-value">$0</div>
          </div>
          <div class="tax-total-row tax-total-final">
            <div class="tax-total-label">Total Est. Tax Liability:</div>
            <div id="total-tax-liability" class="tax-total-value">$0</div>
          </div>
        </div>
      </div>
      
      <!-- AMT Warning (if applicable) -->
      <div id="amt-warning-container" style="display: none;" class="amt-warning">
        <h4>Alternative Minimum Tax (AMT) Warning</h4>
        <div id="amt-warning-content">
          <!-- Will be filled by JavaScript -->
        </div>
      </div>
      
      <!-- Tax Planning Opportunities -->
      <div class="tax-planning">
        <h4>Tax Planning Opportunities</h4>
        <div id="planning-strategies">
          <!-- Will be filled by JavaScript -->
        </div>
      </div>
      
      <!-- Equity Type Comparison -->
      <div class="equity-comparison">
        <h4>Equity Type Comparison</h4>
        <div class="comparison-container">
          <table class="comparison-table">
            <thead>
              <tr>
                <th>Feature</th>
                <th>ISO</th>
                <th>NSO</th>
                <th>RSU</th>
                <th>RSA</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Tax at Grant</td>
                <td>No</td>
                <td>No</td>
                <td>No</td>
                <td>Yes (unless 83(b))</td>
              </tr>
              <tr>
                <td>Tax at Vesting</td>
                <td>No</td>
                <td>No</td>
                <td>Yes</td>
                <td>No (if 83(b) filed)</td>
              </tr>
              <tr>
                <td>Tax at Exercise</td>
                <td>Possible (AMT)</td>
                <td>Yes</td>
                <td>N/A</td>
                <td>N/A</td>
              </tr>
              <tr>
                <td>Capital Gains</td>
                <td>Potentially all</td>
                <td>On appreciation after exercise</td>
                <td>On appreciation after vesting</td>
                <td>On appreciation after grant</td>
              </tr>
              <tr>
                <td>83(b) Election</td>
                <td>No</td>
                <td>No</td>
                <td>No</td>
                <td>Yes</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Important Notes -->
      <div class="equity-notes">
        <h4>Important Notes</h4>
        <p>This calculator provides general estimates based on the information provided and is not a substitute for professional tax advice. The actual tax implications can vary based on:</p>
        <ul>
          <li>Your complete personal tax situation</li>
          <li>State and local taxes (not included in these calculations)</li>
          <li>Changes in tax law</li>
          <li>Changes in company valuation</li>
          <li>Specific terms of your equity grant</li>
        </ul>
        <p>Consult with a tax professional before making decisions related to your equity compensation.</p>
      </div>
      
      <!-- CTA Buttons -->
      <div class="results-cta">
        <button id="recalculate-btn" class="tool-btn tool-btn-secondary">Recalculate</button>
        <a href="#" class="tool-btn tool-btn-cta" onclick="Calendly.initPopupWidget({url: 'https://calendly.com/sergei-tokmakov/30-minute-zoom-meeting'});return false;">Schedule Tax Consultation</a>
      </div>
    </div>
  </div>
</div>

<style>
/* Tool Styles */
.terms-law-tool {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
  max-width: 800px;
  margin: 0 auto;
  color: #333;
}

.tool-container {
  background-color: #fff;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  padding: 25px;
  margin-bottom: 30px;
}

.tool-header {
  text-align: center;
  margin-bottom: 20px;
}

.tool-header h2 {
  color: #2c3e50;
  font-size: 24px;
  margin-bottom: 10px;
}

.tool-intro {
  color: #555;
  font-size: 16px;
  line-height: 1.5;
}

/* Progress Bar */
.tool-progress-container {
  margin: 20px 0;
  position: relative;
}

.tool-progress-bar {
  height: 8px;
  background-color: #e0e0e0;
  border-radius: 4px;
  overflow: hidden;
}

#progress-bar {
  height: 100%;
  background-color: #3498db;
  width: 25%;
  transition: width 0.3s ease;
}

.tool-progress-text {
  text-align: right;
  font-size: 14px;
  color: #777;
  margin-top: 5px;
}

/* Question Step Styles */
.question-step {
  margin-bottom: 20px;
}

.question-step h3 {
  font-size: 18px;
  margin-bottom: 15px;
  color: #2c3e50;
}

.question-description {
  color: #555;
  font-size: 14px;
  margin-bottom: 15px;
  line-height: 1.5;
}

/* Input Styles */
.input-group {
  margin-bottom: 20px;
}

.input-group label {
  display: block;
  margin-bottom: 8px;
  font-weight: 500;
  font-size: 16px;
}

.input-prefix {
  display: flex;
  align-items: center;
  width: 100%;
  max-width: 300px;
}

.input-prefix span {
  background-color: #f0f0f0;
  border: 1px solid #ddd;
  border-right: none;
  border-radius: 4px 0 0 4px;
  padding: 10px 12px;
  color: #555;
  font-size: 16px;
}

.input-prefix input {
  flex: 1;
  padding: 10px 12px;
  border: 1px solid #ddd;
  border-radius: 0 4px 4px 0;
  font-size: 16px;
}

.regular-input {
  width: 100%;
  max-width: 300px;
  padding: 10px 12px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 16px;
}

.regular-input[type="number"] {
  step: 1000;
}

.input-helper {
  font-size: 13px;
  color: #666;
  margin-top: 5px;
}

/* Radio Options */
.radio-options {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  margin-top: 10px;
}

.radio-option {
  flex: 1;
  min-width: 200px;
  background-color: #f8f9fa;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  padding: 15px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.radio-option:hover {
  background-color: #f1f3f5;
  border-color: #d0d0d0;
}

.radio-option.selected {
  background-color: #e3f2fd;
  border-color: #90caf9;
}

.radio-option input[type="radio"] {
  margin-right: 10px;
}

.radio-label-title {
  font-weight: 600;
  display: block;
  margin-bottom: 3px;
}

.radio-label-desc {
  font-size: 13px;
  color: #666;
}

/* Checkbox Options */
.checkbox-option {
  display: flex;
  align-items: flex-start;
  margin-bottom: 10px;
  padding: 10px;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  background-color: #f8f9fa;
}

.checkbox-option input[type="checkbox"] {
  margin-right: 10px;
  margin-top: 3px;
}

.checkbox-label {
  flex: 1;
}

.checkbox-label-title {
  font-weight: 600;
  display: block;
  margin-bottom: 3px;
}

.checkbox-label-desc {
  font-size: 13px;
  color: #666;
}

/* Navigation Buttons */
.tool-navigation {
  margin-top: 25px;
  display: flex;
  justify-content: space-between;
}

.tool-btn {
  padding: 12px 20px;
  border-radius: 6px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  border: none;
  font-size: 16px;
  text-decoration: none;
}

.tool-btn-primary {
  background-color: #3498db;
  color: white;
}

.tool-btn-primary:hover {
  background-color: #2980b9;
}

.tool-btn-secondary {
  background-color: #ecf0f1;
  color: #34495e;
}

.tool-btn-secondary:hover {
  background-color: #dde4e6;
}

.tool-btn-secondary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.tool-btn-cta {
  background-color: #2c3e50;
  color: white !important;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  text-align: center;
}

.tool-btn-cta:hover {
  background-color: #1a252f;
}

/* Results Styles */
#results-container {
  opacity: 0;
  transition: opacity 0.5s ease;
}

#results-container.visible {
  opacity: 1;
}

.results-header {
  text-align: center;
  margin-bottom: 25px;
}

.results-header h3 {
  color: #2c3e50;
  font-size: 24px;
  margin-bottom: 10px;
}

.tax-results-summary {
  background-color: #f8f9fa;
  border-radius: 8px;
  padding: 20px;
  margin-bottom: 25px;
}

.summary-row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 10px;
}

.summary-row:last-child {
  margin-bottom: 0;
}

.summary-label {
  font-weight: 600;
  color: #555;
}

.summary-value {
  color: #2c3e50;
  font-weight: 500;
}

/* Timeline Styles */
.equity-timeline {
  margin-bottom: 25px;
  padding: 20px;
  border-radius: 8px;
  background-color: #f9f9f9;
  border-left: 4px solid #3498db;
}

.equity-timeline h4 {
  color: #2c3e50;
  margin-top: 0;
  margin-bottom: 15px;
  font-size: 18px;
}

.timeline-container {
  margin: 30px 0;
}

.timeline-track {
  height: 4px;
  background-color: #ddd;
  position: relative;
  margin: 50px 30px;
}

.timeline-node {
  position: absolute;
  top: -8px;
  transform: translateX(-50%);
}

.timeline-node .node-point {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background-color: #fff;
  border: 2px solid #3498db;
  margin: 0 auto;
}

.timeline-node .node-label {
  position: absolute;
  top: 25px;
  left: 50%;
  transform: translateX(-50%);
  white-space: nowrap;
  font-weight: 600;
  font-size: 14px;
  color: #555;
}

.timeline-node.tax-event .node-point {
  background-color: #e74c3c;
  border-color: #e74c3c;
}

.timeline-node.tax-event .node-label {
  color: #e74c3c;
}

#node-grant { left: 0%; }
#node-vest { left: 33%; }
#node-exercise { left: 66%; }
#node-sale { left: 100%; }

#timeline-description {
  margin-top: 50px;
  font-size: 14px;
  line-height: 1.6;
  color: #555;
}

/* Tax Breakdown Styles */
.tax-breakdown {
  margin-bottom: 25px;
  padding: 20px;
  border-radius: 8px;
  background-color: #f9f9f9;
  border-left: 4px solid #e67e22;
}

.tax-breakdown h4 {
  color: #2c3e50;
  margin-top: 0;
  margin-bottom: 15px;
  font-size: 18px;
}

.tax-event {
  margin-bottom: 15px;
  padding: 15px;
  border-radius: 6px;
  background-color: #fff;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.tax-event-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 10px;
  padding-bottom: 8px;
  border-bottom: 1px solid #eee;
}

.tax-event-title {
  font-weight: 600;
  color: #2c3e50;
}

.tax-event-amount {
  font-weight: 700;
  color: #e74c3c;
}

.tax-event-details {
  font-size: 14px;
  color: #555;
}

.tax-event-details p {
  margin: 5px 0;
}

/* Total Tax Impact Styles */
.total-tax-impact {
  margin-bottom: 25px;
  padding: 20px;
  border-radius: 8px;
  background-color: #f9f9f9;
  border-left: 4px solid #2ecc71;
}

.total-tax-impact h4 {
  color: #2c3e50;
  margin-top: 0;
  margin-bottom: 15px;
  font-size: 18px;
}

.tax-total-container {
  background-color: #fff;
  border-radius: 6px;
  padding: 15px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.tax-total-row {
  display: flex;
  justify-content: space-between;
  padding: 8px 0;
  border-bottom: 1px solid #eee;
}

.tax-total-row:last-child {
  border-bottom: none;
}

.tax-total-label {
  font-weight: 500;
  color: #555;
}

.tax-total-value {
  font-weight: 600;
  color: #2c3e50;
}

.tax-total-final {
  margin-top: 8px;
  padding-top: 8px;
  border-top: 2px solid #eee;
  font-size: 18px;
}

.tax-total-final .tax-total-label,
.tax-total-final .tax-total-value {
  font-weight: 700;
  color: #e74c3c;
}

/* AMT Warning Styles */
.amt-warning {
  margin-bottom: 25px;
  padding: 20px;
  border-radius: 8px;
  background-color: #fff3cd;
  border-left: 4px solid #f1c40f;
}

.amt-warning h4 {
  color: #856404;
  margin-top: 0;
  margin-bottom: 15px;
  font-size: 18px;
}

#amt-warning-content {
  color: #856404;
  font-size: 14px;
  line-height: 1.6;
}

/* Tax Planning Styles */
.tax-planning {
  margin-bottom: 25px;
  padding: 20px;
  border-radius: 8px;
  background-color: #f9f9f9;
  border-left: 4px solid #9b59b6;
}

.tax-planning h4 {
  color: #2c3e50;
  margin-top: 0;
  margin-bottom: 15px;
  font-size: 18px;
}

#planning-strategies {
  font-size: 14px;
  line-height: 1.6;
  color: #555;
}

#planning-strategies ul {
  padding-left: 20px;
  margin-top: 10px;
}

#planning-strategies li {
  margin-bottom: 8px;
}

/* Equity Comparison Styles */
.equity-comparison {
  margin-bottom: 25px;
  padding: 20px;
  border-radius: 8px;
  background-color: #f9f9f9;
}

.equity-comparison h4 {
  color: #2c3e50;
  margin-top: 0;
  margin-bottom: 15px;
  font-size: 18px;
}

.comparison-table {
  width: 100%;
  border-collapse: collapse;
}

.comparison-table th,
.comparison-table td {
  padding: 10px;
  text-align: center;
  border: 1px solid #ddd;
  font-size: 14px;
}

.comparison-table th {
  background-color: #f2f2f2;
  font-weight: 600;
  color: #2c3e50;
}

.comparison-table tr:nth-child(even) {
  background-color: #f9f9f9;
}

.comparison-table td:first-child {
  text-align: left;
  font-weight: 500;
}

/* Notes Styles */
.equity-notes {
  margin-bottom: 25px;
  padding: 20px;
  border-radius: 8px;
  background-color: #fff8e1;
}

.equity-notes h4 {
  color: #2c3e50;
  margin-top: 0;
  margin-bottom: 15px;
  font-size: 18px;
}

.equity-notes p {
  margin-bottom: 10px;
  font-size: 14px;
  line-height: 1.5;
}

.equity-notes ul {
  padding-left: 20px;
  margin-bottom: 15px;
}

.equity-notes li {
  margin-bottom: 5px;
  font-size: 14px;
}

/* Call to Action */
.results-cta {
  margin-top: 30px;
  display: flex;
  justify-content: center;
  gap: 15px;
}

/* Responsive Design */
@media (max-width: 768px) {
  .tool-container {
    padding: 15px;
  }
  
  .radio-options {
    flex-direction: column;
  }
  
  .radio-option {
    min-width: auto;
  }
  
  .timeline-track {
    margin: 50px 5px;
  }
  
  .timeline-node .node-label {
    font-size: 12px;
  }
  
  .comparison-table {
    font-size: 12px;
  }
  
  .comparison-table th,
  .comparison-table td {
    padding: 6px 4px;
  }
  
  .results-cta {
    flex-direction: column;
  }
  
  .tool-btn {
    width: 100%;
  }
}
</style>

<!-- Load Calendly Widget -->
<link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
<script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Tax Rate Constants (2024 figures)
  const TaxRates = {
    incomeTaxBrackets: {
      single: [
        { max: 11600, rate: 0.10 },
        { max: 47150, rate: 0.12 },
        { max: 100525, rate: 0.22 },
        { max: 191950, rate: 0.24 },
        { max: 243725, rate: 0.32 },
        { max: 609350, rate: 0.35 },
        { max: Infinity, rate: 0.37 }
      ],
      joint: [
        { max: 23200, rate: 0.10 },
        { max: 94300, rate: 0.12 },
        { max: 201050, rate: 0.22 },
        { max: 383900, rate: 0.24 },
        { max: 487450, rate: 0.32 },
        { max: 731200, rate: 0.35 },
        { max: Infinity, rate: 0.37 }
      ]
    },
    capitalGains: {
      shortTerm: { // Same as income tax
        single: [
          { max: 11600, rate: 0.10 },
          { max: 47150, rate: 0.12 },
          { max: 100525, rate: 0.22 },
          { max: 191950, rate: 0.24 },
          { max: 243725, rate: 0.32 },
          { max: 609350, rate: 0.35 },
          { max: Infinity, rate: 0.37 }
        ],
        joint: [
          { max: 23200, rate: 0.10 },
          { max: 94300, rate: 0.12 },
          { max: 201050, rate: 0.22 },
          { max: 383900, rate: 0.24 },
          { max: 487450, rate: 0.32 },
          { max: 731200, rate: 0.35 },
          { max: Infinity, rate: 0.37 }
        ]
      },
      longTerm: {
        single: [
          { max: 47025, rate: 0.00 },
          { max: 518900, rate: 0.15 },
          { max: Infinity, rate: 0.20 }
        ],
        joint: [
          { max: 94050, rate: 0.00 },
          { max: 583750, rate: 0.15 },
          { max: Infinity, rate: 0.20 }
        ]
      }
    },
    niit: {
      rate: 0.038, // Net Investment Income Tax
      threshold: {
        single: 200000,
        joint: 250000
      }
    },
    amt: {
      exemption: {
        single: 81250,
        joint: 126500
      },
      phaseoutStart: {
        single: 578150,
        joint: 1156300
      },
      rate: {
        lower: 0.26,
        higher: 0.28,
        higherThreshold: 220700
      }
    }
  };
  
  // Questions Data
  const questions = [
    {
      id: 'equity-type',
      title: 'Equity Compensation Type',
      description: 'Select the type of equity compensation you have or are being offered.',
      fields: [
        {
          id: 'equity-type',
          type: 'radio',
          options: [
            {
              value: 'iso',
              title: 'Incentive Stock Options (ISOs)',
              description: 'Employee stock options with potential tax advantages. Only available to employees.',
              selected: true
            },
            {
              value: 'nso',
              title: 'Non-qualified Stock Options (NSOs)',
              description: 'Stock options that don\'t qualify for special tax treatment. Can be granted to contractors, advisors, etc.'
            },
            {
              value: 'rsu',
              title: 'Restricted Stock Units (RSUs)',
              description: 'Promise to issue shares when vested. Taxed as ordinary income at vesting.'
            },
            {
              value: 'rsa',
              title: 'Restricted Stock Awards (RSAs)',
              description: 'Actual shares granted at the start, but subject to vesting. May allow 83(b) election.'
            }
          ]
        }
      ]
    },
    {
      id: 'grant-details',
      title: 'Grant & Valuation Details',
      description: 'Enter information about your equity grant and company valuation.',
      fields: [
        {
          id: 'total-shares',
          label: 'Total Number of Shares',
          type: 'number',
          value: 10000,
          helper: 'Total shares granted or offered'
        },
        {
          id: 'grant-price',
          label: 'Grant Price / Strike Price / Exercise Price',
          type: 'currency',
          value: 1.00,
          helper: 'Price per share at time of grant (for options) or purchase price (for RSAs)'
        },
        {
          id: 'current-fmv',
          label: 'Current Fair Market Value (FMV)',
          type: 'currency',
          value: 2.50,
          helper: 'Current estimated value per share of company stock'
        },
        {
          id: 'expected-exit-price',
          label: 'Expected Sale/Exit Price',
          type: 'currency',
          value: 10.00,
          helper: 'Expected value per share when you plan to sell'
        }
      ]
    },
    {
      id: 'timing-details',
      title: 'Timing & Tax Information',
      description: 'Provide details about vesting, holding periods, and your tax situation.',
      fields: [
        {
          id: 'exercise-timing',
          label: 'When do you plan to exercise? (for options)',
          type: 'select',
          options: [
            { value: 'at-vest', label: 'At vesting' },
            { value: 'later', label: 'Later (before exit)', selected: true },
            { value: 'at-exit', label: 'At exit/sale' },
            { value: 'na', label: 'Not applicable (RSUs/RSAs)' }
          ],
          helper: 'For ISO/NSOs, timing of exercise affects your tax treatment'
        },
        {
          id: 'holding-period',
          label: 'How long will you hold shares after acquiring them?',
          type: 'select',
          options: [
            { value: 'less-than-1', label: 'Less than 1 year' },
            { value: '1-2-years', label: '1-2 years', selected: true },
            { value: 'more-than-2', label: 'More than 2 years' }
          ],
          helper: 'Holding period affects capital gains tax rates'
        },
        {
          id: 'filing-status',
          label: 'Tax Filing Status',
          type: 'select',
          options: [
            { value: 'single', label: 'Single', selected: true },
            { value: 'joint', label: 'Married Filing Jointly' }
          ],
          helper: 'Your tax filing status affects tax rates and thresholds'
        },
        {
          id: 'income-level',
          label: 'Annual Income (excluding equity)',
          type: 'currency',
          value: 150000,
          helper: 'Used to estimate your tax bracket for calculations'
        }
      ]
    },
    {
      id: 'special-elections',
      title: 'Special Tax Elections & Considerations',
      description: 'Select any special tax elections or circumstances that apply to your situation.',
      fields: [
        {
          id: '83b-election',
          type: 'checkbox',
          label: 'Section 83(b) Election',
          value: false,
          description: 'For RSAs: Have you filed or plan to file an 83(b) election within 30 days of grant?',
          helper: 'An 83(b) election allows you to pay tax on grant date value rather than vesting date value'
        },
        {
          id: 'consider-amt',
          type: 'checkbox',
          label: 'Consider Alternative Minimum Tax (AMT)',
          value: true,
          description: 'Include AMT impact in calculations for ISOs',
          helper: 'AMT can apply when exercising ISOs, especially with a high spread between exercise price and FMV'
        },
        {
          id: 'include-state',
          type: 'checkbox',
          label: 'Include State Tax Estimate',
          value: false,
          description: 'Add estimated state tax impact (approximate)',
          helper: 'Adds a simple estimate for state taxes based on typical rates'
        }
      ]
    }
  ];
  
  // DOM Elements
  const questionContainer = document.getElementById('question-container');
  const resultsContainer = document.getElementById('results-container');
  const progressBar = document.getElementById('progress-bar');
  const currentStepEl = document.getElementById('current-step');
  const totalStepsEl = document.getElementById('total-steps');
  const recalculateBtn = document.getElementById('recalculate-btn');
  
  // Set up variables
  let currentStep = 0;
  const userAnswers = {};
  const totalSteps = questions.length;
  
  // Initialize the tool
  function initTool() {
    // Set total steps
    totalStepsEl.textContent = totalSteps;
    
    // Initialize with default values
    questions.forEach(question => {
      question.fields.forEach(field => {
        if (field.type === 'radio') {
          const selectedOption = field.options.find(option => option.selected);
          if (selectedOption) {
            userAnswers[field.id] = selectedOption.value;
          } else if (field.options.length > 0) {
            userAnswers[field.id] = field.options[0].value;
          }
        } else if (field.type === 'select') {
          const selectedOption = field.options.find(option => option.selected);
          if (selectedOption) {
            userAnswers[field.id] = selectedOption.value;
          } else if (field.options.length > 0) {
            userAnswers[field.id] = field.options[0].value;
          }
        } else if (field.type === 'currency' || field.type === 'number') {
          userAnswers[field.id] = field.value || 0;
        } else if (field.type === 'checkbox') {
          userAnswers[field.id] = field.value || false;
        }
      });
    });
    
    // Show first question
    showQuestion(0);
    
    // Add event listener to recalculate button
    recalculateBtn.addEventListener('click', function() {
      resultsContainer.style.display = 'none';
      resultsContainer.classList.remove('visible');
      questionContainer.style.display = 'block';
      showQuestion(0);
      
      // Scroll to the top of the tool
      document.getElementById('equity-tax-calculator').scrollIntoView({ 
        behavior: 'smooth', 
        block: 'start'
      });
    });
  }
  
  // Show a specific question
  function showQuestion(index) {
    currentStep = index;
    currentStepEl.textContent = index + 1;
    
    // Update progress bar
    progressBar.style.width = `${((index + 1) / totalSteps) * 100}%`;
    
    // Get the current question
    const question = questions[index];
    
    // Create the question HTML
    let html = `
      <div class="question-step" id="step-${question.id}">
        <h3>${question.title}</h3>
        <p class="question-description">${question.description}</p>
    `;
    
    // Add fields
    question.fields.forEach(field => {
      if (field.type === 'radio') {
        html += `<div class="radio-options">`;
        field.options.forEach(option => {
          const isSelected = userAnswers[field.id] === option.value;
          html += `
            <div class="radio-option ${isSelected ? 'selected' : ''}" data-value="${option.value}">
              <input type="radio" name="${field.id}" id="${option.value}" value="${option.value}" ${isSelected ? 'checked' : ''}>
              <label for="${option.value}">
                <span class="radio-label-title">${option.title}</span>
                <span class="radio-label-desc">${option.description}</span>
              </label>
            </div>
          `;
        });
        html += `</div>`;
      } else if (field.type === 'select') {
        html += `
          <div class="input-group">
            <label for="${field.id}">${field.label}</label>
            <select id="${field.id}" class="regular-input">
        `;
        field.options.forEach(option => {
          const isSelected = userAnswers[field.id] === option.value;
          html += `<option value="${option.value}" ${isSelected ? 'selected' : ''}>${option.label}</option>`;
        });
        html += `
            </select>
            ${field.helper ? `<div class="input-helper">${field.helper}</div>` : ''}
          </div>
        `;
      } else if (field.type === 'currency') {
        html += `
          <div class="input-group">
            <label for="${field.id}">${field.label}</label>
            <div class="input-prefix">
              <span>$</span>
              <input type="number" id="${field.id}" value="${userAnswers[field.id] || field.value || 0}" min="0" step="${field.id === 'grant-price' || field.id === 'current-fmv' || field.id === 'expected-exit-price' ? '0.25' : '1000'}">
            </div>
            ${field.helper ? `<div class="input-helper">${field.helper}</div>` : ''}
          </div>
        `;
      } else if (field.type === 'number') {
        html += `
          <div class="input-group">
            <label for="${field.id}">${field.label}</label>
            <input type="number" id="${field.id}" class="regular-input" value="${userAnswers[field.id] || field.value || 0}" min="0" step="1000">
            ${field.helper ? `<div class="input-helper">${field.helper}</div>` : ''}
          </div>
        `;
      } else if (field.type === 'checkbox') {
        html += `
          <div class="input-group">
            <div class="checkbox-option">
              <input type="checkbox" id="${field.id}" ${userAnswers[field.id] ? 'checked' : ''}>
              <div class="checkbox-label">
                <label for="${field.id}" class="checkbox-label-title">${field.label}</label>
                <span class="checkbox-label-desc">${field.description}</span>
              </div>
            </div>
            ${field.helper ? `<div class="input-helper">${field.helper}</div>` : ''}
          </div>
        `;
      }
    });
    
    html += `</div>`;
    
    // Add navigation buttons
    html += `
      <div class="tool-navigation">
        <button id="back-btn" class="tool-btn tool-btn-secondary" ${index === 0 ? 'disabled' : ''}>Back</button>
        <button id="continue-btn" class="tool-btn tool-btn-primary">${index === totalSteps - 1 ? 'Calculate' : 'Continue'}</button>
      </div>
    `;
    
    // Set the HTML
    questionContainer.innerHTML = html;
    
    // Add event listeners to radio options
    const radioOptions = document.querySelectorAll('.radio-option');
    radioOptions.forEach(option => {
      option.addEventListener('click', function() {
        const fieldId = this.querySelector('input').name;
        const value = this.getAttribute('data-value');
        
        // Update selection visually
        radioOptions.forEach(opt => {
          if (opt.querySelector('input').name === fieldId) {
            opt.classList.remove('selected');
          }
        });
        this.classList.add('selected');
        
        // Update the radio button
        this.querySelector('input').checked = true;
        
        // Store the answer
        userAnswers[fieldId] = value;
      });
    });
    
    // Add event listeners to the Back and Continue buttons
    document.getElementById('back-btn').addEventListener('click', function() {
      if (currentStep > 0) {
        // Save current answers
        saveCurrentAnswers();
        // Go to previous question
        showQuestion(currentStep - 1);
      }
    });
    
    document.getElementById('continue-btn').addEventListener('click', function() {
      // Save current answers
      saveCurrentAnswers();
      
      if (currentStep < totalSteps - 1) {
        // Go to next question
        showQuestion(currentStep + 1);
      } else {
        // Show results
        calculateResults();
      }
    });
  }
  
  // Save the current answers from the form
  function saveCurrentAnswers() {
    const question = questions[currentStep];
    
    question.fields.forEach(field => {
      if (field.type === 'currency' || field.type === 'number') {
        const inputEl = document.getElementById(field.id);
        if (inputEl) {
          userAnswers[field.id] = parseFloat(inputEl.value) || 0;
        }
      } else if (field.type === 'select') {
        const selectEl = document.getElementById(field.id);
        if (selectEl) {
          userAnswers[field.id] = selectEl.value;
        }
      } else if (field.type === 'checkbox') {
        const checkboxEl = document.getElementById(field.id);
        if (checkboxEl) {
          userAnswers[field.id] = checkboxEl.checked;
        }
      } else if (field.type === 'radio') {
        const checkedOption = document.querySelector(`input[name="${field.id}"]:checked`);
        if (checkedOption) {
          userAnswers[field.id] = checkedOption.value;
        }
      }
    });
  }
  
  // Calculate and display results
  function calculateResults() {
    // Get user inputs
    const equityType = userAnswers['equity-type'] || 'iso';
    const totalShares = parseInt(userAnswers['total-shares']) || 0;
    const grantPrice = parseFloat(userAnswers['grant-price']) || 0;
    const currentFMV = parseFloat(userAnswers['current-fmv']) || 0;
    const expectedExitPrice = parseFloat(userAnswers['expected-exit-price']) || 0;
    const exerciseTiming = userAnswers['exercise-timing'] || 'later';
    const holdingPeriod = userAnswers['holding-period'] || '1-2-years';
    const filingStatus = userAnswers['filing-status'] || 'single';
    const incomeLevel = parseFloat(userAnswers['income-level']) || 0;
    const elected83b = userAnswers['83b-election'] || false;
    const considerAMT = userAnswers['consider-amt'] || false;
    const includeState = userAnswers['include-state'] || false;
    
    // Calculate tax implications
    const result = calculateEquityTaxImplications(
      equityType, totalShares, grantPrice, currentFMV, expectedExitPrice,
      exerciseTiming, holdingPeriod, filingStatus, incomeLevel,
      elected83b, considerAMT, includeState
    );
    
    // Update summary info
    document.getElementById('summary-equity-type').textContent = getEquityTypeName(equityType);
    document.getElementById('summary-shares').textContent = totalShares.toLocaleString();
    document.getElementById('summary-grant-price').textContent = formatCurrency(grantPrice);
    document.getElementById('summary-current-fmv').textContent = formatCurrency(currentFMV);
    document.getElementById('summary-sale-price').textContent = formatCurrency(expectedExitPrice);
    
    // Update tax timeline visualization
    updateTaxTimeline(result);
    
    // Update tax breakdown
    updateTaxBreakdown(result);
    
    // Update total tax impact
    updateTotalTaxImpact(result);
    
    // Update AMT warning
    updateAMTWarning(result);
    
    // Generate tax planning strategies
    generateTaxPlanningStrategies(result);
    
    // Hide question container and show results
    questionContainer.style.display = 'none';
    resultsContainer.style.display = 'block';
    
    // Add visible class after a slight delay for animation
    setTimeout(() => {
      resultsContainer.classList.add('visible');
    }, 50);
    
    // Scroll to the top of the results
    document.querySelector('.results-header').scrollIntoView({ behavior: 'smooth' });
  }
  
  // Calculate equity tax implications
  function calculateEquityTaxImplications(
    equityType, totalShares, grantPrice, currentFMV, expectedExitPrice,
    exerciseTiming, holdingPeriod, filingStatus, incomeLevel,
    elected83b, considerAMT, includeState
  ) {
    // Total values
    const totalGrantValue = totalShares * grantPrice;
    const totalCurrentValue = totalShares * currentFMV;
    const totalExitValue = totalShares * expectedExitPrice;
    
    // Tax rates
    const incomeTaxRate = estimateIncomeTaxRate(incomeLevel, filingStatus);
    const longTermCapitalGainsRate = estimateCapitalGainsRate(incomeLevel, filingStatus, true);
    const shortTermCapitalGainsRate = estimateCapitalGainsRate(incomeLevel, filingStatus, false);
    
    // State tax rate (simplified)
    const stateTaxRate = includeState ? 0.065 : 0;
    
    // Is it long-term capital gains based on holding period?
    const isLongTerm = holdingPeriod === 'more-than-2' || holdingPeriod === '1-2-years';
    const capitalGainsRate = isLongTerm ? longTermCapitalGainsRate : shortTermCapitalGainsRate;
    
    // Initialize result object
    const result = {
      equityType,
      totalShares,
      grantPrice,
      currentFMV,
      expectedExitPrice,
      exerciseTiming,
      holdingPeriod,
      filingStatus,
      incomeLevel,
      elected83b,
      considerAMT,
      includeState,
      incomeTaxRate,
      capitalGainsRate,
      isLongTerm,
      stateTaxRate,
      totalGrantValue,
      totalCurrentValue,
      totalExitValue,
      taxableEvents: [],
      ordinaryIncome: 0,
      ordinaryIncomeTax: 0,
      capitalGains: 0,
      capitalGainsTax: 0,
      totalTaxLiability: 0,
      amtLiability: 0,
      amtImpact: false
    };
    
    // Calculate tax implications based on equity type
    switch (equityType) {
      case 'iso':
        calculateISOTaxImplications(result);
        break;
      case 'nso':
        calculateNSOTaxImplications(result);
        break;
      case 'rsu':
        calculateRSUTaxImplications(result);
        break;
      case 'rsa':
        calculateRSATaxImplications(result);
        break;
    }
    
    // Return the final result
    return result;
  }
  
  // Calculate ISO tax implications
  function calculateISOTaxImplications(result) {
    // No ordinary income tax at grant
    result.taxableEvents.push({
      event: 'grant',
      taxType: 'none',
      description: 'No tax due at grant for ISOs.',
      amount: 0
    });
    
    // No ordinary income tax at vesting
    result.taxableEvents.push({
      event: 'vest',
      taxType: 'none',
      description: 'No tax due at vesting for ISOs.',
      amount: 0
    });
    
    // Exercise - potential AMT implications
    const exerciseSpread = (result.currentFMV - result.grantPrice) * result.totalShares;
    
    if (result.exerciseTiming === 'at-vest' || result.exerciseTiming === 'later') {
      // Only calculate AMT if user wants to consider it and there's a spread
      if (result.considerAMT && exerciseSpread > 0) {
        // Very simplified AMT calculation
        const amtIncome = result.incomeLevel + exerciseSpread;
        const amtExemption = TaxRates.amt.exemption[result.filingStatus === 'joint' ? 'joint' : 'single'];
        
        // Calculate AMT liability if AMT income exceeds exemption
        if (amtIncome > amtExemption) {
          // Exemption phase-out (simplified)
          let adjustedExemption = amtExemption;
          const phaseoutStart = TaxRates.amt.phaseoutStart[result.filingStatus === 'joint' ? 'joint' : 'single'];
          
          if (amtIncome > phaseoutStart) {
            const phaseoutAmount = (amtIncome - phaseoutStart) * 0.25;
            adjustedExemption = Math.max(0, amtExemption - phaseoutAmount);
          }
          
          const amtTaxableIncome = amtIncome - adjustedExemption;
          
          // AMT rate (26% up to threshold, 28% above)
          const amtRate = amtTaxableIncome <= TaxRates.amt.rate.higherThreshold ? 
                         TaxRates.amt.rate.lower : 
                         TaxRates.amt.rate.higher;
          
          const amtTax = amtTaxableIncome * amtRate;
          
          // Regular income tax (simplified)
          const regularTax = result.incomeLevel * result.incomeTaxRate;
          
          // AMT is only paid if it exceeds regular tax
          if (amtTax > regularTax) {
            result.amtLiability = amtTax - regularTax;
            result.amtImpact = true;
            
            result.taxableEvents.push({
              event: 'exercise',
              taxType: 'amt',
              description: `Potential AMT liability due to ${formatCurrency(exerciseSpread)} exercise spread.`,
              amount: result.amtLiability
            });
          } else {
            result.taxableEvents.push({
              event: 'exercise',
              taxType: 'none',
              description: 'Exercise spread is subject to AMT calculations, but no additional AMT liability expected.',
              amount: 0
            });
          }
        } else {
          result.taxableEvents.push({
            event: 'exercise',
            taxType: 'none',
            description: 'Exercise spread is below AMT exemption threshold.',
            amount: 0
          });
        }
      } else {
        result.taxableEvents.push({
          event: 'exercise',
          taxType: 'none',
          description: 'No regular income tax due at exercise for ISOs.',
          amount: 0
        });
      }
    } else if (result.exerciseTiming === 'at-exit') {
      // Same-day exercise and sale is treated as disqualifying disposition
      result.taxableEvents.push({
        event: 'exercise',
        taxType: 'ordinary_income',
        description: 'Exercise at sale is a disqualifying disposition. The spread is taxed as ordinary income.',
        amount: exerciseSpread
      });
      
      result.ordinaryIncome += exerciseSpread;
      result.ordinaryIncomeTax += exerciseSpread * (result.incomeTaxRate + result.stateTaxRate);
    }
    
    // Sale/Exit tax implications
    const saleGain = (result.expectedExitPrice - 
                     (result.exerciseTiming === 'at-exit' ? result.grantPrice : result.currentFMV)) 
                     * result.totalShares;
    
    if (saleGain > 0) {
      // For ISO, sale tax depends on holding period from exercise
      // If exercising at exit, we've already taxed the spread as ordinary income
      if (result.exerciseTiming === 'at-exit') {
        // No additional gain if exercising at exit (already accounted for)
        result.taxableEvents.push({
          event: 'sale',
          taxType: 'none',
          description: 'No additional gain since exercise occurred at sale.',
          amount: 0
        });
      } else {
        // For qualifying disposition (held > 1 year after exercise and > 2 years after grant)
        if (result.isLongTerm) {
          result.taxableEvents.push({
            event: 'sale',
            taxType: 'capital_gains',
            description: 'Qualifying disposition: Entire gain from exercise to sale taxed at long-term capital gains rates.',
            amount: saleGain
          });
          
          result.capitalGains += saleGain;
          result.capitalGainsTax += saleGain * (result.capitalGainsRate + result.stateTaxRate);
        } else {
          // Disqualifying disposition - spread taxed as ordinary income, additional gain as capital gains
          const exerciseToSaleGain = result.expectedExitPrice - result.currentFMV;
          
          if (exerciseToSaleGain > 0) {
            result.taxableEvents.push({
              event: 'sale',
              taxType: 'hybrid',
              description: 'Disqualifying disposition: Exercise spread taxed as ordinary income, additional gain as short-term capital gains.',
              amount: saleGain,
              ordinaryPortion: exerciseSpread,
              capitalPortion: (exerciseToSaleGain * result.totalShares)
            });
            
            result.ordinaryIncome += exerciseSpread;
            result.ordinaryIncomeTax += exerciseSpread * (result.incomeTaxRate + result.stateTaxRate);
            result.capitalGains += (exerciseToSaleGain * result.totalShares);
            result.capitalGainsTax += (exerciseToSaleGain * result.totalShares) * (result.capitalGainsRate + result.stateTaxRate);
          } else {
            result.taxableEvents.push({
              event: 'sale',
              taxType: 'ordinary_income',
              description: 'Disqualifying disposition: Entire gain taxed as ordinary income.',
              amount: saleGain
            });
            
            result.ordinaryIncome += saleGain;
            result.ordinaryIncomeTax += saleGain * (result.incomeTaxRate + result.stateTaxRate);
          }
        }
      }
    } else {
      result.taxableEvents.push({
        event: 'sale',
        taxType: 'none',
        description: 'No taxable gain on sale (sale price is not higher than cost basis).',
        amount: 0
      });
    }
    
    // Update total tax liability
    result.totalTaxLiability = result.ordinaryIncomeTax + result.capitalGainsTax + result.amtLiability;
  }
  
  // Calculate NSO tax implications
  function calculateNSOTaxImplications(result) {
    // No tax at grant
    result.taxableEvents.push({
      event: 'grant',
      taxType: 'none',
      description: 'No tax due at grant for NSOs.',
      amount: 0
    });
    
    // No tax at vesting
    result.taxableEvents.push({
      event: 'vest',
      taxType: 'none',
      description: 'No tax due at vesting for NSOs.',
      amount: 0
    });
    
    // Exercise - ordinary income on the spread
    const exerciseSpread = (result.currentFMV - result.grantPrice) * result.totalShares;
    
    if (result.exerciseTiming === 'at-vest' || result.exerciseTiming === 'later') {
      if (exerciseSpread > 0) {
        result.taxableEvents.push({
          event: 'exercise',
          taxType: 'ordinary_income',
          description: 'The spread between exercise price and FMV is taxed as ordinary income.',
          amount: exerciseSpread
        });
        
        result.ordinaryIncome += exerciseSpread;
        result.ordinaryIncomeTax += exerciseSpread * (result.incomeTaxRate + result.stateTaxRate);
      } else {
        result.taxableEvents.push({
          event: 'exercise',
          taxType: 'none',
          description: 'No taxable spread (current FMV is not higher than grant price).',
          amount: 0
        });
      }
    } else if (result.exerciseTiming === 'at-exit') {
      const exitSpread = (result.expectedExitPrice - result.grantPrice) * result.totalShares;
      
      result.taxableEvents.push({
        event: 'exercise',
        taxType: 'ordinary_income',
        description: 'Same-day exercise and sale. The entire spread from grant price to sale price is taxed as ordinary income.',
        amount: exitSpread
      });
      
      result.ordinaryIncome += exitSpread;
      result.ordinaryIncomeTax += exitSpread * (result.incomeTaxRate + result.stateTaxRate);
    }
    
    // Sale/Exit tax implications
    if (result.exerciseTiming !== 'at-exit') {
      const saleGain = (result.expectedExitPrice - result.currentFMV) * result.totalShares;
      
      if (saleGain > 0) {
        result.taxableEvents.push({
          event: 'sale',
          taxType: 'capital_gains',
          description: `${result.isLongTerm ? 'Long-term' : 'Short-term'} capital gains on appreciation after exercise.`,
          amount: saleGain
        });
        
        result.capitalGains += saleGain;
        result.capitalGainsTax += saleGain * (result.capitalGainsRate + result.stateTaxRate);
      } else {
        result.taxableEvents.push({
          event: 'sale',
          taxType: 'none',
          description: 'No additional gain after exercise (sale price is not higher than FMV at exercise).',
          amount: 0
        });
      }
    } else {
      // If exercising at exit, we've already accounted for the full gain
      result.taxableEvents.push({
        event: 'sale',
        taxType: 'none',
        description: 'No additional tax (entire gain was taxed at exercise/sale).',
        amount: 0
      });
    }
    
    // Update total tax liability
    result.totalTaxLiability = result.ordinaryIncomeTax + result.capitalGainsTax;
  }
  
  // Calculate RSU tax implications
  function calculateRSUTaxImplications(result) {
    // No tax at grant
    result.taxableEvents.push({
      event: 'grant',
      taxType: 'none',
      description: 'No tax due at grant for RSUs.',
      amount: 0
    });
    
    // Tax at vesting - ordinary income based on FMV
    const vestingValue = result.currentFMV * result.totalShares;
    
    result.taxableEvents.push({
      event: 'vest',
      taxType: 'ordinary_income',
      description: 'RSUs are taxed as ordinary income based on FMV at vesting.',
      amount: vestingValue
    });
    
    result.ordinaryIncome += vestingValue;
    result.ordinaryIncomeTax += vestingValue * (result.incomeTaxRate + result.stateTaxRate);
    
    // No exercise for RSUs
    result.taxableEvents.push({
      event: 'exercise',
      taxType: 'none',
      description: 'RSUs do not have an exercise event.',
      amount: 0
    });
    
    // Sale/Exit - capital gains on appreciation after vesting
    const saleGain = (result.expectedExitPrice - result.currentFMV) * result.totalShares;
    
    if (saleGain > 0) {
      result.taxableEvents.push({
        event: 'sale',
        taxType: 'capital_gains',
        description: `${result.isLongTerm ? 'Long-term' : 'Short-term'} capital gains on appreciation after vesting.`,
        amount: saleGain
      });
      
      result.capitalGains += saleGain;
      result.capitalGainsTax += saleGain * (result.capitalGainsRate + result.stateTaxRate);
    } else {
      result.taxableEvents.push({
        event: 'sale',
        taxType: 'none',
        description: 'No additional gain after vesting (sale price is not higher than FMV at vesting).',
        amount: 0
      });
    }
    
    // Update total tax liability
    result.totalTaxLiability = result.ordinaryIncomeTax + result.capitalGainsTax;
  }
  
  // Calculate RSA tax implications
  function calculateRSATaxImplications(result) {
    // Tax implications depend on 83(b) election
    if (result.elected83b) {
      // With 83(b), tax at grant based on FMV - purchase price
      const grantSpread = Math.max(0, (result.grantPrice - result.grantPrice)) * result.totalShares;
      
      if (grantSpread > 0) {
        result.taxableEvents.push({
          event: 'grant',
          taxType: 'ordinary_income',
          description: 'With 83(b) election, the difference between FMV and purchase price at grant is taxed as ordinary income.',
          amount: grantSpread
        });
        
        result.ordinaryIncome += grantSpread;
        result.ordinaryIncomeTax += grantSpread * (result.incomeTaxRate + result.stateTaxRate);
      } else {
        result.taxableEvents.push({
          event: 'grant',
          taxType: 'none',
          description: 'With 83(b) election, no tax due at grant (purchase price equals or exceeds FMV).',
          amount: 0
        });
      }
      
      // No tax at vesting with 83(b)
      result.taxableEvents.push({
        event: 'vest',
        taxType: 'none',
        description: 'No tax due at vesting with 83(b) election.',
        amount: 0
      });
    } else {
      // Without 83(b), no tax at grant
      result.taxableEvents.push({
        event: 'grant',
        taxType: 'none',
        description: 'Without 83(b) election, no tax due at grant.',
        amount: 0
      });
      
      // Tax at vesting based on FMV - purchase price
      const vestingSpread = (result.currentFMV - result.grantPrice) * result.totalShares;
      
      if (vestingSpread > 0) {
        result.taxableEvents.push({
          event: 'vest',
          taxType: 'ordinary_income',
          description: 'Without 83(b) election, the difference between FMV at vesting and purchase price is taxed as ordinary income.',
          amount: vestingSpread
        });
        
        result.ordinaryIncome += vestingSpread;
        result.ordinaryIncomeTax += vestingSpread * (result.incomeTaxRate + result.stateTaxRate);
      } else {
        result.taxableEvents.push({
          event: 'vest',
          taxType: 'none',
          description: 'No tax due at vesting (purchase price equals or exceeds FMV at vesting).',
          amount: 0
        });
      }
    }
    
    // No exercise for RSAs
    result.taxableEvents.push({
      event: 'exercise',
      taxType: 'none',
      description: 'RSAs do not have an exercise event.',
      amount: 0
    });
    
    // Sale/Exit - capital gains on appreciation after basis is established
    const basisPrice = result.elected83b ? result.grantPrice : result.currentFMV;
    const saleGain = (result.expectedExitPrice - basisPrice) * result.totalShares;
    
    if (saleGain > 0) {
      result.taxableEvents.push({
        event: 'sale',
        taxType: 'capital_gains',
        description: `${result.isLongTerm ? 'Long-term' : 'Short-term'} capital gains on appreciation after ${result.elected83b ? 'grant' : 'vesting'}.`,
        amount: saleGain
      });
      
      result.capitalGains += saleGain;
      result.capitalGainsTax += saleGain * (result.capitalGainsRate + result.stateTaxRate);
    } else {
      result.taxableEvents.push({
        event: 'sale',
        taxType: 'none',
        description: `No additional gain after ${result.elected83b ? 'grant' : 'vesting'} (sale price is not higher than basis).`,
        amount: 0
      });
    }
    
    // Update total tax liability
    result.totalTaxLiability = result.ordinaryIncomeTax + result.capitalGainsTax;
  }
  
  // Update the tax timeline visualization
  function updateTaxTimeline(result) {
    const timelineDescription = document.getElementById('timeline-description');
    
    // Reset tax event markers
    document.querySelectorAll('.timeline-node').forEach(node => {
      node.classList.remove('tax-event');
    });
    
    // Mark tax events on the timeline
    result.taxableEvents.forEach(event => {
      if (event.taxType !== 'none' && event.amount > 0) {
        document.getElementById(`node-${event.event}`).classList.add('tax-event');
      }
    });
    
    // Generate timeline description
    let description = `<p>The colored markers on the timeline indicate events that trigger tax consequences for your ${getEquityTypeName(result.equityType)}.</p>`;
    
    // Add description based on equity type
    switch (result.equityType) {
      case 'iso':
        description += `<p>With Incentive Stock Options (ISOs), you typically don't owe taxes at grant or vesting. When you exercise, there's no regular income tax, but there may be Alternative Minimum Tax (AMT) implications if the spread between exercise price and fair market value is significant.`;
        
        if (result.amtImpact) {
          description += ` In your case, you might face an AMT liability of approximately ${formatCurrency(result.amtLiability)}.`;
        }
        
        description += `</p><p>When you sell the shares, the tax treatment depends on whether you've met the holding requirements for a qualifying disposition (more than 1 year after exercise and more than 2 years after grant). `;
        
        if (result.isLongTerm) {
          description += `Based on your planned holding period, you would likely receive favorable long-term capital gains treatment.`;
        } else {
          description += `Based on your planned holding period, your sale would likely be a disqualifying disposition, resulting in ordinary income tax on the spread at exercise.`;
        }
        
        description += `</p>`;
        break;
        
      case 'nso':
        description += `<p>With Non-qualified Stock Options (NSOs), you typically don't owe taxes at grant or vesting. When you exercise, you'll owe ordinary income tax on the "spread" between your exercise price and the fair market value at exercise.`;
        
        description += `</p><p>When you sell the shares, you'll owe capital gains tax on any appreciation that occurs after exercise. `;
        
        if (result.isLongTerm) {
          description += `Based on your planned holding period, you would likely receive favorable long-term capital gains treatment on the post-exercise appreciation.`;
        } else {
          description += `Based on your planned holding period, you would pay short-term capital gains rates (same as ordinary income) on the post-exercise appreciation.`;
        }
        
        description += `</p>`;
        break;
        
      case 'rsu':
        description += `<p>With Restricted Stock Units (RSUs), you don't owe taxes at grant. The primary tax event occurs at vesting, when you'll owe ordinary income tax on the fair market value of the shares you receive.`;
        
        description += `</p><p>When you sell the shares, you'll owe capital gains tax on any appreciation that occurs after vesting. `;
        
        if (result.isLongTerm) {
          description += `Based on your planned holding period, you would likely receive favorable long-term capital gains treatment on the post-vesting appreciation.`;
        } else {
          description += `Based on your planned holding period, you would pay short-term capital gains rates (same as ordinary income) on the post-vesting appreciation.`;
        }
        
        description += `</p>`;
        break;
        
      case 'rsa':
        if (result.elected83b) {
          description += `<p>With Restricted Stock Awards (RSAs) and an 83(b) election, you pay ordinary income tax at grant on the difference between the fair market value and your purchase price. No tax is due at vesting.`;
          
          description += `</p><p>When you sell the shares, you'll owe capital gains tax on any appreciation that occurs after grant. `;
          
          if (result.isLongTerm) {
            description += `Based on your planned holding period, you would likely receive favorable long-term capital gains treatment, which is a significant advantage of making the 83(b) election.`;
          } else {
            description += `Based on your planned holding period, you would pay short-term capital gains rates (same as ordinary income) on the post-grant appreciation.`;
          }
        } else {
          description += `<p>With Restricted Stock Awards (RSAs) without an 83(b) election, you don't owe taxes at grant. The primary tax event occurs at vesting, when you'll owe ordinary income tax on the difference between the fair market value at vesting and your purchase price.`;
          
          description += `</p><p>When you sell the shares, you'll owe capital gains tax on any appreciation that occurs after vesting. `;
          
          if (result.isLongTerm) {
            description += `Based on your planned holding period, you would likely receive favorable long-term capital gains treatment on the post-vesting appreciation.`;
          } else {
            description += `Based on your planned holding period, you would pay short-term capital gains rates (same as ordinary income) on the post-vesting appreciation.`;
          }
        }
        
        description += `</p>`;
        break;
    }
    
    timelineDescription.innerHTML = description;
  }
  
  // Update the tax breakdown by event
  function updateTaxBreakdown(result) {
    const taxEventsContainer = document.getElementById('tax-events');
    let html = '';
    
    // Add each tax event
    result.taxableEvents.forEach(event => {
      if (event.taxType !== 'none' && event.amount > 0) {
        html += `
          <div class="tax-event">
            <div class="tax-event-header">
              <div class="tax-event-title">${capitalizeFirstLetter(event.event)}</div>
              <div class="tax-event-amount">${formatCurrency(event.amount)}</div>
            </div>
            <div class="tax-event-details">
              <p>${event.description}</p>
        `;
        
        if (event.taxType === 'ordinary_income') {
          html += `<p>This amount is subject to ordinary income tax at approximately ${(result.incomeTaxRate * 100).toFixed(1)}% federal rate`;
          
          if (result.stateTaxRate > 0) {
            html += ` plus ${(result.stateTaxRate * 100).toFixed(1)}% state rate`;
          }
          
          html += `, resulting in estimated tax of ${formatCurrency(event.amount * (result.incomeTaxRate + result.stateTaxRate))}.</p>`;
        } else if (event.taxType === 'capital_gains') {
          html += `<p>This amount is subject to ${result.isLongTerm ? 'long-term' : 'short-term'} capital gains tax at approximately ${(result.capitalGainsRate * 100).toFixed(1)}% federal rate`;
          
          if (result.stateTaxRate > 0) {
            html += ` plus ${(result.stateTaxRate * 100).toFixed(1)}% state rate`;
          }
          
          html += `, resulting in estimated tax of ${formatCurrency(event.amount * (result.capitalGainsRate + result.stateTaxRate))}.</p>`;
        } else if (event.taxType === 'amt') {
          html += `<p>This may trigger Alternative Minimum Tax (AMT) liability of approximately ${formatCurrency(event.amount)}.</p>`;
        } else if (event.taxType === 'hybrid') {
          html += `<p>Ordinary income portion: ${formatCurrency(event.ordinaryPortion)} (taxed at ${(result.incomeTaxRate * 100).toFixed(1)}% federal rate`;
          
          if (result.stateTaxRate > 0) {
            html += ` plus ${(result.stateTaxRate * 100).toFixed(1)}% state rate`;
          }
          
          html += `)</p>`;
          
          html += `<p>Capital gains portion: ${formatCurrency(event.capitalPortion)} (taxed at ${(result.capitalGainsRate * 100).toFixed(1)}% federal rate`;
          
          if (result.stateTaxRate > 0) {
            html += ` plus ${(result.stateTaxRate * 100).toFixed(1)}% state rate`;
          }
          
          html += `)</p>`;
          
          const totalTax = event.ordinaryPortion * (result.incomeTaxRate + result.stateTaxRate) + 
                          event.capitalPortion * (result.capitalGainsRate + result.stateTaxRate);
          
          html += `<p>Total estimated tax: ${formatCurrency(totalTax)}</p>`;
        }
        
        html += `
            </div>
          </div>
        `;
      }
    });
    
    // If no taxable events, show a message
    if (html === '') {
      html = '<p>No significant taxable events based on your inputs.</p>';
    }
    
    taxEventsContainer.innerHTML = html;
  }
  
  // Update the total tax impact section
  function updateTotalTaxImpact(result) {
    document.getElementById('total-ordinary-income').textContent = formatCurrency(result.ordinaryIncome);
    document.getElementById('total-ordinary-tax').textContent = formatCurrency(result.ordinaryIncomeTax);
    document.getElementById('total-capital-gains').textContent = formatCurrency(result.capitalGains);
    document.getElementById('total-capital-tax').textContent = formatCurrency(result.capitalGainsTax);
    
    // Include AMT in total tax liability
    let totalLiability = result.ordinaryIncomeTax + result.capitalGainsTax;
    if (result.amtImpact) {
      totalLiability += result.amtLiability;
    }
    
    document.getElementById('total-tax-liability').textContent = formatCurrency(totalLiability);
  }
  
  // Update AMT warning section
  function updateAMTWarning(result) {
    const amtWarningContainer = document.getElementById('amt-warning-container');
    const amtWarningContent = document.getElementById('amt-warning-content');
    
    if (result.amtImpact && result.equityType === 'iso') {
      amtWarningContainer.style.display = 'block';
      
      amtWarningContent.innerHTML = `
        <p>Based on your inputs, exercising your ISOs could trigger an Alternative Minimum Tax (AMT) liability of approximately <strong>${formatCurrency(result.amtLiability)}</strong>.</p>
        <p>The AMT is triggered because the "spread" between your exercise price (${formatCurrency(result.grantPrice)}) and the fair market value at exercise (${formatCurrency(result.currentFMV)}) is considered a tax preference item for AMT calculations.</p>
        <p>Key considerations for AMT planning:</p>
        <ul>
          <li>Exercise ISOs strategically, potentially spreading exercises across tax years</li>
          <li>Consider exercising earlier when the spread is smaller</li>
          <li>Be aware of potential AMT credit that can offset regular tax in future years</li>
          <li>Consult with a tax professional for personalized AMT planning</li>
        </ul>
      `;
    } else {
      amtWarningContainer.style.display = 'none';
    }
  }
  
  // Generate tax planning strategies
  function generateTaxPlanningStrategies(result) {
    const planningStrategiesDiv = document.getElementById('planning-strategies');
    let strategies = '<p>Based on your inputs, consider these potential tax planning opportunities:</p><ul>';
    
    // Add strategies based on equity type
    switch (result.equityType) {
      case 'iso':
        strategies += `<li><strong>Exercise timing:</strong> Consider exercising when the spread between exercise price and FMV is lower to minimize AMT impact.</li>`;
        strategies += `<li><strong>Holding period:</strong> To qualify for favorable tax treatment, hold shares for at least 1 year after exercise and 2 years after grant.</li>`;
        
        if (result.amtImpact) {
          strategies += `<li><strong>AMT planning:</strong> Consider exercising in multiple tax years to spread out AMT impact, or exercise in years when your other income is lower.</li>`;
        }
        
        break;
        
      case 'nso':
        strategies += `<li><strong>Exercise timing:</strong> Consider exercising when you expect the company's value (and thus your tax burden) to be lower, or in years when your other income is lower.</li>`;
        strategies += `<li><strong>Holding period:</strong> Hold shares for at least 1 year after exercise to qualify for long-term capital gains rates on any post-exercise appreciation.</li>`;
        break;
        
      case 'rsu':
        strategies += `<li><strong>Diversification:</strong> Since RSUs are taxed at vesting regardless of whether you sell, consider selling some shares at vesting to cover taxes and diversify.</li>`;
        strategies += `<li><strong>Holding period:</strong> For shares you keep, hold for at least 1 year after vesting to qualify for long-term capital gains rates on any appreciation.</li>`;
        break;
        
      case 'rsa':
        if (!result.elected83b) {
          strategies += `<li><strong>83(b) election:</strong> For future RSA grants, consider filing an 83(b) election within 30 days if you expect significant appreciation between grant and vesting.</li>`;
        }
        
        strategies += `<li><strong>Holding period:</strong> Hold shares for at least 1 year after ${result.elected83b ? 'grant' : 'vesting'} to qualify for long-term capital gains rates on appreciation.</li>`;
        break;
    }
    
    // Add general strategies
    strategies += `<li><strong>Tax rate management:</strong> If possible, manage your other income to stay in lower tax brackets in years when you expect significant equity-related income.</li>`;
    
    if (result.exerciseTiming !== 'at-exit' && (result.equityType === 'iso' || result.equityType === 'nso')) {
      strategies += `<li><strong>Early exercise:</strong> If your company allows it, consider early exercise of options when the FMV is close to the strike price to minimize tax impact and start your capital gains holding period.</li>`;
    }
    
    strategies += `<li><strong>Professional guidance:</strong> Consult with a tax professional familiar with equity compensation to develop a personalized strategy based on your complete financial situation.</li>`;
    
    strategies += `</ul>`;
    
    planningStrategiesDiv.innerHTML = strategies;
  }
  
  // Helper functions
  function formatCurrency(amount) {
    return '$' + amount.toLocaleString(undefined, { minimumFractionDigits: 0, maximumFractionDigits: 0 });
  }
  
  function getEquityTypeName(type) {
    const types = {
      'iso': 'Incentive Stock Options (ISOs)',
      'nso': 'Non-qualified Stock Options (NSOs)',
      'rsu': 'Restricted Stock Units (RSUs)',
      'rsa': 'Restricted Stock Awards (RSAs)'
    };
    return types[type] || type;
  }
  
  function capitalizeFirstLetter(string) {
    return string.charAt(0).toUpperCase() + string.slice(1);
  }
  
  // Estimate income tax rate based on income level and filing status
  function estimateIncomeTaxRate(income, filingStatus) {
    const brackets = TaxRates.incomeTaxBrackets[filingStatus === 'joint' ? 'joint' : 'single'];
    let rate = 0;
    
    for (let i = 0; i < brackets.length; i++) {
      if (income <= brackets[i].max) {
        rate = brackets[i].rate;
        break;
      }
    }
    
    return rate;
  }
  
  // Estimate capital gains rate based on income level, filing status, and term
  function estimateCapitalGainsRate(income, filingStatus, isLongTerm) {
    if (!isLongTerm) {
      // Short-term capital gains are taxed as ordinary income
      return estimateIncomeTaxRate(income, filingStatus);
    }
    
    // Long-term capital gains
    const brackets = TaxRates.capitalGains.longTerm[filingStatus === 'joint' ? 'joint' : 'single'];
    let rate = 0;
    
    for (let i = 0; i < brackets.length; i++) {
      if (income <= brackets[i].max) {
        rate = brackets[i].rate;
        break;
      }
    }
    
    // Add Net Investment Income Tax (NIIT) for high incomes
    if (income > TaxRates.niit.threshold[filingStatus === 'joint' ? 'joint' : 'single']) {
      rate += TaxRates.niit.rate;
    }
    
    return rate;
  }
  
  // Initialize the tool
  initTool();
});
</script>



<h1 class="wp-block-heading"></h1>



<p>Equity compensation is a cornerstone of startup employment, but the tax implications can be bewildering even for financially savvy professionals. Different equity structures &#8211; ISOs, NSOs, RSUs, and RSAs &#8211; each come with unique tax consequences that can significantly impact your financial outcome. With careful planning, you can maximize your after-tax returns, but making uninformed decisions can lead to unexpected tax bills and missed opportunities.</p>



<h2 class="wp-block-heading">What Is Equity Compensation?</h2>



<p>Equity compensation provides employees with ownership interest in a company, typically through stock options or restricted stock. Instead of (or in addition to) cash compensation, employees receive the right to purchase company shares at a predetermined price or are granted shares directly, usually subject to a vesting schedule.</p>



<p>For startups, equity compensation serves multiple purposes: it aligns employee and company interests, preserves cash during early growth stages, attracts talent with the promise of future upside, and provides employees with potential tax advantages compared to straight salary.</p>



<h2 class="wp-block-heading">Key Equity Compensation Types and Their Tax Treatment</h2>



<p>Each form of equity compensation triggers tax events at different points and in different ways. Understanding these differences is crucial for financial planning.</p>



<h3 class="wp-block-heading">Incentive Stock Options (ISOs)</h3>



<p>ISOs offer potentially favorable tax treatment but come with more restrictions than other options. Only employees (not contractors or advisors) can receive ISOs.</p>



<p><strong>Tax Timeline for ISOs:</strong></p>



<ol class="wp-block-list">
<li><strong>At Grant</strong>: No tax due when ISOs are granted.</li>



<li><strong>At Vesting</strong>: No tax due when ISOs vest.</li>



<li><strong>At Exercise</strong>: No regular income tax, but potential Alternative Minimum Tax (AMT) if there&#8217;s a significant spread between exercise price and fair market value.</li>



<li><strong>At Sale</strong>: Tax treatment depends on whether the disposition is qualifying or disqualifying:
<ul class="wp-block-list">
<li><strong>Qualifying Disposition</strong>: If you hold the shares for at least 1 year after exercise AND at least 2 years after grant, the entire gain is treated as long-term capital gains.</li>



<li><strong>Disqualifying Disposition</strong>: If you don&#8217;t meet the holding requirements, the spread at exercise is taxed as ordinary income, and any additional gain is capital gain.</li>
</ul>
</li>
</ol>



<h3 class="wp-block-heading">Non-qualified Stock Options (NSOs)</h3>



<p>NSOs are more flexible than ISOs and can be granted to anyone, including contractors, advisors, and directors.</p>



<p><strong>Tax Timeline for NSOs:</strong></p>



<ol class="wp-block-list">
<li><strong>At Grant</strong>: Typically no tax due (unless the option has a readily determinable fair market value).</li>



<li><strong>At Vesting</strong>: No tax due.</li>



<li><strong>At Exercise</strong>: The spread between exercise price and fair market value is taxed as ordinary income, subject to income and employment taxes.</li>



<li><strong>At Sale</strong>: Any additional appreciation after exercise is taxed as capital gain (short-term or long-term depending on holding period).</li>
</ol>



<h3 class="wp-block-heading">Restricted Stock Units (RSUs)</h3>



<p>RSUs represent a promise to issue shares at a future date, typically when vesting requirements are met.</p>



<p><strong>Tax Timeline for RSUs:</strong></p>



<ol class="wp-block-list">
<li><strong>At Grant</strong>: No tax due.</li>



<li><strong>At Vesting</strong>: Fair market value of vested shares is taxed as ordinary income.</li>



<li><strong>At Sale</strong>: Any appreciation after vesting is taxed as capital gain based on holding period.</li>
</ol>



<h3 class="wp-block-heading">Restricted Stock Awards (RSAs)</h3>



<p>RSAs involve issuing actual shares at grant, subject to forfeiture until vesting requirements are met.</p>



<p><strong>Tax Timeline for RSAs:</strong></p>



<ol class="wp-block-list">
<li><strong>At Grant</strong>:
<ul class="wp-block-list">
<li>With 83(b) election: Fair market value minus purchase price is taxed as ordinary income at grant.</li>



<li>Without 83(b) election: No tax due.</li>
</ul>
</li>



<li><strong>At Vesting</strong>:
<ul class="wp-block-list">
<li>With 83(b) election: No tax due.</li>



<li>Without 83(b) election: Fair market value minus purchase price is taxed as ordinary income.</li>
</ul>
</li>



<li><strong>At Sale</strong>:
<ul class="wp-block-list">
<li>With 83(b) election: Entire gain from grant value to sale price is capital gain.</li>



<li>Without 83(b) election: Gain from vesting value to sale price is capital gain.</li>
</ul>
</li>
</ol>



<h2 class="wp-block-heading">Critical Tax Concepts for Equity Compensation</h2>



<p>Several tax concepts play crucial roles in equity compensation taxation:</p>



<h3 class="wp-block-heading">Alternative Minimum Tax (AMT)</h3>



<p>The AMT primarily affects individuals exercising ISOs with a significant spread between the exercise price and fair market value. This parallel tax system was designed to ensure high-income taxpayers pay at least a minimum level of tax.</p>



<p>When you exercise ISOs, the spread between the exercise price and fair market value isn&#8217;t subject to regular income tax but is an AMT adjustment item. If this causes your AMT liability to exceed your regular tax liability, you&#8217;ll pay the higher amount.</p>



<p>For 2024, the AMT exemption amounts are:</p>



<ul class="wp-block-list">
<li>$81,250 for single filers</li>



<li>$126,500 for married filing jointly</li>
</ul>



<p>The exemption begins to phase out when AMT income exceeds:</p>



<ul class="wp-block-list">
<li>$578,150 for single filers</li>



<li>$1,156,300 for married filing jointly</li>
</ul>



<h3 class="wp-block-heading">Section 83(b) Election</h3>



<p>The 83(b) election allows you to pay tax on the value of restricted stock at grant rather than waiting until the shares vest. This election must be filed with the IRS within 30 days of receiving the grant and cannot be revoked without IRS approval.</p>



<p>Benefits of making an 83(b) election include starting the capital gains holding period immediately, potentially lower tax burden if the shares appreciate significantly, and paying tax on the lower grant date value rather than the potentially higher vesting date value.</p>



<p>Risks include paying tax upfront on shares that may never vest, paying tax on a higher value if the stock decreases, and the irrevocable nature of the election, even if the stock becomes worthless.</p>



<h3 class="wp-block-heading">Holding Periods and Capital Gains</h3>



<p>The length of time you hold shares after acquiring them affects your tax rate on any gains:</p>



<ul class="wp-block-list">
<li><strong>Short-term capital gains</strong>: For shares held for one year or less, gains are taxed at ordinary income rates.</li>



<li><strong>Long-term capital gains</strong>: For shares held longer than one year, gains receive preferential tax rates:
<ul class="wp-block-list">
<li>0% for income up to $47,025 (single) or $94,050 (married filing jointly)</li>



<li>15% for income up to $518,900 (single) or $583,750 (married filing jointly)</li>



<li>20% for income above these thresholds</li>
</ul>
</li>
</ul>



<p>For ISOs, you must hold the shares for at least 1 year after exercise AND 2 years after grant to receive favorable tax treatment.</p>



<h2 class="wp-block-heading">Tax Planning Strategies for Equity Compensation</h2>



<p>With thoughtful planning, you can optimize the tax outcomes of your equity compensation.</p>



<h3 class="wp-block-heading">Early Exercise Options</h3>



<p>Some companies allow employees to exercise unvested options. If permitted, early exercise of options when the stock price is low can provide tax advantages: the spread at exercise will be minimal for NSOs, resulting in little or no ordinary income tax; for ISOs, minimal spread reduces AMT exposure; and early exercise allows you to start the capital gains holding period sooner.</p>



<p>If you early exercise, consider filing an 83(b) election within 30 days to lock in the current valuation for tax purposes.</p>



<h3 class="wp-block-heading">ISO Exercise Timing to Manage AMT</h3>



<p>Strategic timing of ISO exercises can help minimize AMT impact by spreading exercises across tax years to avoid a large AMT hit in a single year, exercising in lower-income years when you&#8217;re less likely to trigger AMT, exercising near the end of the calendar year so you have visibility into your annual income, and considering exercises when company valuation is lower if you believe in the company&#8217;s long-term prospects.</p>



<h3 class="wp-block-heading">Managing RSU Tax Impact</h3>



<p>Since RSUs are taxed at vesting regardless of whether you sell, consider selling enough shares at vesting to cover taxes, diversify immediately after vesting if you&#8217;re concerned about concentration risk, and for shares you keep, hold for at least one year to qualify for long-term capital gains treatment on any appreciation.</p>



<h2 class="wp-block-heading">Common Pitfalls and How to Avoid Them</h2>



<p>Even sophisticated employees make costly mistakes with equity compensation.</p>



<h3 class="wp-block-heading">Failing to Understand the AMT Impact</h3>



<p>Exercising ISOs without considering AMT implications can lead to an unexpected tax bill, potentially tens or hundreds of thousands of dollars. Before exercising ISOs, calculate potential AMT liability and consider working with a tax professional who specializes in equity compensation.</p>



<h3 class="wp-block-heading">Missing the 83(b) Election Window</h3>



<p>The 83(b) election must be filed within 30 days of receiving restricted stock. Missing this window means you can&#8217;t take advantage of potentially significant tax benefits. Set a calendar reminder immediately upon receiving an RSA grant and prepare the election paperwork in advance.</p>



<h3 class="wp-block-heading">Exercising Without an Exit Strategy</h3>



<p>Exercising options creates a tax liability without generating cash to pay the taxes, especially concerning if the stock later declines in value. Only exercise if you have cash to pay both the exercise cost and resulting taxes, a clear understanding of the company&#8217;s prospects and potential exit timeline, and consideration of whether the company will remain private long-term.</p>



<h3 class="wp-block-heading">Misunderstanding Post-Termination Exercise Windows</h3>



<p>Many employees don&#8217;t realize that stock options typically expire 90 days after leaving the company, forcing a choice between exercising (and paying taxes) or letting valuable options expire. Understand your post-termination exercise window before leaving a company and if possible, negotiate an extended exercise window when joining or as part of your separation.</p>



<h2 class="wp-block-heading">How to Use My Equity Tax Calculator</h2>



<p>My calculator helps you understand the tax implications of your equity compensation based on your specific situation. Here&#8217;s how to use it effectively:</p>



<ol class="wp-block-list">
<li><strong>Select your equity type</strong>: Choose between ISOs, NSOs, RSUs, or RSAs.</li>



<li><strong>Enter grant details</strong>: Input the number of shares, grant price, current fair market value, and expected exit value.</li>



<li><strong>Provide timing information</strong>: Indicate when you plan to exercise (for options) and how long you&#8217;ll hold shares.</li>



<li><strong>Add tax details</strong>: Enter your filing status, approximate income level, and any special elections.</li>
</ol>



<p>The calculator will provide a visualization of tax events throughout your equity lifecycle, a breakdown of tax implications at each stage, estimated ordinary income and capital gains tax amounts, potential AMT impacts for ISOs, and tailored tax planning suggestions.</p>



<p>Remember that the calculator provides estimates based on current tax rates and simplified assumptions. Always consult with a tax professional for personalized advice.</p>



<h2 class="wp-block-heading">Working with Tax Professionals</h2>



<p>Equity compensation creates complex tax situations that often warrant professional guidance. When seeking help, find a specialist with specific experience in equity compensation, coordinate early before making exercise decisions, provide grant agreements and other documentation, and consider multi-year planning since equity compensation can impact your taxes for years.</p>



<h2 class="wp-block-heading">FAQ: Startup Equity Tax Questions</h2>



<h3 class="wp-block-heading">How are stock options taxed differently from RSUs?</h3>



<p>Stock options (both ISOs and NSOs) are not taxed at grant or vesting. The primary tax event occurs when you exercise the options. For NSOs, you pay ordinary income tax on the spread between exercise price and fair market value at exercise. For ISOs, you generally don&#8217;t pay regular income tax at exercise, but may trigger AMT.</p>



<p>RSUs, on the other hand, are taxed as ordinary income when they vest, based on the fair market value at that time. This happens automatically without any action on your part. Both stock options and RSUs can generate capital gains tax when you eventually sell the shares, but the calculation of the gain differs because your cost basis is established at different times.</p>



<h3 class="wp-block-heading">What happens if my startup fails after I&#8217;ve paid taxes on equity?</h3>



<p>This is unfortunately one of the risks of equity compensation. If you&#8217;ve paid taxes (especially AMT on ISOs or ordinary income tax on NSOs at exercise) and the company later fails, you&#8217;ve essentially paid tax on income you never ultimately received.</p>



<p>For AMT paid on ISOs, you may be able to recover some of the tax through the AMT credit in future years. For ordinary income tax paid on NSOs or RSUs, you may be able to claim a capital loss when the shares become worthless, but this is limited to $3,000 per year against ordinary income (with carryforward for additional amounts).</p>



<p>This risk underscores the importance of carefully considering exercise decisions, especially for private companies with uncertain futures.</p>



<h3 class="wp-block-heading">Should I always make an 83(b) election for RSAs?</h3>



<p>While an 83(b) election often makes sense for RSAs, it&#8217;s not always the right choice. You should consider the amount of tax you&#8217;ll pay upfront (based on current valuation), the likelihood of the shares vesting, the company&#8217;s growth prospects, and your cash position.</p>



<p>The election makes the most sense when the current valuation is low, you&#8217;re confident about vesting and company growth, and you can afford the upfront tax payment. Remember, the election must be filed within 30 days of the grant and cannot be revoked.</p>



<h3 class="wp-block-heading">How does leaving a company affect my equity taxation?</h3>



<p>Leaving a company can significantly impact your equity. Unvested equity is typically forfeited unless your separation agreement states otherwise. Stock options usually have a limited post-termination exercise window (often 90 days), after which unexercised options expire. For ISOs, any options exercised after 90 days from termination automatically convert to NSOs, losing their potential tax advantages. For RSUs and RSAs, vested shares are yours to keep, but unvested shares are typically forfeited.</p>



<p>Before leaving a company, carefully review your equity agreements, understand your post-termination exercise windows, and consider the tax implications of any exercise decisions.</p>



<h3 class="wp-block-heading">What tax records should I keep for my equity compensation?</h3>



<p>Maintain detailed records of your equity compensation, including original grant documents, vesting schedules, exercise documentation, 83(b) election paperwork (if filed) with proof of filing, sale confirmations, company valuations at relevant dates, and tax returns for years when you received, exercised, or sold equity.</p>



<p>These records should be kept for at least seven years after you file the tax return reporting the final sale of shares, as the IRS can audit returns for up to seven years in some cases.</p>
</div>
    </article>
  </main>

  <footer><p>Â© 2025 Terms.Law. All rights reserved.</p></footer>
</body>
</html>