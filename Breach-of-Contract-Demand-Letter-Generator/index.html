<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breach of Contract Demand Letter Generator | Professional Legal Tool</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Professional breach of contract demand letter generator for service agreements, vendor contracts, partnerships. Expert legal templates with live preview and case assessment.">
    <meta name="keywords" content="breach of contract, demand letter, service agreement, vendor contract, partnership agreement, SaaS contract, legal template">
    
    <!-- Styles -->
    <link rel="stylesheet" href="../Tenant-Security-Deposit-Generator/styles.css">
    
    <!-- React CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>
    
    <style>
        /* Custom styles for breach of contract generator */
        .form-section {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .form-section:last-child {
            border-bottom: none;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        
        .form-row-three {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 1rem;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: auto;
        }
        
        .letter-content {
            line-height: 1.6;
            font-family: 'Times New Roman', serif;
            font-size: 14px;
        }
        
        .letter-header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #000;
        }
        
        .letter-date {
            text-align: right;
            margin-bottom: 2rem;
        }
        
        .letter-body p {
            margin-bottom: 1rem;
        }
        
        .contract-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        
        .contract-table th,
        .contract-table td {
            border: 1px solid #000;
            padding: 8px;
            text-align: left;
        }
        
        .contract-table th {
            background-color: #f3f4f6;
        }
        
        .breach-highlight {
            background-color: #fef3c7;
            padding: 0.5rem;
            border-left: 4px solid #f59e0b;
            margin: 1rem 0;
        }
        
        .legal-citation {
            font-style: italic;
            font-size: 0.9em;
            color: #6b7280;
        }
        
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .form-row-three {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- Load dependencies -->
    <script src="../Tenant-Security-Deposit-Generator/paywall-system.js"></script>
    
    <script>
        const { useState, useRef, useEffect } = React;

        // Icon component
        const Icon = ({ name, style = {} }) => React.createElement('i', {
            'data-feather': name,
            style: style
        });

        // Main Breach of Contract Generator Component
        const BreachContractGenerator = () => {
            // State management
            const [currentTab, setCurrentTab] = useState(0);
            const [hasPaywallAccess, setHasPaywallAccess] = useState(false);
            const [eSignLoading, setESignLoading] = useState(false);
            const previewRef = useRef(null);
            
            // Form data state
            const [formData, setFormData] = useState({
                // Your Company Information
                yourCompanyName: '',
                yourCompanyAddress: '',
                yourContactName: '',
                yourEmail: '',
                yourPhone: '',
                yourTitle: '',
                
                // Breaching Party Information
                breachingPartyName: '',
                breachingPartyAddress: '',
                breachingContactName: '',
                breachingContactTitle: '',
                breachingEmail: '',
                
                // Contract Information
                contractType: 'service_agreement',
                contractTitle: '',
                contractDate: '',
                contractValue: '',
                contractTerm: '',
                governingLaw: 'CA',
                
                // Breach Details
                breachType: 'material_breach',
                breachCategory: 'nonperformance',
                breachDescription: '',
                breachDate: '',
                contractProvision: '',
                specificObligations: '',
                
                // Performance Details
                yourPerformance: '',
                theirFailure: '',
                noticeProvided: '',
                cureAttempts: '',
                
                // Damages and Impact
                damageType: 'direct',
                directDamages: '',
                consequentialDamages: '',
                lostProfits: '',
                mitigationEfforts: '',
                
                // Legal Strategy
                demandAction: 'cure_and_damages',
                cureDeadline: '30',
                legalRemedies: ['damages', 'specific_performance'],
                disputeResolution: 'litigation',
                urgencyLevel: 'standard',
                
                // Previous Communications
                priorNotices: '',
                breachingPartyResponse: '',
                
                // Additional Considerations
                timeIsCritical: false,
                ongoingHarm: false,
                reputationalDamage: false,
                thirdPartyImpact: false,
                industryStandards: false
            });

            // Tab definitions
            const tabs = [
                { id: 'contract', label: 'Contract Details', icon: 'file-text' },
                { id: 'breach', label: 'Breach Analysis', icon: 'alert-triangle' },
                { id: 'strategy', label: 'Legal Strategy', icon: 'target' },
                { id: 'assessment', label: 'Case Assessment', icon: 'bar-chart-2' }
            ];

            // Contract type options - Enhanced with industry-specific templates
            const contractTypes = {
                'service_agreement': 'Service Agreement',
                'saas_contract': 'SaaS/Software Contract',
                'development_contract': 'Development Contract',
                'consulting_agreement': 'Consulting Agreement',
                'vendor_contract': 'Vendor/Supplier Contract',
                'partnership_agreement': 'Partnership Agreement',
                'employment_contract': 'Employment Contract',
                'licensing_agreement': 'Licensing Agreement',
                'distribution_agreement': 'Distribution Agreement',
                'real_estate_purchase': 'Real Estate Purchase Agreement',
                'real_estate_lease': 'Real Estate Lease Agreement',
                'construction_contract': 'Construction Contract',
                'ip_licensing': 'Intellectual Property License',
                'franchise_agreement': 'Franchise Agreement',
                'joint_venture': 'Joint Venture Agreement',
                'merger_acquisition': 'Merger & Acquisition',
                'loan_agreement': 'Loan/Financing Agreement',
                'supply_chain': 'Supply Chain Contract',
                'manufacturing': 'Manufacturing Agreement',
                'international_trade': 'International Trade Contract',
                'subscription_service': 'Subscription Service Agreement',
                'marketplace_seller': 'Marketplace Seller Agreement',
                'influencer_marketing': 'Influencer Marketing Contract',
                'data_processing': 'Data Processing Agreement',
                'cloud_services': 'Cloud Services Contract',
                'other': 'Other Contract Type'
            };

            // Breach types with legal significance
            const breachTypes = {
                'material_breach': 'Material Breach',
                'minor_breach': 'Minor/Partial Breach',
                'fundamental_breach': 'Fundamental Breach',
                'anticipatory_breach': 'Anticipatory Breach',
                'total_breach': 'Total Breach'
            };

            // Breach categories
            const breachCategories = {
                'nonperformance': 'Complete Non-Performance',
                'partial_performance': 'Partial/Defective Performance',
                'delayed_performance': 'Delayed Performance',
                'scope_deviation': 'Deviation from Scope',
                'quality_issues': 'Quality/Standards Issues',
                'payment_breach': 'Payment/Financial Breach',
                'confidentiality_breach': 'Confidentiality Breach',
                'exclusivity_breach': 'Exclusivity Breach'
            };

            // US States for governing law
            const US_STATES = [
                { value: 'AL', label: 'Alabama' }, { value: 'AK', label: 'Alaska' }, { value: 'AZ', label: 'Arizona' },
                { value: 'AR', label: 'Arkansas' }, { value: 'CA', label: 'California' }, { value: 'CO', label: 'Colorado' },
                { value: 'CT', label: 'Connecticut' }, { value: 'DE', label: 'Delaware' }, { value: 'FL', label: 'Florida' },
                { value: 'GA', label: 'Georgia' }, { value: 'HI', label: 'Hawaii' }, { value: 'ID', label: 'Idaho' },
                { value: 'IL', label: 'Illinois' }, { value: 'IN', label: 'Indiana' }, { value: 'IA', label: 'Iowa' },
                { value: 'KS', label: 'Kansas' }, { value: 'KY', label: 'Kentucky' }, { value: 'LA', label: 'Louisiana' },
                { value: 'ME', label: 'Maine' }, { value: 'MD', label: 'Maryland' }, { value: 'MA', label: 'Massachusetts' },
                { value: 'MI', label: 'Michigan' }, { value: 'MN', label: 'Minnesota' }, { value: 'MS', label: 'Mississippi' },
                { value: 'MO', label: 'Missouri' }, { value: 'MT', label: 'Montana' }, { value: 'NE', label: 'Nebraska' },
                { value: 'NV', label: 'Nevada' }, { value: 'NH', label: 'New Hampshire' }, { value: 'NJ', label: 'New Jersey' },
                { value: 'NM', label: 'New Mexico' }, { value: 'NY', label: 'New York' }, { value: 'NC', label: 'North Carolina' },
                { value: 'ND', label: 'North Dakota' }, { value: 'OH', label: 'Ohio' }, { value: 'OK', label: 'Oklahoma' },
                { value: 'OR', label: 'Oregon' }, { value: 'PA', label: 'Pennsylvania' }, { value: 'RI', label: 'Rhode Island' },
                { value: 'SC', label: 'South Carolina' }, { value: 'SD', label: 'South Dakota' }, { value: 'TN', label: 'Tennessee' },
                { value: 'TX', label: 'Texas' }, { value: 'UT', label: 'Utah' }, { value: 'VT', label: 'Vermont' },
                { value: 'VA', label: 'Virginia' }, { value: 'WA', label: 'Washington' }, { value: 'WV', label: 'West Virginia' },
                { value: 'WI', label: 'Wisconsin' }, { value: 'WY', label: 'Wyoming' }
            ];

            // Paywall integration
            useEffect(() => {
                const checkPaymentStatus = () => {
                    if (window.PaywallSystem && window.PaywallSystem.hasAccess()) {
                        setHasPaywallAccess(true);
                        return true;
                    }
                    return false;
                };
                
                if (!checkPaymentStatus()) {
                    // Note: We don't call makePreviewNonCopyable to allow scrolling
                    // Copy/download protection is handled by individual button clicks
                }

                // Set default date to today
                const today = new Date();
                const thirtyDaysAgo = new Date();
                thirtyDaysAgo.setDate(today.getDate() - 30);
                
                setFormData(prev => ({
                    ...prev,
                    breachDate: today.toISOString().split('T')[0],
                    contractDate: thirtyDaysAgo.toISOString().split('T')[0]
                }));

                // Initialize feather icons
                if (window.feather) {
                    window.feather.replace();
                }
            }, []);

            // Update form data with live preview highlighting
            const updateFormData = (field, value) => {
                setFormData(prev => ({ ...prev, [field]: value }));
                
                // Add highlighting and scroll to updated content
                setTimeout(() => {
                    highlightUpdatedContent(field);
                }, 100);
            };

            // Highlight updated content in preview
            const highlightUpdatedContent = (field) => {
                if (!previewRef.current) return;
                
                // Comprehensive field mapping to preview elements
                const fieldMappings = {
                    'yourCompanyName': ['FROM:', 'yourCompanyName', 'Company'],
                    'yourContactName': ['FROM:', 'yourContactName', 'Name'],
                    'yourEmail': ['Email:', '@'],
                    'yourPhone': ['Phone:', '('],
                    'yourCompanyAddress': ['Address:', 'FROM:'],
                    'breachingPartyName': ['TO:', 'breachingPartyName', 'Party'],
                    'breachingContactName': ['TO:', 'Contact'],
                    'breachingPartyAddress': ['TO:', 'Address'],
                    'contractType': ['Contract Type', 'RE: DEMAND FOR CURE', 'Agreement'],
                    'contractDate': ['Contract Date', 'Execution Date', 'dated'],
                    'contractValue': ['Contract Value', '$', 'value'],
                    'breachDescription': ['Specific Breach:', 'BREACH OF CONTRACT', 'failure'],
                    'breachDate': ['Breach Date', 'occurred on'],
                    'yourPerformance': ['performance', 'fulfilled'],
                    'theirFailure': ['failure', 'breach'],
                    'directDamages': ['damages', '$', 'Direct'],
                    'consequentialDamages': ['consequential', 'damages'],
                    'lostProfits': ['lost profits', 'profits'],
                    'cureDeadline': ['cure this breach within', 'days', 'deadline'],
                    'governingLaw': ['governed by', 'Law', 'jurisdiction'],
                    'legalRemedies': ['remedies', 'legal action'],
                    'breachType': ['breach', 'violation'],
                    'contractProvision': ['provision', 'section'],
                    'priorNotices': ['notice', 'previously'],
                    'mitigationEfforts': ['mitigation', 'efforts']
                };
                
                const searchTerms = fieldMappings[field];
                if (!searchTerms) return;
                
                // Find and highlight relevant content with improved matching
                const previewContent = previewRef.current;
                let foundMatch = false;
                
                searchTerms.forEach(term => {
                    if (foundMatch) return; // Only highlight first successful match
                    
                    const elements = previewContent.querySelectorAll('*');
                    elements.forEach(element => {
                        if (foundMatch) return;
                        
                        if (element.textContent.toLowerCase().includes(term.toLowerCase()) && 
                            element.children.length === 0) { // Only leaf nodes
                            
                            // Add highlighting with enhanced visibility
                            element.style.backgroundColor = '#fde047';
                            element.style.transition = 'background-color 0.3s ease';
                            element.style.padding = '3px 6px';
                            element.style.borderRadius = '4px';
                            element.style.boxShadow = '0 2px 4px rgba(0,0,0,0.1)';
                            
                            // Smooth scroll to element
                            element.scrollIntoView({ 
                                behavior: 'smooth', 
                                block: 'center',
                                inline: 'nearest'
                            });
                            
                            // Remove highlighting after delay
                            setTimeout(() => {
                                element.style.backgroundColor = '';
                                element.style.padding = '';
                                element.style.boxShadow = '';
                            }, 3000);
                            
                            foundMatch = true;
                            return;
                        }
                    });
                });
                
                // If no specific match found, try broader search by field value
                if (!foundMatch && formData[field]) {
                    const fieldValue = formData[field].toString();
                    if (fieldValue.length > 2) {
                        const elements = previewContent.querySelectorAll('*');
                        elements.forEach(element => {
                            if (foundMatch) return;
                            
                            if (element.textContent.includes(fieldValue) && 
                                element.children.length === 0) {
                                
                                element.style.backgroundColor = '#fde047';
                                element.style.transition = 'background-color 0.3s ease';
                                element.style.padding = '3px 6px';
                                element.style.borderRadius = '4px';
                                element.style.boxShadow = '0 2px 4px rgba(0,0,0,0.1)';
                                
                                element.scrollIntoView({ 
                                    behavior: 'smooth', 
                                    block: 'center',
                                    inline: 'nearest'
                                });
                                
                                setTimeout(() => {
                                    element.style.backgroundColor = '';
                                    element.style.padding = '';
                                    element.style.boxShadow = '';
                                }, 3000);
                                
                                foundMatch = true;
                            }
                        });
                    }
                }
            };

            // Highlight content when switching tabs
            const highlightTabContent = (tabName) => {
                if (!previewRef.current) return;
                
                const tabHighlights = {
                    'contract': ['FROM:', 'TO:', 'Contract', 'Agreement'],
                    'breach': ['BREACH', 'failure', 'violation', 'damages'],
                    'strategy': ['remedies', 'legal action', 'cure', 'deadline'],
                    'assessment': ['Case Strength', 'Analysis', 'Score']
                };
                
                const highlights = tabHighlights[tabName];
                if (!highlights) return;
                
                highlights.forEach((term, index) => {
                    setTimeout(() => {
                        const elements = previewRef.current.querySelectorAll('*');
                        elements.forEach(element => {
                            if (element.textContent.toLowerCase().includes(term.toLowerCase()) && 
                                element.children.length === 0) {
                                
                                element.style.backgroundColor = '#dbeafe';
                                element.style.transition = 'background-color 0.5s ease';
                                element.style.padding = '2px 4px';
                                element.style.borderRadius = '3px';
                                
                                setTimeout(() => {
                                    element.style.backgroundColor = '';
                                    element.style.padding = '';
                                }, 1500);
                                
                                return; // Only highlight first match per term
                            }
                        });
                    }, index * 200); // Stagger highlights
                });
            };

            // Generate comprehensive breach demand letter
            const generateLetterContent = () => {
                const stateName = US_STATES.find(s => s.value === formData.governingLaw)?.label || 'California';
                
                // Calculate breach duration
                let breachDuration = '';
                if (formData.breachDate) {
                    const breachDateObj = new Date(formData.breachDate);
                    const today = new Date();
                    const daysBreach = Math.ceil((today - breachDateObj) / (1000 * 60 * 60 * 24));
                    breachDuration = daysBreach > 0 ? `${daysBreach} days` : 'recently';
                }

                // Determine breach severity language
                const getBreachSeverityLanguage = () => {
                    switch(formData.breachType) {
                        case 'material_breach':
                            return 'material breach that goes to the essence of the contract';
                        case 'fundamental_breach':
                            return 'fundamental breach that defeats the entire purpose of our agreement';
                        case 'total_breach':
                            return 'total breach constituting complete abandonment of contractual obligations';
                        case 'anticipatory_breach':
                            return 'anticipatory breach by clearly indicating inability or unwillingness to perform';
                        default:
                            return 'breach of contract';
                    }
                };

                // Generate damages section
                const generateDamagesSection = () => {
                    let damagesText = '';
                    
                    if (formData.directDamages) {
                        damagesText += `Direct damages of $${formData.directDamages} including `;
                    }
                    if (formData.consequentialDamages) {
                        damagesText += `consequential damages of $${formData.consequentialDamages} including `;
                    }
                    if (formData.lostProfits) {
                        damagesText += `lost profits of $${formData.lostProfits} `;
                    }
                    
                    return damagesText || 'substantial damages including but not limited to direct, incidental, and consequential damages';
                };

                // Generate legal remedies language
                const generateRemediesLanguage = () => {
                    const remedies = formData.legalRemedies || ['damages'];
                    let remediesText = '';
                    
                    if (remedies.includes('specific_performance')) {
                        remediesText += 'specific performance of your contractual obligations, ';
                    }
                    if (remedies.includes('damages')) {
                        remediesText += 'monetary damages, ';
                    }
                    if (remedies.includes('termination')) {
                        remediesText += 'termination of the contract, ';
                    }
                    if (remedies.includes('injunctive_relief')) {
                        remediesText += 'injunctive relief, ';
                    }
                    
                    remediesText += 'attorney fees, costs, and any other relief deemed just and proper';
                    return remediesText;
                };

                return `
                    <div class="letter-header">
                        <h2>DEMAND FOR CURE OF BREACH OF CONTRACT</h2>
                        <p><strong>FORMAL NOTICE OF MATERIAL BREACH</strong></p>
                    </div>
                    
                    <div class="letter-date">
                        <p>${new Date().toLocaleDateString()}</p>
                    </div>
                    
                    <div class="letter-body">
                        <p><strong>TO:</strong> ${formData.breachingPartyName || '[Breaching Party Name]'}<br>
                        ${formData.breachingContactName ? `Attention: ${formData.breachingContactName}` : ''}<br>
                        ${formData.breachingPartyAddress || '[Breaching Party Address]'}</p>
                        
                        <p><strong>FROM:</strong> ${formData.yourCompanyName || '[Your Company Name]'}<br>
                        ${formData.yourContactName ? `${formData.yourContactName}, ${formData.yourTitle || ''}` : ''}<br>
                        ${formData.yourCompanyAddress || '[Your Company Address]'}<br>
                        Email: ${formData.yourEmail || '[Your Email]'}<br>
                        Phone: ${formData.yourPhone || '[Your Phone]'}</p>
                        
                        <p><strong>RE: DEMAND FOR CURE - BREACH OF ${contractTypes[formData.contractType] || 'CONTRACT'}</strong></p>
                        
                        <div class="breach-highlight">
                            <p><strong>NOTICE:</strong> This letter constitutes formal notice of your ${getBreachSeverityLanguage()} dated ${formData.contractDate || '[Contract Date]'} ("Agreement"). Time is of the essence.</p>
                        </div>
                        
                        <p><strong>I. CONTRACT BACKGROUND</strong></p>
                        <table class="contract-table">
                            <tr>
                                <th>Contract Details</th>
                                <th>Information</th>
                            </tr>
                            <tr>
                                <td>Contract Type</td>
                                <td>${contractTypes[formData.contractType] || '[Contract Type]'}</td>
                            </tr>
                            <tr>
                                <td>Contract Title</td>
                                <td>${formData.contractTitle || '[Contract Title]'}</td>
                            </tr>
                            <tr>
                                <td>Execution Date</td>
                                <td>${formData.contractDate || '[Contract Date]'}</td>
                            </tr>
                            <tr>
                                <td>Contract Value</td>
                                <td>$${formData.contractValue || '[Contract Value]'}</td>
                            </tr>
                            <tr>
                                <td>Governing Law</td>
                                <td>${stateName} Law</td>
                            </tr>
                        </table>
                        
                        <p><strong>II. BREACH OF CONTRACT</strong></p>
                        <p><strong>Nature of Breach:</strong> ${breachCategories[formData.breachCategory] || 'Material breach of contract'}</p>
                        <p><strong>Breach Date:</strong> ${formData.breachDate || '[Breach Date]'} (ongoing for ${breachDuration})</p>
                        
                        <p><strong>Specific Breach:</strong> ${formData.breachDescription || '[Detailed description of the breach]'}</p>
                        
                        <p><strong>Contractual Provision Violated:</strong> ${formData.contractProvision || '[Specific contract section/provision breached]'}</p>
                        
                        <p><strong>Failed Obligations:</strong> ${formData.specificObligations || '[Specific obligations that were not performed]'}</p>
                        
                        <p><strong>III. OUR PERFORMANCE</strong></p>
                        <p>We have fully performed our obligations under the Agreement, including: ${formData.yourPerformance || '[Description of your complete performance]'}</p>
                        
                        <p><strong>IV. YOUR MATERIAL FAILURE</strong></p>
                        <p>Despite our complete performance, you have materially breached the Agreement by: ${formData.theirFailure || '[Specific description of their failure to perform]'}</p>
                        
                        ${formData.priorNotices ? `<p><strong>V. PRIOR NOTICE</strong></p><p>We previously provided notice of this breach: ${formData.priorNotices}</p>` : ''}
                        
                        <p><strong>VI. DAMAGES AND LOSSES</strong></p>
                        <p>Your breach has caused us to suffer ${generateDamagesSection()}</p>
                        
                        ${formData.mitigationEfforts ? `<p><strong>Mitigation Efforts:</strong> We have undertaken reasonable efforts to mitigate damages, including: ${formData.mitigationEfforts}</p>` : ''}
                        
                        <p><strong>VII. DEMAND FOR CURE</strong></p>
                        <p>DEMAND IS HEREBY MADE that you immediately cure the above-described breach by:</p>
                        <ul>
                            <li>Specifically performing all obligations under the Agreement</li>
                            <li>Providing complete performance as originally contracted</li>
                            <li>Compensating us for all damages suffered as a result of your breach</li>
                            ${formData.timeIsCritical ? '<li>Recognizing that time is of the essence and delay causes irreparable harm</li>' : ''}
                        </ul>
                        
                        <p><strong>DEADLINE:</strong> You must cure this breach within <strong>${formData.cureDeadline || '30'} days</strong> of receipt of this notice.</p>
                        
                        <p><strong>VIII. LEGAL CONSEQUENCES OF CONTINUED BREACH</strong></p>
                        <p>If you fail to cure this breach within the specified time period, we will pursue all available legal remedies, including:</p>
                        <ul>
                            <li>${generateRemediesLanguage()}</li>
                            <li>All costs and expenses incurred in enforcing our rights</li>
                            ${formData.ongoingHarm ? '<li>Additional damages for continuing harm and lost opportunities</li>' : ''}
                            ${formData.reputationalDamage ? '<li>Damages for harm to business reputation and relationships</li>' : ''}
                        </ul>
                        
                        <p><strong>IX. GOVERNING LAW AND VENUE</strong></p>
                        <p class="legal-citation">This matter is governed by ${stateName} law. Any legal action will be brought in the appropriate courts of ${stateName}.</p>
                        
                        <p><strong>X. PRESERVATION OF RIGHTS</strong></p>
                        <p>This demand is made without prejudice to any other rights or remedies available at law or in equity. We expressly reserve all rights and remedies.</p>
                        
                        <p><strong>CONCLUSION</strong></p>
                        <p>This breach constitutes a serious violation of our agreement and has caused substantial damages. We expect immediate action to cure this breach and compensate for losses suffered.</p>
                        
                        <p>Please confirm in writing your intentions regarding cure of this breach by ${new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toLocaleDateString()}.</p>
                        
                        <p>Very truly yours,<br><br>
                        ${formData.yourContactName || '[Your Name]'}<br>
                        ${formData.yourTitle || '[Your Title]'}<br>
                        ${formData.yourCompanyName || '[Your Company]'}</p>
                        
                        <p><em>This letter constitutes a formal demand and legal notice under applicable contract and statutory law.</em></p>
                    </div>
                `;
            };

            // PayPal transaction ID validation
            window.validatePayPalTransaction = () => {
                const input = document.getElementById('paypal-transaction-id');
                if (!input) return;
                
                const paypalId = input.value.trim().toUpperCase();
                
                // Validate PayPal transaction ID format (17 characters, alphanumeric)
                if (paypalId.length === 17 && 
                    /^[A-Z0-9]+$/.test(paypalId) && 
                    /[A-Z]/.test(paypalId) && 
                    /[0-9]/.test(paypalId)) {
                    
                    // Close modal
                    const modal = input.closest('[style*="position: fixed"]');
                    if (modal) modal.remove();
                    
                    // Grant access
                    setHasPaywallAccess(true);
                    
                    // Show success message
                    alert('‚úÖ Access unlocked! You can now copy and download your breach of contract demand letter.');
                } else {
                    alert('‚ùå Please enter a valid 17-character PayPal transaction ID (letters and numbers only).');
                    input.focus();
                }
            };

            // Custom paywall for breach contract generator
            const showBreachContractPaywall = (action) => {
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed !important;
                    top: 0 !important;
                    left: 0 !important;
                    width: 100% !important;
                    height: 100% !important;
                    background: rgba(0,0,0,0.9) !important;
                    z-index: 999999 !important;
                    display: flex !important;
                    justify-content: center !important;
                    align-items: center !important;
                    overflow-y: auto !important;
                `;
                
                const content = document.createElement('div');
                content.style.cssText = `
                    background: white !important;
                    padding: 1.5rem !important;
                    border-radius: 12px !important;
                    max-width: 420px !important;
                    width: 90% !important;
                    text-align: center !important;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.3) !important;
                    max-height: 90vh !important;
                    overflow-y: auto !important;
                `;
                
                content.innerHTML = `
                    <div style="margin-bottom: 1rem;">
                        <h3 style="color: #1e40af; margin-bottom: 0.5rem; font-size: 1.3rem;">‚öñÔ∏è Professional Legal Access</h3>
                        <p style="color: #6b7280; font-size: 0.95rem; line-height: 1.4; margin: 0;">
                            Unlock ${action === 'copy' ? 'copy' : 'download'} access to your demand letter
                        </p>
                    </div>
                    
                    <div style="background: #f0f9ff; padding: 1rem; border-radius: 8px; margin-bottom: 1rem; border: 1px solid #0ea5e9;">
                        <div style="color: #0c4a6e; font-size: 0.85rem; text-align: left;">
                            üìÑ Professional Word download<br>
                            üìã Copy to clipboard<br>
                            ‚úçÔ∏è <strong>5 electronic signatures included</strong><br>
                            üéØ Case assessment tools<br>
                            ‚ö° 30-day unlimited access
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 1rem;">
                        <div style="font-size: 1.8rem; font-weight: bold; color: #059669; margin-bottom: 0.25rem;">$14.95</div>
                        <div style="color: #6b7280; font-size: 0.8rem;">One-time payment ‚Ä¢ Instant access</div>
                    </div>
                    
                    <div style="display: flex; gap: 1rem; justify-content: center; margin-bottom: 1.5rem;">
                        <button onclick="this.closest('[style*=\"position: fixed\"]').remove()" 
                                style="padding: 0.75rem 1.5rem; background: #6b7280; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">
                            ‚úï Close
                        </button>
                        <button onclick="window.location.href='#payment'" 
                                style="padding: 0.75rem 1.5rem; background: #059669; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">
                            üí≥ Get Access Now
                        </button>
                    </div>
                    
                    <div style="border-top: 1px solid #e5e7eb; padding-top: 1rem;">
                        <div style="margin-bottom: 1rem;">
                            <label style="display: block; margin-bottom: 0.5rem; color: #374151; font-weight: 500; text-align: left;">
                                Already paid? Enter PayPal Transaction ID:
                            </label>
                            <div style="display: flex; gap: 0.5rem;">
                                <input id="paypal-transaction-id" type="text" placeholder="17-character PayPal ID" maxlength="17"
                                       style="flex: 1; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 6px; font-family: monospace; text-transform: uppercase;">
                                <button onclick="validatePayPalTransaction()" 
                                        style="padding: 0.5rem 1rem; background: #3b82f6; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold;">
                                    Unlock
                                </button>
                            </div>
                        </div>
                        <small style="color: #6b7280; display: block; text-align: center;">
                            Includes 5 e-signature API calls ‚Ä¢ Professional legal document ‚Ä¢ 30-day access
                        </small>
                    </div>
                `;
                
                modal.appendChild(content);
                document.body.appendChild(modal);
                
                // Add click outside to close
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });
            };

            // Copy to clipboard functionality
            const copyToClipboard = () => {
                if (!hasPaywallAccess) {
                    showBreachContractPaywall('copy');
                    return;
                }
                const content = generateLetterContent().replace(/<[^>]*>/g, '');
                navigator.clipboard.writeText(content).then(() => {
                    alert('Breach of contract demand letter copied to clipboard!');
                });
            };

            // Download letter
            const downloadLetter = () => {
                if (!hasPaywallAccess) {
                    showBreachContractPaywall('download');
                    return;
                }
                downloadWordDoc();
            };

            const downloadWordDoc = () => {
                const letterContent = generateLetterContent();
                const fullDocument = `
                    <!DOCTYPE html>
                    <html>
                    <head>
                        <title>Breach of Contract Demand Letter - ${formData.breachingPartyName}</title>
                        <style>
                            body { font-family: 'Times New Roman', serif; line-height: 1.6; margin: 1in; }
                            .letter-header { text-align: center; margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 2px solid #000; }
                            .letter-date { text-align: right; margin-bottom: 2rem; }
                            .contract-table { width: 100%; border-collapse: collapse; margin: 1rem 0; }
                            .contract-table th, .contract-table td { border: 1px solid #000; padding: 8px; text-align: left; }
                            .contract-table th { background-color: #f3f4f6; }
                            .breach-highlight { background-color: #fef3c7; padding: 0.5rem; border-left: 4px solid #f59e0b; margin: 1rem 0; }
                            .legal-citation { font-style: italic; font-size: 0.9em; color: #6b7280; }
                        </style>
                    </head>
                    <body>
                        ${letterContent}
                    </body>
                    </html>
                `;
                
                const blob = new Blob([fullDocument], { type: 'application/msword' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `Breach_Contract_Demand_Letter_${formData.breachingPartyName || 'Draft'}.doc`;
                link.click();
                URL.revokeObjectURL(url);
            };

            // E-Sign Document Function
            const eSignDocument = async () => {
                if (!hasPaywallAccess) {
                    if (window.PaywallSystem) {
                        window.PaywallSystem.showAccessDenied('esign');
                        window.PaywallSystem.createPaywallModal(() => {
                            if (window.PaywallSystem && window.PaywallSystem.hasAccess()) {
                                setHasPaywallAccess(true);
                                window.PaywallSystem.enablePreviewInteraction();
                                eSignDocument();
                            }
                        });
                    }
                    return;
                }
                
                // Check eSignature click limit (5 clicks per payment)
                if (window.PaywallSystem && !window.PaywallSystem.canClickESignature()) {
                    const paymentStatus = window.PaywallSystem.getPaymentStatus();
                    const clickCount = paymentStatus.esignatureClicks || 0;
                    alert(`üö´ eSignature Click Limit Reached\\n\\nYou have used ${clickCount}/5 eSignature clicks for this payment.\\n\\n‚ö†Ô∏è Each click sends a document to our API and regenerates it, costing us API fees even if you don't ultimately sign.\\n\\nTo create more eSignatures, please make a new payment.`);
                    return;
                }

                // Show warning about API costs
                const proceed = confirm(`üìù eSignature API Notice\\n\\n‚ö†Ô∏è IMPORTANT: This button sends your document to eSignatures.com API and costs us money for each click, even if you don't complete the signing.\\n\\n‚úÖ Please ensure your document is complete and correct before proceeding.\\n\\nüî¢ You have ${5 - (window.PaywallSystem?.getPaymentStatus()?.esignatureClicks || 0)} API calls remaining.\\n\\nProceed with eSignature creation?`);
                
                if (!proceed) {
                    return;
                }

                // Increment click counter
                if (window.PaywallSystem) {
                    window.PaywallSystem.incrementESignatureClicks();
                }
                
                // Use pre-filled test credentials for quick testing
                const testEmail = 'owner@terms.law';
                const testName = formData.yourContactName || 'Test Legal Professional';
                
                // Validate required fields (use test data if not provided)
                const signerEmail = formData.yourEmail || testEmail;
                const signerName = formData.yourContactName || testName;
                
                if (!signerEmail || !signerName) {
                    alert('Please fill in your contact name and email address before signing the document.');
                    return;
                }
                
                try {
                    setESignLoading(true);
                    console.log("eSignature button clicked with test mode");
                    
                    const finalDocumentText = generateLetterContent().replace(/<[^>]*>/g, '');
                    const documentTitle = `Breach of Contract Demand Letter - ${formData.breachingPartyName || 'Draft'}`;

                    // eSignatures.com API call with test mode
                    const apiData = {
                        test: "yes", // TEST MODE - no charges
                        template: {
                            title: documentTitle,
                            content: finalDocumentText,
                            content_type: "text"
                        },
                        signers: [{
                            email: signerEmail,
                            name: signerName,
                            role: "signer"
                        }]
                    };

                    console.log("Sending to eSignatures.com API (TEST MODE):", apiData);

                    // Use API endpoint (compatible with Vercel/Netlify deployment)
                    const response = await fetch('/api/esignatures-api', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(apiData)
                    });

                    const result = await response.json();
                    console.log("eSignatures.com API response:", result);
                    
                    if (response.ok && result.signing_url) {
                        // Open signing URL in new window
                        window.open(result.signing_url, '_blank', 'width=1000,height=800,scrollbars=yes,resizable=yes');
                        
                        // Show success message
                        alert(`‚úÖ eSignature Created Successfully!\\n\\nüìß Document sent to: ${signerEmail}\\n\\nüîó Signing link opened in new window\\n\\n‚ö†Ô∏è TEST MODE: This is a test signature and won't create legal obligations.\\n\\nüí° For production use, contact support to enable live mode.`);
                        
                    } else {
                        throw new Error(result.message || 'Failed to create eSignature contract');
                    }

                } catch (error) {
                    console.error("eSignature error:", error);
                    
                    // Fallback demo mode
                    alert(`‚ö†Ô∏è eSignature API Error\\n\\n${error.message}\\n\\nüîÑ Demo Mode Activated\\n\\nThis would create a real eSignature in production. For testing, please ensure:\\n\\n1. API endpoint is configured\\n2. eSignatures.com credentials are set\\n3. CORS settings allow API calls\\n\\nContact support for production setup.`);
                    
                } finally {
                    setESignLoading(false);
                }
            };

            // Tab content renderers
            const renderContractTab = () => {
                return React.createElement('div', { className: 'tab-content' }, [
                    // Your Company Information
                    React.createElement('div', { key: 'your-company', className: 'form-section' }, [
                        React.createElement('h3', { key: 'title' }, 'üè¢ Your Company Information'),
                        React.createElement('div', { key: 'company-name', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Your Company/Organization Name *'),
                            React.createElement('input', {
                                key: 'input',
                                type: 'text',
                                value: formData.yourCompanyName,
                                onChange: (e) => updateFormData('yourCompanyName', e.target.value),
                                placeholder: 'ABC Corporation',
                                title: 'Legal name of your company or organization'
                            })
                        ]),
                        React.createElement('div', { key: 'contact-info', className: 'form-row' }, [
                            React.createElement('div', { key: 'contact-name', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Your Name *'),
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'text',
                                    value: formData.yourContactName,
                                    onChange: (e) => updateFormData('yourContactName', e.target.value),
                                    placeholder: 'John Smith',
                                    title: 'Name of person sending this demand letter'
                                })
                            ]),
                            React.createElement('div', { key: 'title', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Your Title'),
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'text',
                                    value: formData.yourTitle,
                                    onChange: (e) => updateFormData('yourTitle', e.target.value),
                                    placeholder: 'CEO, Legal Counsel, etc.',
                                    title: 'Your professional title or role'
                                })
                            ])
                        ]),
                        React.createElement('div', { key: 'contact-details', className: 'form-row' }, [
                            React.createElement('div', { key: 'email', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Email Address *'),
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'email',
                                    value: formData.yourEmail,
                                    onChange: (e) => updateFormData('yourEmail', e.target.value),
                                    placeholder: 'legal@abccorp.com',
                                    title: 'Contact email for legal communications'
                                })
                            ]),
                            React.createElement('div', { key: 'phone', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Phone Number'),
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'tel',
                                    value: formData.yourPhone,
                                    onChange: (e) => updateFormData('yourPhone', e.target.value),
                                    placeholder: '(555) 123-4567',
                                    title: 'Contact phone number'
                                })
                            ])
                        ]),
                        React.createElement('div', { key: 'address', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Company Address'),
                            React.createElement('textarea', {
                                key: 'input',
                                value: formData.yourCompanyAddress,
                                onChange: (e) => updateFormData('yourCompanyAddress', e.target.value),
                                placeholder: '123 Business Ave\nSuite 100\nCity, State 12345',
                                title: 'Complete business address for legal notices'
                            })
                        ])
                    ]),

                    // Breaching Party Information
                    React.createElement('div', { key: 'breaching-party', className: 'form-section' }, [
                        React.createElement('h3', { key: 'title' }, '‚ö†Ô∏è Breaching Party Information'),
                        React.createElement('div', { key: 'party-name', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Breaching Party Name/Company *'),
                            React.createElement('input', {
                                key: 'input',
                                type: 'text',
                                value: formData.breachingPartyName,
                                onChange: (e) => updateFormData('breachingPartyName', e.target.value),
                                placeholder: 'XYZ Services Inc.',
                                title: 'Legal name of the party who breached the contract'
                            })
                        ]),
                        React.createElement('div', { key: 'contact-info', className: 'form-row' }, [
                            React.createElement('div', { key: 'contact-name', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Contact Person'),
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'text',
                                    value: formData.breachingContactName,
                                    onChange: (e) => updateFormData('breachingContactName', e.target.value),
                                    placeholder: 'Jane Doe',
                                    title: 'Primary contact at the breaching party'
                                })
                            ]),
                            React.createElement('div', { key: 'contact-title', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Contact Title'),
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'text',
                                    value: formData.breachingContactTitle,
                                    onChange: (e) => updateFormData('breachingContactTitle', e.target.value),
                                    placeholder: 'Project Manager, CEO, etc.',
                                    title: 'Title of the contact person'
                                })
                            ])
                        ]),
                        React.createElement('div', { key: 'address', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Breaching Party Address'),
                            React.createElement('textarea', {
                                key: 'input',
                                value: formData.breachingPartyAddress,
                                onChange: (e) => updateFormData('breachingPartyAddress', e.target.value),
                                placeholder: '456 Contract St\nCity, State 67890',
                                title: 'Complete address of the breaching party for service of legal notice'
                            })
                        ])
                    ]),

                    // Contract Information
                    React.createElement('div', { key: 'contract-info', className: 'form-section' }, [
                        React.createElement('h3', { key: 'title' }, 'üìÑ Contract Information'),
                        React.createElement('div', { key: 'contract-type', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Contract Type *'),
                            React.createElement('select', {
                                key: 'input',
                                value: formData.contractType,
                                onChange: (e) => updateFormData('contractType', e.target.value),
                                title: 'Type of contract that was breached - affects legal remedies available'
                            }, Object.entries(contractTypes).map(([value, label]) =>
                                React.createElement('option', { key: value, value }, label)
                            ))
                        ]),
                        React.createElement('div', { key: 'contract-title', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Contract Title/Description'),
                            React.createElement('input', {
                                key: 'input',
                                type: 'text',
                                value: formData.contractTitle,
                                onChange: (e) => updateFormData('contractTitle', e.target.value),
                                placeholder: 'Software Development Agreement, Service Contract, etc.',
                                title: 'Official title or description of the contract'
                            })
                        ]),
                        React.createElement('div', { key: 'contract-details', className: 'form-row-three' }, [
                            React.createElement('div', { key: 'date', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Contract Date *'),
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'date',
                                    value: formData.contractDate,
                                    onChange: (e) => updateFormData('contractDate', e.target.value),
                                    title: 'Date the contract was signed or became effective'
                                })
                            ]),
                            React.createElement('div', { key: 'value', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Contract Value ($)'),
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'number',
                                    step: '0.01',
                                    value: formData.contractValue,
                                    onChange: (e) => updateFormData('contractValue', e.target.value),
                                    placeholder: '50000.00',
                                    title: 'Total value of the contract - affects damages and legal strategy'
                                })
                            ]),
                            React.createElement('div', { key: 'term', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Contract Term'),
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'text',
                                    value: formData.contractTerm,
                                    onChange: (e) => updateFormData('contractTerm', e.target.value),
                                    placeholder: '12 months, 3 years, etc.',
                                    title: 'Duration or term of the contract'
                                })
                            ])
                        ]),
                        React.createElement('div', { key: 'governing-law', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Governing Law State üèõÔ∏è'),
                            React.createElement('select', {
                                key: 'input',
                                value: formData.governingLaw,
                                onChange: (e) => updateFormData('governingLaw', e.target.value),
                                title: 'State law that governs the contract - critical for legal remedies and procedures'
                            }, US_STATES.map(state =>
                                React.createElement('option', { key: state.value, value: state.value }, state.label)
                            ))
                        ])
                    ])
                ]);
            };

            const renderBreachTab = () => {
                return React.createElement('div', { className: 'tab-content' }, [
                    // Breach Classification
                    React.createElement('div', { key: 'breach-classification', className: 'form-section' }, [
                        React.createElement('h3', { key: 'title' }, '‚öñÔ∏è Breach Classification'),
                        React.createElement('div', { key: 'breach-type', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Type of Breach üìä'),
                            React.createElement('select', {
                                key: 'input',
                                value: formData.breachType,
                                onChange: (e) => updateFormData('breachType', e.target.value),
                                title: 'Legal classification of breach - determines available remedies and damages'
                            }, Object.entries(breachTypes).map(([value, label]) =>
                                React.createElement('option', { key: value, value }, label)
                            ))
                        ]),
                        React.createElement('div', { key: 'breach-category', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Breach Category üéØ'),
                            React.createElement('select', {
                                key: 'input',
                                value: formData.breachCategory,
                                onChange: (e) => updateFormData('breachCategory', e.target.value),
                                title: 'Specific nature of the breach - affects legal strategy and remedies'
                            }, Object.entries(breachCategories).map(([value, label]) =>
                                React.createElement('option', { key: value, value }, label)
                            ))
                        ]),
                        React.createElement('div', { key: 'breach-date', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Breach Date *'),
                            React.createElement('input', {
                                key: 'input',
                                type: 'date',
                                value: formData.breachDate,
                                onChange: (e) => updateFormData('breachDate', e.target.value),
                                title: 'Date when the breach occurred or was discovered - affects statute of limitations'
                            })
                        ])
                    ]),

                    // Detailed Breach Description
                    React.createElement('div', { key: 'breach-details', className: 'form-section' }, [
                        React.createElement('h3', { key: 'title' }, 'üìù Breach Details'),
                        React.createElement('div', { key: 'breach-description', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Detailed Breach Description *'),
                            React.createElement('textarea', {
                                key: 'input',
                                value: formData.breachDescription,
                                onChange: (e) => updateFormData('breachDescription', e.target.value),
                                placeholder: 'Describe exactly what the breaching party failed to do, did incorrectly, or did in violation of the contract. Be specific about dates, deliverables, and requirements.',
                                title: 'Detailed factual description of the breach - be specific and objective',
                                rows: 4
                            })
                        ]),
                        React.createElement('div', { key: 'contract-provision', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Contract Provision Violated'),
                            React.createElement('textarea', {
                                key: 'input',
                                value: formData.contractProvision,
                                onChange: (e) => updateFormData('contractProvision', e.target.value),
                                placeholder: 'Quote the specific section, clause, or provision of the contract that was breached. Include section numbers if available.',
                                title: 'Exact contract language that was violated - strengthens legal position',
                                rows: 3
                            })
                        ]),
                        React.createElement('div', { key: 'specific-obligations', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Specific Obligations Not Performed'),
                            React.createElement('textarea', {
                                key: 'input',
                                value: formData.specificObligations,
                                onChange: (e) => updateFormData('specificObligations', e.target.value),
                                placeholder: 'List the specific obligations, deliverables, or performance requirements that were not met.',
                                title: 'Specific contractual obligations that were not fulfilled',
                                rows: 3
                            })
                        ])
                    ]),

                    // Performance Analysis
                    React.createElement('div', { key: 'performance-analysis', className: 'form-section' }, [
                        React.createElement('h3', { key: 'title' }, '‚úÖ Performance Analysis'),
                        React.createElement('div', { key: 'your-performance', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Your Complete Performance'),
                            React.createElement('textarea', {
                                key: 'input',
                                value: formData.yourPerformance,
                                onChange: (e) => updateFormData('yourPerformance', e.target.value),
                                placeholder: 'Describe how you fully performed your obligations under the contract. Include dates, deliverables, and evidence of completion.',
                                title: 'Documentation of your complete performance - establishes right to demand performance',
                                rows: 3
                            })
                        ]),
                        React.createElement('div', { key: 'their-failure', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Their Failure to Perform'),
                            React.createElement('textarea', {
                                key: 'input',
                                value: formData.theirFailure,
                                onChange: (e) => updateFormData('theirFailure', e.target.value),
                                placeholder: 'Describe specifically how the other party failed to perform their obligations. Be detailed and factual.',
                                title: 'Specific description of how they failed to perform - core of breach claim',
                                rows: 3
                            })
                        ]),
                        React.createElement('div', { key: 'notice-cure', className: 'form-row' }, [
                            React.createElement('div', { key: 'notice', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Prior Notice Given'),
                                React.createElement('textarea', {
                                    key: 'input',
                                    value: formData.noticeProvided,
                                    onChange: (e) => updateFormData('noticeProvided', e.target.value),
                                    placeholder: 'Describe any prior notice given to the breaching party about their non-performance.',
                                    title: 'Documentation of prior notice - may be required before demanding cure',
                                    rows: 2
                                })
                            ]),
                            React.createElement('div', { key: 'cure-attempts', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Cure Attempts Made'),
                                React.createElement('textarea', {
                                    key: 'input',
                                    value: formData.cureAttempts,
                                    onChange: (e) => updateFormData('cureAttempts', e.target.value),
                                    placeholder: 'Describe any attempts made to cure the breach or work with the other party.',
                                    title: 'Efforts to resolve the breach - shows good faith',
                                    rows: 2
                                })
                            ])
                        ])
                    ]),

                    // Communication History
                    React.createElement('div', { key: 'communication-history', className: 'form-section' }, [
                        React.createElement('h3', { key: 'title' }, 'üí¨ Communication History'),
                        React.createElement('div', { key: 'prior-notices', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Prior Notices and Communications'),
                            React.createElement('textarea', {
                                key: 'input',
                                value: formData.priorNotices,
                                onChange: (e) => updateFormData('priorNotices', e.target.value),
                                placeholder: 'Detail all prior communications about the breach, including dates, methods, and responses.',
                                title: 'Complete record of communications - important for legal proceedings',
                                rows: 3
                            })
                        ]),
                        React.createElement('div', { key: 'their-response', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Breaching Party\'s Response'),
                            React.createElement('textarea', {
                                key: 'input',
                                value: formData.breachingPartyResponse,
                                onChange: (e) => updateFormData('breachingPartyResponse', e.target.value),
                                placeholder: 'Describe any responses, excuses, or communications from the breaching party.',
                                title: 'Their responses may affect legal strategy and available remedies',
                                rows: 2
                            })
                        ])
                    ])
                ]);
            };

            const renderStrategyTab = () => {
                return React.createElement('div', { className: 'tab-content' }, [
                    // Damages Assessment
                    React.createElement('div', { key: 'damages-assessment', className: 'form-section' }, [
                        React.createElement('h3', { key: 'title' }, 'üí∞ Damages Assessment'),
                        React.createElement('div', { key: 'damage-type', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Primary Damage Type üìä'),
                            React.createElement('select', {
                                key: 'input',
                                value: formData.damageType,
                                onChange: (e) => updateFormData('damageType', e.target.value),
                                title: 'Type of damages affects legal remedies and recovery options'
                            }, [
                                React.createElement('option', { key: 'direct', value: 'direct' }, 'Direct Damages'),
                                React.createElement('option', { key: 'consequential', value: 'consequential' }, 'Consequential Damages'),
                                React.createElement('option', { key: 'incidental', value: 'incidental' }, 'Incidental Damages'),
                                React.createElement('option', { key: 'liquidated', value: 'liquidated' }, 'Liquidated Damages'),
                                React.createElement('option', { key: 'punitive', value: 'punitive' }, 'Punitive Damages')
                            ])
                        ]),
                        React.createElement('div', { key: 'damages-amounts', className: 'form-row-three' }, [
                            React.createElement('div', { key: 'direct', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Direct Damages ($)'),
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'number',
                                    step: '0.01',
                                    value: formData.directDamages,
                                    onChange: (e) => updateFormData('directDamages', e.target.value),
                                    placeholder: '25000.00',
                                    title: 'Direct financial losses from the breach - easiest to recover'
                                })
                            ]),
                            React.createElement('div', { key: 'consequential', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Consequential Damages ($)'),
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'number',
                                    step: '0.01',
                                    value: formData.consequentialDamages,
                                    onChange: (e) => updateFormData('consequentialDamages', e.target.value),
                                    placeholder: '15000.00',
                                    title: 'Indirect losses that were foreseeable - harder to recover'
                                })
                            ]),
                            React.createElement('div', { key: 'lost-profits', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Lost Profits ($)'),
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'number',
                                    step: '0.01',
                                    value: formData.lostProfits,
                                    onChange: (e) => updateFormData('lostProfits', e.target.value),
                                    placeholder: '10000.00',
                                    title: 'Lost business profits - requires strong proof of causation'
                                })
                            ])
                        ]),
                        React.createElement('div', { key: 'mitigation', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Mitigation Efforts'),
                            React.createElement('textarea', {
                                key: 'input',
                                value: formData.mitigationEfforts,
                                onChange: (e) => updateFormData('mitigationEfforts', e.target.value),
                                placeholder: 'Describe efforts made to minimize damages from the breach.',
                                title: 'Legal duty to mitigate damages - affects recovery amount',
                                rows: 2
                            })
                        ])
                    ]),

                    // Legal Strategy
                    React.createElement('div', { key: 'legal-strategy', className: 'form-section' }, [
                        React.createElement('h3', { key: 'title' }, '‚öñÔ∏è Legal Strategy'),
                        React.createElement('div', { key: 'demand-action', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Primary Demand üéØ'),
                            React.createElement('select', {
                                key: 'input',
                                value: formData.demandAction,
                                onChange: (e) => updateFormData('demandAction', e.target.value),
                                title: 'Primary relief sought - affects legal strategy and negotiation position'
                            }, [
                                React.createElement('option', { key: 'cure_and_damages', value: 'cure_and_damages' }, 'Cure Breach + Damages'),
                                React.createElement('option', { key: 'specific_performance', value: 'specific_performance' }, 'Specific Performance'),
                                React.createElement('option', { key: 'termination_damages', value: 'termination_damages' }, 'Termination + Damages'),
                                React.createElement('option', { key: 'damages_only', value: 'damages_only' }, 'Damages Only'),
                                React.createElement('option', { key: 'injunctive_relief', value: 'injunctive_relief' }, 'Injunctive Relief')
                            ])
                        ]),
                        React.createElement('div', { key: 'cure-deadline', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Cure Deadline (Days) ‚è∞'),
                            React.createElement('select', {
                                key: 'input',
                                value: formData.cureDeadline,
                                onChange: (e) => updateFormData('cureDeadline', e.target.value),
                                title: 'Time given to cure breach - affects urgency and legal options'
                            }, [
                                React.createElement('option', { key: '7', value: '7' }, '7 Days - Urgent'),
                                React.createElement('option', { key: '14', value: '14' }, '14 Days - Standard'),
                                React.createElement('option', { key: '30', value: '30' }, '30 Days - Reasonable'),
                                React.createElement('option', { key: '60', value: '60' }, '60 Days - Extended'),
                                React.createElement('option', { key: '90', value: '90' }, '90 Days - Maximum')
                            ])
                        ]),
                        React.createElement('div', { key: 'legal-remedies', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Legal Remedies Sought üî®'),
                            React.createElement('div', { key: 'remedies-grid', style: { display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '0.5rem' } }, [
                                React.createElement('div', { key: 'damages', className: 'checkbox-group' }, [
                                    React.createElement('input', {
                                        key: 'input',
                                        type: 'checkbox',
                                        checked: formData.legalRemedies.includes('damages'),
                                        onChange: (e) => {
                                            const newRemedies = e.target.checked 
                                                ? [...formData.legalRemedies, 'damages']
                                                : formData.legalRemedies.filter(r => r !== 'damages');
                                            updateFormData('legalRemedies', newRemedies);
                                        },
                                        title: 'Monetary compensation for losses'
                                    }),
                                    React.createElement('label', { key: 'label' }, 'Monetary Damages')
                                ]),
                                React.createElement('div', { key: 'specific', className: 'checkbox-group' }, [
                                    React.createElement('input', {
                                        key: 'input',
                                        type: 'checkbox',
                                        checked: formData.legalRemedies.includes('specific_performance'),
                                        onChange: (e) => {
                                            const newRemedies = e.target.checked 
                                                ? [...formData.legalRemedies, 'specific_performance']
                                                : formData.legalRemedies.filter(r => r !== 'specific_performance');
                                            updateFormData('legalRemedies', newRemedies);
                                        },
                                        title: 'Court order requiring performance as contracted'
                                    }),
                                    React.createElement('label', { key: 'label' }, 'Specific Performance')
                                ]),
                                React.createElement('div', { key: 'injunctive', className: 'checkbox-group' }, [
                                    React.createElement('input', {
                                        key: 'input',
                                        type: 'checkbox',
                                        checked: formData.legalRemedies.includes('injunctive_relief'),
                                        onChange: (e) => {
                                            const newRemedies = e.target.checked 
                                                ? [...formData.legalRemedies, 'injunctive_relief']
                                                : formData.legalRemedies.filter(r => r !== 'injunctive_relief');
                                            updateFormData('legalRemedies', newRemedies);
                                        },
                                        title: 'Court order to stop harmful behavior'
                                    }),
                                    React.createElement('label', { key: 'label' }, 'Injunctive Relief')
                                ]),
                                React.createElement('div', { key: 'termination', className: 'checkbox-group' }, [
                                    React.createElement('input', {
                                        key: 'input',
                                        type: 'checkbox',
                                        checked: formData.legalRemedies.includes('termination'),
                                        onChange: (e) => {
                                            const newRemedies = e.target.checked 
                                                ? [...formData.legalRemedies, 'termination']
                                                : formData.legalRemedies.filter(r => r !== 'termination');
                                            updateFormData('legalRemedies', newRemedies);
                                        },
                                        title: 'Right to terminate contract and seek restitution'
                                    }),
                                    React.createElement('label', { key: 'label' }, 'Contract Termination')
                                ])
                            ])
                        ]),
                        React.createElement('div', { key: 'dispute-resolution', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Dispute Resolution Method üèõÔ∏è'),
                            React.createElement('select', {
                                key: 'input',
                                value: formData.disputeResolution,
                                onChange: (e) => updateFormData('disputeResolution', e.target.value),
                                title: 'Method for resolving dispute if cure is not achieved'
                            }, [
                                React.createElement('option', { key: 'litigation', value: 'litigation' }, 'Court Litigation'),
                                React.createElement('option', { key: 'arbitration', value: 'arbitration' }, 'Binding Arbitration'),
                                React.createElement('option', { key: 'mediation', value: 'mediation' }, 'Mediation First'),
                                React.createElement('option', { key: 'negotiation', value: 'negotiation' }, 'Direct Negotiation')
                            ])
                        ])
                    ]),

                    // Additional Factors
                    React.createElement('div', { key: 'additional-factors', className: 'form-section' }, [
                        React.createElement('h3', { key: 'title' }, '‚ö° Additional Factors'),
                        React.createElement('div', { key: 'factors-grid', style: { display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' } }, [
                            React.createElement('div', { key: 'time-critical', className: 'checkbox-group' }, [
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'checkbox',
                                    checked: formData.timeIsCritical,
                                    onChange: (e) => updateFormData('timeIsCritical', e.target.checked),
                                    title: 'Time-sensitive performance affects damages and remedy options'
                                }),
                                React.createElement('label', { key: 'label' }, 'Time is Critical ‚è∞')
                            ]),
                            React.createElement('div', { key: 'ongoing-harm', className: 'checkbox-group' }, [
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'checkbox',
                                    checked: formData.ongoingHarm,
                                    onChange: (e) => updateFormData('ongoingHarm', e.target.checked),
                                    title: 'Continuing harm supports injunctive relief'
                                }),
                                React.createElement('label', { key: 'label' }, 'Ongoing Harm üîÑ')
                            ]),
                            React.createElement('div', { key: 'reputation', className: 'checkbox-group' }, [
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'checkbox',
                                    checked: formData.reputationalDamage,
                                    onChange: (e) => updateFormData('reputationalDamage', e.target.checked),
                                    title: 'Reputational damage may support additional damages'
                                }),
                                React.createElement('label', { key: 'label' }, 'Reputational Damage üìâ')
                            ]),
                            React.createElement('div', { key: 'third-party', className: 'checkbox-group' }, [
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'checkbox',
                                    checked: formData.thirdPartyImpact,
                                    onChange: (e) => updateFormData('thirdPartyImpact', e.target.checked),
                                    title: 'Impact on third parties may affect damages calculation'
                                }),
                                React.createElement('label', { key: 'label' }, 'Third Party Impact üë•')
                            ])
                        ])
                    ]),
                    
                    // Statute of Limitations Timer
                    React.createElement('div', { key: 'statute-section', className: 'form-section' }, [
                        React.createElement('h3', { key: 'title' }, '‚è∞ Statute of Limitations Timer'),
                        React.createElement('div', { 
                            key: 'statute-calculator',
                            style: {
                                background: '#fef2f2',
                                borderRadius: '12px',
                                padding: '1.5rem',
                                border: '2px solid #fca5a5'
                            }
                        }, [
                            React.createElement('div', {
                                key: 'statute-info',
                                style: {
                                    display: 'grid',
                                    gridTemplateColumns: '1fr 1fr',
                                    gap: '2rem',
                                    alignItems: 'center'
                                }
                            }, [
                                React.createElement('div', { key: 'timer-display' }, [
                                    React.createElement('h4', {
                                        key: 'days-remaining',
                                        style: {
                                            fontSize: '2.5rem',
                                            fontWeight: 'bold',
                                            color: '#dc2626',
                                            margin: '0 0 0.5rem 0',
                                            textAlign: 'center'
                                        }
                                    }, (() => {
                                        if (!formData.breachDate) return '???';
                                        const breachDate = new Date(formData.breachDate);
                                        const today = new Date();
                                        const stateLimitation = (() => {
                                            // State-specific statute of limitations (in years)
                                            const stateLimitations = {
                                                'AL': 6, 'AK': 6, 'AZ': 6, 'AR': 5, 'CA': 4, 'CO': 3, 'CT': 6, 'DE': 3, 'FL': 5,
                                                'GA': 6, 'HI': 6, 'ID': 5, 'IL': 10, 'IN': 6, 'IA': 5, 'KS': 5, 'KY': 15,
                                                'LA': 10, 'ME': 6, 'MD': 3, 'MA': 6, 'MI': 6, 'MN': 6, 'MS': 3, 'MO': 5,
                                                'MT': 8, 'NE': 4, 'NV': 6, 'NH': 3, 'NJ': 6, 'NM': 6, 'NY': 6, 'NC': 3,
                                                'ND': 6, 'OH': 8, 'OK': 5, 'OR': 6, 'PA': 4, 'RI': 10, 'SC': 3, 'SD': 6,
                                                'TN': 6, 'TX': 4, 'UT': 6, 'VT': 6, 'VA': 5, 'WA': 6, 'WV': 5, 'WI': 6, 'WY': 10
                                            };
                                            return stateLimitations[formData.governingLaw] || 4;
                                        })();
                                        const limitationDate = new Date(breachDate);
                                        limitationDate.setFullYear(limitationDate.getFullYear() + stateLimitation);
                                        const daysRemaining = Math.ceil((limitationDate - today) / (1000 * 60 * 60 * 24));
                                        return daysRemaining > 0 ? `${daysRemaining}` : 'EXPIRED';
                                    })()),
                                    React.createElement('p', {
                                        key: 'days-label',
                                        style: {
                                            margin: 0,
                                            textAlign: 'center',
                                            color: '#6b7280',
                                            fontSize: '0.9rem'
                                        }
                                    }, 'Days Remaining to File Lawsuit')
                                ]),
                                React.createElement('div', { key: 'statute-details' }, [
                                    React.createElement('h4', {
                                        key: 'state-info',
                                        style: { margin: '0 0 0.5rem 0', color: '#374151' }
                                    }, `${US_STATES.find(s => s.value === formData.governingLaw)?.label || 'California'} Law`),
                                    React.createElement('p', {
                                        key: 'limitation-period',
                                        style: { margin: '0 0 0.5rem 0', color: '#6b7280', fontSize: '0.9rem' }
                                    }, `${(() => {
                                        const stateLimitations = {
                                            'AL': 6, 'AK': 6, 'AZ': 6, 'AR': 5, 'CA': 4, 'CO': 3, 'CT': 6, 'DE': 3, 'FL': 5,
                                            'GA': 6, 'HI': 6, 'ID': 5, 'IL': 10, 'IN': 6, 'IA': 5, 'KS': 5, 'KY': 15,
                                            'LA': 10, 'ME': 6, 'MD': 3, 'MA': 6, 'MI': 6, 'MN': 6, 'MS': 3, 'MO': 5,
                                            'MT': 8, 'NE': 4, 'NV': 6, 'NH': 3, 'NJ': 6, 'NM': 6, 'NY': 6, 'NC': 3,
                                            'ND': 6, 'OH': 8, 'OK': 5, 'OR': 6, 'PA': 4, 'RI': 10, 'SC': 3, 'SD': 6,
                                            'TN': 6, 'TX': 4, 'UT': 6, 'VT': 6, 'VA': 5, 'WA': 6, 'WV': 5, 'WI': 6, 'WY': 10
                                        };
                                        return stateLimitations[formData.governingLaw] || 4;
                                    })()} year limitation period for contract breaches`),
                                    React.createElement('div', {
                                        key: 'urgency-indicator',
                                        style: {
                                            background: (() => {
                                                if (!formData.breachDate) return '#6b7280';
                                                const breachDate = new Date(formData.breachDate);
                                                const today = new Date();
                                                const stateLimitation = (() => {
                                                    const stateLimitations = {
                                                        'AL': 6, 'AK': 6, 'AZ': 6, 'AR': 5, 'CA': 4, 'CO': 3, 'CT': 6, 'DE': 3, 'FL': 5,
                                                        'GA': 6, 'HI': 6, 'ID': 5, 'IL': 10, 'IN': 6, 'IA': 5, 'KS': 5, 'KY': 15,
                                                        'LA': 10, 'ME': 6, 'MD': 3, 'MA': 6, 'MI': 6, 'MN': 6, 'MS': 3, 'MO': 5,
                                                        'MT': 8, 'NE': 4, 'NV': 6, 'NH': 3, 'NJ': 6, 'NM': 6, 'NY': 6, 'NC': 3,
                                                        'ND': 6, 'OH': 8, 'OK': 5, 'OR': 6, 'PA': 4, 'RI': 10, 'SC': 3, 'SD': 6,
                                                        'TN': 6, 'TX': 4, 'UT': 6, 'VT': 6, 'VA': 5, 'WA': 6, 'WV': 5, 'WI': 6, 'WY': 10
                                                    };
                                                    return stateLimitations[formData.governingLaw] || 4;
                                                })();
                                                const limitationDate = new Date(breachDate);
                                                limitationDate.setFullYear(limitationDate.getFullYear() + stateLimitation);
                                                const daysRemaining = Math.ceil((limitationDate - today) / (1000 * 60 * 60 * 24));
                                                
                                                if (daysRemaining <= 0) return '#dc2626';
                                                if (daysRemaining <= 90) return '#ea580c';
                                                if (daysRemaining <= 365) return '#d97706';
                                                return '#059669';
                                            })(),
                                            color: 'white',
                                            padding: '0.5rem 1rem',
                                            borderRadius: '6px',
                                            fontSize: '0.85rem',
                                            fontWeight: '600',
                                            textAlign: 'center'
                                        }
                                    }, (() => {
                                        if (!formData.breachDate) return 'Enter breach date for countdown';
                                        const breachDate = new Date(formData.breachDate);
                                        const today = new Date();
                                        const stateLimitation = (() => {
                                            const stateLimitations = {
                                                'AL': 6, 'AK': 6, 'AZ': 6, 'AR': 5, 'CA': 4, 'CO': 3, 'CT': 6, 'DE': 3, 'FL': 5,
                                                'GA': 6, 'HI': 6, 'ID': 5, 'IL': 10, 'IN': 6, 'IA': 5, 'KS': 5, 'KY': 15,
                                                'LA': 10, 'ME': 6, 'MD': 3, 'MA': 6, 'MI': 6, 'MN': 6, 'MS': 3, 'MO': 5,
                                                'MT': 8, 'NE': 4, 'NV': 6, 'NH': 3, 'NJ': 6, 'NM': 6, 'NY': 6, 'NC': 3,
                                                'ND': 6, 'OH': 8, 'OK': 5, 'OR': 6, 'PA': 4, 'RI': 10, 'SC': 3, 'SD': 6,
                                                'TN': 6, 'TX': 4, 'UT': 6, 'VT': 6, 'VA': 5, 'WA': 6, 'WV': 5, 'WI': 6, 'WY': 10
                                            };
                                            return stateLimitations[formData.governingLaw] || 4;
                                        })();
                                        const limitationDate = new Date(breachDate);
                                        limitationDate.setFullYear(limitationDate.getFullYear() + stateLimitation);
                                        const daysRemaining = Math.ceil((limitationDate - today) / (1000 * 60 * 60 * 24));
                                        
                                        if (daysRemaining <= 0) return 'üö® STATUTE EXPIRED - Consult Attorney Immediately';
                                        if (daysRemaining <= 90) return 'üö® URGENT - File lawsuit within 90 days';
                                        if (daysRemaining <= 365) return '‚ö†Ô∏è ACTION NEEDED - File within 1 year';
                                        return '‚úÖ Sufficient time remaining';
                                    })())
                                ])
                            ])
                        ])
                    ])
                ]);
            };

            // Case Assessment Tab with Professional Legal Analysis
            const renderAssessmentTab = () => {
                // Enhanced breach severity calculator
                const calculateBreachSeverity = () => {
                    const contractValue = parseFloat(formData.contractValue) || 0;
                    const totalDamages = (parseFloat(formData.directDamages) || 0) + 
                                       (parseFloat(formData.consequentialDamages) || 0) + 
                                       (parseFloat(formData.lostProfits) || 0);
                    
                    if (contractValue === 0) return { severity: 'Unknown', ratio: 0, description: 'Contract value not specified' };
                    
                    const damageRatio = totalDamages / contractValue;
                    
                    if (damageRatio >= 1.0) {
                        return { 
                            severity: 'Catastrophic', 
                            ratio: damageRatio, 
                            description: 'Damages exceed contract value - extremely severe breach',
                            color: '#dc2626',
                            urgency: 'Immediate legal action recommended'
                        };
                    } else if (damageRatio >= 0.5) {
                        return { 
                            severity: 'Severe', 
                            ratio: damageRatio, 
                            description: 'Major damages relative to contract value',
                            color: '#ea580c',
                            urgency: 'Urgent resolution required'
                        };
                    } else if (damageRatio >= 0.25) {
                        return { 
                            severity: 'Moderate', 
                            ratio: damageRatio, 
                            description: 'Significant damages relative to contract value',
                            color: '#d97706',
                            urgency: 'Prompt action recommended'
                        };
                    } else if (damageRatio >= 0.1) {
                        return { 
                            severity: 'Minor', 
                            ratio: damageRatio, 
                            description: 'Limited damages relative to contract value',
                            color: '#ca8a04',
                            urgency: 'Standard resolution timeline'
                        };
                    } else {
                        return { 
                            severity: 'Minimal', 
                            ratio: damageRatio, 
                            description: 'Low damages relative to contract value',
                            color: '#65a30d',
                            urgency: 'Negotiated resolution preferred'
                        };
                    }
                };

                // Calculate comprehensive case strength
                const calculateCaseStrength = () => {
                    let score = 0;
                    let factors = [];
                    let weaknesses = [];
                    
                    // Contract Documentation (25 points max)
                    if (formData.contractTitle && formData.contractDate) {
                        score += 15;
                        factors.push('‚úÖ Written contract with clear terms');
                    }
                    if (formData.contractValue && parseFloat(formData.contractValue) > 0) {
                        score += 10;
                        factors.push('‚úÖ Quantifiable contract value');
                    }
                    
                    // Breach Severity Bonus based on damage ratio
                    const breachSeverity = calculateBreachSeverity();
                    if (breachSeverity.ratio >= 0.5) {
                        score += 15;
                        factors.push('‚úÖ High damage-to-value ratio strengthens case');
                    } else if (breachSeverity.ratio >= 0.25) {
                        score += 10;
                        factors.push('‚úÖ Moderate damage-to-value ratio');
                    } else if (breachSeverity.ratio < 0.1 && breachSeverity.ratio > 0) {
                        weaknesses.push('‚ö†Ô∏è Low damage-to-value ratio may limit remedies');
                    }
                    
                    // Performance Documentation (20 points max)
                    if (formData.yourPerformance && formData.yourPerformance.length > 50) {
                        score += 15;
                        factors.push('‚úÖ Well-documented complete performance');
                    }
                    if (formData.theirFailure && formData.theirFailure.length > 50) {
                        score += 5;
                        factors.push('‚úÖ Detailed breach documentation');
                    }
                    
                    // Breach Severity (20 points max)
                    if (formData.breachType === 'material_breach' || formData.breachType === 'fundamental_breach') {
                        score += 15;
                        factors.push('‚úÖ Material/fundamental breach classification');
                    } else if (formData.breachType === 'total_breach') {
                        score += 20;
                        factors.push('‚úÖ Total breach - strongest case');
                    } else {
                        score += 5;
                        weaknesses.push('‚ö†Ô∏è Minor breach may limit remedies');
                    }
                    
                    // Damages Documentation (15 points max)
                    if (formData.directDamages && parseFloat(formData.directDamages) > 0) {
                        score += 10;
                        factors.push('‚úÖ Quantified direct damages');
                    }
                    if (formData.mitigationEfforts && formData.mitigationEfforts.length > 20) {
                        score += 5;
                        factors.push('‚úÖ Documented mitigation efforts');
                    }
                    
                    // Communication and Notice (10 points max)
                    if (formData.priorNotices && formData.priorNotices.length > 30) {
                        score += 8;
                        factors.push('‚úÖ Prior notice provided');
                    }
                    if (formData.noticeProvided && formData.noticeProvided.length > 20) {
                        score += 2;
                        factors.push('‚úÖ Formal notice given');
                    }
                    
                    // Contract-Specific Factors (10 points max)
                    if (formData.contractProvision && formData.contractProvision.length > 30) {
                        score += 5;
                        factors.push('‚úÖ Specific contract provision identified');
                    }
                    if (formData.timeIsCritical) {
                        score += 3;
                        factors.push('‚úÖ Time-critical performance');
                    }
                    if (formData.ongoingHarm) {
                        score += 2;
                        factors.push('‚úÖ Ongoing harm supports urgency');
                    }
                    
                    // Potential Weaknesses
                    if (!formData.mitigationEfforts || formData.mitigationEfforts.length < 20) {
                        weaknesses.push('‚ö†Ô∏è Limited mitigation documentation');
                    }
                    if (!formData.priorNotices || formData.priorNotices.length < 20) {
                        weaknesses.push('‚ö†Ô∏è Insufficient prior notice documentation');
                    }
                    if (formData.breachType === 'minor_breach') {
                        weaknesses.push('‚ö†Ô∏è Minor breaches have limited remedies');
                    }
                    
                    return { score: Math.min(score, 100), factors, weaknesses };
                };
                
                const assessment = calculateCaseStrength();
                const breachSeverity = calculateBreachSeverity();
                
                const getStrengthColor = (score) => {
                    if (score >= 85) return '#10b981';
                    if (score >= 70) return '#059669';
                    if (score >= 55) return '#f59e0b';
                    if (score >= 40) return '#ef4444';
                    return '#991b1b';
                };
                
                const getStrengthLabel = (score) => {
                    if (score >= 85) return 'Excellent';
                    if (score >= 70) return 'Strong';
                    if (score >= 55) return 'Moderate';
                    if (score >= 40) return 'Weak';
                    return 'Poor';
                };
                
                // Calculate estimated damages
                const totalDamages = (parseFloat(formData.directDamages) || 0) + 
                                   (parseFloat(formData.consequentialDamages) || 0) + 
                                   (parseFloat(formData.lostProfits) || 0);
                
                return React.createElement('div', { className: 'tab-content' }, [
                    // Breach Severity Calculator
                    React.createElement('div', { key: 'severity-section', className: 'form-section' }, [
                        React.createElement('h3', { key: 'title' }, 'üìä Breach Severity Analysis'),
                        React.createElement('div', { 
                            key: 'severity-calculator',
                            style: {
                                background: '#fefbf3',
                                borderRadius: '12px',
                                padding: '1.5rem',
                                marginBottom: '1rem',
                                border: `2px solid ${breachSeverity.color || '#e5e7eb'}`
                            }
                        }, [
                            React.createElement('div', {
                                key: 'severity-header',
                                style: {
                                    display: 'flex',
                                    alignItems: 'center',
                                    justifyContent: 'space-between',
                                    marginBottom: '1rem'
                                }
                            }, [
                                React.createElement('div', { key: 'severity-info' }, [
                                    React.createElement('h4', {
                                        key: 'severity-level',
                                        style: { 
                                            margin: '0 0 0.25rem 0', 
                                            color: breachSeverity.color || '#374151',
                                            fontSize: '1.3rem'
                                        }
                                    }, `${breachSeverity.severity} Breach`),
                                    React.createElement('p', {
                                        key: 'severity-desc',
                                        style: { 
                                            margin: 0, 
                                            color: '#6b7280',
                                            fontSize: '0.9rem'
                                        }
                                    }, breachSeverity.description)
                                ]),
                                React.createElement('div', {
                                    key: 'ratio-display',
                                    style: {
                                        textAlign: 'right'
                                    }
                                }, [
                                    React.createElement('div', {
                                        key: 'ratio-number',
                                        style: {
                                            fontSize: '2rem',
                                            fontWeight: 'bold',
                                            color: breachSeverity.color || '#374151'
                                        }
                                    }, breachSeverity.ratio > 0 ? `${(breachSeverity.ratio * 100).toFixed(1)}%` : 'N/A'),
                                    React.createElement('div', {
                                        key: 'ratio-label',
                                        style: {
                                            fontSize: '0.8rem',
                                            color: '#6b7280'
                                        }
                                    }, 'Damage/Value Ratio')
                                ])
                            ]),
                            breachSeverity.ratio > 0 && React.createElement('div', {
                                key: 'urgency-banner',
                                style: {
                                    background: breachSeverity.color || '#f3f4f6',
                                    color: 'white',
                                    padding: '0.75rem 1rem',
                                    borderRadius: '6px',
                                    textAlign: 'center',
                                    fontWeight: '600',
                                    fontSize: '0.9rem'
                                }
                            }, `‚ö° ${breachSeverity.urgency}`)
                        ])
                    ]),
                    // Case Strength Meter
                    React.createElement('div', { key: 'strength-section', className: 'form-section' }, [
                        React.createElement('h3', { key: 'title' }, '‚öñÔ∏è Professional Case Assessment'),
                        React.createElement('div', { 
                            key: 'strength-meter',
                            style: {
                                background: '#f9fafb',
                                borderRadius: '12px',
                                padding: '1.5rem',
                                marginBottom: '1rem',
                                border: '1px solid #e5e7eb'
                            }
                        }, [
                            React.createElement('div', {
                                key: 'score-display',
                                style: {
                                    display: 'flex',
                                    alignItems: 'center',
                                    justifyContent: 'space-between',
                                    marginBottom: '1rem'
                                }
                            }, [
                                React.createElement('span', {
                                    key: 'score-text',
                                    style: { fontSize: '1.3rem', fontWeight: '600', color: '#1f2937' }
                                }, `Case Strength Score: ${assessment.score}/100`),
                                React.createElement('span', {
                                    key: 'strength-label',
                                    style: {
                                        background: getStrengthColor(assessment.score),
                                        color: 'white',
                                        padding: '0.5rem 1rem',
                                        borderRadius: '6px',
                                        fontWeight: '600',
                                        fontSize: '0.9rem'
                                    }
                                }, getStrengthLabel(assessment.score))
                            ]),
                            React.createElement('div', {
                                key: 'progress-bar',
                                style: {
                                    background: '#e5e7eb',
                                    height: '14px',
                                    borderRadius: '7px',
                                    overflow: 'hidden'
                                }
                            }, [
                                React.createElement('div', {
                                    key: 'progress-fill',
                                    style: {
                                        background: getStrengthColor(assessment.score),
                                        height: '100%',
                                        width: `${assessment.score}%`,
                                        transition: 'width 0.5s ease'
                                    }
                                })
                            ])
                        ])
                    ]),

                    // Strengths and Weaknesses
                    React.createElement('div', { key: 'analysis-section', className: 'form-section' }, [
                        React.createElement('h3', { key: 'title' }, 'üìä Legal Analysis'),
                        React.createElement('div', { key: 'analysis-grid', style: { display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1.5rem' } }, [
                            // Strengths
                            React.createElement('div', {
                                key: 'strengths',
                                style: {
                                    background: '#ecfdf5',
                                    border: '1px solid #10b981',
                                    borderRadius: '8px',
                                    padding: '1rem'
                                }
                            }, [
                                React.createElement('h4', { key: 'title', style: { margin: '0 0 0.5rem 0', color: '#059669' } }, 'üí™ Case Strengths'),
                                React.createElement('ul', { 
                                    key: 'list',
                                    style: { listStyle: 'none', padding: 0, margin: 0 }
                                }, assessment.factors.map((factor, index) => 
                                    React.createElement('li', {
                                        key: index,
                                        style: {
                                            padding: '0.25rem 0',
                                            color: '#065f46',
                                            fontSize: '0.9rem'
                                        }
                                    }, factor)
                                ))
                            ]),
                            
                            // Weaknesses
                            React.createElement('div', {
                                key: 'weaknesses',
                                style: {
                                    background: '#fef3c7',
                                    border: '1px solid #f59e0b',
                                    borderRadius: '8px',
                                    padding: '1rem'
                                }
                            }, [
                                React.createElement('h4', { key: 'title', style: { margin: '0 0 0.5rem 0', color: '#92400e' } }, '‚ö†Ô∏è Areas to Strengthen'),
                                React.createElement('ul', { 
                                    key: 'list',
                                    style: { listStyle: 'none', padding: 0, margin: 0 }
                                }, assessment.weaknesses.length > 0 ? assessment.weaknesses.map((weakness, index) => 
                                    React.createElement('li', {
                                        key: index,
                                        style: {
                                            padding: '0.25rem 0',
                                            color: '#92400e',
                                            fontSize: '0.9rem'
                                        }
                                    }, weakness)
                                ) : [
                                    React.createElement('li', {
                                        key: 'none',
                                        style: {
                                            padding: '0.25rem 0',
                                            color: '#059669',
                                            fontSize: '0.9rem'
                                        }
                                    }, '‚úÖ No significant weaknesses identified')
                                ])
                            ])
                        ])
                    ]),

                    // Strategic Recommendations
                    React.createElement('div', { key: 'strategy-section', className: 'form-section' }, [
                        React.createElement('h3', { key: 'title' }, 'üéØ Strategic Recommendations'),
                        React.createElement('div', { key: 'recommendations' }, [
                            // Primary Strategy
                            React.createElement('div', {
                                key: 'primary-strategy',
                                style: {
                                    background: '#dbeafe',
                                    border: '1px solid #3b82f6',
                                    borderRadius: '8px',
                                    padding: '1rem',
                                    marginBottom: '1rem'
                                }
                            }, [
                                React.createElement('h4', { key: 'title', style: { margin: '0 0 0.5rem 0', color: '#1e40af' } }, 'üèÜ Recommended Strategy'),
                                React.createElement('p', { key: 'content', style: { margin: 0, color: '#1e40af' } }, 
                                    assessment.score >= 70 ? 
                                        'Strong case for immediate escalation. Send formal demand with short cure period and clear consequences. Consider litigation if no prompt response.' :
                                    assessment.score >= 55 ?
                                        'Moderate case strength. Send detailed demand letter with reasonable cure period. Negotiate in good faith but prepare for potential litigation.' :
                                        'Case needs strengthening. Gather additional documentation, provide detailed notice, and attempt negotiated resolution before litigation.'
                                )
                            ]),

                            // Recovery Prospects
                            React.createElement('div', {
                                key: 'recovery-prospects',
                                style: {
                                    background: '#f0f9ff',
                                    borderRadius: '8px',
                                    padding: '1rem',
                                    marginBottom: '1rem'
                                }
                            }, [
                                React.createElement('h4', { key: 'title' }, 'üí∞ Recovery Analysis'),
                                React.createElement('div', { key: 'recovery-grid', style: { display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' } }, [
                                    React.createElement('div', { key: 'estimated-damages' }, [
                                        React.createElement('strong', null, 'Estimated Total Damages: '),
                                        React.createElement('span', { style: { color: '#059669', fontWeight: '600' } }, 
                                            totalDamages > 0 ? `$${totalDamages.toLocaleString()}` : 'To be determined'
                                        )
                                    ]),
                                    React.createElement('div', { key: 'recovery-likelihood' }, [
                                        React.createElement('strong', null, 'Recovery Likelihood: '),
                                        React.createElement('span', { 
                                            style: { 
                                                color: assessment.score >= 70 ? '#059669' : assessment.score >= 55 ? '#f59e0b' : '#dc2626',
                                                fontWeight: '600' 
                                            } 
                                        }, 
                                            assessment.score >= 70 ? 'High (70-90%)' : 
                                            assessment.score >= 55 ? 'Moderate (40-70%)' : 'Low (20-40%)'
                                        )
                                    ])
                                ])
                            ]),

                            // Next Steps Timeline
                            React.createElement('div', {
                                key: 'timeline',
                                style: {
                                    background: '#f3f4f6',
                                    borderRadius: '8px',
                                    padding: '1rem'
                                }
                            }, [
                                React.createElement('h4', { key: 'title' }, 'üìÖ Recommended Timeline'),
                                React.createElement('ol', { key: 'steps', style: { marginLeft: '1rem' } }, [
                                    React.createElement('li', { key: '1' }, `Immediate: Send formal demand letter via certified mail`),
                                    React.createElement('li', { key: '2' }, `Day ${parseInt(formData.cureDeadline) + 1}: Follow up if no response received`),
                                    React.createElement('li', { key: '3' }, `Day ${parseInt(formData.cureDeadline) + 7}: Begin litigation preparation if no cure`),
                                    React.createElement('li', { key: '4' }, `Day ${parseInt(formData.cureDeadline) + 15}: File lawsuit or initiate alternative dispute resolution`),
                                    totalDamages > 50000 && React.createElement('li', { key: '5' }, 'Consider attorney consultation for high-value case')
                                ].filter(Boolean))
                            ])
                        ])
                    ]),

                    // Legal Precedent and Considerations
                    React.createElement('div', { key: 'legal-considerations', className: 'form-section' }, [
                        React.createElement('h3', { key: 'title' }, 'üìö Legal Considerations'),
                        React.createElement('div', { key: 'considerations-grid', style: { display: 'grid', gap: '1rem' } }, [
                            // Contract Type Specific Advice
                            React.createElement('div', {
                                key: 'contract-advice',
                                style: {
                                    background: '#fefce8',
                                    border: '1px solid #eab308',
                                    borderRadius: '6px',
                                    padding: '1rem'
                                }
                            }, [
                                React.createElement('h4', { key: 'title', style: { margin: '0 0 0.5rem 0', color: '#a16207' } }, 
                                    `üìã ${contractTypes[formData.contractType]} Considerations`
                                ),
                                React.createElement('p', { key: 'advice', style: { margin: 0, fontSize: '0.9rem', color: '#a16207' } },
                                    (() => {
                                        const contractAdvice = {
                                            'saas_contract': 'SaaS contracts often include specific performance metrics and service level agreements. Focus on quantifiable failures, uptime violations, and business impact from service disruptions.',
                                            'development_contract': 'Development contracts require clear deliverable specifications. Document scope deviations, missed milestones, and acceptance criteria violations with technical evidence.',
                                            'service_agreement': 'Service agreements focus on performance standards and timing. Emphasize business disruption, replacement costs, and quantifiable service failures.',
                                            'consulting_agreement': 'Consulting agreements involve professional standards and confidentiality. Consider reputational damages, opportunity costs, and breach of professional duties.',
                                            'real_estate_purchase': 'Real estate purchase agreements involve significant financial commitments. Focus on specific performance remedies, earnest money, and market condition changes.',
                                            'real_estate_lease': 'Lease agreements require attention to notice periods, cure rights, and habitability issues. Document property condition and compliance failures.',
                                            'construction_contract': 'Construction contracts involve complex performance standards and lien rights. Document delays, defective work, and change order disputes with detailed evidence.',
                                            'ip_licensing': 'IP licensing agreements require careful attention to usage rights, royalty calculations, and territorial restrictions. Document unauthorized use and revenue impact.',
                                            'franchise_agreement': 'Franchise agreements involve ongoing operational requirements and brand standards. Focus on territory violations, operational failures, and brand damage.',
                                            'employment_contract': 'Employment contracts involve specific notice periods and restrictive covenants. Consider competition issues, confidentiality breaches, and compensation disputes.',
                                            'loan_agreement': 'Loan agreements involve strict payment schedules and default provisions. Focus on payment history, collateral issues, and acceleration clauses.',
                                            'supply_chain': 'Supply chain contracts involve delivery schedules and quality standards. Document delays, defective goods, and business disruption from supply failures.',
                                            'international_trade': 'International contracts involve complex jurisdictional and currency issues. Consider trade regulations, force majeure clauses, and cross-border enforcement.',
                                            'subscription_service': 'Subscription agreements involve recurring payment obligations and service levels. Focus on billing disputes, service interruptions, and cancellation procedures.',
                                            'data_processing': 'Data processing agreements involve strict compliance and security requirements. Consider GDPR, privacy violations, and security breach implications.'
                                        };
                                        return contractAdvice[formData.contractType] || 'Focus on specific contractual obligations and measurable performance standards. Document breaches with clear evidence and quantify business impact.';
                                    })()
                                )
                            ]),

                            // Jurisdiction Specific Notes
                            React.createElement('div', {
                                key: 'jurisdiction-notes',
                                style: {
                                    background: '#f0fdf4',
                                    border: '1px solid #16a34a',
                                    borderRadius: '6px',
                                    padding: '1rem'
                                }
                            }, [
                                React.createElement('h4', { key: 'title', style: { margin: '0 0 0.5rem 0', color: '#15803d' } }, 
                                    `üèõÔ∏è ${US_STATES.find(s => s.value === formData.governingLaw)?.label || 'California'} Law Notes`
                                ),
                                React.createElement('p', { key: 'notes', style: { margin: 0, fontSize: '0.9rem', color: '#15803d', lineHeight: '1.4' } },
                                    (() => {
                                        const stateInfo = {
                                            'CA': 'California: 4 years for written contracts (CCP ¬ß337), 2 years for oral contracts. SOL runs from breach date or when party knew/should have known of breach. Discovery rule applies for hidden defects. No mandatory cure period unless contract specifies.',
                                            'NY': 'New York: 6 years for written contracts (CPLR ¬ß213), 6 years for oral contracts. SOL begins on breach date. UCC Article 2 (sales): 4 years. Demand requirement may extend SOL for payment obligations.',
                                            'TX': 'Texas: 4 years for written contracts (Civ. Prac. & Rem. Code ¬ß16.004), 2 years for oral contracts. SOL runs from accrual (when breach occurs + damages). Discovery rule for fraud/mistake. Notice requirements vary by contract type.',
                                            'FL': 'Florida: 5 years for written contracts (FS ¬ß95.11), 4 years for oral contracts. SOL begins at breach or when last payment due. UCC contracts: 4 years. Construction contracts have specific notice requirements.',
                                            'IL': 'Illinois: 10 years for written contracts (735 ILCS 5/13-206), 5 years for oral contracts. SOL runs from breach date. Discovery rule for latent defects. Notice requirements for construction contracts within 2 years.',
                                            'MA': 'Massachusetts: 6 years for written contracts (MGL c. 260 ¬ß2), 6 years for oral contracts. SOL begins when cause of action accrues (breach occurs). UCC: 4 years. Chapter 93A claims: 4 years.',
                                            'WA': 'Washington: 6 years for written contracts (RCW 4.16.040), 3 years for oral contracts. SOL runs from breach date or when performance due. Discovery rule applies to fraud/concealment. Notice requirements for construction.',
                                            'CO': 'Colorado: 3 years for both written and oral contracts (CRS ¬ß13-80-101). SOL begins when claim accrues (breach + knowledge of harm). Shortest SOL in US. Notice requirements for mechanic\'s liens within 4 months.',
                                            'MD': 'Maryland: 3 years for written contracts (Cts. & Jud. Proc. ¬ß5-101), 3 years for oral contracts. SOL runs from breach date. Discovery rule for fraud. UCC: 4 years. Notice required for home improvement contracts.',
                                            'NC': 'North Carolina: 3 years for written contracts (NCGS ¬ß1-52), 3 years for oral contracts. SOL begins at breach. UCC contracts: 4 years. Construction: notice within 6 years of substantial completion.',
                                            'PA': 'Pennsylvania: 4 years for written contracts (42 Pa. C.S. ¬ß5525), 4 years for oral contracts. SOL runs from breach date. Discovery rule for fraud/concealment. UCC: 4 years. Prompt notice required for defects.',
                                            'OH': 'Ohio: 8 years for written contracts (ORC ¬ß2305.06), 6 years for oral contracts. SOL begins when cause of action accrues. Discovery rule applies to latent defects. Mechanic\'s liens: notice within 75 days.',
                                            'MI': 'Michigan: 6 years for written contracts (MCL ¬ß600.5807), 6 years for oral contracts. SOL runs from breach date or when performance due. Discovery rule for fraud. UCC: 4 years. Notice requirements vary.',
                                            'GA': 'Georgia: 6 years for written contracts (OCGA ¬ß9-3-24), 4 years for oral contracts. SOL begins at breach. Demand may be required for payment obligations. Construction: notice within 8 years of substantial completion.'
                                        };
                                        return stateInfo[formData.governingLaw] || `${US_STATES.find(s => s.value === formData.governingLaw)?.label || 'Selected State'}: Specific statute of limitations varies by state. Written contracts typically 3-10 years, oral contracts 2-6 years. SOL generally runs from breach date or when performance was due. Consult state-specific statutes for exact requirements, notice provisions, and discovery rules.`;
                                    })()
                                )
                            ])
                        ])
                    ])
                ]);
            };

            // Main tab content renderer
            const renderTabContent = () => {
                switch(currentTab) {
                    case 0: return renderContractTab();
                    case 1: return renderBreachTab();
                    case 2: return renderStrategyTab();
                    case 3: return renderAssessmentTab();
                    default: return renderContractTab();
                }
            };

            // Render main component
            return React.createElement('div', { className: 'app-container' }, [
                // Header
                React.createElement('header', { key: 'header', className: 'app-header' }, [
                    React.createElement('h1', { key: 'title' }, '‚öñÔ∏è Breach of Contract Demand Letter Generator'),
                    React.createElement('p', { key: 'subtitle' }, 'Professional legal tool for service agreements, vendor contracts, partnerships, and business relationships')
                ]),
                
                // Main container
                React.createElement('div', { key: 'main', className: 'main-container' }, [
                    // Form pane
                    React.createElement('div', { key: 'form', className: 'form-pane' }, [
                        // Tab navigation
                        React.createElement('div', { key: 'tabs', className: 'tab-navigation' },
                            tabs.map((tab, index) => 
                                React.createElement('button', {
                                    key: tab.id,
                                    className: `tab-button ${currentTab === index ? 'active' : ''}`,
                                    onClick: () => {
                                        setCurrentTab(index);
                                        // Highlight tab-specific content in preview
                                        setTimeout(() => {
                                            highlightTabContent(tab.id);
                                        }, 150);
                                    }
                                }, [
                                    React.createElement(Icon, { key: 'icon', name: tab.icon }),
                                    React.createElement('span', { key: 'label' }, tab.label)
                                ])
                            )
                        ),
                        
                        // Tab content
                        React.createElement('div', { key: 'content', className: 'tab-content-container' },
                            renderTabContent()
                        ),
                        
                        // Action buttons
                        React.createElement('div', { key: 'actions', className: 'action-buttons' }, [
                            // Navigation buttons
                            React.createElement('button', {
                                key: 'prev-tab',
                                className: 'btn btn-secondary',
                                disabled: currentTab === 0,
                                onClick: () => setCurrentTab(Math.max(0, currentTab - 1))
                            }, [
                                React.createElement(Icon, { key: 'icon', name: 'chevron-left' }),
                                React.createElement('span', { key: 'text' }, 'Previous')
                            ]),
                            React.createElement('button', {
                                key: 'next-tab',
                                className: 'btn btn-primary',
                                disabled: currentTab === tabs.length - 1,
                                onClick: () => setCurrentTab(Math.min(tabs.length - 1, currentTab + 1))
                            }, [
                                React.createElement('span', { key: 'text' }, 'Next'),
                                React.createElement(Icon, { key: 'icon', name: 'chevron-right' })
                            ]),
                            
                            // Document action buttons
                            React.createElement('button', {
                                key: 'copy',
                                className: 'btn btn-secondary',
                                onClick: copyToClipboard
                            }, [
                                React.createElement(Icon, { key: 'icon', name: 'copy' }),
                                React.createElement('span', { key: 'text' }, 'Copy')
                            ]),
                            
                            React.createElement('button', {
                                key: 'download',
                                className: 'btn btn-primary',
                                onClick: downloadLetter
                            }, [
                                React.createElement(Icon, { key: 'icon', name: 'download' }),
                                React.createElement('span', { key: 'text' }, 'Word Doc')
                            ]),
                            
                            React.createElement('button', {
                                key: 'esign',
                                className: 'btn btn-accent',
                                disabled: eSignLoading,
                                onClick: eSignDocument,
                                title: 'Send for electronic signature - uses API calls (limit 5 per payment)',
                                style: { backgroundColor: '#dc2626', color: 'white' }
                            }, [
                                React.createElement(Icon, { 
                                    key: 'icon', 
                                    name: eSignLoading ? 'loader' : 'edit-3',
                                    style: eSignLoading ? { animation: 'spin 1s linear infinite' } : {}
                                }),
                                React.createElement('span', { key: 'text' }, eSignLoading ? 'Processing...' : 'E-Sign')
                            ])
                        ])
                    ]),
                    
                    // Preview pane
                    React.createElement('div', { key: 'preview', className: 'preview-pane' }, [
                        React.createElement('div', { key: 'header', className: 'preview-header' }, [
                            React.createElement('h3', { key: 'title' }, 'Live Preview'),
                            !hasPaywallAccess && React.createElement('div', {
                                key: 'preview-notice',
                                style: {
                                    fontSize: '0.8rem',
                                    color: '#6b7280',
                                    marginTop: '0.25rem'
                                }
                            }, 'üëÄ Full preview available ‚Ä¢ Copy/download requires payment')
                        ]),
                        React.createElement('div', {
                            key: 'content',
                            className: 'preview-content',
                            ref: previewRef,
                            style: {
                                userSelect: hasPaywallAccess ? 'text' : 'none',
                                WebkitUserSelect: hasPaywallAccess ? 'text' : 'none',
                                MozUserSelect: hasPaywallAccess ? 'text' : 'none',
                                msUserSelect: hasPaywallAccess ? 'text' : 'none',
                                overflow: 'auto', // Always allow scrolling
                                maxHeight: 'calc(100vh - 200px)',
                                cursor: hasPaywallAccess ? 'text' : 'default',
                                position: 'relative'
                            },
                            onContextMenu: (e) => {
                                if (!hasPaywallAccess) {
                                    e.preventDefault();
                                    return false;
                                }
                            },
                            dangerouslySetInnerHTML: { 
                                __html: generateLetterContent()
                            }
                        })
                    ])
                ])
            ]);
        };

        // Render the component when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            ReactDOM.render(React.createElement(BreachContractGenerator), document.getElementById('root'));

            // Initialize feather icons after render
            setTimeout(() => {
                if (window.feather) {
                    window.feather.replace();
                }
            }, 100);

            // Initialize PayPal if available
            if (typeof PaywallSystem !== 'undefined') {
                PaywallSystem.initializePayPal().catch(console.error);
            }
        });
    </script>
</body>
</html>