<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-901N2Y3CDZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-901N2Y3CDZ');
  </script>

  <title>NDA Negotiation Mode | Clause-by-Clause Analysis &amp; Counter-Proposals | Terms.Law</title>
  <meta name="description" content="Analyze NDA clauses, understand risks, get balanced alternatives and ready-to-send negotiation emails. The killer feature for NDA negotiations.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #2563eb;
      --primary-dark: #1d4ed8;
      --accent: #8b5cf6;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --dark: #0f172a;
      --dark-lighter: #1e293b;
      --gray-50: #f8fafc;
      --gray-100: #f1f5f9;
      --gray-200: #e2e8f0;
      --gray-300: #cbd5e1;
      --gray-400: #94a3b8;
      --gray-500: #64748b;
      --gray-600: #475569;
      --gray-700: #334155;
      --gray-800: #1e293b;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--gray-50);
      color: var(--gray-700);
      line-height: 1.6;
    }

    /* ========================================
       UNIFIED SITE-WIDE MEGA-HEADER
       ======================================== */
    .site-header {
        background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        position: sticky;
        top: 0;
        z-index: 1000;
        box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }

    .header-content {
        max-width: 1400px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        padding: 0 24px;
        height: 60px;
    }

    .site-logo {
        font-size: 1.15rem;
        font-weight: 800;
        text-decoration: none;
        background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-right: 32px;
    }

    .site-nav {
        display: flex;
        align-items: center;
        gap: 0;
        flex: 1;
    }

    .nav-item {
        position: relative;
    }

    .nav-link {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 18px 16px;
        color: #94a3b8;
        text-decoration: none;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.2s;
        border-bottom: 2px solid transparent;
    }

    .nav-link:hover {
        color: #fff;
        background: rgba(255,255,255,0.05);
    }

    .nav-link:hover,
    .nav-link.active {
        border-bottom-color: var(--primary);
    }

    .nav-link .arrow {
        font-size: 10px;
        transition: transform 0.2s;
    }

    .nav-item:hover .arrow {
        transform: rotate(180deg);
    }

    .nav-cta {
        margin-left: auto;
        background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
        color: #fff !important;
        padding: 10px 20px !important;
        border-radius: 8px;
        font-weight: 600 !important;
        border-bottom: none !important;
    }

    .nav-cta:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 15px rgba(37, 99, 235, 0.4);
    }

    /* Mega Menu */
    .mega-menu {
        position: absolute;
        top: 100%;
        left: 0;
        background: #fff;
        border-radius: 0 0 16px 16px;
        box-shadow: 0 20px 50px rgba(0,0,0,0.2);
        opacity: 0;
        visibility: hidden;
        transform: translateY(-10px);
        transition: all 0.2s ease;
        z-index: 100;
    }

    .nav-item:hover .mega-menu {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
    }

    .mega-menu.wide { min-width: 700px; }
    .mega-menu.medium { min-width: 520px; }
    .mega-menu.read-menu { min-width: 620px; }

    .mega-menu-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 14px 20px;
        border-bottom: 1px solid var(--gray-200);
        background: var(--gray-50);
    }

    .mega-menu-title {
        font-size: 13px;
        font-weight: 700;
        color: var(--gray-700);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .mega-menu-viewall {
        font-size: 12px;
        color: var(--primary);
        text-decoration: none;
        font-weight: 600;
    }

    .mega-menu-grid {
        display: grid;
        gap: 0;
    }

    .mega-menu-grid.cols-3 { grid-template-columns: repeat(3, 1fr); }
    .mega-menu-grid.cols-2 { grid-template-columns: repeat(2, 1fr); }

    .mega-menu-section {
        padding: 16px 20px;
        border-right: 1px solid var(--gray-100);
        border-bottom: 1px solid var(--gray-100);
    }

    .mega-menu-section:nth-child(3n) {
        border-right: none;
    }

    .mega-menu-section.no-border {
        border-right: none;
    }

    .mega-menu-section-title {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 13px;
        font-weight: 700;
        color: var(--gray-800);
        margin-bottom: 10px;
    }

    .mega-menu-section-title .icon {
        font-size: 16px;
    }

    .mega-menu-links {
        list-style: none;
    }

    .mega-menu-links li {
        margin-bottom: 6px;
    }

    .mega-menu-links a {
        font-size: 12px;
        color: var(--gray-600);
        text-decoration: none;
        transition: color 0.15s;
        display: block;
    }

    .mega-menu-links a:hover {
        color: var(--primary);
    }

    .mega-menu-more {
        font-size: 11px;
        color: var(--gray-400);
        margin-top: 6px;
    }

    .mega-menu-footer {
        display: flex;
        gap: 10px;
        padding: 12px 20px;
        background: var(--gray-50);
        border-radius: 0 0 16px 16px;
        flex-wrap: wrap;
    }

    .mega-menu-footer a {
        font-size: 11px;
        color: var(--gray-500);
        text-decoration: none;
        padding: 4px 10px;
        background: #fff;
        border-radius: 20px;
        border: 1px solid var(--gray-200);
        transition: all 0.15s;
    }

    .mega-menu-footer a:hover {
        border-color: var(--primary);
        color: var(--primary);
    }

    /* Dropdown */
    .dropdown {
        position: absolute;
        top: 100%;
        left: 0;
        background: #fff;
        border-radius: 0 0 12px 12px;
        box-shadow: 0 20px 50px rgba(0,0,0,0.2);
        opacity: 0;
        visibility: hidden;
        transform: translateY(-10px);
        transition: all 0.2s ease;
        min-width: 220px;
        padding: 8px 0;
    }

    .nav-item:hover .dropdown {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
    }

    .dropdown a {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 18px;
        color: var(--gray-700);
        text-decoration: none;
        font-size: 13px;
        transition: background 0.15s;
    }

    .dropdown a:hover {
        background: var(--gray-50);
    }

    .dropdown .icon {
        font-size: 16px;
        width: 22px;
        text-align: center;
    }

    /* Hub Sub-Navigation */
    .hub-subnav {
      background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    .hub-subnav-content {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 48px;
    }
    .hub-subnav-title {
      color: #94a3b8;
      font-size: 0.9rem;
      font-weight: 600;
    }
    .hub-subnav-tabs {
      display: flex;
      gap: 8px;
    }
    .hub-tab {
      padding: 8px 16px;
      color: #94a3b8;
      text-decoration: none;
      font-size: 0.85rem;
      font-weight: 500;
      border-radius: 6px;
      transition: all 0.2s;
    }
    .hub-tab:hover {
      background: rgba(255,255,255,0.1);
      color: #fff;
    }
    .hub-tab.active {
      background: rgba(37, 99, 235, 0.3);
      color: #60a5fa;
    }

    /* Main Content */
    .main-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }

    /* Hero Section */
    .tool-hero {
      background: linear-gradient(135deg, var(--dark) 0%, #1e3a5f 50%, #312e81 100%);
      padding: 3rem 2rem;
      margin-bottom: 2rem;
      border-radius: 16px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    .tool-hero::before {
      content: '';
      position: absolute;
      inset: 0;
      background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }
    .tool-hero h1 {
      font-size: 2.5rem;
      font-weight: 800;
      color: white;
      margin-bottom: 0.75rem;
      position: relative;
    }
    .tool-hero h1 .gradient {
      background: linear-gradient(135deg, #60a5fa, #a78bfa, #f472b6);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .tool-hero p {
      color: #94a3b8;
      font-size: 1.1rem;
      max-width: 600px;
      margin: 0 auto;
      position: relative;
    }

    /* Input Section */
    .input-section {
      background: white;
      border-radius: 16px;
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }
    .input-section h2 {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--dark);
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .input-section h2 .badge {
      background: linear-gradient(135deg, var(--primary), var(--accent));
      color: white;
      font-size: 0.7rem;
      padding: 4px 10px;
      border-radius: 20px;
      font-weight: 600;
    }

    /* Input Toggle */
    .input-toggle {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    .toggle-btn {
      flex: 1;
      padding: 1rem;
      border: 2px solid var(--gray-200);
      border-radius: 12px;
      background: white;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
    }
    .toggle-btn:hover {
      border-color: var(--primary);
    }
    .toggle-btn.active {
      border-color: var(--primary);
      background: rgba(37, 99, 235, 0.05);
    }
    .toggle-btn .icon {
      font-size: 1.5rem;
      display: block;
      margin-bottom: 0.5rem;
    }
    .toggle-btn .label {
      font-weight: 600;
      color: var(--dark);
      font-size: 0.9rem;
    }
    .toggle-btn .desc {
      font-size: 0.75rem;
      color: var(--gray-500);
      margin-top: 4px;
    }

    /* Paste Input */
    .paste-input {
      display: block;
    }
    .paste-input.hidden {
      display: none;
    }
    .clause-textarea {
      width: 100%;
      min-height: 180px;
      padding: 1rem;
      border: 2px solid var(--gray-200);
      border-radius: 12px;
      font-family: 'Inter', sans-serif;
      font-size: 0.95rem;
      line-height: 1.6;
      resize: vertical;
      transition: border-color 0.2s;
    }
    .clause-textarea:focus {
      outline: none;
      border-color: var(--primary);
    }
    .clause-textarea::placeholder {
      color: var(--gray-400);
    }

    /* Select Input */
    .select-input {
      display: none;
    }
    .select-input.active {
      display: block;
    }
    .clause-select {
      width: 100%;
      padding: 1rem;
      border: 2px solid var(--gray-200);
      border-radius: 12px;
      font-family: 'Inter', sans-serif;
      font-size: 0.95rem;
      background: white;
      cursor: pointer;
      transition: border-color 0.2s;
    }
    .clause-select:focus {
      outline: none;
      border-color: var(--primary);
    }

    /* Analyze Button */
    .analyze-btn {
      width: 100%;
      padding: 1rem 2rem;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
      margin-top: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    .analyze-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);
    }
    .analyze-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    /* Results Section */
    .results-section {
      display: none;
    }
    .results-section.active {
      display: block;
    }

    /* Risk Meter */
    .risk-meter-card {
      background: white;
      border-radius: 16px;
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }
    .risk-meter-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 1.5rem;
    }
    .risk-meter-header h3 {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--dark);
    }
    .clause-type-badge {
      background: var(--gray-100);
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--gray-700);
    }

    /* Risk Visualization */
    .risk-visual {
      display: flex;
      align-items: center;
      gap: 2rem;
      margin-bottom: 1.5rem;
    }
    .risk-gauge-container {
      flex-shrink: 0;
    }
    .risk-gauge {
      width: 140px;
      height: 140px;
      position: relative;
    }
    .risk-gauge svg {
      transform: rotate(-90deg);
    }
    .risk-gauge .bg {
      stroke: var(--gray-200);
    }
    .risk-gauge .fill {
      stroke-linecap: round;
      transition: stroke-dashoffset 0.5s ease;
    }
    .risk-score-display {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
    }
    .risk-score-display .value {
      font-size: 2.5rem;
      font-weight: 800;
      color: var(--dark);
    }
    .risk-score-display .label {
      font-size: 0.7rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* Risk Meter Bar */
    .risk-meter-bar {
      flex: 1;
    }
    .risk-labels {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      font-size: 0.75rem;
      font-weight: 600;
    }
    .risk-labels .favor-you { color: var(--success); }
    .risk-labels .balanced { color: var(--gray-500); }
    .risk-labels .favor-them { color: var(--danger); }

    .risk-bar {
      height: 16px;
      background: linear-gradient(90deg, var(--success) 0%, var(--warning) 50%, var(--danger) 100%);
      border-radius: 8px;
      position: relative;
    }
    .risk-indicator {
      position: absolute;
      top: -4px;
      width: 24px;
      height: 24px;
      background: white;
      border: 3px solid var(--dark);
      border-radius: 50%;
      transform: translateX(-50%);
      transition: left 0.5s ease;
    }

    .risk-summary {
      background: var(--gray-50);
      padding: 1rem;
      border-radius: 8px;
      font-size: 0.9rem;
      color: var(--gray-700);
      margin-top: 1rem;
    }
    .risk-summary strong {
      color: var(--dark);
    }

    /* Analysis Cards */
    .analysis-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1.5rem;
      margin-bottom: 2rem;
    }
    @media (max-width: 768px) {
      .analysis-grid {
        grid-template-columns: 1fr;
      }
    }

    .analysis-card {
      background: white;
      border-radius: 16px;
      padding: 1.5rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }
    .analysis-card.full-width {
      grid-column: 1 / -1;
    }
    .analysis-card h4 {
      font-size: 1rem;
      font-weight: 700;
      color: var(--dark);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .analysis-card h4 .icon {
      font-size: 1.2rem;
    }
    .analysis-card p {
      font-size: 0.9rem;
      color: var(--gray-600);
      line-height: 1.7;
    }

    /* Clause Box */
    .clause-box {
      background: var(--gray-50);
      border: 1px solid var(--gray-200);
      border-radius: 8px;
      padding: 1rem;
      font-family: Georgia, serif;
      font-size: 0.9rem;
      color: var(--gray-700);
      line-height: 1.7;
      position: relative;
    }
    .clause-box.improved {
      background: #f0fdf4;
      border-color: var(--success);
    }

    /* Copy Button */
    .copy-btn {
      position: absolute;
      top: 8px;
      right: 8px;
      padding: 6px 12px;
      background: white;
      border: 1px solid var(--gray-200);
      border-radius: 6px;
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--gray-600);
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .copy-btn:hover {
      background: var(--gray-50);
      border-color: var(--primary);
      color: var(--primary);
    }
    .copy-btn.copied {
      background: var(--success);
      color: white;
      border-color: var(--success);
    }

    /* Email Template Section */
    .email-section {
      background: white;
      border-radius: 16px;
      padding: 2rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      margin-bottom: 2rem;
    }
    .email-section h3 {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--dark);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .email-preview {
      background: var(--gray-50);
      border: 1px solid var(--gray-200);
      border-radius: 12px;
      overflow: hidden;
    }
    .email-header {
      background: var(--dark);
      padding: 1rem;
      color: white;
    }
    .email-field {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.85rem;
      margin-bottom: 4px;
    }
    .email-field:last-child {
      margin-bottom: 0;
    }
    .email-field .label {
      color: var(--gray-400);
      min-width: 60px;
    }
    .email-field .value {
      color: white;
    }
    .email-body {
      padding: 1.5rem;
      font-size: 0.9rem;
      color: var(--gray-700);
      line-height: 1.8;
      position: relative;
    }
    .email-body p {
      margin-bottom: 1rem;
    }
    .email-body p:last-child {
      margin-bottom: 0;
    }

    .generate-email-btn {
      width: 100%;
      padding: 1rem 2rem;
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
      margin-top: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    .generate-email-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
    }

    /* Footer */
    .footer {
      background: var(--dark);
      padding: 3rem 2rem;
      color: var(--gray-300);
      margin-top: 4rem;
    }
    .footer-inner {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .footer-links { display: flex; gap: 2rem; }
    .footer-links a {
      color: var(--gray-300);
      text-decoration: none;
      font-size: 0.9rem;
    }
    .footer-links a:hover { color: white; }

    /* Alert Badge */
    .alert-badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 0.7rem;
      font-weight: 700;
      text-transform: uppercase;
    }
    .alert-badge.danger {
      background: #fef2f2;
      color: #dc2626;
    }
    .alert-badge.warning {
      background: #fffbeb;
      color: #d97706;
    }
    .alert-badge.success {
      background: #f0fdf4;
      color: #16a34a;
    }

    /* Problems List */
    .problems-list {
      list-style: none;
    }
    .problems-list li {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      padding: 10px 0;
      border-bottom: 1px solid var(--gray-100);
    }
    .problems-list li:last-child {
      border-bottom: none;
    }
    .problems-list .icon {
      color: var(--danger);
      font-size: 1rem;
      flex-shrink: 0;
    }
    .problems-list .text {
      font-size: 0.9rem;
      color: var(--gray-700);
    }

    /* Attorney CTA */
    .attorney-cta {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      border: 2px solid #f59e0b;
      border-radius: 16px;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }
    .attorney-cta h4 {
      color: #92400e;
      font-size: 1rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .attorney-cta p {
      color: #78350f;
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }
    .attorney-cta .btn {
      display: inline-block;
      padding: 10px 20px;
      background: #92400e;
      color: white;
      text-decoration: none;
      border-radius: 8px;
      font-weight: 600;
      font-size: 0.9rem;
      transition: all 0.2s;
    }
    .attorney-cta .btn:hover {
      background: #78350f;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .tool-hero h1 { font-size: 1.75rem; }
      .input-toggle { flex-direction: column; }
      .risk-visual { flex-direction: column; text-align: center; }
      .risk-meter-bar { width: 100%; }
      .header-content { padding: 0 16px; }
      .main-container { padding: 1rem; }
    }
  </style>
</head>
<body>

<!-- ========================================
     UNIFIED SITE-WIDE MEGA-HEADER
     ======================================== -->
<header class="site-header">
    <div class="header-content">
        <a href="/" class="site-logo">Terms.Law</a>

        <nav class="site-nav">
            <!-- Demands - Mega Menu -->
            <div class="nav-item">
                <a href="/Demand-Letters/" class="nav-link">
                    Demands <span class="arrow">&#9660;</span>
                </a>
                <div class="mega-menu wide">
                    <div class="mega-menu-header">
                        <span class="mega-menu-title">Demand Letters</span>
                        <a href="/Demand-Letters/" class="mega-menu-viewall">View All 140+ Guides &#8594;</a>
                    </div>
                    <div class="mega-menu-grid cols-3">
                        <div class="mega-menu-section">
                            <div class="mega-menu-section-title"><span class="icon">&#128188;</span> Business</div>
                            <ul class="mega-menu-links">
                                <li><a href="#">Unpaid Invoices</a></li>
                                <li><a href="#">Breach of Contract</a></li>
                                <li><a href="#">Partnership Disputes</a></li>
                            </ul>
                            <div class="mega-menu-more">+ 8 more</div>
                        </div>
                        <div class="mega-menu-section">
                            <div class="mega-menu-section-title"><span class="icon">&#128119;</span> Employment</div>
                            <ul class="mega-menu-links">
                                <li><a href="#">Wage &amp; Hour Claims</a></li>
                                <li><a href="#">Wrongful Termination</a></li>
                                <li><a href="#">Discrimination</a></li>
                            </ul>
                            <div class="mega-menu-more">+ 12 more</div>
                        </div>
                        <div class="mega-menu-section">
                            <div class="mega-menu-section-title"><span class="icon">&#128722;</span> Consumer</div>
                            <ul class="mega-menu-links">
                                <li><a href="#">Defective Products</a></li>
                                <li><a href="#">Lemon Law</a></li>
                                <li><a href="#">Refund Demands</a></li>
                            </ul>
                            <div class="mega-menu-more">+ 6 more</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contracts - Mega Menu -->
            <div class="nav-item">
                <a href="/Templates/" class="nav-link">
                    Contracts <span class="arrow">&#9660;</span>
                </a>
                <div class="mega-menu medium">
                    <div class="mega-menu-header">
                        <span class="mega-menu-title">Contract Templates</span>
                        <a href="/Templates/" class="mega-menu-viewall">View Library &#8594;</a>
                    </div>
                    <div class="mega-menu-grid cols-2">
                        <div class="mega-menu-section">
                            <div class="mega-menu-section-title"><span class="icon">&#129309;</span> Business</div>
                            <ul class="mega-menu-links">
                                <li><a href="#">Service Agreement</a></li>
                                <li><a href="#">NDA / Confidentiality</a></li>
                                <li><a href="#">Partnership Agreement</a></li>
                                <li><a href="#">Consulting Agreement</a></li>
                            </ul>
                        </div>
                        <div class="mega-menu-section no-border">
                            <div class="mega-menu-section-title"><span class="icon">&#128188;</span> Employment</div>
                            <ul class="mega-menu-links">
                                <li><a href="#">Employment Agreement</a></li>
                                <li><a href="#">Contractor Agreement</a></li>
                                <li><a href="#">Non-Compete</a></li>
                                <li><a href="#">Offer Letter</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Formation - Dropdown -->
            <div class="nav-item">
                <a href="/INC/" class="nav-link">
                    Formation <span class="arrow">&#9660;</span>
                </a>
                <div class="dropdown">
                    <a href="#"><span class="icon">&#127970;</span> LLC Formation</a>
                    <a href="#"><span class="icon">&#128200;</span> Corporation</a>
                    <a href="#"><span class="icon">&#128221;</span> Operating Agreement</a>
                    <a href="#"><span class="icon">&#128203;</span> Bylaws</a>
                    <a href="#"><span class="icon">&#127963;</span> State Guides</a>
                </div>
            </div>

            <!-- Read - Dropdown -->
            <div class="nav-item">
                <a href="/Blog/" class="nav-link">
                    Read <span class="arrow">&#9660;</span>
                </a>
                <div class="dropdown">
                    <a href="/Blog/"><span class="icon">&#128240;</span> Blog</a>
                    <a href="/Trading-Legal/"><span class="icon">&#128202;</span> Trading Legal Hub</a>
                </div>
            </div>

            <!-- CTA -->
            <a href="mailto:owner@terms.law" class="nav-link nav-cta">Contact</a>
        </nav>
    </div>
</header>

<!-- NDA Studio Sub-Navigation -->
<nav class="hub-subnav">
  <div class="hub-subnav-content">
    <span class="hub-subnav-title">&#128274; NDA Studio</span>
    <div class="hub-subnav-tabs">
      <a href="/NDA/" class="hub-tab">Home</a>
      <a href="/NDA/clause-library/" class="hub-tab">Clause Library</a>
      <a href="/NDA/tools/negotiation-mode.html" class="hub-tab active">Negotiation Mode</a>
      <a href="/NDA/tools/risk-analyzer.html" class="hub-tab">Risk Analyzer</a>
    </div>
  </div>
</nav>

<main class="main-container">
  <!-- Tool Hero -->
  <section class="tool-hero">
    <h1>NDA <span class="gradient">Negotiation Mode</span></h1>
    <p>Paste a clause you received. Get risk analysis, plain English explanation, a balanced fallback, and a ready-to-send negotiation email.</p>
  </section>

  <!-- Input Section -->
  <section class="input-section">
    <h2>
      Analyze a Clause
      <span class="badge">The Killer Feature</span>
    </h2>

    <!-- Input Method Toggle -->
    <div class="input-toggle">
      <button class="toggle-btn active" id="paste-toggle" onclick="setInputMode('paste')">
        <span class="icon">&#128221;</span>
        <span class="label">Paste Clause Text</span>
        <span class="desc">Copy from the NDA you received</span>
      </button>
      <button class="toggle-btn" id="select-toggle" onclick="setInputMode('select')">
        <span class="icon">&#128203;</span>
        <span class="label">Select Common Clause</span>
        <span class="desc">Choose from problematic clauses</span>
      </button>
    </div>

    <!-- Paste Input -->
    <div class="paste-input" id="paste-input">
      <textarea class="clause-textarea" id="clause-text" placeholder="Paste the clause text here...

Example: &quot;Receiving Party shall have no obligation to treat as confidential any information which... was independently developed by Receiving Party without use of or reference to the Disclosing Party's Confidential Information as evidenced by written records.&quot;"></textarea>
    </div>

    <!-- Select Input -->
    <div class="select-input" id="select-input">
      <select class="clause-select" id="clause-dropdown" onchange="loadPresetClause()">
        <option value="">-- Select a common problematic clause --</option>
        <optgroup label="High Risk Clauses">
          <option value="residuals">Residuals Clause (They keep your concepts)</option>
          <option value="marking">Marking Requirements (Only marked info is confidential)</option>
          <option value="perpetual">Perpetual Term (No end date)</option>
          <option value="one-way-indemnity">One-Way Indemnification (You pay for everything)</option>
          <option value="broad-definition">Overly Broad Confidential Info Definition</option>
          <option value="non-compete-disguised">Non-Compete Disguised as NDA</option>
          <option value="injunctive-no-bond">Injunctive Relief Without Bond</option>
        </optgroup>
        <optgroup label="Other Problematic Clauses">
          <option value="vague-purpose">Vague Purpose Clause</option>
          <option value="unlimited-disclosure">Unlimited Third-Party Disclosure</option>
          <option value="unilateral-modification">Unilateral Modification Rights</option>
        </optgroup>
      </select>
    </div>

    <button class="analyze-btn" id="analyze-btn" onclick="analyzeClause()">
      <span>&#128270;</span> Analyze This Clause
    </button>
  </section>

  <!-- Results Section -->
  <section class="results-section" id="results-section">

    <!-- Risk Meter Card -->
    <div class="risk-meter-card">
      <div class="risk-meter-header">
        <h3>&#128202; Clause Analysis</h3>
        <span class="clause-type-badge" id="clause-type-badge">Residuals Clause</span>
      </div>

      <div class="risk-visual">
        <div class="risk-gauge-container">
          <div class="risk-gauge">
            <svg width="140" height="140">
              <circle class="bg" cx="70" cy="70" r="60" fill="none" stroke-width="14"/>
              <circle class="fill" id="risk-fill" cx="70" cy="70" r="60" fill="none" stroke-width="14"
                      stroke-dasharray="377" stroke-dashoffset="151" stroke="#ef4444"/>
            </svg>
            <div class="risk-score-display">
              <div class="value" id="risk-value">4</div>
              <div class="label" id="risk-label" style="color: #ef4444;">HIGH RISK</div>
            </div>
          </div>
        </div>

        <div class="risk-meter-bar">
          <div class="risk-labels">
            <span class="favor-you">Favors You</span>
            <span class="balanced">Balanced</span>
            <span class="favor-them">Favors Them</span>
          </div>
          <div class="risk-bar">
            <div class="risk-indicator" id="risk-indicator" style="left: 80%;"></div>
          </div>
          <div class="risk-summary" id="risk-summary">
            <strong>This clause heavily favors the other party.</strong> It allows them to retain and reuse concepts, ideas, and know-how derived from your confidential information for their own purposes.
          </div>
        </div>
      </div>
    </div>

    <!-- Attorney CTA (shows for high risk) -->
    <div class="attorney-cta" id="attorney-cta">
      <h4>&#9888;&#65039; High-Risk Clause Detected</h4>
      <p>This clause scored 4/5 on our risk scale. For NDAs involving significant business value or intellectual property, consider having an attorney review your counter-proposal.</p>
      <a href="mailto:owner@terms.law?subject=NDA%20Review%20Request" class="btn">Request Attorney Review ($150-250)</a>
    </div>

    <!-- Analysis Grid -->
    <div class="analysis-grid">

      <!-- What It Means -->
      <div class="analysis-card">
        <h4><span class="icon">&#128161;</span> What This Clause Means</h4>
        <p id="meaning-text">This is a "residuals clause." It means the other party can retain and use any general concepts, ideas, techniques, or know-how that they learn from your confidential information - even after the NDA ends. They don't need to pay you, credit you, or get permission.</p>
      </div>

      <!-- Who It Favors -->
      <div class="analysis-card">
        <h4><span class="icon">&#128101;</span> Who It Favors</h4>
        <div id="favor-content">
          <span class="alert-badge danger">Heavily Favors Receiving Party</span>
          <p style="margin-top: 12px;">The receiving party (them) gets to keep the "residue" of what they learned. This is especially dangerous if you're sharing trade secrets, proprietary processes, or unique business strategies.</p>
        </div>
      </div>

      <!-- Why It's Problematic -->
      <div class="analysis-card full-width">
        <h4><span class="icon">&#9888;&#65039;</span> Why This Is Problematic</h4>
        <ul class="problems-list" id="problems-list">
          <li>
            <span class="icon">&#10060;</span>
            <span class="text"><strong>Memory Loophole:</strong> Once someone reads your trade secret, the knowledge is in their head. This clause legitimizes using that retained knowledge.</span>
          </li>
          <li>
            <span class="icon">&#10060;</span>
            <span class="text"><strong>Proof Impossible:</strong> How do you prove someone "independently developed" something vs. used your ideas? You can't peek inside their brain.</span>
          </li>
          <li>
            <span class="icon">&#10060;</span>
            <span class="text"><strong>Competitive Risk:</strong> They can use your concepts to compete against you or help your competitors.</span>
          </li>
        </ul>
      </div>

      <!-- Fallback Position -->
      <div class="analysis-card">
        <h4><span class="icon">&#128179;</span> Fallback Position (More Balanced)</h4>
        <div class="clause-box improved" id="fallback-clause">
          <button class="copy-btn" onclick="copyText('fallback-clause', this)">
            <span>&#128203;</span> Copy
          </button>
          "Notwithstanding the foregoing, Receiving Party shall not acquire any rights under this Agreement to any trade secrets, proprietary source code, or patentable inventions of the Disclosing Party, and the residuals exception shall not apply to such information."
        </div>
        <p style="margin-top: 12px; font-size: 0.85rem; color: var(--gray-500);">This carves out your most valuable IP from the residuals exception.</p>
      </div>

      <!-- Alternative Language -->
      <div class="analysis-card">
        <h4><span class="icon">&#9989;</span> Your Counter-Proposal</h4>
        <div class="clause-box improved" id="counter-clause">
          <button class="copy-btn" onclick="copyText('counter-clause', this)">
            <span>&#128203;</span> Copy
          </button>
          "Receiving Party acknowledges that no residual rights are granted under this Agreement. All Confidential Information, including any concepts, ideas, techniques, or know-how derived therefrom, shall remain the exclusive property of the Disclosing Party."
        </div>
        <p style="margin-top: 12px; font-size: 0.85rem; color: var(--gray-500);">This completely removes the residuals exception.</p>
      </div>

    </div>

    <!-- Email Template Section -->
    <section class="email-section">
      <h3><span>&#9993;</span> Ready-to-Send Negotiation Email</h3>

      <div class="email-preview" id="email-preview">
        <div class="email-header">
          <div class="email-field">
            <span class="label">To:</span>
            <span class="value">[Counterparty]</span>
          </div>
          <div class="email-field">
            <span class="label">Subject:</span>
            <span class="value">NDA Redlines - Section [X] (Residuals)</span>
          </div>
        </div>
        <div class="email-body" id="email-body">
          <button class="copy-btn" onclick="copyEmailBody(this)">
            <span>&#128203;</span> Copy Email
          </button>
          <p>Hi [Name],</p>
          <p>Thank you for sending over the NDA. We're generally aligned and ready to move forward, but I'd like to propose one revision to Section [X] regarding residual information rights.</p>
          <p><strong>Our concern:</strong> The current residuals clause would allow broad use of concepts and know-how derived from our confidential information. Given the nature of what we'll be sharing (including proprietary processes and trade secrets), we need to ensure these remain protected.</p>
          <p><strong>Our proposal:</strong> We'd like to either (1) remove the residuals clause entirely, or (2) add a carve-out for trade secrets and proprietary source code. Proposed language:</p>
          <p style="background: #f0fdf4; padding: 12px; border-radius: 6px; border-left: 3px solid #10b981; font-style: italic;">"Notwithstanding the foregoing, Receiving Party shall not acquire any rights under this Agreement to any trade secrets, proprietary source code, or patentable inventions of the Disclosing Party."</p>
          <p>This is a standard carve-out that protects the most sensitive categories while still allowing the residuals concept to apply to general business knowledge.</p>
          <p>Happy to discuss if you have questions. Otherwise, let me know if this works and we can proceed to signature.</p>
          <p>Best regards,<br>[Your Name]</p>
        </div>
      </div>

      <button class="generate-email-btn" onclick="copyEmailBody(document.querySelector('.email-body .copy-btn'))">
        <span>&#128233;</span> Copy Email to Clipboard
      </button>
    </section>

  </section>
</main>

<!-- Footer -->
<footer class="footer">
  <div class="footer-inner">
    <div>&copy; 2025 Terms.Law &mdash; Sergei Tokmakov, Esq. &bull; CA Bar #279869</div>
    <div class="footer-links">
      <a href="#">Privacy Policy</a>
      <a href="#">Terms of Service</a>
      <a href="#">Contact</a>
    </div>
  </div>
</footer>

<script>
// Clause Database - 10 Common Problematic Clauses
const clauseDatabase = {
  residuals: {
    type: "Residuals Clause",
    sampleText: `"Notwithstanding the foregoing, Receiving Party shall be free to use for any purpose the residuals resulting from access to or work with the Disclosing Party's Confidential Information, provided that Receiving Party shall maintain the confidentiality of the Confidential Information as provided herein. The term 'residuals' means information in non-tangible form which may be retained in the unaided memory of persons who have had access to Confidential Information."`,
    riskLevel: 4,
    riskLabel: "HIGH RISK",
    riskColor: "#ef4444",
    riskPosition: 80,
    meaning: "This is a 'residuals clause.' It means the other party can retain and use any general concepts, ideas, techniques, or know-how that they learn from your confidential information - even after the NDA ends. They don't need to pay you, credit you, or get permission.",
    favorBadge: "danger",
    favorText: "Heavily Favors Receiving Party",
    favorExplanation: "The receiving party (them) gets to keep the 'residue' of what they learned. This is especially dangerous if you're sharing trade secrets, proprietary processes, or unique business strategies.",
    problems: [
      { title: "Memory Loophole", desc: "Once someone reads your trade secret, the knowledge is in their head. This clause legitimizes using that retained knowledge." },
      { title: "Proof Impossible", desc: "How do you prove someone 'independently developed' something vs. used your ideas? You can't peek inside their brain." },
      { title: "Competitive Risk", desc: "They can use your concepts to compete against you or help your competitors." }
    ],
    fallbackClause: `"Notwithstanding the foregoing, Receiving Party shall not acquire any rights under this Agreement to any trade secrets, proprietary source code, or patentable inventions of the Disclosing Party, and the residuals exception shall not apply to such information."`,
    fallbackNote: "This carves out your most valuable IP from the residuals exception.",
    counterClause: `"Receiving Party acknowledges that no residual rights are granted under this Agreement. All Confidential Information, including any concepts, ideas, techniques, or know-how derived therefrom, shall remain the exclusive property of the Disclosing Party."`,
    counterNote: "This completely removes the residuals exception.",
    emailSubject: "NDA Redlines - Section [X] (Residuals)",
    emailBody: `<p>Hi [Name],</p>
<p>Thank you for sending over the NDA. We're generally aligned and ready to move forward, but I'd like to propose one revision to Section [X] regarding residual information rights.</p>
<p><strong>Our concern:</strong> The current residuals clause would allow broad use of concepts and know-how derived from our confidential information. Given the nature of what we'll be sharing (including proprietary processes and trade secrets), we need to ensure these remain protected.</p>
<p><strong>Our proposal:</strong> We'd like to either (1) remove the residuals clause entirely, or (2) add a carve-out for trade secrets and proprietary source code. Proposed language:</p>
<p style="background: #f0fdf4; padding: 12px; border-radius: 6px; border-left: 3px solid #10b981; font-style: italic;">"Notwithstanding the foregoing, Receiving Party shall not acquire any rights under this Agreement to any trade secrets, proprietary source code, or patentable inventions of the Disclosing Party."</p>
<p>This is a standard carve-out that protects the most sensitive categories while still allowing the residuals concept to apply to general business knowledge.</p>
<p>Happy to discuss if you have questions. Otherwise, let me know if this works and we can proceed to signature.</p>
<p>Best regards,<br>[Your Name]</p>`
  },

  marking: {
    type: "Marking Requirements",
    sampleText: `"Confidential Information shall mean only such information that is (i) disclosed in writing or other tangible form and clearly marked 'CONFIDENTIAL' at the time of disclosure, or (ii) if disclosed orally, identified as confidential at the time of disclosure and summarized in writing within thirty (30) days thereafter."`,
    riskLevel: 4,
    riskLabel: "HIGH RISK",
    riskColor: "#ef4444",
    riskPosition: 75,
    meaning: "This clause requires you to physically mark every piece of confidential information as 'CONFIDENTIAL' for it to be protected. If you forget to stamp a document or don't send a written summary after every conversation, that information loses all protection.",
    favorBadge: "danger",
    favorText: "Heavily Favors Receiving Party",
    favorExplanation: "The receiving party benefits because any oversight in marking gives them a defense: 'It wasn't marked confidential, so I could share it.'",
    problems: [
      { title: "Operational Nightmare", desc: "In fast-moving discussions, nobody sends follow-up memos summarizing every confidential point mentioned verbally." },
      { title: "Human Error Trap", desc: "One unmarked email attachment and your trade secret has no protection." },
      { title: "Bad Faith Defense", desc: "Creates an easy escape hatch for the receiving party to claim they didn't know something was confidential." }
    ],
    fallbackClause: `"Confidential Information shall mean all non-public information disclosed by either party, whether or not marked as confidential, that a reasonable person would understand to be confidential given the nature of the information and circumstances of disclosure."`,
    fallbackNote: "Uses the 'reasonable person' standard instead of strict marking.",
    counterClause: `"The failure to mark any information as 'Confidential' shall not affect its status as Confidential Information under this Agreement if such information would reasonably be considered confidential based on its nature or the context of its disclosure."`,
    counterNote: "Explicitly preserves protection for unmarked confidential information.",
    emailSubject: "NDA Redlines - Marking Requirements",
    emailBody: `<p>Hi [Name],</p>
<p>Thank you for the draft NDA. I have one concern regarding the marking requirements in Section [X].</p>
<p><strong>Our concern:</strong> The current language requires all confidential information to be marked at the time of disclosure. In practice, this creates operational challenges - especially for verbal discussions, quick emails, or shared documents where adding labels isn't practical.</p>
<p><strong>Our proposal:</strong> We'd like to adopt a "reasonable person" standard that protects information based on its nature, not just its labeling. Proposed language:</p>
<p style="background: #f0fdf4; padding: 12px; border-radius: 6px; border-left: 3px solid #10b981; font-style: italic;">"Confidential Information shall mean all non-public information disclosed by either party, whether or not marked as confidential, that a reasonable person would understand to be confidential given the nature of the information and circumstances of disclosure."</p>
<p>This approach is standard in most modern NDAs and protects both parties from inadvertent disclosure due to marking oversights.</p>
<p>Let me know if this works for you.</p>
<p>Best regards,<br>[Your Name]</p>`
  },

  perpetual: {
    type: "Perpetual Term",
    sampleText: `"The obligations of confidentiality set forth herein shall survive any termination or expiration of this Agreement and shall continue in perpetuity with respect to all Confidential Information disclosed hereunder."`,
    riskLevel: 5,
    riskLabel: "VERY HIGH RISK",
    riskColor: "#dc2626",
    riskPosition: 95,
    meaning: "This clause requires you to keep their information confidential forever - literally for the rest of your life and potentially binding your heirs. There's no end date, no natural expiration, no relief.",
    favorBadge: "danger",
    favorText: "Extremely One-Sided",
    favorExplanation: "While confidentiality obligations should survive the agreement, 'perpetual' creates indefinite liability with no practical way to ever be free of the obligation.",
    problems: [
      { title: "Indefinite Liability", desc: "You're on the hook forever. Information that becomes publicly known or obsolete is still technically covered." },
      { title: "Impossible Compliance", desc: "How do you ensure compliance 30 years from now? Staff turnover, business changes, memory fades." },
      { title: "Successor Problems", desc: "If you sell your business or pass away, this obligation may transfer and become a nightmare for successors." },
      { title: "Asymmetric Risk", desc: "If only one side is disclosing sensitive info, the other party takes on perpetual risk for a one-time interaction." }
    ],
    fallbackClause: `"The obligations of confidentiality set forth herein shall survive termination of this Agreement for a period of five (5) years from the date of disclosure; provided, however, that with respect to trade secrets, such obligations shall continue for so long as such information qualifies as a trade secret under applicable law."`,
    fallbackNote: "Standard 5-year term with trade secret carve-out for truly sensitive info.",
    counterClause: `"The obligations of confidentiality set forth herein shall survive termination of this Agreement for a period of three (3) years from the date of disclosure of the applicable Confidential Information."`,
    counterNote: "Clean 3-year limit, appropriate for most business discussions.",
    emailSubject: "NDA Redlines - Confidentiality Term",
    emailBody: `<p>Hi [Name],</p>
<p>I've reviewed the NDA and have one significant concern about Section [X] regarding the duration of confidentiality obligations.</p>
<p><strong>Our concern:</strong> The current language imposes perpetual confidentiality obligations. While we take confidentiality seriously, indefinite obligations create practical and legal concerns for any business.</p>
<p><strong>Our proposal:</strong> We propose a standard 5-year term with a trade secret carve-out:</p>
<p style="background: #f0fdf4; padding: 12px; border-radius: 6px; border-left: 3px solid #10b981; font-style: italic;">"The obligations of confidentiality set forth herein shall survive termination of this Agreement for a period of five (5) years from the date of disclosure; provided, however, that with respect to trade secrets, such obligations shall continue for so long as such information qualifies as a trade secret under applicable law."</p>
<p>This is the market-standard approach that balances meaningful protection with practical business reality. The trade secret carve-out ensures your most sensitive information remains protected for as long as it maintains trade secret status.</p>
<p>Please let me know if this approach works for you.</p>
<p>Best regards,<br>[Your Name]</p>`
  },

  "one-way-indemnity": {
    type: "One-Way Indemnification",
    sampleText: `"The Receiving Party shall indemnify, defend, and hold harmless the Disclosing Party and its officers, directors, employees, agents, and affiliates from and against any and all claims, damages, losses, costs, and expenses (including reasonable attorneys' fees) arising out of or relating to any breach of this Agreement by the Receiving Party."`,
    riskLevel: 4,
    riskLabel: "HIGH RISK",
    riskColor: "#ef4444",
    riskPosition: 80,
    meaning: "This indemnification clause only protects one party. You're required to pay for their legal fees and damages if you breach, but they have no corresponding obligation to you if they breach.",
    favorBadge: "danger",
    favorText: "Heavily Favors Disclosing Party",
    favorExplanation: "If they breach and share YOUR confidential information, you have no indemnification protection. You'd have to sue them for damages the hard way.",
    problems: [
      { title: "No Reciprocity", desc: "You indemnify them, but they don't indemnify you. This is fundamentally unfair in a mutual NDA." },
      { title: "Unlimited Exposure", desc: "Without caps, you could be on the hook for massive legal fees even for minor breaches." },
      { title: "Third-Party Claims", desc: "You may have to defend claims brought by their customers or partners, even if the underlying breach was minor." }
    ],
    fallbackClause: `"Each party shall indemnify, defend, and hold harmless the other party from and against any claims, damages, losses, costs, and expenses (including reasonable attorneys' fees) arising out of or relating to any breach of this Agreement by the indemnifying party, provided that such indemnification obligation shall be limited to direct damages and shall not exceed the greater of $50,000 or the value of the transaction contemplated by this Agreement."`,
    fallbackNote: "Makes indemnification mutual with a reasonable cap.",
    counterClause: `"Neither party shall have any obligation to indemnify the other under this Agreement. Each party's sole remedy for breach shall be direct damages, which shall not exceed $50,000 in the aggregate."`,
    counterNote: "Removes indemnification entirely and caps damages.",
    emailSubject: "NDA Redlines - Indemnification Section",
    emailBody: `<p>Hi [Name],</p>
<p>I've reviewed the NDA and need to flag Section [X] regarding indemnification.</p>
<p><strong>Our concern:</strong> The current language creates a one-way indemnification obligation. We'd be required to indemnify you for any breach, but receive no corresponding protection. This isn't balanced for a mutual NDA.</p>
<p><strong>Our proposal:</strong> We propose making the indemnification mutual with a reasonable cap:</p>
<p style="background: #f0fdf4; padding: 12px; border-radius: 6px; border-left: 3px solid #10b981; font-style: italic;">"Each party shall indemnify the other party from claims arising out of breach of this Agreement, provided that such indemnification shall be limited to direct damages and shall not exceed $50,000."</p>
<p>Alternatively, we're open to removing indemnification language entirely, which is common in standard NDAs where direct damages provide adequate remedy.</p>
<p>Let me know your thoughts.</p>
<p>Best regards,<br>[Your Name]</p>`
  },

  "broad-definition": {
    type: "Overly Broad Confidential Information Definition",
    sampleText: `"'Confidential Information' means any and all information, data, materials, documents, specifications, techniques, models, apparatus, sketches, designs, schedules, product plans, marketing plans, technical procedures, manufacturing processes, analyses, compilations, studies, software, prototypes, samples, ideas, concepts, know-how, and any other information disclosed by the Disclosing Party, whether in written, oral, electronic, visual, or any other form, and whether or not marked as confidential."`,
    riskLevel: 3,
    riskLabel: "MEDIUM RISK",
    riskColor: "#f59e0b",
    riskPosition: 60,
    meaning: "This definition is so broad that virtually everything the other party tells you could be considered 'Confidential Information.' This creates enormous liability and compliance burden for everyday business communications.",
    favorBadge: "warning",
    favorText: "Favors Disclosing Party",
    favorExplanation: "The disclosing party gets maximum protection because literally anything they share is automatically confidential, regardless of whether it's actually sensitive.",
    problems: [
      { title: "Everything is Confidential", desc: "Casual emails, offhand comments, and public information could all be swept into 'Confidential Information.'" },
      { title: "Compliance Nightmare", desc: "How do you train employees on what's confidential when the answer is 'everything'?" },
      { title: "Chilling Effect", desc: "Fear of breaching such a broad NDA can prevent normal business operations and communications." }
    ],
    fallbackClause: `"'Confidential Information' means non-public information that (a) the Disclosing Party designates as confidential, or (b) that a reasonable person would understand to be confidential based on its nature and the circumstances of disclosure, but does not include information that is publicly available, independently developed, or received from a third party without restriction."`,
    fallbackNote: "Limits scope to genuinely confidential information with standard exclusions.",
    counterClause: `"'Confidential Information' means specifically identified trade secrets, proprietary technical data, and business plans that the Disclosing Party expressly designates in writing as 'Confidential' at the time of disclosure."`,
    counterNote: "Narrow definition requiring express designation of specific categories.",
    emailSubject: "NDA Redlines - Definition of Confidential Information",
    emailBody: `<p>Hi [Name],</p>
<p>Thanks for the draft NDA. I'd like to discuss Section [X] defining Confidential Information.</p>
<p><strong>Our concern:</strong> The current definition is extremely broad and would capture virtually all communications between our companies, including routine business correspondence. This creates compliance challenges and potential liability for everyday interactions.</p>
<p><strong>Our proposal:</strong> We suggest limiting the definition to genuinely sensitive information:</p>
<p style="background: #f0fdf4; padding: 12px; border-radius: 6px; border-left: 3px solid #10b981; font-style: italic;">"'Confidential Information' means non-public information that the Disclosing Party designates as confidential, or that a reasonable person would understand to be confidential based on its nature, but does not include information that is publicly available, independently developed, or received from a third party."</p>
<p>This approach protects your genuinely sensitive information while allowing normal business communication.</p>
<p>Let me know if this works.</p>
<p>Best regards,<br>[Your Name]</p>`
  },

  "non-compete-disguised": {
    type: "Non-Compete Disguised as NDA",
    sampleText: `"During the term of this Agreement and for a period of two (2) years thereafter, the Receiving Party agrees not to directly or indirectly engage in any business that competes with the Disclosing Party, nor shall the Receiving Party solicit, hire, or engage any employees, contractors, customers, or suppliers of the Disclosing Party."`,
    riskLevel: 5,
    riskLabel: "VERY HIGH RISK",
    riskColor: "#dc2626",
    riskPosition: 95,
    meaning: "This isn't an NDA clause - it's a full non-compete and non-solicitation agreement disguised within an NDA. It would prevent you from working in your industry or hiring common talent pools for years.",
    favorBadge: "danger",
    favorText: "Extremely One-Sided",
    favorExplanation: "This gives them massive competitive protection that has nothing to do with protecting confidential information. Many states (including California) would find this unenforceable, but you'd still face legal costs to challenge it.",
    problems: [
      { title: "Not an NDA Issue", desc: "Non-competes belong in separate agreements with separate consideration, not buried in NDAs." },
      { title: "Career Restriction", desc: "Could prevent you from working in your own industry for 2+ years." },
      { title: "Hiring Restrictions", desc: "Non-solicitation of employees can prevent you from hiring qualified candidates who happen to work there." },
      { title: "Potentially Unenforceable", desc: "In California and many other states, non-competes are void. But you'd still have to litigate it." }
    ],
    fallbackClause: `"Nothing in this Agreement shall be construed as granting any non-compete or non-solicitation rights. The Receiving Party's sole obligation is to maintain the confidentiality of Confidential Information as set forth herein."`,
    fallbackNote: "Explicitly removes non-compete/non-solicit language and clarifies NDA scope.",
    counterClause: `"DELETE THIS SECTION ENTIRELY. Non-competition and non-solicitation provisions are beyond the scope of a confidentiality agreement and must be negotiated separately."`,
    counterNote: "This clause should be deleted. It has no place in an NDA.",
    emailSubject: "NDA Redlines - URGENT: Non-Compete Language",
    emailBody: `<p>Hi [Name],</p>
<p>I've reviewed the NDA and need to flag a serious concern with Section [X].</p>
<p><strong>Our concern:</strong> This section contains non-compete and non-solicitation provisions that are unrelated to confidentiality. These restrictions would prevent us from operating in our industry and hiring qualified candidates for two years - far beyond the scope of a typical NDA.</p>
<p><strong>Our position:</strong> We cannot accept non-compete or non-solicitation language in a confidentiality agreement. These provisions:</p>
<ul style="margin: 12px 0 12px 24px;">
<li>Are beyond the scope of an NDA</li>
<li>Require separate consideration and negotiation</li>
<li>May be unenforceable in several jurisdictions (including California)</li>
</ul>
<p><strong>Our proposal:</strong> Please remove Section [X] in its entirety. If you require non-compete protections, that should be a separate discussion with separate agreements.</p>
<p>We're ready to sign an NDA that focuses on its actual purpose: protecting confidential information. Please confirm you'll remove this section.</p>
<p>Best regards,<br>[Your Name]</p>`
  },

  "injunctive-no-bond": {
    type: "Injunctive Relief Without Bond",
    sampleText: `"The Receiving Party agrees that any breach of this Agreement would cause irreparable harm to the Disclosing Party for which monetary damages would be inadequate. Accordingly, the Disclosing Party shall be entitled to seek injunctive relief, specific performance, or other equitable remedies without the necessity of proving actual damages or posting any bond or security."`,
    riskLevel: 3,
    riskLabel: "MEDIUM RISK",
    riskColor: "#f59e0b",
    riskPosition: 55,
    meaning: "This clause waives the normal requirement for the other party to post a bond when seeking emergency injunctive relief. It also pre-concedes that any breach causes 'irreparable harm,' making it easier for them to get emergency court orders against you.",
    favorBadge: "warning",
    favorText: "Favors Disclosing Party",
    favorExplanation: "The disclosing party gets fast-tracked to court injunctions without having to post security or prove actual damages. This shifts litigation risk to you.",
    problems: [
      { title: "No Bond Protection", desc: "Normally, someone seeking an emergency injunction must post a bond to cover your damages if they're wrong. This waives that protection." },
      { title: "Pre-Conceded Harm", desc: "You're admitting in advance that any breach causes 'irreparable harm,' making it easier for them to get emergency orders." },
      { title: "Fast-Track to Court", desc: "Removes procedural protections that normally give you time to respond." }
    ],
    fallbackClause: `"Either party may seek injunctive relief for breach of this Agreement. Nothing herein shall waive either party's right to require posting of a bond as required by applicable law or court rules."`,
    fallbackNote: "Makes injunctive relief mutual and preserves bond requirements.",
    counterClause: `"Either party acknowledges that breach may cause harm for which monetary damages may be inadequate, and that injunctive relief may be appropriate. Any request for injunctive relief shall be subject to the normal requirements of applicable law, including posting of security where required."`,
    counterNote: "Removes the bond waiver while acknowledging injunctive relief may be available.",
    emailSubject: "NDA Redlines - Injunctive Relief Section",
    emailBody: `<p>Hi [Name],</p>
<p>I'm reviewing Section [X] regarding injunctive relief and have a proposed revision.</p>
<p><strong>Our concern:</strong> The current language waives the bond requirement for injunctive relief and pre-concedes irreparable harm. While we understand that injunctive relief may be appropriate in some breach situations, these waivers remove important procedural protections.</p>
<p><strong>Our proposal:</strong> We suggest mutual language that preserves standard legal requirements:</p>
<p style="background: #f0fdf4; padding: 12px; border-radius: 6px; border-left: 3px solid #10b981; font-style: italic;">"Either party acknowledges that breach may cause harm for which monetary damages may be inadequate, and that injunctive relief may be appropriate. Any request for injunctive relief shall be subject to the requirements of applicable law, including posting of security where required."</p>
<p>This still allows either party to seek injunctive relief while maintaining normal procedural safeguards.</p>
<p>Please let me know if this works.</p>
<p>Best regards,<br>[Your Name]</p>`
  },

  "vague-purpose": {
    type: "Vague Purpose Clause",
    sampleText: `"The Receiving Party agrees to use the Confidential Information solely for purposes related to the business relationship between the parties."`,
    riskLevel: 3,
    riskLabel: "MEDIUM RISK",
    riskColor: "#f59e0b",
    riskPosition: 50,
    meaning: "This purpose limitation is so vague that it's essentially meaningless. 'Purposes related to the business relationship' could be interpreted to include almost any use, defeating the purpose of limiting what they can do with your information.",
    favorBadge: "warning",
    favorText: "Slightly Favors Receiving Party",
    favorExplanation: "Vague purpose clauses give the receiving party wiggle room to use your information for purposes you didn't intend.",
    problems: [
      { title: "Undefined Scope", desc: "What is 'the business relationship'? This could expand to include anything they decide is related." },
      { title: "No Enforcement Teeth", desc: "Hard to prove breach when the permitted purpose is so loosely defined." },
      { title: "Future Uses", desc: "As the relationship evolves, so does the permitted purpose - beyond what you originally contemplated." }
    ],
    fallbackClause: `"The Receiving Party agrees to use the Confidential Information solely for the purpose of evaluating a potential [partnership/transaction/engagement] between the parties as specifically described in writing by the parties (the 'Permitted Purpose'), and for no other purpose."`,
    fallbackNote: "Ties the purpose to a specific, documented objective.",
    counterClause: `"The Receiving Party agrees to use the Confidential Information solely for the purpose of [SPECIFIC PURPOSE - e.g., 'evaluating a potential software licensing arrangement for the Disclosing Party's XYZ product'], and for no other purpose without the prior written consent of the Disclosing Party."`,
    counterNote: "Fill in the specific purpose of your discussions.",
    emailSubject: "NDA Redlines - Purpose Clause Clarification",
    emailBody: `<p>Hi [Name],</p>
<p>I'd like to clarify Section [X] regarding the permitted purpose for using Confidential Information.</p>
<p><strong>Our concern:</strong> The current language ("purposes related to the business relationship") is quite broad. We'd prefer to clearly define the permitted purpose to avoid any ambiguity.</p>
<p><strong>Our proposal:</strong> Let's specify the actual purpose of our discussions:</p>
<p style="background: #f0fdf4; padding: 12px; border-radius: 6px; border-left: 3px solid #10b981; font-style: italic;">"The Receiving Party agrees to use the Confidential Information solely for the purpose of [evaluating a potential partnership between the parties regarding XYZ], and for no other purpose."</p>
<p>This protects both parties by making expectations clear from the start. Can you confirm the specific purpose language that accurately describes our planned discussions?</p>
<p>Best regards,<br>[Your Name]</p>`
  },

  "unlimited-disclosure": {
    type: "Unlimited Third-Party Disclosure",
    sampleText: `"The Receiving Party may disclose Confidential Information to its affiliates, subsidiaries, partners, contractors, advisors, and any other third parties who have a need to know such information for purposes of this Agreement."`,
    riskLevel: 4,
    riskLabel: "HIGH RISK",
    riskColor: "#ef4444",
    riskPosition: 75,
    meaning: "This clause allows the receiving party to share your confidential information with an unlimited number of third parties as long as they claim there's a 'need to know.' There's no requirement for those third parties to sign NDAs or be bound by confidentiality.",
    favorBadge: "danger",
    favorText: "Heavily Favors Receiving Party",
    favorExplanation: "Your information could flow to competitors, to their contractors who work with competitors, or to parties you'd never approve - all without your knowledge or consent.",
    problems: [
      { title: "No Third-Party Binding", desc: "Third parties receiving your information aren't required to sign NDAs or be bound by confidentiality." },
      { title: "Unlimited Scope", desc: "'Any other third parties' is completely open-ended. Competitors? Foreign entities? Anyone." },
      { title: "No Notice or Consent", desc: "They don't have to tell you who they're sharing with or get your approval." },
      { title: "Loss of Control", desc: "Once shared with multiple third parties, your information becomes nearly impossible to protect." }
    ],
    fallbackClause: `"The Receiving Party may disclose Confidential Information only to its employees and professional advisors who (a) have a need to know for the Permitted Purpose, (b) are bound by confidentiality obligations at least as protective as this Agreement, and (c) are identified to the Disclosing Party upon request. Receiving Party remains responsible for any breach by such recipients."`,
    fallbackNote: "Limits recipients and requires them to be bound by confidentiality.",
    counterClause: `"The Receiving Party shall not disclose Confidential Information to any third party without the prior written consent of the Disclosing Party. Disclosure to Receiving Party's employees shall be limited to those with a need to know who are bound by written confidentiality agreements."`,
    counterNote: "Requires consent for any third-party disclosure.",
    emailSubject: "NDA Redlines - Third-Party Disclosure",
    emailBody: `<p>Hi [Name],</p>
<p>I need to raise a concern about Section [X] regarding disclosure to third parties.</p>
<p><strong>Our concern:</strong> The current language permits disclosure to unlimited third parties without requiring them to be bound by confidentiality or requiring our consent. This creates significant risk that our information could spread beyond our control.</p>
<p><strong>Our proposal:</strong> We need to limit third-party disclosure to specific categories with appropriate safeguards:</p>
<p style="background: #f0fdf4; padding: 12px; border-radius: 6px; border-left: 3px solid #10b981; font-style: italic;">"The Receiving Party may disclose Confidential Information only to its employees and professional advisors who (a) have a need to know, (b) are bound by written confidentiality obligations, and (c) are identified upon request. Disclosure to any other third party requires our prior written consent."</p>
<p>This is a standard provision that protects both parties' information while allowing necessary business operations.</p>
<p>Let me know if you have questions.</p>
<p>Best regards,<br>[Your Name]</p>`
  },

  "unilateral-modification": {
    type: "Unilateral Modification Rights",
    sampleText: `"The Disclosing Party reserves the right to modify, amend, or update the terms of this Agreement at any time by providing written notice to the Receiving Party. Continued receipt or use of Confidential Information after such notice shall constitute acceptance of the modified terms."`,
    riskLevel: 4,
    riskLabel: "HIGH RISK",
    riskColor: "#ef4444",
    riskPosition: 80,
    meaning: "This clause allows the other party to change the NDA terms at any time without your agreement. You'd be bound by new terms simply by continuing to use information you already received.",
    favorBadge: "danger",
    favorText: "Heavily Favors Disclosing Party",
    favorExplanation: "They can make the NDA more restrictive, extend the term, or add new obligations after you've already disclosed sensitive information - and you'd have no recourse except to stop the relationship.",
    problems: [
      { title: "No Mutual Agreement", desc: "Contracts should require both parties to agree to changes. This is one-sided modification power." },
      { title: "Retroactive Changes", desc: "They could change terms that apply to information you've already shared." },
      { title: "Trap Door", desc: "You might be locked in - you can't 'un-receive' information you've already been given." },
      { title: "Unconscionable", desc: "This type of clause may not be enforceable, but you'd still have to litigate it." }
    ],
    fallbackClause: `"This Agreement may not be modified or amended except by a written instrument signed by both parties."`,
    fallbackNote: "Standard language requiring mutual written consent for changes.",
    counterClause: `"No modification, amendment, or waiver of any provision of this Agreement shall be effective unless in writing and signed by authorized representatives of both parties. Course of dealing shall not constitute modification."`,
    counterNote: "Explicitly requires signatures from both parties for any changes.",
    emailSubject: "NDA Redlines - URGENT: Modification Clause",
    emailBody: `<p>Hi [Name],</p>
<p>I need to flag a significant issue with Section [X] regarding modifications to this Agreement.</p>
<p><strong>Our concern:</strong> The current language allows unilateral modification of the NDA terms with only notice required. This is non-standard and creates unacceptable risk - we could find ourselves bound by materially different terms without having agreed to them.</p>
<p><strong>Our position:</strong> We require mutual consent for any modifications. This is standard contract practice.</p>
<p><strong>Our proposal:</strong> Replace the modification clause with:</p>
<p style="background: #f0fdf4; padding: 12px; border-radius: 6px; border-left: 3px solid #10b981; font-style: italic;">"This Agreement may not be modified or amended except by a written instrument signed by authorized representatives of both parties."</p>
<p>This is the standard language used in virtually all commercial agreements. Please confirm this revision is acceptable.</p>
<p>Best regards,<br>[Your Name]</p>`
  }
};

// Current analysis state
let currentAnalysis = null;

// Set input mode
function setInputMode(mode) {
  const pasteToggle = document.getElementById('paste-toggle');
  const selectToggle = document.getElementById('select-toggle');
  const pasteInput = document.getElementById('paste-input');
  const selectInput = document.getElementById('select-input');

  if (mode === 'paste') {
    pasteToggle.classList.add('active');
    selectToggle.classList.remove('active');
    pasteInput.classList.remove('hidden');
    selectInput.classList.remove('active');
  } else {
    selectToggle.classList.add('active');
    pasteToggle.classList.remove('active');
    pasteInput.classList.add('hidden');
    selectInput.classList.add('active');
  }
}

// Load preset clause
function loadPresetClause() {
  const dropdown = document.getElementById('clause-dropdown');
  const clauseId = dropdown.value;

  if (clauseId && clauseDatabase[clauseId]) {
    const clause = clauseDatabase[clauseId];
    document.getElementById('clause-text').value = clause.sampleText;
  }
}

// Analyze clause
function analyzeClause() {
  const dropdown = document.getElementById('clause-dropdown');
  const textarea = document.getElementById('clause-text');
  const pasteInput = document.getElementById('paste-input');

  let clauseId = null;
  let clauseText = '';

  // Check if using dropdown or paste
  if (pasteInput.classList.contains('hidden')) {
    // Using dropdown
    clauseId = dropdown.value;
    if (!clauseId) {
      alert('Please select a clause type from the dropdown.');
      return;
    }
  } else {
    // Using paste
    clauseText = textarea.value.trim();
    if (!clauseText) {
      alert('Please paste a clause to analyze.');
      return;
    }
    // Try to identify the clause type
    clauseId = identifyClauseType(clauseText);
  }

  if (!clauseId || !clauseDatabase[clauseId]) {
    // Use residuals as default for custom text
    clauseId = 'residuals';
  }

  currentAnalysis = clauseDatabase[clauseId];
  displayResults(currentAnalysis);
}

// Identify clause type from text
function identifyClauseType(text) {
  const lowerText = text.toLowerCase();

  if (lowerText.includes('residual') || lowerText.includes('unaided memory')) {
    return 'residuals';
  }
  if (lowerText.includes('marked') && lowerText.includes('confidential')) {
    return 'marking';
  }
  if (lowerText.includes('perpetuit') || (lowerText.includes('survive') && lowerText.includes('forever'))) {
    return 'perpetual';
  }
  if (lowerText.includes('indemnif')) {
    return 'one-way-indemnity';
  }
  if (lowerText.includes('compete') || lowerText.includes('solicit')) {
    return 'non-compete-disguised';
  }
  if (lowerText.includes('injunctive') && lowerText.includes('bond')) {
    return 'injunctive-no-bond';
  }
  if (lowerText.includes('affiliates') || lowerText.includes('third parties')) {
    return 'unlimited-disclosure';
  }
  if (lowerText.includes('modif') && lowerText.includes('notice')) {
    return 'unilateral-modification';
  }
  if (lowerText.includes('business relationship') && lowerText.includes('purpose')) {
    return 'vague-purpose';
  }
  if (lowerText.includes('confidential information') && lowerText.includes('means')) {
    return 'broad-definition';
  }

  // Default
  return 'residuals';
}

// Display results
function displayResults(analysis) {
  const resultsSection = document.getElementById('results-section');

  // Update clause type badge
  document.getElementById('clause-type-badge').textContent = analysis.type;

  // Update risk gauge
  const riskFill = document.getElementById('risk-fill');
  const circumference = 2 * Math.PI * 60; // 377
  const offset = circumference - (circumference * analysis.riskLevel / 5);
  riskFill.style.strokeDashoffset = offset;
  riskFill.style.stroke = analysis.riskColor;

  // Update risk value and label
  document.getElementById('risk-value').textContent = analysis.riskLevel;
  const riskLabel = document.getElementById('risk-label');
  riskLabel.textContent = analysis.riskLabel;
  riskLabel.style.color = analysis.riskColor;

  // Update risk indicator position
  document.getElementById('risk-indicator').style.left = analysis.riskPosition + '%';

  // Update risk summary
  document.getElementById('risk-summary').innerHTML = `<strong>${analysis.favorText}.</strong> ${analysis.meaning.split('.')[0]}.`;

  // Show/hide attorney CTA based on risk level
  const attorneyCta = document.getElementById('attorney-cta');
  if (analysis.riskLevel >= 4) {
    attorneyCta.style.display = 'block';
  } else {
    attorneyCta.style.display = 'none';
  }

  // Update meaning
  document.getElementById('meaning-text').textContent = analysis.meaning;

  // Update favor content
  const favorContent = document.getElementById('favor-content');
  favorContent.innerHTML = `
    <span class="alert-badge ${analysis.favorBadge}">${analysis.favorText}</span>
    <p style="margin-top: 12px;">${analysis.favorExplanation}</p>
  `;

  // Update problems list
  const problemsList = document.getElementById('problems-list');
  problemsList.innerHTML = analysis.problems.map(p => `
    <li>
      <span class="icon">&#10060;</span>
      <span class="text"><strong>${p.title}:</strong> ${p.desc}</span>
    </li>
  `).join('');

  // Update fallback clause
  const fallbackClause = document.getElementById('fallback-clause');
  fallbackClause.innerHTML = `
    <button class="copy-btn" onclick="copyText('fallback-clause', this)">
      <span>&#128203;</span> Copy
    </button>
    ${analysis.fallbackClause}
  `;
  fallbackClause.nextElementSibling.textContent = analysis.fallbackNote;

  // Update counter clause
  const counterClause = document.getElementById('counter-clause');
  counterClause.innerHTML = `
    <button class="copy-btn" onclick="copyText('counter-clause', this)">
      <span>&#128203;</span> Copy
    </button>
    ${analysis.counterClause}
  `;
  counterClause.nextElementSibling.textContent = analysis.counterNote;

  // Update email
  document.querySelector('.email-field .value:last-child').textContent = analysis.emailSubject.replace('NDA Redlines - ', 'NDA Redlines - Section [X] - ');
  document.getElementById('email-body').innerHTML = `
    <button class="copy-btn" onclick="copyEmailBody(this)">
      <span>&#128203;</span> Copy Email
    </button>
    ${analysis.emailBody}
  `;

  // Show results
  resultsSection.classList.add('active');

  // Scroll to results
  resultsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

// Copy text helper
function copyText(elementId, button) {
  const element = document.getElementById(elementId);
  const text = element.textContent.replace('Copy', '').trim();

  navigator.clipboard.writeText(text).then(() => {
    button.classList.add('copied');
    button.innerHTML = '<span>&#10003;</span> Copied!';

    setTimeout(() => {
      button.classList.remove('copied');
      button.innerHTML = '<span>&#128203;</span> Copy';
    }, 2000);
  });
}

// Copy email body
function copyEmailBody(button) {
  const emailBody = document.getElementById('email-body');
  // Get text content, preserving some formatting
  let text = emailBody.innerText.replace('Copy Email', '').trim();

  navigator.clipboard.writeText(text).then(() => {
    if (button) {
      button.classList.add('copied');
      button.innerHTML = '<span>&#10003;</span> Copied!';

      setTimeout(() => {
        button.classList.remove('copied');
        button.innerHTML = '<span>&#128203;</span> Copy Email';
      }, 2000);
    }

    // Also update the main button if it was clicked
    const mainBtn = document.querySelector('.generate-email-btn');
    mainBtn.innerHTML = '<span>&#10003;</span> Email Copied to Clipboard!';
    setTimeout(() => {
      mainBtn.innerHTML = '<span>&#128233;</span> Copy Email to Clipboard';
    }, 2000);
  });
}
</script>

<!-- Chat Widget -->
<script src="/chat-widget/chat-widget.js"></script>

</body>
</html>
