<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-901N2Y3CDZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-901N2Y3CDZ');
  </script>

  <title>NDA Risk Analyzer - Professional Legal Review Tool | Terms.Law</title>
  <meta name="description" content="Professional NDA risk analysis tool by CA attorney Sergei Tokmakov. Get instant risk assessment, fairness analysis, and clause-by-clause breakdown for your non-disclosure agreements.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Calendly integration -->
  <link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
  <script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>

  <style>
    :root {
      --primary: #2563eb;
      --primary-dark: #1d4ed8;
      --accent: #8b5cf6;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --dark: #0f172a;
      --dark-lighter: #1e293b;
      --gray-50: #f8fafc;
      --gray-100: #f1f5f9;
      --gray-200: #e2e8f0;
      --gray-300: #cbd5e1;
      --gray-400: #94a3b8;
      --gray-500: #64748b;
      --gray-600: #475569;
      --gray-700: #334155;
      --gray-800: #1e293b;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--gray-50);
      color: var(--gray-700);
      line-height: 1.6;
    }

    /* ========================================
       UNIFIED SITE-WIDE MEGA-HEADER
       ======================================== */
    .site-header {
        background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        position: sticky;
        top: 0;
        z-index: 1000;
        box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }

    .header-content {
        max-width: 1400px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        padding: 0 24px;
        height: 60px;
    }

    .site-logo {
        font-size: 1.15rem;
        font-weight: 800;
        text-decoration: none;
        background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-right: 32px;
    }

    .site-nav {
        display: flex;
        align-items: center;
        gap: 0;
        flex: 1;
    }

    .nav-item {
        position: relative;
    }

    .nav-link {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 18px 16px;
        color: #94a3b8;
        text-decoration: none;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.2s;
        border-bottom: 2px solid transparent;
    }

    .nav-link:hover {
        color: #fff;
        background: rgba(255,255,255,0.05);
    }

    .nav-link:hover,
    .nav-link.active {
        border-bottom-color: var(--primary);
    }

    .nav-link .arrow {
        font-size: 10px;
        transition: transform 0.2s;
    }

    .nav-item:hover .arrow {
        transform: rotate(180deg);
    }

    .nav-cta {
        margin-left: auto;
        background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
        color: #fff !important;
        padding: 10px 20px !important;
        border-radius: 8px;
        font-weight: 600 !important;
        border-bottom: none !important;
    }

    .nav-cta:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 15px rgba(37, 99, 235, 0.4);
    }

    /* Mega Menu */
    .mega-menu {
        position: absolute;
        top: 100%;
        left: 0;
        background: #fff;
        border-radius: 0 0 16px 16px;
        box-shadow: 0 20px 50px rgba(0,0,0,0.2);
        opacity: 0;
        visibility: hidden;
        transform: translateY(-10px);
        transition: all 0.2s ease;
        z-index: 100;
    }

    .nav-item:hover .mega-menu {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
    }

    .mega-menu.wide { min-width: 700px; }
    .mega-menu.medium { min-width: 520px; }

    .mega-menu-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 14px 20px;
        border-bottom: 1px solid var(--gray-200);
        background: var(--gray-50);
    }

    .mega-menu-title {
        font-size: 13px;
        font-weight: 700;
        color: var(--gray-700);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .mega-menu-viewall {
        font-size: 12px;
        color: var(--primary);
        text-decoration: none;
        font-weight: 600;
    }

    .mega-menu-grid {
        display: grid;
        gap: 0;
    }

    .mega-menu-grid.cols-3 { grid-template-columns: repeat(3, 1fr); }
    .mega-menu-grid.cols-2 { grid-template-columns: repeat(2, 1fr); }

    .mega-menu-section {
        padding: 16px 20px;
        border-right: 1px solid var(--gray-100);
        border-bottom: 1px solid var(--gray-100);
    }

    .mega-menu-section:nth-child(3n) {
        border-right: none;
    }

    .mega-menu-section.no-border {
        border-right: none;
    }

    .mega-menu-section-title {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 13px;
        font-weight: 700;
        color: var(--gray-800);
        margin-bottom: 10px;
    }

    .mega-menu-section-title .icon {
        font-size: 16px;
    }

    .mega-menu-links {
        list-style: none;
    }

    .mega-menu-links li {
        margin-bottom: 6px;
    }

    .mega-menu-links a {
        font-size: 12px;
        color: var(--gray-600);
        text-decoration: none;
        transition: color 0.15s;
        display: block;
    }

    .mega-menu-links a:hover {
        color: var(--primary);
    }

    .mega-menu-more {
        font-size: 11px;
        color: var(--gray-400);
        margin-top: 6px;
    }

    .mega-menu-footer {
        display: flex;
        gap: 10px;
        padding: 12px 20px;
        background: var(--gray-50);
        border-radius: 0 0 16px 16px;
        flex-wrap: wrap;
    }

    .mega-menu-footer a {
        font-size: 11px;
        color: var(--gray-500);
        text-decoration: none;
        padding: 4px 10px;
        background: #fff;
        border-radius: 20px;
        border: 1px solid var(--gray-200);
        transition: all 0.15s;
    }

    .mega-menu-footer a:hover {
        border-color: var(--primary);
        color: var(--primary);
    }

    /* Dropdown */
    .dropdown {
        position: absolute;
        top: 100%;
        left: 0;
        background: #fff;
        border-radius: 0 0 12px 12px;
        box-shadow: 0 20px 50px rgba(0,0,0,0.2);
        opacity: 0;
        visibility: hidden;
        transform: translateY(-10px);
        transition: all 0.2s ease;
        min-width: 220px;
        padding: 8px 0;
    }

    .nav-item:hover .dropdown {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
    }

    .dropdown a {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 18px;
        color: var(--gray-700);
        text-decoration: none;
        font-size: 13px;
        transition: background 0.15s;
    }

    .dropdown a:hover {
        background: var(--gray-50);
    }

    .dropdown .icon {
        font-size: 16px;
        width: 22px;
        text-align: center;
    }

    /* Hub Sub-Navigation */
    .hub-subnav {
      background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    .hub-subnav-content {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 48px;
    }
    .hub-subnav-title {
      color: #94a3b8;
      font-size: 0.9rem;
      font-weight: 600;
    }
    .hub-subnav-tabs {
      display: flex;
      gap: 8px;
    }
    .hub-tab {
      padding: 8px 16px;
      color: #94a3b8;
      text-decoration: none;
      font-size: 0.85rem;
      font-weight: 500;
      border-radius: 6px;
      transition: all 0.2s;
    }
    .hub-tab:hover {
      background: rgba(255,255,255,0.1);
      color: #fff;
    }
    .hub-tab.active {
      background: rgba(37, 99, 235, 0.3);
      color: #60a5fa;
    }

    /* Main Content Area */
    .main-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 3rem 2rem;
    }

    /* Page Header */
    .page-header {
      text-align: center;
      margin-bottom: 3rem;
    }

    .page-header h1 {
      font-size: 2.5rem;
      font-weight: 800;
      color: var(--dark);
      margin-bottom: 0.75rem;
    }

    .page-header h1 .gradient {
      background: linear-gradient(135deg, #2563eb, #7c3aed);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .page-header p {
      color: var(--gray-600);
      font-size: 1.1rem;
      max-width: 600px;
      margin: 0 auto;
    }

    /* Analyzer Container */
    .analyzer-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
    }

    @media (max-width: 900px) {
      .analyzer-container {
        grid-template-columns: 1fr;
      }
    }

    /* Input Panel */
    .input-panel {
      background: white;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      overflow: hidden;
    }

    .panel-header {
      background: var(--dark);
      padding: 1rem 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .panel-header h3 {
      color: white;
      font-size: 1rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .panel-body {
      padding: 1.5rem;
    }

    .nda-textarea {
      width: 100%;
      min-height: 400px;
      border: 2px solid var(--gray-200);
      border-radius: 12px;
      padding: 1rem;
      font-family: inherit;
      font-size: 0.9rem;
      line-height: 1.6;
      resize: vertical;
      transition: border-color 0.2s;
    }

    .nda-textarea:focus {
      outline: none;
      border-color: var(--primary);
    }

    .nda-textarea::placeholder {
      color: var(--gray-400);
    }

    .upload-section {
      margin-top: 1rem;
      padding: 1rem;
      border: 2px dashed var(--gray-200);
      border-radius: 12px;
      text-align: center;
      transition: all 0.2s;
      cursor: pointer;
    }

    .upload-section:hover {
      border-color: var(--primary);
      background: var(--gray-50);
    }

    .upload-section input[type="file"] {
      display: none;
    }

    .upload-icon {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .upload-text {
      font-size: 0.85rem;
      color: var(--gray-600);
    }

    .upload-text strong {
      color: var(--primary);
    }

    .analyze-btn {
      width: 100%;
      padding: 1rem;
      margin-top: 1rem;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .analyze-btn:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(37, 99, 235, 0.3);
    }

    .analyze-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    /* Results Panel */
    .results-panel {
      background: white;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      overflow: hidden;
    }

    .results-placeholder {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 400px;
      color: var(--gray-400);
      padding: 2rem;
      text-align: center;
    }

    .results-placeholder .icon {
      font-size: 4rem;
      margin-bottom: 1rem;
      opacity: 0.5;
    }

    /* Score Overview */
    .score-overview {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      padding: 1.5rem;
      background: var(--gray-50);
      border-bottom: 1px solid var(--gray-200);
    }

    .score-card {
      background: white;
      border-radius: 12px;
      padding: 1.25rem;
      text-align: center;
      border: 1px solid var(--gray-200);
    }

    .score-card.bias {
      grid-column: 1 / -1;
    }

    .score-label {
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--gray-500);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 0.5rem;
    }

    .score-value {
      font-size: 2.5rem;
      font-weight: 800;
      line-height: 1;
    }

    .score-description {
      font-size: 0.8rem;
      color: var(--gray-600);
      margin-top: 0.5rem;
    }

    /* Bias Meter */
    .bias-meter {
      margin: 1rem 0;
      position: relative;
    }

    .bias-track {
      height: 12px;
      background: linear-gradient(to right, #ef4444, #f59e0b, #10b981, #f59e0b, #ef4444);
      border-radius: 6px;
      position: relative;
    }

    .bias-marker {
      position: absolute;
      top: -4px;
      width: 20px;
      height: 20px;
      background: white;
      border: 3px solid var(--dark);
      border-radius: 50%;
      transform: translateX(-50%);
      transition: left 0.5s ease;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }

    .bias-labels {
      display: flex;
      justify-content: space-between;
      margin-top: 8px;
      font-size: 0.7rem;
      color: var(--gray-500);
    }

    /* Risk Level Badge */
    .risk-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 100px;
      font-size: 0.75rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .risk-badge.low {
      background: #d1fae5;
      color: #065f46;
    }

    .risk-badge.medium {
      background: #fef3c7;
      color: #92400e;
    }

    .risk-badge.high {
      background: #fed7aa;
      color: #9a3412;
    }

    .risk-badge.dangerous {
      background: #fecaca;
      color: #991b1b;
    }

    /* Findings Section */
    .findings-section {
      padding: 1.5rem;
    }

    .findings-category {
      margin-bottom: 1.5rem;
    }

    .findings-category h4 {
      font-size: 0.9rem;
      font-weight: 700;
      color: var(--dark);
      margin-bottom: 0.75rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .findings-category h4 .count {
      background: var(--gray-200);
      padding: 2px 8px;
      border-radius: 100px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .finding-item {
      background: var(--gray-50);
      border-radius: 10px;
      margin-bottom: 0.75rem;
      overflow: hidden;
      border-left: 4px solid var(--gray-300);
    }

    .finding-item.high { border-left-color: var(--danger); }
    .finding-item.medium { border-left-color: var(--warning); }
    .finding-item.low { border-left-color: var(--success); }
    .finding-item.missing { border-left-color: var(--primary); }

    .finding-header {
      padding: 0.75rem 1rem;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: background 0.15s;
    }

    .finding-header:hover {
      background: var(--gray-100);
    }

    .finding-title {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--dark);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .finding-arrow {
      transition: transform 0.2s;
      color: var(--gray-400);
    }

    .finding-item.expanded .finding-arrow {
      transform: rotate(180deg);
    }

    .finding-details {
      display: none;
      padding: 0 1rem 1rem;
    }

    .finding-item.expanded .finding-details {
      display: block;
    }

    .finding-explanation {
      font-size: 0.85rem;
      color: var(--gray-600);
      margin-bottom: 0.75rem;
      line-height: 1.5;
    }

    .finding-quote {
      background: white;
      border: 1px solid var(--gray-200);
      border-radius: 8px;
      padding: 0.75rem;
      font-size: 0.8rem;
      font-style: italic;
      color: var(--gray-700);
    }

    .finding-quote::before {
      content: '"';
      font-size: 1.5rem;
      color: var(--gray-300);
      line-height: 0;
      vertical-align: -0.3em;
      margin-right: 4px;
    }

    /* Clause Breakdown */
    .clause-breakdown {
      padding: 1.5rem;
      border-top: 1px solid var(--gray-200);
    }

    .clause-breakdown h4 {
      font-size: 0.9rem;
      font-weight: 700;
      color: var(--dark);
      margin-bottom: 1rem;
    }

    .clause-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.75rem;
      border-radius: 8px;
      margin-bottom: 0.5rem;
      background: var(--gray-50);
      transition: background 0.15s;
    }

    .clause-item:hover {
      background: var(--gray-100);
    }

    .clause-name {
      font-size: 0.85rem;
      font-weight: 500;
      color: var(--gray-700);
    }

    .clause-score {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .clause-bar {
      width: 80px;
      height: 6px;
      background: var(--gray-200);
      border-radius: 3px;
      overflow: hidden;
    }

    .clause-bar-fill {
      height: 100%;
      border-radius: 3px;
      transition: width 0.5s ease;
    }

    .clause-bar-fill.low { background: var(--success); }
    .clause-bar-fill.medium { background: var(--warning); }
    .clause-bar-fill.high { background: var(--danger); }

    /* CTA Section */
    .cta-section {
      padding: 1.5rem;
      background: linear-gradient(135deg, #1e3a5f 0%, #312e81 100%);
      text-align: center;
    }

    .cta-section h4 {
      color: white;
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .cta-section p {
      color: rgba(255,255,255,0.7);
      font-size: 0.85rem;
      margin-bottom: 1rem;
    }

    .cta-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 0.75rem 1.5rem;
      background: white;
      color: var(--primary);
      border: none;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 600;
      text-decoration: none;
      cursor: pointer;
      transition: all 0.2s;
    }

    .cta-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    }

    /* Loading Animation */
    .loading-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.9);
      z-index: 2000;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .loading-overlay.active {
      display: flex;
    }

    .loading-spinner {
      width: 60px;
      height: 60px;
      border: 4px solid rgba(255,255,255,0.1);
      border-top-color: var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .loading-text {
      color: white;
      margin-top: 1.5rem;
      font-size: 1.1rem;
      font-weight: 600;
    }

    .loading-steps {
      margin-top: 1rem;
      color: var(--gray-400);
      font-size: 0.9rem;
    }

    .loading-step {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
      opacity: 0.5;
      transition: opacity 0.3s;
    }

    .loading-step.active {
      opacity: 1;
      color: white;
    }

    .loading-step.completed {
      opacity: 1;
      color: var(--success);
    }

    /* Footer */
    .footer {
      background: var(--dark);
      padding: 3rem 2rem;
      color: var(--gray-300);
      margin-top: 4rem;
    }
    .footer-inner {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
    }
    .footer-links { display: flex; gap: 2rem; }
    .footer-links a {
      color: var(--gray-300);
      text-decoration: none;
      font-size: 0.9rem;
    }
    .footer-links a:hover { color: white; }

    /* Responsive */
    @media (max-width: 768px) {
      .page-header h1 { font-size: 1.75rem; }
      .score-overview { grid-template-columns: 1fr; }
      .score-card.bias { grid-column: auto; }
      .site-nav { display: none; }
      .hub-subnav-content { flex-direction: column; height: auto; padding: 12px 24px; gap: 8px; }
    }
  </style>
</head>
<body>

<!-- ========================================
     UNIFIED SITE-WIDE MEGA-HEADER
     ======================================== -->
<header class="site-header">
    <div class="header-content">
        <a href="/" class="site-logo">Terms.Law</a>

        <nav class="site-nav">
            <!-- Demands - Mega Menu -->
            <div class="nav-item">
                <a href="/Demand-Letters/" class="nav-link">
                    Demands <span class="arrow">&#9660;</span>
                </a>
                <div class="mega-menu wide">
                    <div class="mega-menu-header">
                        <span class="mega-menu-title">Demand Letters</span>
                        <a href="/Demand-Letters/" class="mega-menu-viewall">View All 140+ Guides &#8594;</a>
                    </div>
                    <div class="mega-menu-grid cols-3">
                        <div class="mega-menu-section">
                            <div class="mega-menu-section-title"><span class="icon">&#128188;</span> Business</div>
                            <ul class="mega-menu-links">
                                <li><a href="#">Unpaid Invoices</a></li>
                                <li><a href="#">Breach of Contract</a></li>
                                <li><a href="#">Partnership Disputes</a></li>
                            </ul>
                            <div class="mega-menu-more">+ 8 more</div>
                        </div>
                        <div class="mega-menu-section">
                            <div class="mega-menu-section-title"><span class="icon">&#128119;</span> Employment</div>
                            <ul class="mega-menu-links">
                                <li><a href="#">Wage & Hour Claims</a></li>
                                <li><a href="#">Wrongful Termination</a></li>
                                <li><a href="#">Discrimination</a></li>
                            </ul>
                            <div class="mega-menu-more">+ 12 more</div>
                        </div>
                        <div class="mega-menu-section">
                            <div class="mega-menu-section-title"><span class="icon">&#128722;</span> Consumer</div>
                            <ul class="mega-menu-links">
                                <li><a href="#">Defective Products</a></li>
                                <li><a href="#">Lemon Law</a></li>
                                <li><a href="#">Refund Demands</a></li>
                            </ul>
                            <div class="mega-menu-more">+ 6 more</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contracts - Mega Menu -->
            <div class="nav-item">
                <a href="/Templates/" class="nav-link">
                    Contracts <span class="arrow">&#9660;</span>
                </a>
                <div class="mega-menu medium">
                    <div class="mega-menu-header">
                        <span class="mega-menu-title">Contract Templates</span>
                        <a href="/Templates/" class="mega-menu-viewall">View Library &#8594;</a>
                    </div>
                    <div class="mega-menu-grid cols-2">
                        <div class="mega-menu-section">
                            <div class="mega-menu-section-title"><span class="icon">&#129309;</span> Business</div>
                            <ul class="mega-menu-links">
                                <li><a href="#">Service Agreement</a></li>
                                <li><a href="/NDA/">NDA / Confidentiality</a></li>
                                <li><a href="#">Partnership Agreement</a></li>
                                <li><a href="#">Consulting Agreement</a></li>
                            </ul>
                        </div>
                        <div class="mega-menu-section no-border">
                            <div class="mega-menu-section-title"><span class="icon">&#128188;</span> Employment</div>
                            <ul class="mega-menu-links">
                                <li><a href="#">Employment Agreement</a></li>
                                <li><a href="#">Contractor Agreement</a></li>
                                <li><a href="#">Non-Compete</a></li>
                                <li><a href="#">Offer Letter</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Formation - Dropdown -->
            <div class="nav-item">
                <a href="/INC/" class="nav-link">
                    Formation <span class="arrow">&#9660;</span>
                </a>
                <div class="dropdown">
                    <a href="#"><span class="icon">&#127970;</span> LLC Formation</a>
                    <a href="#"><span class="icon">&#128200;</span> Corporation</a>
                    <a href="#"><span class="icon">&#128221;</span> Operating Agreement</a>
                    <a href="#"><span class="icon">&#128203;</span> Bylaws</a>
                </div>
            </div>

            <!-- Read -->
            <div class="nav-item">
                <a href="/Blog/" class="nav-link">Read</a>
            </div>

            <!-- CTA -->
            <a href="mailto:owner@terms.law" class="nav-link nav-cta">Contact</a>
        </nav>
    </div>
</header>

<!-- NDA Studio Sub-Navigation -->
<nav class="hub-subnav">
  <div class="hub-subnav-content">
    <span class="hub-subnav-title">&#128221; NDA Studio</span>
    <div class="hub-subnav-tabs">
      <a href="/NDA/" class="hub-tab">Generator</a>
      <a href="/NDA/tools/risk-analyzer.html" class="hub-tab active">Risk Analyzer</a>
      <a href="/NDA/compare/" class="hub-tab">Compare</a>
      <a href="/NDA/templates/" class="hub-tab">Templates</a>
    </div>
  </div>
</nav>

<!-- Main Content -->
<main class="main-content">
  <div class="page-header">
    <h1>NDA <span class="gradient">Risk Analyzer</span></h1>
    <p>Paste your NDA below for instant risk assessment. Get clause-by-clause analysis, red flag detection, and fairness scoring.</p>
  </div>

  <div class="analyzer-container">
    <!-- Input Panel -->
    <div class="input-panel">
      <div class="panel-header">
        <h3>&#128196; Paste Your NDA</h3>
      </div>
      <div class="panel-body">
        <textarea
          id="ndaText"
          class="nda-textarea"
          placeholder="Paste the full text of your NDA here...

Example sections to include:
- Definition of Confidential Information
- Obligations of Receiving Party
- Term and Duration
- Permitted Disclosures
- Remedies
- Miscellaneous Provisions"
        ></textarea>

        <label class="upload-section" for="fileUpload">
          <input type="file" id="fileUpload" accept=".txt,.pdf,.doc,.docx">
          <div class="upload-icon">&#128195;</div>
          <div class="upload-text">
            <strong>Click to upload</strong> or drag and drop<br>
            TXT, PDF, DOC, DOCX supported
          </div>
        </label>

        <button id="analyzeBtn" class="analyze-btn" onclick="analyzeNDA()">
          <span>&#128269;</span> Analyze NDA
        </button>
      </div>
    </div>

    <!-- Results Panel -->
    <div class="results-panel">
      <div class="panel-header">
        <h3>&#128202; Analysis Results</h3>
      </div>

      <div id="resultsPlaceholder" class="results-placeholder">
        <div class="icon">&#128269;</div>
        <h4>No Analysis Yet</h4>
        <p>Paste your NDA text and click "Analyze NDA" to see the risk assessment.</p>
      </div>

      <div id="resultsContent" style="display: none;">
        <!-- Score Overview -->
        <div class="score-overview">
          <div class="score-card bias">
            <div class="score-label">Party Bias Score</div>
            <div class="bias-meter">
              <div class="bias-track">
                <div id="biasMarker" class="bias-marker" style="left: 50%;"></div>
              </div>
              <div class="bias-labels">
                <span>-5 (Favors Them)</span>
                <span>0 (Neutral)</span>
                <span>+5 (Favors You)</span>
              </div>
            </div>
            <div id="biasValue" class="score-value" style="font-size: 1.5rem;">0</div>
            <div id="biasDescription" class="score-description">Neutral agreement</div>
          </div>

          <div class="score-card">
            <div class="score-label">Overall Risk Level</div>
            <div id="riskBadge" class="risk-badge medium">MEDIUM</div>
          </div>

          <div class="score-card">
            <div class="score-label">Issues Found</div>
            <div id="issueCount" class="score-value" style="color: var(--danger);">0</div>
          </div>
        </div>

        <!-- Findings -->
        <div class="findings-section">
          <!-- Red Flags -->
          <div id="redFlagsSection" class="findings-category">
            <h4>&#128681; Red Flags Found <span id="redFlagCount" class="count">0</span></h4>
            <div id="redFlagsList"></div>
          </div>

          <!-- Missing Protections -->
          <div id="missingSection" class="findings-category">
            <h4>&#128679; Missing Protections <span id="missingCount" class="count">0</span></h4>
            <div id="missingList"></div>
          </div>
        </div>

        <!-- Clause Breakdown -->
        <div class="clause-breakdown">
          <h4>&#128196; Clause-by-Clause Breakdown</h4>
          <div id="clauseList"></div>
        </div>

        <!-- CTA -->
        <div class="cta-section">
          <h4>Need Help With This NDA?</h4>
          <p>Get professional legal review from a CA-licensed attorney</p>
          <a href="#" onclick="Calendly.initPopupWidget({url: 'https://calendly.com/sergei-tokmakov/30-minute-zoom-meeting?hide_gdpr_banner=1'});return false;" class="cta-btn">
            &#128197; Book a Consultation
          </a>
        </div>
      </div>
    </div>
  </div>
</main>

<!-- Loading Overlay -->
<div id="loadingOverlay" class="loading-overlay">
  <div class="loading-spinner"></div>
  <div class="loading-text">Analyzing Your NDA...</div>
  <div class="loading-steps">
    <div class="loading-step" id="step1">&#9675; Parsing document structure</div>
    <div class="loading-step" id="step2">&#9675; Identifying key clauses</div>
    <div class="loading-step" id="step3">&#9675; Detecting red flags</div>
    <div class="loading-step" id="step4">&#9675; Calculating risk scores</div>
    <div class="loading-step" id="step5">&#9675; Generating recommendations</div>
  </div>
</div>

<!-- Footer -->
<footer class="footer">
  <div class="footer-inner">
    <div>&copy; 2025 Terms.Law &mdash; Sergei Tokmakov, Esq. &bull; CA Bar #279869</div>
    <div class="footer-links">
      <a href="#">Privacy Policy</a>
      <a href="#">Terms of Service</a>
      <a href="#">Contact</a>
    </div>
  </div>
</footer>

<script>
  // Red Flag Patterns and Analysis Logic
  const redFlagPatterns = [
    {
      id: 'perpetual',
      pattern: /\b(perpetual|indefinite|forever|in perpetuity|no expiration)\b/gi,
      title: 'Perpetual/Indefinite Term',
      severity: 'high',
      explanation: 'This NDA has no end date, meaning you would be bound by confidentiality obligations forever. Standard NDAs typically have 2-5 year terms. Perpetual terms are extremely one-sided.',
      recommendation: 'Negotiate for a defined term (2-3 years is standard for most business relationships).'
    },
    {
      id: 'marked-only',
      pattern: /\b(marked|identified|labeled|designated)\s+(as\s+)?(confidential|proprietary)/gi,
      title: 'Marked/Identified Only Confidentiality',
      severity: 'medium',
      explanation: 'This NDA only protects information that is explicitly marked as confidential. Verbal disclosures and unmarked written materials may not be protected.',
      recommendation: 'Ensure oral disclosures are covered if confirmed in writing within a reasonable period (14-30 days).'
    },
    {
      id: 'residuals',
      pattern: /\bresiduals?\b|retained\s+in\s+(the\s+)?memory|unaided\s+recall/gi,
      title: 'Residuals Clause Detected',
      severity: 'high',
      explanation: 'A residuals clause allows the receiving party to use any information retained in the "unaided memory" of their employees. This essentially creates a massive loophole in confidentiality protection.',
      recommendation: 'Remove residuals clauses entirely, or severely limit their scope to exclude core trade secrets.'
    },
    {
      id: 'one-way',
      pattern: /receiving\s+party\s+shall|recipient\s+(shall|agrees|will)|you\s+(shall|agree|will)\s+(not\s+)?(disclose|reveal|share)/gi,
      title: 'Potential One-Way Obligations',
      severity: 'high',
      explanation: 'This NDA may impose obligations only on one party (you). In a fair mutual NDA, both parties should have equal duties to protect each other\'s information.',
      recommendation: 'Request a mutual NDA where both parties have reciprocal confidentiality obligations.'
    },
    {
      id: 'broad-indemnification',
      pattern: /indemnif(y|ication)|hold\s+harmless|defend\s+and\s+indemnify|indemnify.*any\s+and\s+all/gi,
      title: 'Broad Indemnification Language',
      severity: 'high',
      explanation: 'Broad indemnification clauses can make you liable for all losses, including attorney fees, arising from any breach - even minor or unintentional ones.',
      recommendation: 'Limit indemnification to direct damages from material breaches. Exclude consequential damages and attorney fees for minor breaches.'
    },
    {
      id: 'no-carveouts',
      pattern: /confidential\s+information\s+(shall\s+)?(mean|include)/gi,
      secondaryCheck: (text) => {
        const hasExceptions = /\b(not\s+include|except|excluding|shall\s+not\s+apply\s+to|does\s+not\s+apply|public(ly)?\s+known|generally\s+known)\b/gi.test(text);
        return !hasExceptions;
      },
      title: 'No Public Information Carve-Out',
      severity: 'medium',
      explanation: 'This NDA may not exclude publicly available information from its confidentiality requirements. Standard NDAs exclude information that is already public or becomes public through no fault of the receiving party.',
      recommendation: 'Ensure standard carve-outs exist for: (1) publicly available info, (2) info received from third parties, (3) independently developed info, (4) info known prior to disclosure.'
    },
    {
      id: 'non-compete',
      pattern: /\bnon-?compete|not\s+compete|refrain\s+from\s+competing|competing\s+business|competitive\s+activity/gi,
      title: 'Non-Compete Language Detected',
      severity: 'high',
      explanation: 'This NDA contains non-compete restrictions. NDAs should protect confidential information, not restrict your ability to work or do business. Non-compete clauses are unenforceable in many states (including California).',
      recommendation: 'Remove non-compete provisions entirely. These are inappropriate in an NDA and may be unenforceable.'
    },
    {
      id: 'injunctive-relief',
      pattern: /injunctive\s+relief|specific\s+performance|restraining\s+order|without\s+bond|without\s+posting\s+bond/gi,
      secondaryCheck: (text) => {
        return /without\s+(posting\s+)?(a\s+)?bond/gi.test(text);
      },
      title: 'Injunctive Relief Without Bond',
      severity: 'medium',
      explanation: 'This NDA allows the other party to obtain an injunction (court order) without posting a bond. Bonds protect against frivolous or damaging injunction requests.',
      recommendation: 'Require that any party seeking injunctive relief post a reasonable bond.'
    },
    {
      id: 'assignability',
      pattern: /\b(assign|transfer|delegate)\b.*\b(without|prior)\s+(written\s+)?consent/gi,
      title: 'Unrestricted Assignment Rights',
      severity: 'medium',
      explanation: 'The other party may be able to assign this NDA to third parties (including competitors) without your consent.',
      recommendation: 'Require written consent before any assignment, with explicit carve-out for mergers/acquisitions if acceptable.'
    },
    {
      id: 'choice-of-law',
      pattern: /governed\s+by.*law(s)?\s+of\s+(?!california|ca\b)|jurisdiction.*(?!california|ca\b)/gi,
      title: 'Non-California Choice of Law',
      severity: 'medium',
      explanation: 'This NDA may be governed by laws of another state, potentially one with less favorable legal protections or where you would need to litigate.',
      recommendation: 'Consider negotiating for California law (if you are CA-based) or at least neutral jurisdiction.'
    },
    {
      id: 'definition-scope',
      pattern: /confidential\s+information.*\b(all|any|whatsoever|of\s+any\s+kind|without\s+limitation)\b/gi,
      title: 'Overly Broad Definition of Confidential Information',
      severity: 'medium',
      explanation: 'The definition of "Confidential Information" appears to be extremely broad, potentially covering information that should not reasonably be restricted.',
      recommendation: 'Narrow the definition to specifically relevant business information, trade secrets, and proprietary materials.'
    },
    {
      id: 'return-destruction',
      pattern: /return\s+(and|or)\s+destroy|certify\s+destruction|destruction\s+certificate/gi,
      secondaryCheck: (text) => {
        return /immediately|within\s+\d+\s+days/gi.test(text);
      },
      title: 'Aggressive Return/Destruction Requirements',
      severity: 'low',
      explanation: 'This NDA requires returning or destroying confidential information, which may be difficult for backup systems and archives.',
      recommendation: 'Negotiate for reasonable timeframes and exceptions for legally-required retention and standard backup procedures.'
    }
  ];

  const missingProtections = [
    {
      id: 'mutual',
      pattern: /mutual|both\s+parties|each\s+party\s+(shall|agrees)/gi,
      title: 'Mutual Obligations',
      explanation: 'A fair NDA should impose equal confidentiality obligations on both parties. This NDA may be one-sided.'
    },
    {
      id: 'term-limit',
      pattern: /\b(term|period)\b.*\b(year|month|expire|termination|end)\b/gi,
      title: 'Defined Term Limit',
      explanation: 'Standard NDAs have a defined term (2-5 years). Without one, obligations could last indefinitely.'
    },
    {
      id: 'public-exception',
      pattern: /public(ly)?\s+(known|available)|generally\s+known|part\s+of\s+(the\s+)?public\s+domain/gi,
      title: 'Public Information Exception',
      explanation: 'NDAs should exclude information that is publicly available or becomes public through no fault of the receiving party.'
    },
    {
      id: 'prior-knowledge',
      pattern: /prior\s+knowledge|already\s+known|knew\s+before|previously\s+known/gi,
      title: 'Prior Knowledge Exception',
      explanation: 'You should not be restricted from using information you already knew before the NDA was signed.'
    },
    {
      id: 'independent-development',
      pattern: /independent(ly)?\s+develop|without\s+(use|reference)\s+(of|to)/gi,
      title: 'Independent Development Exception',
      explanation: 'Information you develop independently (without using their confidential information) should not be restricted.'
    },
    {
      id: 'third-party-source',
      pattern: /third\s+party|another\s+source|lawfully\s+obtained/gi,
      title: 'Third Party Source Exception',
      explanation: 'Information received from legitimate third parties (who are not bound by confidentiality) should be excluded.'
    },
    {
      id: 'legal-compulsion',
      pattern: /court\s+order|subpoena|legal(ly)?\s+required|compelled\s+(by|to)\s+law/gi,
      title: 'Legal Compulsion Carve-Out',
      explanation: 'You should be able to disclose information if legally required (court order, subpoena, regulatory requirement).'
    },
    {
      id: 'oral-written',
      pattern: /oral\s+disclosure|verbal\s+disclosure|confirmed\s+in\s+writing/gi,
      title: 'Oral Disclosure Protection',
      explanation: 'Oral/verbal disclosures should be protected if confirmed in writing within a reasonable period (14-30 days).'
    }
  ];

  const clauseCategories = [
    { name: 'Confidential Information Definition', keywords: ['confidential information', 'proprietary', 'trade secret'] },
    { name: 'Obligations of Receiving Party', keywords: ['receiving party', 'recipient', 'shall not disclose', 'protect'] },
    { name: 'Permitted Disclosures', keywords: ['permitted', 'may disclose', 'authorized', 'need to know'] },
    { name: 'Term and Duration', keywords: ['term', 'duration', 'expire', 'termination', 'years'] },
    { name: 'Return of Materials', keywords: ['return', 'destroy', 'destruction', 'materials'] },
    { name: 'Remedies', keywords: ['remedy', 'damages', 'injunctive', 'breach'] },
    { name: 'General Provisions', keywords: ['governing law', 'jurisdiction', 'entire agreement', 'amendment'] }
  ];

  // File Upload Handler
  document.getElementById('fileUpload').addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (!file) return;

    if (file.type === 'text/plain') {
      const reader = new FileReader();
      reader.onload = function(e) {
        document.getElementById('ndaText').value = e.target.result;
      };
      reader.readAsText(file);
    } else {
      alert('Currently only TXT files are fully supported. For PDF/DOC files, please copy and paste the text manually.');
    }
  });

  // Main Analysis Function
  async function analyzeNDA() {
    const text = document.getElementById('ndaText').value.trim();

    if (!text || text.length < 100) {
      alert('Please paste the full NDA text (at least 100 characters) to analyze.');
      return;
    }

    // Show loading animation
    showLoading();

    // Simulate analysis steps with delays
    await simulateAnalysisSteps();

    // Perform actual analysis
    const results = performAnalysis(text);

    // Hide loading and show results
    hideLoading();
    displayResults(results);
  }

  function showLoading() {
    document.getElementById('loadingOverlay').classList.add('active');
    document.getElementById('analyzeBtn').disabled = true;
  }

  function hideLoading() {
    document.getElementById('loadingOverlay').classList.remove('active');
    document.getElementById('analyzeBtn').disabled = false;
  }

  async function simulateAnalysisSteps() {
    const steps = ['step1', 'step2', 'step3', 'step4', 'step5'];

    for (let i = 0; i < steps.length; i++) {
      await new Promise(resolve => setTimeout(resolve, 400 + Math.random() * 300));

      if (i > 0) {
        document.getElementById(steps[i-1]).classList.remove('active');
        document.getElementById(steps[i-1]).classList.add('completed');
        document.getElementById(steps[i-1]).innerHTML = '&#10003; ' + document.getElementById(steps[i-1]).textContent.substring(2);
      }
      document.getElementById(steps[i]).classList.add('active');
    }

    await new Promise(resolve => setTimeout(resolve, 300));
    document.getElementById(steps[steps.length-1]).classList.remove('active');
    document.getElementById(steps[steps.length-1]).classList.add('completed');
    document.getElementById(steps[steps.length-1]).innerHTML = '&#10003; ' + document.getElementById(steps[steps.length-1]).textContent.substring(2);

    // Reset for next analysis
    setTimeout(() => {
      steps.forEach(step => {
        const el = document.getElementById(step);
        el.classList.remove('active', 'completed');
        el.innerHTML = '&#9675; ' + el.textContent.substring(2);
      });
    }, 1000);
  }

  function performAnalysis(text) {
    const lowerText = text.toLowerCase();
    const redFlags = [];
    const missing = [];
    let biasScore = 0;
    let totalRiskScore = 0;

    // Detect red flags
    redFlagPatterns.forEach(flag => {
      const matches = text.match(flag.pattern);
      if (matches) {
        let shouldAdd = true;

        if (flag.secondaryCheck) {
          shouldAdd = flag.secondaryCheck(text);
        }

        if (shouldAdd) {
          redFlags.push({
            ...flag,
            quote: extractQuote(text, matches[0])
          });

          // Calculate risk contribution
          if (flag.severity === 'high') {
            totalRiskScore += 25;
            biasScore -= 1.5;
          } else if (flag.severity === 'medium') {
            totalRiskScore += 15;
            biasScore -= 0.75;
          } else {
            totalRiskScore += 8;
            biasScore -= 0.25;
          }
        }
      }
    });

    // Check for missing protections
    missingProtections.forEach(protection => {
      if (!protection.pattern.test(text)) {
        missing.push(protection);
        totalRiskScore += 10;
        biasScore -= 0.5;
      }
    });

    // Check for mutual NDA indicators (positive)
    if (/mutual|both\s+parties|disclosing\s+party.*receiving\s+party.*disclosing\s+party/gi.test(text)) {
      biasScore += 2;
    }

    // Check for balanced language
    if (/each\s+party|either\s+party/gi.test(text)) {
      biasScore += 1;
    }

    // Analyze clause coverage
    const clauseScores = clauseCategories.map(category => {
      const found = category.keywords.some(kw => lowerText.includes(kw));
      const hasIssue = redFlags.some(flag => {
        const flagText = flag.title.toLowerCase();
        return category.keywords.some(kw => flagText.includes(kw));
      });

      return {
        name: category.name,
        found,
        score: found ? (hasIssue ? 'high' : 'low') : 'medium',
        percentage: found ? (hasIssue ? 70 : 30) : 50
      };
    });

    // Cap bias score
    biasScore = Math.max(-5, Math.min(5, biasScore));

    // Determine overall risk level
    let riskLevel;
    if (totalRiskScore >= 100) {
      riskLevel = 'dangerous';
    } else if (totalRiskScore >= 60) {
      riskLevel = 'high';
    } else if (totalRiskScore >= 30) {
      riskLevel = 'medium';
    } else {
      riskLevel = 'low';
    }

    return {
      biasScore,
      riskLevel,
      totalIssues: redFlags.length + missing.length,
      redFlags,
      missing,
      clauseScores
    };
  }

  function extractQuote(text, match) {
    const index = text.toLowerCase().indexOf(match.toLowerCase());
    if (index === -1) return '';

    const start = Math.max(0, index - 50);
    const end = Math.min(text.length, index + match.length + 100);
    let quote = text.substring(start, end);

    if (start > 0) quote = '...' + quote;
    if (end < text.length) quote = quote + '...';

    return quote.replace(/\n+/g, ' ').trim();
  }

  function displayResults(results) {
    // Hide placeholder, show results
    document.getElementById('resultsPlaceholder').style.display = 'none';
    document.getElementById('resultsContent').style.display = 'block';

    // Update bias score
    const biasMarkerPos = ((results.biasScore + 5) / 10) * 100;
    document.getElementById('biasMarker').style.left = `${biasMarkerPos}%`;
    document.getElementById('biasValue').textContent = (results.biasScore > 0 ? '+' : '') + results.biasScore.toFixed(1);

    let biasDesc;
    if (results.biasScore <= -3) {
      biasDesc = 'Heavily favors the other party';
    } else if (results.biasScore <= -1) {
      biasDesc = 'Somewhat favors the other party';
    } else if (results.biasScore < 1) {
      biasDesc = 'Relatively balanced agreement';
    } else if (results.biasScore < 3) {
      biasDesc = 'Somewhat favorable to you';
    } else {
      biasDesc = 'Very favorable to you';
    }
    document.getElementById('biasDescription').textContent = biasDesc;

    // Update risk level
    const riskBadge = document.getElementById('riskBadge');
    riskBadge.textContent = results.riskLevel.toUpperCase();
    riskBadge.className = 'risk-badge ' + results.riskLevel;

    // Update issue count
    document.getElementById('issueCount').textContent = results.totalIssues;

    // Display red flags
    document.getElementById('redFlagCount').textContent = results.redFlags.length;
    const redFlagsList = document.getElementById('redFlagsList');
    redFlagsList.innerHTML = '';

    if (results.redFlags.length === 0) {
      redFlagsList.innerHTML = '<p style="color: var(--success); font-size: 0.9rem;">No major red flags detected</p>';
    } else {
      results.redFlags.forEach(flag => {
        const item = createFindingItem(flag, flag.severity);
        redFlagsList.appendChild(item);
      });
    }

    // Display missing protections
    document.getElementById('missingCount').textContent = results.missing.length;
    const missingList = document.getElementById('missingList');
    missingList.innerHTML = '';

    if (results.missing.length === 0) {
      missingList.innerHTML = '<p style="color: var(--success); font-size: 0.9rem;">All standard protections appear to be present</p>';
    } else {
      results.missing.forEach(item => {
        const el = createFindingItem({
          title: 'Missing: ' + item.title,
          explanation: item.explanation,
          recommendation: 'Consider adding this standard protection to the NDA.'
        }, 'missing');
        missingList.appendChild(el);
      });
    }

    // Display clause breakdown
    const clauseList = document.getElementById('clauseList');
    clauseList.innerHTML = '';

    results.clauseScores.forEach(clause => {
      const item = document.createElement('div');
      item.className = 'clause-item';
      item.innerHTML = `
        <span class="clause-name">${clause.name}</span>
        <div class="clause-score">
          <div class="clause-bar">
            <div class="clause-bar-fill ${clause.score}" style="width: ${clause.percentage}%"></div>
          </div>
          <span class="risk-badge ${clause.score}" style="font-size: 0.65rem;">${clause.found ? (clause.score === 'high' ? 'ISSUES' : 'OK') : 'CHECK'}</span>
        </div>
      `;
      clauseList.appendChild(item);
    });

    // Scroll to results on mobile
    if (window.innerWidth < 900) {
      document.getElementById('resultsContent').scrollIntoView({ behavior: 'smooth' });
    }
  }

  function createFindingItem(finding, severity) {
    const item = document.createElement('div');
    item.className = `finding-item ${severity}`;

    item.innerHTML = `
      <div class="finding-header" onclick="this.parentElement.classList.toggle('expanded')">
        <span class="finding-title">
          ${severity === 'high' ? '&#128308;' : severity === 'medium' ? '&#128992;' : severity === 'missing' ? '&#128309;' : '&#128994;'}
          ${finding.title}
        </span>
        <span class="finding-arrow">&#9660;</span>
      </div>
      <div class="finding-details">
        <p class="finding-explanation">${finding.explanation}</p>
        ${finding.recommendation ? `<p class="finding-explanation"><strong>Recommendation:</strong> ${finding.recommendation}</p>` : ''}
        ${finding.quote ? `<div class="finding-quote">${finding.quote}</div>` : ''}
      </div>
    `;

    return item;
  }
</script>

</body>
</html>
