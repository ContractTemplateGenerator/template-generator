<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-901N2Y3CDZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-901N2Y3CDZ');
  </script>

  <title>NDA Breach Response Generator - Legal Response Tool | Terms.Law</title>
  <meta name="description" content="Free NDA breach response generator. Get evidence checklists, cease and desist letters, damage calculations, and escalation guidance when your NDA has been violated.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <style>
    :root {
      --primary: #2563eb;
      --primary-dark: #1d4ed8;
      --accent: #8b5cf6;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --dark: #0f172a;
      --dark-lighter: #1e293b;
      --gray-50: #f8fafc;
      --gray-100: #f1f5f9;
      --gray-200: #e2e8f0;
      --gray-300: #cbd5e1;
      --gray-400: #94a3b8;
      --gray-500: #64748b;
      --gray-600: #475569;
      --gray-700: #334155;
      --gray-800: #1e293b;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--gray-50);
      color: var(--gray-700);
      line-height: 1.6;
    }

    /* ========================================
       UNIFIED SITE-WIDE MEGA-HEADER
       ======================================== */
    .site-header {
        background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        position: sticky;
        top: 0;
        z-index: 1000;
        box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }

    .header-content {
        max-width: 1400px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        padding: 0 24px;
        height: 60px;
    }

    .site-logo {
        font-size: 1.15rem;
        font-weight: 800;
        text-decoration: none;
        background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-right: 32px;
    }

    .site-nav {
        display: flex;
        align-items: center;
        gap: 0;
        flex: 1;
    }

    .nav-item {
        position: relative;
    }

    .nav-link {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 18px 16px;
        color: #94a3b8;
        text-decoration: none;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.2s;
        border-bottom: 2px solid transparent;
    }

    .nav-link:hover {
        color: #fff;
        background: rgba(255,255,255,0.05);
    }

    .nav-link:hover,
    .nav-link.active {
        border-bottom-color: var(--primary);
    }

    .nav-link .arrow {
        font-size: 10px;
        transition: transform 0.2s;
    }

    .nav-item:hover .arrow {
        transform: rotate(180deg);
    }

    .nav-cta {
        margin-left: auto;
        background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
        color: #fff !important;
        padding: 10px 20px !important;
        border-radius: 8px;
        font-weight: 600 !important;
        border-bottom: none !important;
    }

    .nav-cta:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 15px rgba(37, 99, 235, 0.4);
    }

    /* Mega Menu */
    .mega-menu {
        position: absolute;
        top: 100%;
        left: 0;
        background: #fff;
        border-radius: 0 0 16px 16px;
        box-shadow: 0 20px 50px rgba(0,0,0,0.2);
        opacity: 0;
        visibility: hidden;
        transform: translateY(-10px);
        transition: all 0.2s ease;
        z-index: 100;
    }

    .nav-item:hover .mega-menu {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
    }

    .mega-menu.wide { min-width: 700px; }
    .mega-menu.medium { min-width: 520px; }
    .mega-menu.read-menu { min-width: 620px; }

    .mega-menu-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 14px 20px;
        border-bottom: 1px solid var(--gray-200);
        background: var(--gray-50);
    }

    .mega-menu-title {
        font-size: 13px;
        font-weight: 700;
        color: var(--gray-700);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .mega-menu-viewall {
        font-size: 12px;
        color: var(--primary);
        text-decoration: none;
        font-weight: 600;
    }

    .mega-menu-grid {
        display: grid;
        gap: 0;
    }

    .mega-menu-grid.cols-3 { grid-template-columns: repeat(3, 1fr); }
    .mega-menu-grid.cols-2 { grid-template-columns: repeat(2, 1fr); }

    .mega-menu-section {
        padding: 16px 20px;
        border-right: 1px solid var(--gray-100);
        border-bottom: 1px solid var(--gray-100);
    }

    .mega-menu-section:nth-child(3n) {
        border-right: none;
    }

    .mega-menu-section.no-border {
        border-right: none;
    }

    .mega-menu-section-title {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 13px;
        font-weight: 700;
        color: var(--gray-800);
        margin-bottom: 10px;
    }

    .mega-menu-section-title .icon {
        font-size: 16px;
    }

    .mega-menu-links {
        list-style: none;
    }

    .mega-menu-links li {
        margin-bottom: 6px;
    }

    .mega-menu-links a {
        font-size: 12px;
        color: var(--gray-600);
        text-decoration: none;
        transition: color 0.15s;
        display: block;
    }

    .mega-menu-links a:hover {
        color: var(--primary);
    }

    .mega-menu-more {
        font-size: 11px;
        color: var(--gray-400);
        margin-top: 6px;
    }

    .mega-menu-footer {
        display: flex;
        gap: 10px;
        padding: 12px 20px;
        background: var(--gray-50);
        border-radius: 0 0 16px 16px;
        flex-wrap: wrap;
    }

    .mega-menu-footer a {
        font-size: 11px;
        color: var(--gray-500);
        text-decoration: none;
        padding: 4px 10px;
        background: #fff;
        border-radius: 20px;
        border: 1px solid var(--gray-200);
        transition: all 0.15s;
    }

    .mega-menu-footer a:hover {
        border-color: var(--primary);
        color: var(--primary);
    }

    /* Dropdown */
    .dropdown {
        position: absolute;
        top: 100%;
        left: 0;
        background: #fff;
        border-radius: 0 0 12px 12px;
        box-shadow: 0 20px 50px rgba(0,0,0,0.2);
        opacity: 0;
        visibility: hidden;
        transform: translateY(-10px);
        transition: all 0.2s ease;
        min-width: 220px;
        padding: 8px 0;
    }

    .nav-item:hover .dropdown {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
    }

    .dropdown a {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 18px;
        color: var(--gray-700);
        text-decoration: none;
        font-size: 13px;
        transition: background 0.15s;
    }

    .dropdown a:hover {
        background: var(--gray-50);
    }

    .dropdown .icon {
        font-size: 16px;
        width: 22px;
        text-align: center;
    }

    /* Hub Sub-Navigation */
    .hub-subnav {
      background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    .hub-subnav-content {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 48px;
    }
    .hub-subnav-title {
      color: #f59e0b;
      font-size: 0.9rem;
      font-weight: 700;
      text-decoration: none;
    }
    .hub-subnav-title:hover {
      color: #fbbf24;
    }
    .hub-subnav-tabs {
      display: flex;
      gap: 8px;
    }
    .hub-tab {
      padding: 8px 16px;
      color: #94a3b8;
      text-decoration: none;
      font-size: 0.85rem;
      font-weight: 500;
      border-radius: 6px;
      transition: all 0.2s;
    }
    .hub-tab:hover {
      background: rgba(255,255,255,0.1);
      color: #fff;
    }
    .hub-tab.active {
      background: rgba(239, 68, 68, 0.3);
      color: #fca5a5;
    }

    /* Breadcrumbs */
    .breadcrumbs {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1rem 2rem;
    }
    .breadcrumbs ul {
      display: flex;
      align-items: center;
      gap: 8px;
      list-style: none;
      font-size: 0.85rem;
    }
    .breadcrumbs a {
      color: var(--gray-500);
      text-decoration: none;
      transition: color 0.15s;
    }
    .breadcrumbs a:hover {
      color: var(--primary);
    }
    .breadcrumbs .separator {
      color: var(--gray-400);
    }
    .breadcrumbs .current {
      color: var(--gray-700);
      font-weight: 500;
    }

    /* Main Content Area */
    .main-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem 3rem;
    }

    /* Page Header */
    .page-header {
      text-align: center;
      margin-bottom: 2.5rem;
    }

    .page-header .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: linear-gradient(135deg, #fef2f2, #fee2e2);
      border: 1px solid #fca5a5;
      padding: 6px 14px;
      border-radius: 100px;
      font-size: 0.75rem;
      font-weight: 600;
      color: #dc2626;
      margin-bottom: 1rem;
    }

    .page-header h1 {
      font-size: 2.25rem;
      font-weight: 800;
      color: var(--dark);
      margin-bottom: 0.75rem;
    }

    .page-header h1 .gradient {
      background: linear-gradient(135deg, #ef4444, #dc2626);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .page-header p {
      color: var(--gray-600);
      font-size: 1rem;
      max-width: 650px;
      margin: 0 auto;
    }

    /* Progress Indicator */
    .progress-container {
      background: white;
      border-radius: 16px;
      padding: 1.5rem;
      margin-bottom: 2rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.06);
    }

    .progress-steps {
      display: flex;
      justify-content: space-between;
      position: relative;
    }

    .progress-steps::before {
      content: '';
      position: absolute;
      top: 20px;
      left: 10%;
      right: 10%;
      height: 3px;
      background: var(--gray-200);
      z-index: 1;
    }

    .progress-step {
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      z-index: 2;
      cursor: pointer;
      flex: 1;
    }

    .step-circle {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--gray-200);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 0.9rem;
      color: var(--gray-500);
      transition: all 0.3s;
      margin-bottom: 8px;
    }

    .progress-step.active .step-circle {
      background: linear-gradient(135deg, var(--danger), #b91c1c);
      color: white;
      box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
    }

    .progress-step.completed .step-circle {
      background: var(--success);
      color: white;
    }

    .progress-step.completed .step-circle::after {
      content: '\f00c';
      font-family: 'Font Awesome 6 Free';
      font-weight: 900;
    }

    .step-label {
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--gray-500);
      text-align: center;
      max-width: 100px;
    }

    .progress-step.active .step-label {
      color: var(--danger);
    }

    .progress-step.completed .step-label {
      color: var(--success);
    }

    /* Wizard Container */
    .wizard-container {
      display: grid;
      grid-template-columns: 1fr 320px;
      gap: 2rem;
    }

    @media (max-width: 1024px) {
      .wizard-container {
        grid-template-columns: 1fr;
      }
    }

    /* Step Panel */
    .step-panel {
      display: none;
      background: white;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      overflow: hidden;
    }

    .step-panel.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .panel-header {
      background: linear-gradient(135deg, var(--dark), var(--dark-lighter));
      padding: 1.25rem 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .panel-header h3 {
      color: white;
      font-size: 1.1rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .panel-header .step-badge {
      background: rgba(255,255,255,0.15);
      padding: 4px 10px;
      border-radius: 100px;
      font-size: 0.7rem;
      font-weight: 600;
    }

    .panel-body {
      padding: 1.5rem;
    }

    /* Form Elements */
    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-label {
      display: block;
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--dark);
      margin-bottom: 0.5rem;
    }

    .form-label .required {
      color: var(--danger);
    }

    .form-hint {
      font-size: 0.8rem;
      color: var(--gray-500);
      margin-top: 0.25rem;
    }

    /* Option Cards */
    .option-cards {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
    }

    @media (max-width: 768px) {
      .option-cards {
        grid-template-columns: 1fr;
      }
    }

    .option-card {
      border: 2px solid var(--gray-200);
      border-radius: 12px;
      padding: 1rem;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
    }

    .option-card:hover {
      border-color: var(--gray-300);
      background: var(--gray-50);
    }

    .option-card.selected {
      border-color: var(--danger);
      background: #fef2f2;
    }

    .option-card input {
      display: none;
    }

    .option-icon {
      font-size: 1.75rem;
      margin-bottom: 0.5rem;
    }

    .option-title {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--dark);
      margin-bottom: 0.25rem;
    }

    .option-desc {
      font-size: 0.75rem;
      color: var(--gray-500);
    }

    /* Severity Slider */
    .severity-slider-container {
      background: var(--gray-50);
      border-radius: 12px;
      padding: 1.25rem;
    }

    .severity-slider {
      width: 100%;
      -webkit-appearance: none;
      height: 8px;
      border-radius: 4px;
      background: linear-gradient(to right, #22c55e, #eab308, #f97316, #ef4444, #7f1d1d);
      outline: none;
    }

    .severity-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: white;
      border: 3px solid var(--dark);
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }

    .severity-labels {
      display: flex;
      justify-content: space-between;
      margin-top: 8px;
      font-size: 0.7rem;
      color: var(--gray-500);
    }

    .severity-value {
      text-align: center;
      margin-top: 12px;
      font-size: 1.25rem;
      font-weight: 700;
    }

    .severity-value.low { color: #22c55e; }
    .severity-value.medium { color: #eab308; }
    .severity-value.high { color: #f97316; }
    .severity-value.critical { color: #ef4444; }
    .severity-value.catastrophic { color: #7f1d1d; }

    /* Checklist */
    .checklist {
      list-style: none;
    }

    .checklist-item {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 0.75rem;
      border-radius: 8px;
      margin-bottom: 0.5rem;
      background: var(--gray-50);
      transition: background 0.15s;
    }

    .checklist-item:hover {
      background: var(--gray-100);
    }

    .checklist-item input[type="checkbox"] {
      width: 18px;
      height: 18px;
      margin-top: 2px;
      cursor: pointer;
      accent-color: var(--success);
    }

    .checklist-item.checked {
      background: #dcfce7;
    }

    .checklist-item.checked .checklist-text {
      text-decoration: line-through;
      color: var(--gray-500);
    }

    .checklist-content {
      flex: 1;
    }

    .checklist-text {
      font-size: 0.9rem;
      color: var(--gray-700);
      font-weight: 500;
    }

    .checklist-hint {
      font-size: 0.75rem;
      color: var(--gray-500);
      margin-top: 4px;
    }

    .checklist-priority {
      font-size: 0.65rem;
      font-weight: 700;
      padding: 2px 8px;
      border-radius: 4px;
      text-transform: uppercase;
    }

    .checklist-priority.essential {
      background: #fef2f2;
      color: #dc2626;
    }

    .checklist-priority.important {
      background: #fef3c7;
      color: #b45309;
    }

    .checklist-priority.helpful {
      background: #dbeafe;
      color: #1d4ed8;
    }

    /* Letter Preview */
    .letter-preview {
      background: white;
      border: 2px solid var(--gray-200);
      border-radius: 12px;
      padding: 1.5rem;
      font-family: 'Georgia', serif;
      font-size: 0.9rem;
      line-height: 1.8;
      max-height: 500px;
      overflow-y: auto;
    }

    .letter-preview .placeholder {
      color: var(--primary);
      background: #dbeafe;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Inter', sans-serif;
      font-size: 0.8rem;
    }

    .letter-header {
      text-align: center;
      border-bottom: 2px solid var(--gray-300);
      padding-bottom: 1rem;
      margin-bottom: 1.5rem;
    }

    .letter-header h4 {
      font-size: 1.1rem;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: var(--dark);
    }

    .letter-section {
      margin-bottom: 1.5rem;
    }

    .letter-section p {
      margin-bottom: 1rem;
      text-align: justify;
    }

    /* Damage Calculator */
    .damage-calculator {
      background: var(--gray-50);
      border-radius: 12px;
      padding: 1.25rem;
    }

    .damage-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem 0;
      border-bottom: 1px solid var(--gray-200);
    }

    .damage-row:last-child {
      border-bottom: none;
    }

    .damage-label {
      font-size: 0.85rem;
      color: var(--gray-700);
    }

    .damage-input {
      width: 120px;
      padding: 8px 12px;
      border: 1px solid var(--gray-300);
      border-radius: 6px;
      font-size: 0.9rem;
      text-align: right;
    }

    .damage-total {
      background: var(--dark);
      color: white;
      padding: 1rem;
      border-radius: 8px;
      margin-top: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .damage-total-label {
      font-weight: 600;
    }

    .damage-total-value {
      font-size: 1.5rem;
      font-weight: 800;
    }

    /* Escalation Timeline */
    .escalation-timeline {
      position: relative;
      padding-left: 40px;
    }

    .escalation-timeline::before {
      content: '';
      position: absolute;
      left: 15px;
      top: 10px;
      bottom: 10px;
      width: 2px;
      background: var(--gray-200);
    }

    .timeline-item {
      position: relative;
      padding-bottom: 1.5rem;
    }

    .timeline-item:last-child {
      padding-bottom: 0;
    }

    .timeline-marker {
      position: absolute;
      left: -40px;
      top: 0;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: white;
      border: 3px solid var(--gray-300);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      color: var(--gray-500);
    }

    .timeline-item.active .timeline-marker {
      border-color: var(--danger);
      color: var(--danger);
    }

    .timeline-item.recommended .timeline-marker {
      border-color: var(--success);
      background: var(--success);
      color: white;
    }

    .timeline-content {
      background: white;
      border: 1px solid var(--gray-200);
      border-radius: 10px;
      padding: 1rem;
      transition: all 0.2s;
    }

    .timeline-item.active .timeline-content,
    .timeline-item.recommended .timeline-content {
      border-color: var(--danger);
      box-shadow: 0 4px 15px rgba(239, 68, 68, 0.15);
    }

    .timeline-title {
      font-size: 0.95rem;
      font-weight: 700;
      color: var(--dark);
      margin-bottom: 0.25rem;
    }

    .timeline-desc {
      font-size: 0.8rem;
      color: var(--gray-600);
      margin-bottom: 0.5rem;
    }

    .timeline-meta {
      display: flex;
      gap: 12px;
      font-size: 0.75rem;
    }

    .timeline-meta span {
      display: flex;
      align-items: center;
      gap: 4px;
      color: var(--gray-500);
    }

    /* Navigation Buttons */
    .wizard-nav {
      display: flex;
      justify-content: space-between;
      padding: 1.5rem;
      background: var(--gray-50);
      border-top: 1px solid var(--gray-200);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 0.75rem 1.25rem;
      border: none;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-secondary {
      background: white;
      color: var(--gray-700);
      border: 1px solid var(--gray-300);
    }

    .btn-secondary:hover {
      background: var(--gray-50);
      border-color: var(--gray-400);
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--danger), #b91c1c);
      color: white;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
    }

    .btn-success {
      background: linear-gradient(135deg, var(--success), #059669);
      color: white;
    }

    .btn-success:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
    }

    /* Help Panel (Sidebar) */
    .help-sidebar {
      position: sticky;
      top: 130px;
    }

    .help-card {
      background: white;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      overflow: hidden;
      margin-bottom: 1.5rem;
    }

    .help-card-header {
      background: linear-gradient(135deg, #fef3c7, #fde68a);
      padding: 1rem 1.25rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .help-card-header i {
      font-size: 1.25rem;
      color: #b45309;
    }

    .help-card-header h4 {
      font-size: 0.9rem;
      font-weight: 700;
      color: #92400e;
    }

    .help-card-body {
      padding: 1.25rem;
    }

    .help-tip {
      display: flex;
      gap: 10px;
      padding: 0.75rem 0;
      border-bottom: 1px solid var(--gray-100);
    }

    .help-tip:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    .help-tip i {
      color: var(--warning);
      font-size: 0.9rem;
      margin-top: 2px;
    }

    .help-tip p {
      font-size: 0.8rem;
      color: var(--gray-600);
      line-height: 1.5;
    }

    /* Output Actions */
    .output-actions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 1.5rem;
    }

    .output-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 0.6rem 1rem;
      background: white;
      border: 1px solid var(--gray-300);
      border-radius: 8px;
      font-size: 0.85rem;
      font-weight: 500;
      color: var(--gray-700);
      cursor: pointer;
      transition: all 0.15s;
    }

    .output-btn:hover {
      border-color: var(--primary);
      color: var(--primary);
      background: #eff6ff;
    }

    .output-btn i {
      font-size: 1rem;
    }

    /* Toast Notification */
    .toast {
      position: fixed;
      bottom: 24px;
      right: 24px;
      background: var(--dark);
      color: white;
      padding: 1rem 1.5rem;
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      display: flex;
      align-items: center;
      gap: 12px;
      z-index: 2000;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.3s ease;
    }

    .toast.show {
      opacity: 1;
      transform: translateY(0);
    }

    .toast.success i {
      color: var(--success);
    }

    /* Floating Help */
    .floating-help {
      position: fixed;
      bottom: 100px;
      right: 24px;
      z-index: 1500;
    }

    .floating-help-btn {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--warning), #d97706);
      color: white;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(245, 158, 11, 0.4);
      transition: all 0.2s;
    }

    .floating-help-btn:hover {
      transform: scale(1.1);
    }

    .floating-help-popup {
      position: absolute;
      bottom: 70px;
      right: 0;
      width: 320px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      opacity: 0;
      visibility: hidden;
      transform: translateY(10px);
      transition: all 0.2s;
    }

    .floating-help.open .floating-help-popup {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .floating-help-popup-header {
      background: var(--dark);
      padding: 1rem 1.25rem;
      border-radius: 16px 16px 0 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .floating-help-popup-header h4 {
      color: white;
      font-size: 0.95rem;
    }

    .floating-help-popup-header button {
      background: none;
      border: none;
      color: var(--gray-400);
      font-size: 1.25rem;
      cursor: pointer;
    }

    .floating-help-popup-body {
      padding: 1.25rem;
      max-height: 350px;
      overflow-y: auto;
    }

    .help-section {
      margin-bottom: 1rem;
    }

    .help-section h5 {
      font-size: 0.85rem;
      font-weight: 700;
      color: var(--dark);
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .help-section p {
      font-size: 0.8rem;
      color: var(--gray-600);
      line-height: 1.5;
    }

    /* Attorney CTA */
    .attorney-cta {
      background: linear-gradient(135deg, #1e3a5f 0%, #312e81 100%);
      border-radius: 16px;
      padding: 1.5rem;
      text-align: center;
    }

    .attorney-cta h4 {
      color: white;
      font-size: 1rem;
      margin-bottom: 0.5rem;
    }

    .attorney-cta p {
      color: rgba(255,255,255,0.7);
      font-size: 0.8rem;
      margin-bottom: 1rem;
    }

    .attorney-cta a {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 0.6rem 1.25rem;
      background: white;
      color: var(--primary);
      border-radius: 8px;
      font-size: 0.85rem;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.2s;
    }

    .attorney-cta a:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    }

    /* Footer */
    .footer {
      background: var(--dark);
      padding: 3rem 2rem;
      color: var(--gray-300);
      margin-top: 4rem;
    }
    .footer-inner {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
    }
    .footer-links { display: flex; gap: 2rem; }
    .footer-links a {
      color: var(--gray-300);
      text-decoration: none;
      font-size: 0.9rem;
    }
    .footer-links a:hover { color: white; }

    /* Responsive */
    @media (max-width: 768px) {
      .page-header h1 { font-size: 1.5rem; }
      .progress-steps { flex-wrap: wrap; gap: 1rem; }
      .progress-steps::before { display: none; }
      .progress-step { flex: 0 0 calc(50% - 0.5rem); }
      .option-cards { grid-template-columns: 1fr; }
      .site-nav { display: none; }
      .hub-subnav-content { flex-direction: column; height: auto; padding: 12px 24px; gap: 8px; }
      .help-sidebar { display: none; }
      .wizard-container { grid-template-columns: 1fr; }
    }

    /* Print Styles */
    @media print {
      .site-header, .hub-subnav, .breadcrumbs, .progress-container,
      .wizard-nav, .help-sidebar, .floating-help, .footer, .output-actions {
        display: none !important;
      }
      .wizard-container {
        grid-template-columns: 1fr !important;
      }
      .step-panel {
        display: block !important;
        box-shadow: none !important;
        border: 1px solid #ccc;
        page-break-inside: avoid;
        margin-bottom: 2rem;
      }
      .letter-preview {
        max-height: none;
        border: none;
        padding: 0;
      }
    }
  </style>
</head>
<body>

<!-- ========================================
     UNIFIED SITE-WIDE MEGA-HEADER
     ======================================== -->
<header class="site-header">
    <div class="header-content">
        <a href="/" class="site-logo">Terms.Law</a>

        <nav class="site-nav">
            <!-- Demands - Mega Menu -->
            <div class="nav-item">
                <a href="/Demand-Letters/" class="nav-link">
                    Demands <span class="arrow">&#9660;</span>
                </a>
                <div class="mega-menu wide">
                    <div class="mega-menu-header">
                        <span class="mega-menu-title">Demand Letters</span>
                        <a href="/Demand-Letters/" class="mega-menu-viewall">View All 140+ Guides &#8594;</a>
                    </div>
                    <div class="mega-menu-grid cols-3">
                        <div class="mega-menu-section">
                            <div class="mega-menu-section-title"><span class="icon">&#128188;</span> Business</div>
                            <ul class="mega-menu-links">
                                <li><a href="#">Unpaid Invoices</a></li>
                                <li><a href="#">Breach of Contract</a></li>
                                <li><a href="#">Partnership Disputes</a></li>
                            </ul>
                            <div class="mega-menu-more">+ 8 more</div>
                        </div>
                        <div class="mega-menu-section">
                            <div class="mega-menu-section-title"><span class="icon">&#128119;</span> Employment</div>
                            <ul class="mega-menu-links">
                                <li><a href="#">Wage & Hour Claims</a></li>
                                <li><a href="#">Wrongful Termination</a></li>
                                <li><a href="#">Discrimination</a></li>
                            </ul>
                            <div class="mega-menu-more">+ 12 more</div>
                        </div>
                        <div class="mega-menu-section">
                            <div class="mega-menu-section-title"><span class="icon">&#128722;</span> Consumer</div>
                            <ul class="mega-menu-links">
                                <li><a href="#">Defective Products</a></li>
                                <li><a href="#">Lemon Law</a></li>
                                <li><a href="#">Refund Demands</a></li>
                            </ul>
                            <div class="mega-menu-more">+ 6 more</div>
                        </div>
                        <div class="mega-menu-section">
                            <div class="mega-menu-section-title"><span class="icon">&#127968;</span> Landlord-Tenant</div>
                            <ul class="mega-menu-links">
                                <li><a href="#">Security Deposit</a></li>
                                <li><a href="#">Habitability</a></li>
                                <li><a href="#">Lease Violations</a></li>
                            </ul>
                            <div class="mega-menu-more">+ 5 more</div>
                        </div>
                        <div class="mega-menu-section">
                            <div class="mega-menu-section-title"><span class="icon">&#127959;</span> Home Services</div>
                            <ul class="mega-menu-links">
                                <li><a href="#">Contractor Disputes</a></li>
                                <li><a href="#">HVAC Issues</a></li>
                                <li><a href="#">Roofing Defects</a></li>
                            </ul>
                            <div class="mega-menu-more">+ 7 more</div>
                        </div>
                        <div class="mega-menu-section">
                            <div class="mega-menu-section-title"><span class="icon">&#128233;</span> Respond</div>
                            <ul class="mega-menu-links">
                                <li><a href="#">Business Responses</a></li>
                                <li><a href="#">Employment Responses</a></li>
                                <li><a href="#">Consumer Responses</a></li>
                            </ul>
                            <div class="mega-menu-more">50+ response guides</div>
                        </div>
                    </div>
                    <div class="mega-menu-footer">
                        <a href="#">&#128241; Platforms</a>
                        <a href="#">&#127912; IP & Content</a>
                        <a href="#">&#128106; Family</a>
                        <a href="#">&#128021; Animals</a>
                        <a href="#">&#128295; Tools</a>
                    </div>
                </div>
            </div>

            <!-- Contracts - Mega Menu -->
            <div class="nav-item">
                <a href="/Templates/" class="nav-link">
                    Contracts <span class="arrow">&#9660;</span>
                </a>
                <div class="mega-menu medium">
                    <div class="mega-menu-header">
                        <span class="mega-menu-title">Contract Templates</span>
                        <a href="/Templates/" class="mega-menu-viewall">View Library &#8594;</a>
                    </div>
                    <div class="mega-menu-grid cols-2">
                        <div class="mega-menu-section">
                            <div class="mega-menu-section-title"><span class="icon">&#129309;</span> Business</div>
                            <ul class="mega-menu-links">
                                <li><a href="#">Service Agreement</a></li>
                                <li><a href="/NDA/">NDA / Confidentiality</a></li>
                                <li><a href="#">Partnership Agreement</a></li>
                                <li><a href="#">Consulting Agreement</a></li>
                            </ul>
                        </div>
                        <div class="mega-menu-section no-border">
                            <div class="mega-menu-section-title"><span class="icon">&#128188;</span> Employment</div>
                            <ul class="mega-menu-links">
                                <li><a href="#">Employment Agreement</a></li>
                                <li><a href="#">Contractor Agreement</a></li>
                                <li><a href="#">Non-Compete</a></li>
                                <li><a href="#">Offer Letter</a></li>
                            </ul>
                        </div>
                        <div class="mega-menu-section">
                            <div class="mega-menu-section-title"><span class="icon">&#127968;</span> Real Estate</div>
                            <ul class="mega-menu-links">
                                <li><a href="#">Lease Agreement</a></li>
                                <li><a href="#">Sublease</a></li>
                                <li><a href="#">Property Management</a></li>
                            </ul>
                        </div>
                        <div class="mega-menu-section no-border">
                            <div class="mega-menu-section-title"><span class="icon">&#128176;</span> Finance</div>
                            <ul class="mega-menu-links">
                                <li><a href="#">Promissory Note</a></li>
                                <li><a href="#">Loan Agreement</a></li>
                                <li><a href="#">SAFE / Convertible Note</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Formation - Dropdown -->
            <div class="nav-item">
                <a href="/INC/" class="nav-link">
                    Formation <span class="arrow">&#9660;</span>
                </a>
                <div class="dropdown">
                    <a href="#"><span class="icon">&#127970;</span> LLC Formation</a>
                    <a href="#"><span class="icon">&#128200;</span> Corporation</a>
                    <a href="#"><span class="icon">&#128221;</span> Operating Agreement</a>
                    <a href="#"><span class="icon">&#128203;</span> Bylaws</a>
                    <a href="#"><span class="icon">&#127963;</span> State Guides</a>
                    <a href="#"><span class="icon">&#8594;</span> All Formation Tools</a>
                </div>
            </div>

            <!-- Read -->
            <div class="nav-item">
                <a href="/Blog/" class="nav-link">Read</a>
            </div>

            <!-- CTA -->
            <a href="mailto:owner@terms.law" class="nav-link nav-cta">Contact</a>
        </nav>
    </div>
</header>

<!-- NDA Studio Hub Sub-Navigation -->
<nav class="hub-subnav">
  <div class="hub-subnav-content">
    <a href="/NDA/" class="hub-subnav-title"><i class="fa-solid fa-file-contract"></i> NDA Studio</a>
    <div class="hub-subnav-tabs">
      <a href="/NDA/scenarios/" class="hub-tab">Scenarios</a>
      <a href="/NDA/clause-library/" class="hub-tab">Clauses</a>
      <a href="/NDA/tools/" class="hub-tab active">Tools</a>
    </div>
  </div>
</nav>

<!-- Breadcrumbs -->
<nav class="breadcrumbs">
  <ul>
    <li><a href="/NDA/">NDA Studio</a></li>
    <li class="separator"><i class="fa-solid fa-chevron-right"></i></li>
    <li><a href="/NDA/tools/">Tools</a></li>
    <li class="separator"><i class="fa-solid fa-chevron-right"></i></li>
    <li class="current">Breach Response Generator</li>
  </ul>
</nav>

<!-- Main Content -->
<main class="main-content">
  <!-- Page Header -->
  <div class="page-header">
    <div class="badge"><i class="fa-solid fa-shield-halved"></i> Legal Response Tool</div>
    <h1>NDA <span class="gradient">Breach Response</span> Generator</h1>
    <p>Your NDA was violated. This tool helps you gather evidence, generate response letters, calculate damages, and understand your escalation options.</p>
  </div>

  <!-- Progress Indicator -->
  <div class="progress-container">
    <div class="progress-steps">
      <div class="progress-step active" data-step="1" onclick="goToStep(1)">
        <div class="step-circle">1</div>
        <div class="step-label">Breach Assessment</div>
      </div>
      <div class="progress-step" data-step="2" onclick="goToStep(2)">
        <div class="step-circle">2</div>
        <div class="step-label">Evidence Checklist</div>
      </div>
      <div class="progress-step" data-step="3" onclick="goToStep(3)">
        <div class="step-circle">3</div>
        <div class="step-label">Response Letter</div>
      </div>
      <div class="progress-step" data-step="4" onclick="goToStep(4)">
        <div class="step-circle">4</div>
        <div class="step-label">Escalation Path</div>
      </div>
    </div>
  </div>

  <div class="wizard-container">
    <div class="wizard-panels">
      <!-- Step 1: Breach Assessment -->
      <div class="step-panel active" id="step1">
        <div class="panel-header">
          <h3><i class="fa-solid fa-magnifying-glass-chart"></i> Breach Assessment Wizard</h3>
          <span class="step-badge">Step 1 of 4</span>
        </div>
        <div class="panel-body">
          <!-- Breach Type -->
          <div class="form-group">
            <label class="form-label">What type of breach occurred? <span class="required">*</span></label>
            <div class="option-cards">
              <label class="option-card" onclick="selectOption(this, 'breachType', 'disclosure')">
                <input type="radio" name="breachType" value="disclosure">
                <div class="option-icon"><i class="fa-solid fa-bullhorn"></i></div>
                <div class="option-title">Unauthorized Disclosure</div>
                <div class="option-desc">They shared your info with third parties</div>
              </label>
              <label class="option-card" onclick="selectOption(this, 'breachType', 'misuse')">
                <input type="radio" name="breachType" value="misuse">
                <div class="option-icon"><i class="fa-solid fa-user-secret"></i></div>
                <div class="option-title">Misuse of Information</div>
                <div class="option-desc">Used your info beyond allowed purpose</div>
              </label>
              <label class="option-card" onclick="selectOption(this, 'breachType', 'access')">
                <input type="radio" name="breachType" value="access">
                <div class="option-icon"><i class="fa-solid fa-unlock-keyhole"></i></div>
                <div class="option-title">Unauthorized Access</div>
                <div class="option-desc">Accessed systems/data without permission</div>
              </label>
            </div>
          </div>

          <!-- Who Breached -->
          <div class="form-group">
            <label class="form-label">Who committed the breach? <span class="required">*</span></label>
            <div class="option-cards">
              <label class="option-card" onclick="selectOption(this, 'breacher', 'other-party')">
                <input type="radio" name="breacher" value="other-party">
                <div class="option-icon"><i class="fa-solid fa-handshake-slash"></i></div>
                <div class="option-title">The Other Party</div>
                <div class="option-desc">Your NDA counterparty directly</div>
              </label>
              <label class="option-card" onclick="selectOption(this, 'breacher', 'third-party')">
                <input type="radio" name="breacher" value="third-party">
                <div class="option-icon"><i class="fa-solid fa-users"></i></div>
                <div class="option-title">Third Party</div>
                <div class="option-desc">Someone they shared with</div>
              </label>
              <label class="option-card" onclick="selectOption(this, 'breacher', 'unknown')">
                <input type="radio" name="breacher" value="unknown">
                <div class="option-icon"><i class="fa-solid fa-circle-question"></i></div>
                <div class="option-title">Unknown</div>
                <div class="option-desc">Source of leak unclear</div>
              </label>
            </div>
          </div>

          <!-- What Was Disclosed -->
          <div class="form-group">
            <label class="form-label">What type of information was exposed? <span class="required">*</span></label>
            <div class="option-cards">
              <label class="option-card" onclick="selectOption(this, 'infoType', 'trade-secrets')">
                <input type="radio" name="infoType" value="trade-secrets">
                <div class="option-icon"><i class="fa-solid fa-flask"></i></div>
                <div class="option-title">Trade Secrets</div>
                <div class="option-desc">Formulas, processes, source code</div>
              </label>
              <label class="option-card" onclick="selectOption(this, 'infoType', 'personal')">
                <input type="radio" name="infoType" value="personal">
                <div class="option-icon"><i class="fa-solid fa-id-card"></i></div>
                <div class="option-title">Personal Information</div>
                <div class="option-desc">PII, health data, financial info</div>
              </label>
              <label class="option-card" onclick="selectOption(this, 'infoType', 'business')">
                <input type="radio" name="infoType" value="business">
                <div class="option-icon"><i class="fa-solid fa-briefcase"></i></div>
                <div class="option-title">Business Information</div>
                <div class="option-desc">Pricing, customers, strategies</div>
              </label>
            </div>
          </div>

          <!-- How Discovered -->
          <div class="form-group">
            <label class="form-label">How did you discover the breach? <span class="required">*</span></label>
            <div class="option-cards">
              <label class="option-card" onclick="selectOption(this, 'discovery', 'direct')">
                <input type="radio" name="discovery" value="direct">
                <div class="option-icon"><i class="fa-solid fa-eye"></i></div>
                <div class="option-title">Direct Observation</div>
                <div class="option-desc">You saw it yourself</div>
              </label>
              <label class="option-card" onclick="selectOption(this, 'discovery', 'third-party')">
                <input type="radio" name="discovery" value="third-party">
                <div class="option-icon"><i class="fa-solid fa-comment-dots"></i></div>
                <div class="option-title">Third Party Report</div>
                <div class="option-desc">Someone told you about it</div>
              </label>
              <label class="option-card" onclick="selectOption(this, 'discovery', 'media')">
                <input type="radio" name="discovery" value="media">
                <div class="option-icon"><i class="fa-solid fa-newspaper"></i></div>
                <div class="option-title">Media/Public Source</div>
                <div class="option-desc">News, social media, press</div>
              </label>
            </div>
          </div>

          <!-- Severity Slider -->
          <div class="form-group">
            <label class="form-label">Breach Severity Level</label>
            <div class="severity-slider-container">
              <input type="range" class="severity-slider" id="severitySlider" min="1" max="5" value="3" oninput="updateSeverity(this.value)">
              <div class="severity-labels">
                <span>Minor</span>
                <span>Moderate</span>
                <span>Significant</span>
                <span>Severe</span>
                <span>Critical</span>
              </div>
              <div class="severity-value medium" id="severityValue">Significant</div>
            </div>
            <p class="form-hint">Consider the scope, potential damages, and reversibility of the breach.</p>
          </div>
        </div>

        <div class="wizard-nav">
          <div></div>
          <button class="btn btn-primary" onclick="nextStep()">
            Continue to Evidence Checklist <i class="fa-solid fa-arrow-right"></i>
          </button>
        </div>
      </div>

      <!-- Step 2: Evidence Checklist -->
      <div class="step-panel" id="step2">
        <div class="panel-header">
          <h3><i class="fa-solid fa-clipboard-check"></i> Evidence Checklist Generator</h3>
          <span class="step-badge">Step 2 of 4</span>
        </div>
        <div class="panel-body">
          <p style="margin-bottom: 1.25rem; color: var(--gray-600); font-size: 0.9rem;">
            <i class="fa-solid fa-circle-info" style="color: var(--primary);"></i>
            Based on your breach assessment, here is a customized checklist of evidence you should gather. Check off items as you collect them.
          </p>

          <div id="evidenceChecklist">
            <!-- Dynamically populated -->
          </div>

          <div style="margin-top: 1.5rem; background: #fef3c7; border: 1px solid #f59e0b; border-radius: 10px; padding: 1rem;">
            <div style="display: flex; align-items: flex-start; gap: 10px;">
              <i class="fa-solid fa-triangle-exclamation" style="color: #b45309; margin-top: 2px;"></i>
              <div>
                <strong style="color: #92400e; font-size: 0.9rem;">Evidence Preservation Warning</strong>
                <p style="font-size: 0.8rem; color: #78350f; margin-top: 4px;">
                  Do NOT alter, delete, or modify any potential evidence. Take screenshots and make copies of everything. If you anticipate litigation, consider sending a litigation hold letter to the other party requiring them to preserve relevant documents.
                </p>
              </div>
            </div>
          </div>

          <div class="output-actions">
            <button class="output-btn" onclick="printChecklist()">
              <i class="fa-solid fa-print"></i> Print Checklist
            </button>
            <button class="output-btn" onclick="downloadChecklist()">
              <i class="fa-solid fa-download"></i> Download as TXT
            </button>
          </div>
        </div>

        <div class="wizard-nav">
          <button class="btn btn-secondary" onclick="prevStep()">
            <i class="fa-solid fa-arrow-left"></i> Back
          </button>
          <button class="btn btn-primary" onclick="nextStep()">
            Continue to Response Letter <i class="fa-solid fa-arrow-right"></i>
          </button>
        </div>
      </div>

      <!-- Step 3: Response Letter -->
      <div class="step-panel" id="step3">
        <div class="panel-header">
          <h3><i class="fa-solid fa-file-signature"></i> Response Letter Generator</h3>
          <span class="step-badge">Step 3 of 4</span>
        </div>
        <div class="panel-body">
          <!-- Letter Type Selection -->
          <div class="form-group">
            <label class="form-label">Select Letter Type</label>
            <div class="option-cards" style="grid-template-columns: repeat(2, 1fr);">
              <label class="option-card selected" onclick="selectOption(this, 'letterType', 'cease-desist'); generateLetter();">
                <input type="radio" name="letterType" value="cease-desist" checked>
                <div class="option-icon"><i class="fa-solid fa-hand"></i></div>
                <div class="option-title">Cease and Desist</div>
                <div class="option-desc">Demand they stop immediately</div>
              </label>
              <label class="option-card" onclick="selectOption(this, 'letterType', 'demand'); generateLetter();">
                <input type="radio" name="letterType" value="demand">
                <div class="option-icon"><i class="fa-solid fa-file-invoice-dollar"></i></div>
                <div class="option-title">Demand for Damages</div>
                <div class="option-desc">Include financial compensation</div>
              </label>
            </div>
          </div>

          <!-- Settlement Option -->
          <div class="form-group">
            <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
              <input type="checkbox" id="includeSettlement" onchange="generateLetter()" style="width: 18px; height: 18px; accent-color: var(--primary);">
              <span class="form-label" style="margin: 0;">Include settlement demand option</span>
            </label>
          </div>

          <!-- Damage Calculator -->
          <div class="form-group">
            <label class="form-label">Damage Calculation Worksheet</label>
            <div class="damage-calculator">
              <div class="damage-row">
                <span class="damage-label">Direct Financial Losses</span>
                <input type="number" class="damage-input" id="directLosses" placeholder="$0" oninput="calculateTotal()">
              </div>
              <div class="damage-row">
                <span class="damage-label">Lost Business/Revenue</span>
                <input type="number" class="damage-input" id="lostBusiness" placeholder="$0" oninput="calculateTotal()">
              </div>
              <div class="damage-row">
                <span class="damage-label">Remediation Costs</span>
                <input type="number" class="damage-input" id="remediation" placeholder="$0" oninput="calculateTotal()">
              </div>
              <div class="damage-row">
                <span class="damage-label">Reputational Damage (Est.)</span>
                <input type="number" class="damage-input" id="reputation" placeholder="$0" oninput="calculateTotal()">
              </div>
              <div class="damage-row">
                <span class="damage-label">Attorney Fees (if applicable)</span>
                <input type="number" class="damage-input" id="attorneyFees" placeholder="$0" oninput="calculateTotal()">
              </div>
              <div class="damage-total">
                <span class="damage-total-label">Total Claimed Damages</span>
                <span class="damage-total-value" id="totalDamages">$0</span>
              </div>
            </div>
          </div>

          <!-- Letter Preview -->
          <div class="form-group">
            <label class="form-label">Letter Preview</label>
            <div class="letter-preview" id="letterPreview">
              <!-- Dynamically generated -->
            </div>
          </div>

          <div class="output-actions">
            <button class="output-btn" onclick="copyLetter()">
              <i class="fa-solid fa-copy"></i> Copy to Clipboard
            </button>
            <button class="output-btn" onclick="window.print()">
              <i class="fa-solid fa-print"></i> Print Letter
            </button>
            <button class="output-btn" onclick="downloadLetter('txt')">
              <i class="fa-solid fa-file-lines"></i> Download .txt
            </button>
            <button class="output-btn" onclick="downloadLetter('docx')">
              <i class="fa-solid fa-file-word"></i> Download .docx
            </button>
          </div>
        </div>

        <div class="wizard-nav">
          <button class="btn btn-secondary" onclick="prevStep()">
            <i class="fa-solid fa-arrow-left"></i> Back
          </button>
          <button class="btn btn-primary" onclick="nextStep()">
            Continue to Escalation Path <i class="fa-solid fa-arrow-right"></i>
          </button>
        </div>
      </div>

      <!-- Step 4: Escalation Path -->
      <div class="step-panel" id="step4">
        <div class="panel-header">
          <h3><i class="fa-solid fa-route"></i> Escalation Path Advisor</h3>
          <span class="step-badge">Step 4 of 4</span>
        </div>
        <div class="panel-body">
          <p style="margin-bottom: 1.5rem; color: var(--gray-600); font-size: 0.9rem;">
            Based on your breach severity assessment, here are your escalation options from least to most aggressive.
          </p>

          <div class="escalation-timeline" id="escalationTimeline">
            <!-- Step 1: Informal -->
            <div class="timeline-item recommended">
              <div class="timeline-marker"><i class="fa-solid fa-comments"></i></div>
              <div class="timeline-content">
                <div class="timeline-title">1. Informal Resolution</div>
                <div class="timeline-desc">
                  Start with direct communication. Send a professional letter demanding they cease the breach, return/destroy materials, and provide written confirmation of compliance.
                </div>
                <div class="timeline-meta">
                  <span><i class="fa-solid fa-clock"></i> 1-2 weeks</span>
                  <span><i class="fa-solid fa-dollar-sign"></i> Minimal cost</span>
                  <span><i class="fa-solid fa-check-circle" style="color: var(--success);"></i> Recommended first step</span>
                </div>
              </div>
            </div>

            <!-- Step 2: Mediation -->
            <div class="timeline-item">
              <div class="timeline-marker"><i class="fa-solid fa-scale-balanced"></i></div>
              <div class="timeline-content">
                <div class="timeline-title">2. Mediation</div>
                <div class="timeline-desc">
                  A neutral third-party mediator helps both parties reach a voluntary agreement. Non-binding but often effective for business disputes where relationships matter.
                </div>
                <div class="timeline-meta">
                  <span><i class="fa-solid fa-clock"></i> 2-4 weeks</span>
                  <span><i class="fa-solid fa-dollar-sign"></i> $2,000-$10,000</span>
                  <span><i class="fa-solid fa-handshake"></i> Relationship-preserving</span>
                </div>
              </div>
            </div>

            <!-- Step 3: Arbitration -->
            <div class="timeline-item" id="arbitrationStep">
              <div class="timeline-marker"><i class="fa-solid fa-gavel"></i></div>
              <div class="timeline-content">
                <div class="timeline-title">3. Arbitration</div>
                <div class="timeline-desc">
                  <strong style="color: var(--warning);">Check your NDA:</strong> Many NDAs require arbitration before litigation. A private arbitrator hears evidence and issues a binding decision.
                </div>
                <div class="timeline-meta">
                  <span><i class="fa-solid fa-clock"></i> 2-6 months</span>
                  <span><i class="fa-solid fa-dollar-sign"></i> $10,000-$50,000</span>
                  <span><i class="fa-solid fa-lock"></i> Private & confidential</span>
                </div>
              </div>
            </div>

            <!-- Step 4: Litigation -->
            <div class="timeline-item">
              <div class="timeline-marker"><i class="fa-solid fa-landmark"></i></div>
              <div class="timeline-content">
                <div class="timeline-title">4. Litigation</div>
                <div class="timeline-desc">
                  File a lawsuit in civil court. Pursue injunctive relief (emergency order to stop the breach) and/or monetary damages. Most powerful option but also most expensive and time-consuming.
                </div>
                <div class="timeline-meta">
                  <span><i class="fa-solid fa-clock"></i> 1-3 years</span>
                  <span><i class="fa-solid fa-dollar-sign"></i> $50,000-$500,000+</span>
                  <span><i class="fa-solid fa-building-columns"></i> Public record</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Cost Summary -->
          <div style="background: var(--gray-50); border-radius: 12px; padding: 1.25rem; margin-top: 1.5rem;">
            <h4 style="font-size: 0.95rem; font-weight: 700; color: var(--dark); margin-bottom: 1rem; display: flex; align-items: center; gap: 8px;">
              <i class="fa-solid fa-calculator"></i> Litigation Cost Estimate
            </h4>
            <div id="costSummary" style="font-size: 0.85rem; color: var(--gray-600);">
              <!-- Dynamically calculated based on severity -->
            </div>
          </div>
        </div>

        <div class="wizard-nav">
          <button class="btn btn-secondary" onclick="prevStep()">
            <i class="fa-solid fa-arrow-left"></i> Back
          </button>
          <button class="btn btn-success" onclick="finishWizard()">
            <i class="fa-solid fa-check"></i> Complete & Download Summary
          </button>
        </div>
      </div>
    </div>

    <!-- Help Sidebar -->
    <div class="help-sidebar">
      <div class="help-card">
        <div class="help-card-header">
          <i class="fa-solid fa-lightbulb"></i>
          <h4>Helpful Tips</h4>
        </div>
        <div class="help-card-body" id="helpContent">
          <div class="help-tip">
            <i class="fa-solid fa-circle-check"></i>
            <p>Act quickly after discovering a breach. Delays can hurt your legal position and allow further damage.</p>
          </div>
          <div class="help-tip">
            <i class="fa-solid fa-circle-check"></i>
            <p>Document everything with timestamps. Screenshots, emails, and witness statements are all valuable.</p>
          </div>
          <div class="help-tip">
            <i class="fa-solid fa-circle-check"></i>
            <p>Review your NDA for specific breach notification requirements and remedies provisions.</p>
          </div>
        </div>
      </div>

      <div class="attorney-cta">
        <h4>Need Legal Help?</h4>
        <p>Get a CA-licensed attorney to review your case</p>
        <a href="mailto:owner@terms.law?subject=NDA Breach Consultation">
          <i class="fa-solid fa-envelope"></i> Contact Attorney
        </a>
      </div>
    </div>
  </div>
</main>

<!-- Floating Help Button -->
<div class="floating-help" id="floatingHelp">
  <div class="floating-help-popup">
    <div class="floating-help-popup-header">
      <h4><i class="fa-solid fa-circle-question"></i> Contextual Help</h4>
      <button onclick="toggleFloatingHelp()"><i class="fa-solid fa-xmark"></i></button>
    </div>
    <div class="floating-help-popup-body" id="floatingHelpContent">
      <!-- Content changes based on current step -->
    </div>
  </div>
  <button class="floating-help-btn" onclick="toggleFloatingHelp()">
    <i class="fa-solid fa-question"></i>
  </button>
</div>

<!-- Toast -->
<div class="toast" id="toast">
  <i class="fa-solid fa-check-circle"></i>
  <span id="toastMessage">Copied to clipboard!</span>
</div>

<!-- Footer -->
<footer class="footer">
  <div class="footer-inner">
    <div>&copy; 2025 Terms.Law &mdash; Sergei Tokmakov, Esq. &bull; CA Bar #279869</div>
    <div class="footer-links">
      <a href="/NDA/">NDA Studio</a>
      <a href="/NDA/tools/">All Tools</a>
      <a href="mailto:owner@terms.law">Contact</a>
    </div>
  </div>
</footer>

<!-- Chat Widget -->
<script src="/chat-widget/chat-widget.js"></script>

<script>
  // State Management
  let currentStep = 1;
  const totalSteps = 4;

  const assessmentData = {
    breachType: null,
    breacher: null,
    infoType: null,
    discovery: null,
    severity: 3
  };

  // Evidence checklist templates based on breach type
  const evidenceTemplates = {
    'disclosure': [
      { text: 'Screenshots of disclosed information', hint: 'Capture where the info appeared', priority: 'essential' },
      { text: 'Communications showing disclosure', hint: 'Emails, messages, social media posts', priority: 'essential' },
      { text: 'Witness statements', hint: 'Anyone who saw or received the info', priority: 'important' },
      { text: 'Timeline of events', hint: 'When you shared, when they disclosed', priority: 'essential' },
      { text: 'Copy of original NDA', hint: 'Signed version with all exhibits', priority: 'essential' },
      { text: 'Evidence of confidential marking', hint: 'Did you mark info as confidential?', priority: 'important' },
      { text: 'Proof of ownership/trade secret status', hint: 'Documentation of your proprietary rights', priority: 'important' },
      { text: 'Third party confirmations', hint: 'Statements from recipients of leaked info', priority: 'helpful' }
    ],
    'misuse': [
      { text: 'Evidence of unauthorized use', hint: 'Products, marketing, business activities', priority: 'essential' },
      { text: 'Comparison of your info to their use', hint: 'Side-by-side documentation', priority: 'essential' },
      { text: 'Documentation of permitted purpose', hint: 'What the NDA allowed vs. what they did', priority: 'essential' },
      { text: 'Copy of original NDA', hint: 'Signed version with purpose limitations', priority: 'essential' },
      { text: 'Business records showing their use', hint: 'Sales, customers, revenue from misuse', priority: 'important' },
      { text: 'Expert analysis', hint: 'Technical comparison if applicable', priority: 'helpful' },
      { text: 'Witness statements', hint: 'Employees or partners who observed misuse', priority: 'important' },
      { text: 'Timeline of misuse discovery', hint: 'When and how you found out', priority: 'important' }
    ],
    'access': [
      { text: 'Access logs and audit trails', hint: 'System records of unauthorized access', priority: 'essential' },
      { text: 'Security incident reports', hint: 'Internal documentation of breach', priority: 'essential' },
      { text: 'Evidence of access permissions', hint: 'What they were authorized to access', priority: 'essential' },
      { text: 'Copy of original NDA', hint: 'With access limitations specified', priority: 'essential' },
      { text: 'Forensic analysis report', hint: 'Technical investigation findings', priority: 'important' },
      { text: 'Screenshots of unauthorized activity', hint: 'Captured evidence of access', priority: 'important' },
      { text: 'IP address logs', hint: 'Geographic/device identification', priority: 'helpful' },
      { text: 'Witness statements', hint: 'IT staff or others who detected access', priority: 'helpful' }
    ]
  };

  // Additional evidence based on info type
  const infoTypeEvidence = {
    'trade-secrets': [
      { text: 'Trade secret identification document', hint: 'List of what constitutes your trade secrets', priority: 'essential' },
      { text: 'Security measures documentation', hint: 'How you protect trade secrets', priority: 'important' },
      { text: 'Employee confidentiality agreements', hint: 'Others bound to secrecy', priority: 'helpful' }
    ],
    'personal': [
      { text: 'Data inventory of exposed PII', hint: 'Names, SSNs, financial info, etc.', priority: 'essential' },
      { text: 'Notification requirements checklist', hint: 'State/federal breach notice laws', priority: 'important' },
      { text: 'Affected individuals list', hint: 'Who was impacted', priority: 'essential' }
    ],
    'business': [
      { text: 'Business impact assessment', hint: 'Lost deals, competitive harm', priority: 'essential' },
      { text: 'Customer/client notifications', hint: 'If customers were affected', priority: 'important' },
      { text: 'Competitive analysis', hint: 'How breach benefits them', priority: 'helpful' }
    ]
  };

  // Step Navigation
  function goToStep(step) {
    if (step < 1 || step > totalSteps) return;
    if (step > currentStep + 1) return; // Can't skip ahead

    // Validate current step before moving forward
    if (step > currentStep && !validateStep(currentStep)) {
      return;
    }

    currentStep = step;
    updateUI();
  }

  function nextStep() {
    if (currentStep < totalSteps) {
      if (!validateStep(currentStep)) return;
      currentStep++;
      updateUI();
    }
  }

  function prevStep() {
    if (currentStep > 1) {
      currentStep--;
      updateUI();
    }
  }

  function validateStep(step) {
    if (step === 1) {
      if (!assessmentData.breachType) {
        showToast('Please select the type of breach', 'error');
        return false;
      }
      if (!assessmentData.breacher) {
        showToast('Please select who committed the breach', 'error');
        return false;
      }
      if (!assessmentData.infoType) {
        showToast('Please select what type of information was exposed', 'error');
        return false;
      }
      if (!assessmentData.discovery) {
        showToast('Please select how you discovered the breach', 'error');
        return false;
      }
    }
    return true;
  }

  function updateUI() {
    // Update progress steps
    document.querySelectorAll('.progress-step').forEach((el, idx) => {
      el.classList.remove('active', 'completed');
      if (idx + 1 < currentStep) {
        el.classList.add('completed');
      } else if (idx + 1 === currentStep) {
        el.classList.add('active');
      }
    });

    // Show current step panel
    document.querySelectorAll('.step-panel').forEach((panel, idx) => {
      panel.classList.remove('active');
      if (idx + 1 === currentStep) {
        panel.classList.add('active');
      }
    });

    // Update content based on step
    if (currentStep === 2) {
      generateEvidenceChecklist();
    } else if (currentStep === 3) {
      generateLetter();
    } else if (currentStep === 4) {
      generateEscalationAdvice();
    }

    // Update floating help
    updateFloatingHelp();

    // Scroll to top of wizard
    document.querySelector('.wizard-container').scrollIntoView({ behavior: 'smooth', block: 'start' });
  }

  // Option Selection
  function selectOption(element, field, value) {
    // Remove selected from siblings
    const parent = element.closest('.option-cards');
    parent.querySelectorAll('.option-card').forEach(card => card.classList.remove('selected'));

    // Select this one
    element.classList.add('selected');
    element.querySelector('input').checked = true;

    // Store value
    assessmentData[field] = value;
  }

  // Severity Slider
  function updateSeverity(value) {
    assessmentData.severity = parseInt(value);
    const labels = ['Minor', 'Moderate', 'Significant', 'Severe', 'Critical'];
    const classes = ['low', 'medium', 'medium', 'high', 'critical'];

    const el = document.getElementById('severityValue');
    el.textContent = labels[value - 1];
    el.className = 'severity-value ' + classes[value - 1];
  }

  // Evidence Checklist Generation
  function generateEvidenceChecklist() {
    const container = document.getElementById('evidenceChecklist');
    let items = [];

    // Add breach-type specific evidence
    if (assessmentData.breachType && evidenceTemplates[assessmentData.breachType]) {
      items = items.concat(evidenceTemplates[assessmentData.breachType]);
    }

    // Add info-type specific evidence
    if (assessmentData.infoType && infoTypeEvidence[assessmentData.infoType]) {
      items = items.concat(infoTypeEvidence[assessmentData.infoType]);
    }

    // Add universal items
    items.push(
      { text: 'Documentation of damages', hint: 'Financial losses, costs incurred', priority: 'essential' },
      { text: 'Communications with breaching party', hint: 'Any correspondence about the breach', priority: 'important' }
    );

    // Sort by priority
    const priorityOrder = { 'essential': 0, 'important': 1, 'helpful': 2 };
    items.sort((a, b) => priorityOrder[a.priority] - priorityOrder[b.priority]);

    container.innerHTML = `
      <ul class="checklist">
        ${items.map((item, idx) => `
          <li class="checklist-item" id="checkItem${idx}">
            <input type="checkbox" id="check${idx}" onchange="toggleCheckItem(${idx})">
            <div class="checklist-content">
              <div class="checklist-text">${item.text}</div>
              <div class="checklist-hint">${item.hint}</div>
            </div>
            <span class="checklist-priority ${item.priority}">${item.priority}</span>
          </li>
        `).join('')}
      </ul>
    `;
  }

  function toggleCheckItem(idx) {
    const item = document.getElementById('checkItem' + idx);
    const checkbox = document.getElementById('check' + idx);
    if (checkbox.checked) {
      item.classList.add('checked');
    } else {
      item.classList.remove('checked');
    }
  }

  // Letter Generation
  function generateLetter() {
    const letterType = document.querySelector('input[name="letterType"]:checked')?.value || 'cease-desist';
    const includeSettlement = document.getElementById('includeSettlement')?.checked || false;

    const breachTypeLabels = {
      'disclosure': 'unauthorized disclosure of confidential information',
      'misuse': 'misuse of confidential information beyond the permitted purpose',
      'access': 'unauthorized access to confidential systems and data'
    };

    const infoTypeLabels = {
      'trade-secrets': 'trade secrets and proprietary information',
      'personal': 'personal and private information',
      'business': 'confidential business information'
    };

    const today = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
    const totalDamages = document.getElementById('totalDamages')?.textContent || '$0';

    let letter = '';

    if (letterType === 'cease-desist') {
      letter = `
        <div class="letter-header">
          <h4>Cease and Desist Notice</h4>
          <p>Confidential - Attorney-Client Privileged</p>
        </div>
        <div class="letter-section">
          <p>${today}</p>
          <p>
            <span class="placeholder">[Recipient Name]</span><br>
            <span class="placeholder">[Recipient Address]</span><br>
            <span class="placeholder">[City, State ZIP]</span>
          </p>
        </div>
        <div class="letter-section">
          <p><strong>RE: CEASE AND DESIST - Breach of Non-Disclosure Agreement</strong></p>
        </div>
        <div class="letter-section">
          <p>Dear <span class="placeholder">[Recipient Name]</span>:</p>
          <p>I am writing on behalf of <span class="placeholder">[Your Name/Company]</span> regarding your ${breachTypeLabels[assessmentData.breachType] || 'breach'} in violation of the Non-Disclosure Agreement ("NDA") executed between our parties on <span class="placeholder">[NDA Date]</span>.</p>
          <p>Specifically, we have discovered that you have ${breachTypeLabels[assessmentData.breachType] || 'violated the terms of the NDA'}, which included ${infoTypeLabels[assessmentData.infoType] || 'confidential information'}. This conduct constitutes a material breach of the NDA and potentially violates applicable trade secret and privacy laws.</p>
        </div>
        <div class="letter-section">
          <p><strong>DEMAND:</strong> You are hereby demanded to:</p>
          <p>1. <strong>IMMEDIATELY CEASE</strong> all further disclosure, use, or access of any confidential information covered by the NDA;</p>
          <p>2. <strong>RETURN OR DESTROY</strong> all confidential information, documents, files, and copies in your possession within ten (10) calendar days, and provide written certification of destruction;</p>
          <p>3. <strong>IDENTIFY</strong> all third parties to whom you disclosed confidential information, and take immediate steps to retrieve such information;</p>
          <p>4. <strong>PROVIDE WRITTEN CONFIRMATION</strong> of your compliance with these demands within ten (10) calendar days.</p>
        </div>
        ${includeSettlement ? `
        <div class="letter-section">
          <p><strong>SETTLEMENT OPPORTUNITY:</strong></p>
          <p>We are prepared to resolve this matter without litigation if you promptly comply with the above demands and pay ${totalDamages !== '$0' ? totalDamages : '<span class="placeholder">[$X,XXX]</span>'} as compensation for damages incurred. This offer remains open for fifteen (15) calendar days from the date of this letter.</p>
        </div>
        ` : ''}
        <div class="letter-section">
          <p>Failure to comply with these demands will result in <span class="placeholder">[Your Name/Company]</span> pursuing all available legal remedies, including but not limited to: (1) seeking injunctive relief in court to prevent further breaches; (2) filing suit for monetary damages including actual damages, consequential damages, attorney fees, and any other relief permitted under the NDA and applicable law; and (3) reporting violations to appropriate regulatory authorities if applicable.</p>
          <p>This letter is not intended as a complete statement of the facts or law related to this matter, and all rights and remedies are expressly reserved.</p>
        </div>
        <div class="letter-section">
          <p>Govern yourself accordingly.</p>
          <p style="margin-top: 2rem;">
            Sincerely,<br><br><br>
            _______________________________<br>
            <span class="placeholder">[Your Name]</span><br>
            <span class="placeholder">[Your Title]</span><br>
            <span class="placeholder">[Your Company]</span><br>
            <span class="placeholder">[Your Email]</span><br>
            <span class="placeholder">[Your Phone]</span>
          </p>
        </div>
      `;
    } else {
      letter = `
        <div class="letter-header">
          <h4>Demand for Damages</h4>
          <p>Confidential - Settlement Communication</p>
        </div>
        <div class="letter-section">
          <p>${today}</p>
          <p>
            <span class="placeholder">[Recipient Name]</span><br>
            <span class="placeholder">[Recipient Address]</span><br>
            <span class="placeholder">[City, State ZIP]</span>
          </p>
        </div>
        <div class="letter-section">
          <p><strong>RE: DEMAND FOR DAMAGES - Breach of Non-Disclosure Agreement</strong></p>
        </div>
        <div class="letter-section">
          <p>Dear <span class="placeholder">[Recipient Name]</span>:</p>
          <p>I represent <span class="placeholder">[Your Name/Company]</span> in connection with your material breach of the Non-Disclosure Agreement ("NDA") dated <span class="placeholder">[NDA Date]</span>.</p>
          <p>As a result of your ${breachTypeLabels[assessmentData.breachType] || 'breach'} involving ${infoTypeLabels[assessmentData.infoType] || 'confidential information'}, my client has suffered significant damages.</p>
        </div>
        <div class="letter-section">
          <p><strong>DAMAGES CALCULATION:</strong></p>
          <p>Based on our preliminary assessment, my client has incurred the following damages as a direct and proximate result of your breach:</p>
          <ul style="margin-left: 2rem; margin-bottom: 1rem;">
            <li>Direct Financial Losses: <span class="placeholder">[Amount]</span></li>
            <li>Lost Business Opportunities: <span class="placeholder">[Amount]</span></li>
            <li>Remediation and Mitigation Costs: <span class="placeholder">[Amount]</span></li>
            <li>Reputational Harm: <span class="placeholder">[Amount]</span></li>
            <li>Anticipated Attorney Fees: <span class="placeholder">[Amount]</span></li>
          </ul>
          <p><strong>Total Damages Claimed: ${totalDamages !== '$0' ? totalDamages : '<span class="placeholder">[$X,XXX]</span>'}</strong></p>
        </div>
        <div class="letter-section">
          <p><strong>DEMAND:</strong></p>
          <p>Demand is hereby made that you:</p>
          <p>1. Pay ${totalDamages !== '$0' ? totalDamages : '<span class="placeholder">[$X,XXX]</span>'} in damages within twenty (20) calendar days;</p>
          <p>2. Immediately cease all further use, disclosure, or access of confidential information;</p>
          <p>3. Return or certify destruction of all confidential materials;</p>
          <p>4. Provide an accounting of all disclosures made and parties who received confidential information.</p>
        </div>
        ${includeSettlement ? `
        <div class="letter-section">
          <p><strong>SETTLEMENT OFFER:</strong></p>
          <p>In the interest of resolving this matter efficiently, my client is prepared to accept a reduced settlement of <span class="placeholder">[Settlement Amount - typically 60-80% of damages]</span> if paid within fifteen (15) calendar days and accompanied by full compliance with the non-monetary demands above. This offer expires on <span class="placeholder">[Date]</span> and will not be extended.</p>
        </div>
        ` : ''}
        <div class="letter-section">
          <p>If we do not receive satisfactory response within the time specified, we are prepared to file suit seeking all available remedies including compensatory damages, punitive damages where applicable, injunctive relief, attorney fees, and costs. This letter is sent in accordance with applicable rules regarding settlement communications and is inadmissible as evidence of liability.</p>
          <p>All rights are expressly reserved.</p>
        </div>
        <div class="letter-section">
          <p style="margin-top: 2rem;">
            Very truly yours,<br><br><br>
            _______________________________<br>
            <span class="placeholder">[Your Name]</span><br>
            <span class="placeholder">[Your Title]</span><br>
            <span class="placeholder">[Contact Information]</span>
          </p>
        </div>
      `;
    }

    document.getElementById('letterPreview').innerHTML = letter;
  }

  // Damage Calculator
  function calculateTotal() {
    const direct = parseFloat(document.getElementById('directLosses').value) || 0;
    const lost = parseFloat(document.getElementById('lostBusiness').value) || 0;
    const remediation = parseFloat(document.getElementById('remediation').value) || 0;
    const reputation = parseFloat(document.getElementById('reputation').value) || 0;
    const attorney = parseFloat(document.getElementById('attorneyFees').value) || 0;

    const total = direct + lost + remediation + reputation + attorney;
    document.getElementById('totalDamages').textContent = '$' + total.toLocaleString();

    // Regenerate letter with new damages
    generateLetter();
  }

  // Escalation Advice
  function generateEscalationAdvice() {
    const severity = assessmentData.severity;
    let recommendation = '';
    let costEstimate = '';

    if (severity <= 2) {
      recommendation = 'For minor breaches, informal resolution is typically most cost-effective. A strongly-worded demand letter often resolves the issue without further escalation.';
      costEstimate = `
        <p><strong>Recommended approach:</strong> Informal Resolution</p>
        <p>Estimated cost: $0 - $2,000 (if you engage an attorney for the letter)</p>
        <p>Expected timeline: 2-4 weeks for resolution</p>
      `;
    } else if (severity === 3) {
      recommendation = 'For significant breaches, start with a formal demand letter but prepare for mediation or arbitration if the other party is unresponsive.';
      costEstimate = `
        <p><strong>Recommended approach:</strong> Formal Demand + Potential Mediation</p>
        <p>Demand letter: $500 - $2,500</p>
        <p>Mediation (if needed): $3,000 - $15,000</p>
        <p>Expected timeline: 1-3 months for resolution</p>
      `;
    } else if (severity === 4) {
      recommendation = 'Severe breaches may require aggressive action. Consider seeking emergency injunctive relief to stop ongoing harm while pursuing damages.';
      costEstimate = `
        <p><strong>Recommended approach:</strong> Injunctive Relief + Damages Claim</p>
        <p>TRO/Preliminary injunction: $15,000 - $50,000</p>
        <p>Full litigation (if needed): $75,000 - $250,000</p>
        <p>Expected timeline: 6-18 months for resolution</p>
      `;
    } else {
      recommendation = 'Critical breaches involving trade secrets or extensive damages warrant immediate legal action. Consider both civil remedies and potential criminal referral if applicable.';
      costEstimate = `
        <p><strong>Recommended approach:</strong> Full Litigation + Criminal Referral</p>
        <p>Emergency injunction: $25,000 - $75,000</p>
        <p>Trade secret litigation: $150,000 - $500,000+</p>
        <p>Potential recovery: Treble damages + attorney fees under trade secret laws</p>
        <p>Expected timeline: 1-3 years for resolution</p>
      `;
    }

    document.getElementById('costSummary').innerHTML = `
      <p style="margin-bottom: 0.75rem;">${recommendation}</p>
      <div style="background: white; border-radius: 8px; padding: 1rem; margin-top: 0.75rem;">
        ${costEstimate}
      </div>
    `;

    // Highlight recommended step in timeline
    const steps = document.querySelectorAll('.timeline-item');
    steps.forEach((step, idx) => {
      step.classList.remove('active', 'recommended');
      if (severity <= 2 && idx === 0) step.classList.add('recommended');
      else if (severity === 3 && idx === 1) step.classList.add('recommended');
      else if (severity === 4 && idx === 3) step.classList.add('recommended');
      else if (severity >= 5 && idx === 3) step.classList.add('recommended');
    });
  }

  // Floating Help
  function toggleFloatingHelp() {
    document.getElementById('floatingHelp').classList.toggle('open');
  }

  function updateFloatingHelp() {
    const helpContent = document.getElementById('floatingHelpContent');
    const stepHelp = {
      1: `
        <div class="help-section">
          <h5><i class="fa-solid fa-clipboard-question"></i> Breach Assessment Tips</h5>
          <p>Be specific about what happened. The more accurately you characterize the breach, the more tailored your response will be.</p>
        </div>
        <div class="help-section">
          <h5><i class="fa-solid fa-scale-balanced"></i> Severity Guidelines</h5>
          <p><strong>Minor:</strong> Limited scope, easily contained<br>
          <strong>Moderate:</strong> Some business impact<br>
          <strong>Significant:</strong> Material harm to business<br>
          <strong>Severe:</strong> Major competitive damage<br>
          <strong>Critical:</strong> Catastrophic loss of trade secrets</p>
        </div>
      `,
      2: `
        <div class="help-section">
          <h5><i class="fa-solid fa-folder-open"></i> Evidence Best Practices</h5>
          <p>Preserve everything in its original form. Use screenshots with visible timestamps. Create backup copies stored securely.</p>
        </div>
        <div class="help-section">
          <h5><i class="fa-solid fa-clock"></i> Time Sensitivity</h5>
          <p>Many jurisdictions have statutes of limitations for trade secret claims. Document evidence as soon as possible.</p>
        </div>
      `,
      3: `
        <div class="help-section">
          <h5><i class="fa-solid fa-envelope"></i> Letter Delivery</h5>
          <p>Send via certified mail with return receipt. Keep copies of everything. Consider having an attorney review before sending.</p>
        </div>
        <div class="help-section">
          <h5><i class="fa-solid fa-calculator"></i> Damage Calculation</h5>
          <p>Be conservative in your estimates. Overstating damages can hurt your credibility. Document the basis for each figure.</p>
        </div>
      `,
      4: `
        <div class="help-section">
          <h5><i class="fa-solid fa-route"></i> Escalation Strategy</h5>
          <p>Start with the least aggressive option and escalate only if necessary. This demonstrates good faith and may look favorable to a judge.</p>
        </div>
        <div class="help-section">
          <h5><i class="fa-solid fa-gavel"></i> Check Your NDA</h5>
          <p>Review your NDA for mandatory arbitration clauses, choice of law provisions, and specific remedy procedures before taking action.</p>
        </div>
      `
    };

    helpContent.innerHTML = stepHelp[currentStep] || '';
  }

  // Output Functions
  function copyLetter() {
    const letterText = document.getElementById('letterPreview').innerText;
    navigator.clipboard.writeText(letterText).then(() => {
      showToast('Letter copied to clipboard!', 'success');
    });
  }

  function downloadLetter(format) {
    const letterText = document.getElementById('letterPreview').innerText;
    const filename = 'nda-breach-response-letter';

    if (format === 'txt') {
      const blob = new Blob([letterText], { type: 'text/plain' });
      downloadBlob(blob, filename + '.txt');
    } else if (format === 'docx') {
      // Simple RTF format that Word can open
      const rtf = `{\\rtf1\\ansi\\deff0 {\\fonttbl{\\f0 Georgia;}}\n\\f0\\fs24 ${letterText.replace(/\n/g, '\\par\n')}}`;
      const blob = new Blob([rtf], { type: 'application/rtf' });
      downloadBlob(blob, filename + '.rtf');
      showToast('Downloaded as RTF (opens in Word)', 'success');
    }
  }

  function downloadBlob(blob, filename) {
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  }

  function printChecklist() {
    window.print();
  }

  function downloadChecklist() {
    const checklistItems = document.querySelectorAll('.checklist-item');
    let text = 'NDA BREACH RESPONSE - EVIDENCE CHECKLIST\n';
    text += '==========================================\n\n';
    text += 'Generated: ' + new Date().toLocaleDateString() + '\n\n';

    checklistItems.forEach((item, idx) => {
      const checkbox = item.querySelector('input[type="checkbox"]');
      const textEl = item.querySelector('.checklist-text');
      const hintEl = item.querySelector('.checklist-hint');
      const status = checkbox.checked ? '[X]' : '[ ]';
      text += `${status} ${textEl.textContent}\n`;
      text += `    ${hintEl.textContent}\n\n`;
    });

    const blob = new Blob([text], { type: 'text/plain' });
    downloadBlob(blob, 'evidence-checklist.txt');
    showToast('Checklist downloaded!', 'success');
  }

  function finishWizard() {
    // Generate complete summary
    let summary = 'NDA BREACH RESPONSE SUMMARY\n';
    summary += '============================\n';
    summary += 'Generated: ' + new Date().toLocaleString() + '\n\n';

    summary += 'BREACH ASSESSMENT:\n';
    summary += '- Type: ' + (assessmentData.breachType || 'Not specified') + '\n';
    summary += '- Breacher: ' + (assessmentData.breacher || 'Not specified') + '\n';
    summary += '- Information Type: ' + (assessmentData.infoType || 'Not specified') + '\n';
    summary += '- Discovery Method: ' + (assessmentData.discovery || 'Not specified') + '\n';
    summary += '- Severity: ' + assessmentData.severity + '/5\n\n';

    summary += 'CLAIMED DAMAGES: ' + (document.getElementById('totalDamages')?.textContent || '$0') + '\n\n';

    summary += 'RESPONSE LETTER:\n';
    summary += document.getElementById('letterPreview')?.innerText || 'Not generated';

    const blob = new Blob([summary], { type: 'text/plain' });
    downloadBlob(blob, 'breach-response-summary.txt');
    showToast('Complete summary downloaded!', 'success');
  }

  // Toast Notification
  function showToast(message, type = 'success') {
    const toast = document.getElementById('toast');
    const toastMessage = document.getElementById('toastMessage');
    toastMessage.textContent = message;
    toast.className = 'toast show ' + type;

    setTimeout(() => {
      toast.classList.remove('show');
    }, 3000);
  }

  // Initialize
  document.addEventListener('DOMContentLoaded', function() {
    updateFloatingHelp();
    generateLetter();
  });
</script>

</body>
</html>
