<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Demand Letter ROI Calculator | Is It Worth It? | Terms.Law</title>
  <meta name="description" content="Free calculator to determine if hiring a lawyer for a demand letter makes financial sense for your case. See expected outcomes, costs, and risks.">

  <!-- Open Graph -->
  <meta property="og:title" content="Demand Letter Calculator - Is It Worth Hiring a Lawyer?">
  <meta property="og:description" content="Interactive calculator showing expected outcomes, costs, and whether a demand letter makes sense for your dispute.">
  <meta property="og:type" content="website">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-901N2Y3CDZ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-901N2Y3CDZ');
  </script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root {
      --color-primary: #2563eb;
      --color-primary-dark: #1d4ed8;
      --color-success: #10b981;
      --color-success-light: #d1fae5;
      --color-warning: #f59e0b;
      --color-warning-light: #fef3c7;
      --color-danger: #ef4444;
      --color-danger-light: #fee2e2;
      --color-bg: #f8fafc;
      --color-surface: #ffffff;
      --color-border: #e2e8f0;
      --color-text: #0f172a;
      --color-text-secondary: #475569;
      --color-text-muted: #94a3b8;
      --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: var(--font-sans);
      font-size: 16px;
      line-height: 1.6;
      color: var(--color-text);
      background: var(--color-bg);
      min-height: 100vh;
    }

    .container { max-width: 900px; margin: 0 auto; padding: 0 1rem; }

    /* Header */
    .site-header {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      padding: 1rem 0;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    .site-header .container {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .logo {
      font-size: 1.5rem;
      font-weight: 700;
      color: white;
      text-decoration: none;
    }
    .logo span { color: #60a5fa; }
    .header-cta {
      background: linear-gradient(135deg, #2563eb, #7c3aed);
      color: white;
      padding: 0.5rem 1.25rem;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 600;
      font-size: 0.9rem;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .header-cta:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.4);
    }

    /* Hero */
    .hero {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #312e81 100%);
      color: white;
      padding: 2.5rem 0 3rem;
      text-align: center;
    }
    .hero h1 {
      font-size: 2rem;
      font-weight: 800;
      margin-bottom: 0.75rem;
      line-height: 1.2;
    }
    .hero p {
      font-size: 1.1rem;
      color: rgba(255,255,255,0.8);
      max-width: 600px;
      margin: 0 auto;
    }

    /* Calculator Card */
    .calc-card {
      background: white;
      border-radius: 16px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.1);
      margin: -2rem auto 2rem;
      max-width: 850px;
      overflow: hidden;
    }

    /* Progress Steps */
    .progress-bar {
      display: flex;
      background: #f1f5f9;
      border-bottom: 1px solid var(--color-border);
    }
    .progress-step {
      flex: 1;
      padding: 1rem;
      text-align: center;
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--color-text-muted);
      position: relative;
      cursor: pointer;
      transition: all 0.2s;
    }
    .progress-step.active {
      color: var(--color-primary);
      background: white;
    }
    .progress-step.completed {
      color: var(--color-success);
    }
    .progress-step::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: transparent;
    }
    .progress-step.active::after {
      background: var(--color-primary);
    }
    .progress-step.completed::after {
      background: var(--color-success);
    }
    .step-num {
      display: inline-flex;
      width: 24px;
      height: 24px;
      align-items: center;
      justify-content: center;
      background: #e2e8f0;
      border-radius: 50%;
      font-size: 0.75rem;
      margin-right: 0.5rem;
    }
    .progress-step.active .step-num {
      background: var(--color-primary);
      color: white;
    }
    .progress-step.completed .step-num {
      background: var(--color-success);
      color: white;
    }

    /* Sections */
    .calc-section {
      padding: 2rem;
      display: none;
    }
    .calc-section.active {
      display: block;
    }
    .section-title {
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      color: var(--color-text);
    }
    .section-subtitle {
      font-size: 0.9rem;
      color: var(--color-text-secondary);
      margin-bottom: 1.5rem;
    }

    /* Legal Insight Box - Progressive Analysis */
    .legal-insight {
      background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
      border: 1px solid #bfdbfe;
      border-radius: 12px;
      padding: 1.25rem;
      margin-bottom: 1.5rem;
      display: none;
    }
    .legal-insight.visible {
      display: block;
    }
    .legal-insight-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.75rem;
    }
    .legal-insight-icon {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #2563eb;
      border-radius: 8px;
      font-size: 1rem;
    }
    .legal-insight-title {
      font-size: 0.9rem;
      font-weight: 700;
      color: #1e40af;
    }
    .legal-insight-content {
      font-size: 0.85rem;
      color: #1e3a5f;
      line-height: 1.6;
    }
    .legal-insight-content strong {
      color: #1e40af;
    }
    .legal-insight-link {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      font-size: 0.8rem;
      font-weight: 600;
      color: #2563eb;
      margin-top: 0.75rem;
      text-decoration: none;
    }
    .legal-insight-link:hover {
      text-decoration: underline;
    }

    /* Form Elements */
    .form-group {
      margin-bottom: 1.5rem;
    }
    .form-label {
      display: block;
      font-weight: 600;
      font-size: 0.95rem;
      margin-bottom: 0.5rem;
      color: var(--color-text);
    }
    .form-label .tooltip-trigger {
      display: inline-flex;
      width: 18px;
      height: 18px;
      align-items: center;
      justify-content: center;
      background: #e2e8f0;
      border-radius: 50%;
      font-size: 0.7rem;
      color: var(--color-text-muted);
      cursor: help;
      margin-left: 0.5rem;
      position: relative;
    }
    .form-label .tooltip-trigger:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: calc(100% + 8px);
      left: 50%;
      transform: translateX(-50%);
      background: #1e293b;
      color: white;
      padding: 0.5rem 0.75rem;
      border-radius: 6px;
      font-size: 0.8rem;
      font-weight: 400;
      white-space: nowrap;
      max-width: 280px;
      white-space: normal;
      z-index: 100;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    /* Amount Input */
    .amount-input-wrap {
      position: relative;
    }
    .amount-input-wrap::before {
      content: '$';
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--color-text-muted);
    }
    .amount-input {
      width: 100%;
      padding: 1rem 1rem 1rem 2.5rem;
      font-size: 1.5rem;
      font-weight: 700;
      border: 2px solid var(--color-border);
      border-radius: 12px;
      font-family: var(--font-sans);
      transition: border-color 0.2s;
    }
    .amount-input:focus {
      outline: none;
      border-color: var(--color-primary);
    }

    /* Category Tiles */
    .category-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.75rem;
    }
    .category-tile {
      padding: 1rem;
      border: 2px solid var(--color-border);
      border-radius: 12px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
      background: white;
    }
    .category-tile:hover {
      border-color: var(--color-primary);
      background: #f0f7ff;
    }
    .category-tile.selected {
      border-color: var(--color-primary);
      background: #eff6ff;
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }
    .category-tile .icon {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }
    .category-tile .label {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--color-text);
    }

    /* Option Buttons */
    .options-row {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }
    .option-btn {
      flex: 1;
      min-width: 100px;
      padding: 0.875rem 1rem;
      border: 2px solid var(--color-border);
      border-radius: 10px;
      background: white;
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--color-text);
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
    }
    .option-btn:hover {
      border-color: var(--color-primary);
      background: #f8faff;
    }
    .option-btn.selected {
      border-color: var(--color-primary);
      background: var(--color-primary);
      color: white;
    }
    .option-btn.positive.selected {
      background: var(--color-success);
      border-color: var(--color-success);
    }
    .option-btn.negative.selected {
      background: var(--color-danger);
      border-color: var(--color-danger);
    }
    .option-btn.neutral.selected {
      background: var(--color-warning);
      border-color: var(--color-warning);
    }

    /* Slider */
    .slider-container {
      padding: 0.5rem 0;
    }
    .slider-labels {
      display: flex;
      justify-content: space-between;
      font-size: 0.8rem;
      color: var(--color-text-muted);
      margin-bottom: 0.5rem;
    }
    input[type="range"] {
      width: 100%;
      -webkit-appearance: none;
      background: transparent;
      margin: 0;
    }
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 24px;
      height: 24px;
      background: white;
      border: 3px solid var(--color-primary);
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      margin-top: -8px;
    }
    input[type="range"]::-webkit-slider-runnable-track {
      height: 8px;
      background: linear-gradient(90deg, #fee2e2 0%, #fef3c7 50%, #d1fae5 100%);
      border-radius: 4px;
    }

    /* Navigation */
    .calc-nav {
      display: flex;
      justify-content: space-between;
      padding-top: 1.5rem;
      border-top: 1px solid var(--color-border);
      margin-top: 1.5rem;
    }
    .btn {
      padding: 0.875rem 1.75rem;
      border-radius: 10px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      border: none;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }
    .btn-secondary {
      background: #f1f5f9;
      color: var(--color-text-secondary);
    }
    .btn-secondary:hover {
      background: #e2e8f0;
    }
    .btn-primary {
      background: linear-gradient(135deg, var(--color-primary), #7c3aed);
      color: white;
    }
    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
    }
    .btn-success {
      background: linear-gradient(135deg, var(--color-success), #059669);
      color: white;
    }

    /* ========== RESULTS SECTION ========== */
    .results-container {
      padding: 0;
    }

    /* Verdict Banner */
    .verdict-banner {
      padding: 2rem;
      text-align: center;
      border-radius: 0;
    }
    .verdict-banner.positive {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
    }
    .verdict-banner.neutral {
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      color: white;
    }
    .verdict-banner.negative {
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
      color: white;
    }
    .verdict-icon {
      font-size: 3rem;
      margin-bottom: 0.5rem;
    }
    .verdict-title {
      font-size: 1.5rem;
      font-weight: 800;
      margin-bottom: 0.5rem;
    }
    .verdict-subtitle {
      font-size: 1rem;
      opacity: 0.9;
    }

    /* Key Numbers */
    .key-numbers {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0;
      border-bottom: 1px solid var(--color-border);
    }
    .key-number {
      padding: 1.5rem;
      text-align: center;
      border-right: 1px solid var(--color-border);
    }
    .key-number:last-child {
      border-right: none;
    }
    .key-number .value {
      font-size: 1.75rem;
      font-weight: 800;
      color: var(--color-text);
    }
    .key-number .value.positive { color: var(--color-success); }
    .key-number .value.negative { color: var(--color-danger); }
    .key-number .value.warning { color: var(--color-warning); }
    .key-number .label {
      font-size: 0.8rem;
      color: var(--color-text-muted);
      margin-top: 0.25rem;
    }

    /* Legal Analysis Section - Attorney Style */
    .legal-analysis-section {
      padding: 1.5rem 2rem;
      background: #f8fafc;
      border-bottom: 1px solid var(--color-border);
    }
    .legal-analysis-title {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 1rem;
      color: var(--color-text);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .legal-analysis-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }
    .legal-card {
      background: white;
      border: 1px solid var(--color-border);
      border-radius: 10px;
      padding: 1rem;
    }
    .legal-card-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
    }
    .legal-card-icon {
      font-size: 1.1rem;
    }
    .legal-card-title {
      font-size: 0.85rem;
      font-weight: 700;
      color: var(--color-text);
    }
    .legal-card-content {
      font-size: 0.8rem;
      color: var(--color-text-secondary);
      line-height: 1.5;
    }
    .legal-card-link {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--color-primary);
      margin-top: 0.5rem;
      text-decoration: none;
    }
    .legal-card-link:hover {
      text-decoration: underline;
    }

    /* Outcome Bars */
    .outcomes-section {
      padding: 1.5rem 2rem;
    }
    .outcomes-title {
      font-size: 1rem;
      font-weight: 700;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .outcome-row {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
      gap: 1rem;
    }
    .outcome-label {
      width: 120px;
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--color-text-secondary);
    }
    .outcome-bar-wrap {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    .outcome-bar-bg {
      flex: 1;
      height: 28px;
      background: #f1f5f9;
      border-radius: 6px;
      overflow: hidden;
      position: relative;
    }
    .outcome-bar {
      height: 100%;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding-right: 8px;
      font-size: 0.75rem;
      font-weight: 700;
      color: white;
      transition: width 0.5s ease;
    }
    .outcome-bar.zero { background: #94a3b8; }
    .outcome-bar.lowball { background: #f59e0b; }
    .outcome-bar.partial { background: #3b82f6; }
    .outcome-bar.full { background: #10b981; }
    .outcome-amount {
      width: 90px;
      text-align: right;
      font-size: 0.9rem;
      font-weight: 700;
      color: var(--color-text);
    }

    /* Stacked Bar Chart */
    .stacked-bar-section {
      padding: 0 2rem 1.5rem;
    }
    .stacked-bar-title {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--color-text-muted);
      margin-bottom: 0.75rem;
    }
    .stacked-bar {
      height: 40px;
      display: flex;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
    }
    .stacked-segment {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: 700;
      color: white;
      transition: all 0.3s;
      cursor: pointer;
      position: relative;
    }
    .stacked-segment:hover {
      filter: brightness(1.1);
    }
    .stacked-segment.zero { background: #94a3b8; }
    .stacked-segment.lowball { background: #f59e0b; }
    .stacked-segment.partial { background: #3b82f6; }
    .stacked-segment.full { background: #10b981; }
    .stacked-legend {
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      margin-top: 0.75rem;
    }
    .legend-item {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.75rem;
      color: var(--color-text-secondary);
    }
    .legend-dot {
      width: 10px;
      height: 10px;
      border-radius: 3px;
    }
    .legend-dot.zero { background: #94a3b8; }
    .legend-dot.lowball { background: #f59e0b; }
    .legend-dot.partial { background: #3b82f6; }
    .legend-dot.full { background: #10b981; }

    /* Alternative Options Section */
    .alternatives-section {
      padding: 1.5rem 2rem;
      background: #fefce8;
      border-top: 1px solid #fef08a;
      border-bottom: 1px solid #fef08a;
    }
    .alternatives-title {
      font-size: 1rem;
      font-weight: 700;
      margin-bottom: 1rem;
      color: #854d0e;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .alternatives-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.75rem;
    }
    .alt-card {
      background: white;
      border: 1px solid #fde68a;
      border-radius: 10px;
      padding: 1rem;
      text-align: center;
    }
    .alt-card.recommended {
      border-color: #10b981;
      background: #f0fdf4;
    }
    .alt-card-icon {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }
    .alt-card-title {
      font-size: 0.85rem;
      font-weight: 700;
      color: var(--color-text);
      margin-bottom: 0.25rem;
    }
    .alt-card-desc {
      font-size: 0.75rem;
      color: var(--color-text-muted);
    }
    .alt-card-tag {
      display: inline-block;
      font-size: 0.65rem;
      font-weight: 700;
      padding: 2px 6px;
      border-radius: 4px;
      margin-top: 0.5rem;
    }
    .alt-card-tag.free {
      background: #d1fae5;
      color: #065f46;
    }
    .alt-card-tag.recommended {
      background: #10b981;
      color: white;
    }

    /* Comparison Cards */
    .comparison-section {
      padding: 1.5rem 2rem;
      background: #f8fafc;
      border-top: 1px solid var(--color-border);
    }
    .comparison-title {
      font-size: 1rem;
      font-weight: 700;
      margin-bottom: 1rem;
      text-align: center;
    }
    .comparison-cards {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1rem;
    }
    .comparison-card {
      background: white;
      border: 2px solid var(--color-border);
      border-radius: 12px;
      padding: 1.25rem;
      text-align: center;
      transition: all 0.2s;
    }
    .comparison-card.recommended {
      border-color: var(--color-success);
      box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
    }
    .comparison-card.recommended::before {
      content: 'RECOMMENDED';
      display: block;
      background: var(--color-success);
      color: white;
      font-size: 0.65rem;
      font-weight: 700;
      padding: 2px 8px;
      border-radius: 4px;
      margin: -0.5rem auto 0.75rem;
      width: fit-content;
    }
    .card-icon {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }
    .card-title {
      font-size: 0.95rem;
      font-weight: 700;
      margin-bottom: 0.25rem;
    }
    .card-cost {
      font-size: 0.8rem;
      color: var(--color-text-muted);
      margin-bottom: 0.75rem;
    }
    .card-expected {
      font-size: 1.25rem;
      font-weight: 800;
      margin-bottom: 0.25rem;
    }
    .card-expected.positive { color: var(--color-success); }
    .card-expected.negative { color: var(--color-danger); }
    .card-expected.neutral { color: var(--color-warning); }
    .card-label {
      font-size: 0.7rem;
      color: var(--color-text-muted);
    }
    .card-factors {
      margin-top: 0.75rem;
      padding-top: 0.75rem;
      border-top: 1px solid var(--color-border);
    }
    .factor-row {
      display: flex;
      justify-content: space-between;
      font-size: 0.75rem;
      margin-bottom: 0.25rem;
    }
    .factor-row .label { color: var(--color-text-muted); }
    .factor-row .value { font-weight: 600; }

    /* Service Explainer */
    .service-explainer {
      margin-top: 1.5rem;
      padding: 1rem;
      background: white;
      border: 1px solid var(--color-border);
      border-radius: 10px;
    }
    .service-explainer-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }
    .service-explainer h4 {
      font-size: 0.85rem;
      font-weight: 700;
      color: var(--color-text);
      margin-bottom: 0.25rem;
    }
    .service-explainer p {
      font-size: 0.8rem;
      color: var(--color-text-muted);
      line-height: 1.5;
    }

    /* Risk Factors */
    .risks-section {
      padding: 1.5rem 2rem;
      border-top: 1px solid var(--color-border);
    }
    .risks-title {
      font-size: 1rem;
      font-weight: 700;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .risk-cards {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
    }
    .risk-card {
      background: #fff8f5;
      border: 1px solid #fed7aa;
      border-radius: 10px;
      padding: 1rem;
    }
    .risk-card.low {
      background: #f0fdf4;
      border-color: #bbf7d0;
    }
    .risk-card.medium {
      background: #fffbeb;
      border-color: #fde68a;
    }
    .risk-card.high {
      background: #fef2f2;
      border-color: #fecaca;
    }
    .risk-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
    }
    .risk-icon { font-size: 1.25rem; }
    .risk-label {
      font-size: 0.85rem;
      font-weight: 600;
    }
    .risk-level {
      font-size: 0.7rem;
      font-weight: 700;
      padding: 2px 6px;
      border-radius: 4px;
      margin-left: auto;
    }
    .risk-level.low { background: #d1fae5; color: #065f46; }
    .risk-level.medium { background: #fef3c7; color: #92400e; }
    .risk-level.high { background: #fee2e2; color: #991b1b; }
    .risk-cost {
      font-size: 0.8rem;
      color: var(--color-text-secondary);
    }

    /* Improve Odds */
    .improve-section {
      padding: 1.5rem 2rem;
      background: #eff6ff;
      border-top: 1px solid #bfdbfe;
    }
    .improve-title {
      font-size: 1rem;
      font-weight: 700;
      margin-bottom: 1rem;
      color: #1e40af;
    }
    .improve-items {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    .improve-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      background: white;
      padding: 0.75rem 1rem;
      border-radius: 8px;
      border: 1px solid #bfdbfe;
    }
    .improve-icon {
      width: 32px;
      height: 32px;
      background: #dbeafe;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
    }
    .improve-text {
      flex: 1;
      font-size: 0.9rem;
    }
    .improve-impact {
      font-size: 0.7rem;
      font-weight: 700;
      padding: 3px 8px;
      border-radius: 4px;
      background: #10b981;
      color: white;
    }

    /* CTA Section */
    .cta-section {
      padding: 2rem;
      text-align: center;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      color: white;
    }
    .cta-section h3 {
      font-size: 1.25rem;
      margin-bottom: 0.5rem;
    }
    .cta-section p {
      color: rgba(255,255,255,0.8);
      margin-bottom: 1.5rem;
      font-size: 0.95rem;
    }
    .cta-buttons {
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
    }
    .cta-btn {
      padding: 0.875rem 1.75rem;
      border-radius: 10px;
      font-size: 0.95rem;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }
    .cta-btn-primary {
      background: linear-gradient(135deg, #2563eb, #7c3aed);
      color: white;
    }
    .cta-btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(37, 99, 235, 0.4);
    }
    .cta-btn-secondary {
      background: rgba(255,255,255,0.1);
      color: white;
      border: 1px solid rgba(255,255,255,0.3);
    }
    .cta-btn-secondary:hover {
      background: rgba(255,255,255,0.2);
    }

    /* Disclaimer */
    .disclaimer {
      padding: 1rem 2rem;
      background: #f8fafc;
      font-size: 0.75rem;
      color: var(--color-text-muted);
      text-align: center;
      border-top: 1px solid var(--color-border);
    }

    /* Gauge Chart */
    .gauge-section {
      padding: 1.5rem 2rem;
      text-align: center;
      border-bottom: 1px solid var(--color-border);
    }
    .gauge-title {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--color-text-secondary);
      margin-bottom: 1rem;
    }
    .gauge-container {
      position: relative;
      width: 200px;
      height: 110px;
      margin: 0 auto;
    }
    .gauge-bg {
      position: absolute;
      width: 200px;
      height: 100px;
      border-radius: 100px 100px 0 0;
      background: linear-gradient(90deg, #ef4444 0%, #f59e0b 35%, #10b981 100%);
      overflow: hidden;
    }
    .gauge-bg::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 20px;
      right: 20px;
      height: 60px;
      background: white;
      border-radius: 60px 60px 0 0;
    }
    .gauge-needle {
      position: absolute;
      bottom: 0;
      left: 50%;
      width: 4px;
      height: 70px;
      background: #1e293b;
      transform-origin: bottom center;
      transform: translateX(-50%) rotate(-90deg);
      border-radius: 2px;
      transition: transform 0.8s ease-out;
    }
    .gauge-center {
      position: absolute;
      bottom: -5px;
      left: 50%;
      transform: translateX(-50%);
      width: 16px;
      height: 16px;
      background: #1e293b;
      border-radius: 50%;
    }
    .gauge-value {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 1.5rem;
      font-weight: 800;
    }
    .gauge-labels {
      display: flex;
      justify-content: space-between;
      width: 200px;
      margin: 0 auto;
      font-size: 0.7rem;
      color: var(--color-text-muted);
    }

    /* Responsive */
    @media (max-width: 900px) {
      .comparison-cards { grid-template-columns: repeat(2, 1fr); }
      .legal-analysis-grid { grid-template-columns: 1fr; }
      .alternatives-grid { grid-template-columns: 1fr; }
    }
    @media (max-width: 768px) {
      .category-grid { grid-template-columns: repeat(2, 1fr); }
      .options-row { flex-direction: column; }
      .option-btn { min-width: auto; }
      .comparison-cards { grid-template-columns: 1fr; }
      .risk-cards { grid-template-columns: 1fr; }
      .key-numbers { grid-template-columns: 1fr; }
      .key-number { border-right: none; border-bottom: 1px solid var(--color-border); }
      .outcome-row { flex-direction: column; align-items: flex-start; gap: 0.5rem; }
      .outcome-label { width: auto; }
      .progress-step span:not(.step-num) { display: none; }
      .service-explainer-grid { grid-template-columns: 1fr; }
    }

    /* Animation */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .calc-section.active {
      animation: fadeIn 0.3s ease;
    }
  </style>
</head>
<body>

  <!-- Header -->
  <header class="site-header">
    <div class="container">
      <a href="https://terms.law" class="logo">Terms<span>.Law</span></a>
      <a href="https://terms.law/#contact" class="header-cta">Get a Free Quote</a>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="container">
      <h1>Is a Demand Letter Worth It?</h1>
      <p>Answer a few questions to see your expected outcomes, costs, and whether hiring a lawyer makes financial sense.</p>
    </div>
  </section>

  <!-- Calculator -->
  <div class="calc-card">
    <!-- Progress -->
    <div class="progress-bar">
      <div class="progress-step active" data-step="1">
        <span class="step-num">1</span>
        <span>Your Claim</span>
      </div>
      <div class="progress-step" data-step="2">
        <span class="step-num">2</span>
        <span>Evidence</span>
      </div>
      <div class="progress-step" data-step="3">
        <span class="step-num">3</span>
        <span>Other Side</span>
      </div>
      <div class="progress-step" data-step="4">
        <span class="step-num">4</span>
        <span>Results</span>
      </div>
    </div>

    <!-- Step 1: Claim Details -->
    <div class="calc-section active" id="step1">
      <h2 class="section-title">Tell me about your claim</h2>
      <p class="section-subtitle">I'll use this to estimate your likely outcomes and identify applicable legal frameworks.</p>

      <div class="form-group">
        <label class="form-label">
          How much money are you owed or seeking?
          <span class="tooltip-trigger" data-tooltip="Enter the full amount you believe you're entitled to, before any negotiations.">?</span>
        </label>
        <div class="amount-input-wrap">
          <input type="text" class="amount-input" id="claimAmount" placeholder="5,000" value="">
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">What type of dispute is this?</label>
        <div class="category-grid">
          <div class="category-tile" data-category="refund">
            <div class="icon">&#128722;</div>
            <div class="label">Refund / Purchase</div>
          </div>
          <div class="category-tile" data-category="invoice">
            <div class="icon">&#128196;</div>
            <div class="label">Unpaid Invoice</div>
          </div>
          <div class="category-tile" data-category="contractor">
            <div class="icon">&#128295;</div>
            <div class="label">Contractor / Service</div>
          </div>
          <div class="category-tile" data-category="landlord">
            <div class="icon">&#127968;</div>
            <div class="label">Landlord / Tenant</div>
          </div>
          <div class="category-tile" data-category="employment">
            <div class="icon">&#128188;</div>
            <div class="label">Employment / Wages</div>
          </div>
          <div class="category-tile" data-category="other">
            <div class="icon">&#128203;</div>
            <div class="label">Other Contract</div>
          </div>
        </div>
      </div>

      <!-- Progressive Legal Insight -->
      <div class="legal-insight" id="step1Insight">
        <div class="legal-insight-header">
          <div class="legal-insight-icon">&#9878;</div>
          <div class="legal-insight-title">Legal Framework for Your Dispute</div>
        </div>
        <div class="legal-insight-content" id="step1InsightContent">
          <!-- Populated dynamically based on category -->
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">
          Do you have a written agreement, contract, or invoice?
          <span class="tooltip-trigger" data-tooltip="Emails, text messages, contracts, receipts, or invoices showing what was agreed.">?</span>
        </label>
        <div class="options-row">
          <button class="option-btn positive" data-field="hasContract" data-value="yes">Yes, clear written terms</button>
          <button class="option-btn neutral" data-field="hasContract" data-value="partial">Some writing, but incomplete</button>
          <button class="option-btn negative" data-field="hasContract" data-value="no">Mostly verbal</button>
        </div>
      </div>

      <div class="calc-nav">
        <div></div>
        <button class="btn btn-primary" onclick="nextStep(2)">Continue <span>&#8594;</span></button>
      </div>
    </div>

    <!-- Step 2: Evidence -->
    <div class="calc-section" id="step2">
      <h2 class="section-title">How strong is your evidence?</h2>
      <p class="section-subtitle">Good documentation significantly improves outcomes.</p>

      <!-- Progressive Legal Insight -->
      <div class="legal-insight visible" id="step2Insight">
        <div class="legal-insight-header">
          <div class="legal-insight-icon">&#128203;</div>
          <div class="legal-insight-title">Why Evidence Matters</div>
        </div>
        <div class="legal-insight-content" id="step2InsightContent">
          <strong>Contract formation requires offer, acceptance, and consideration.</strong> Written evidence proves these elements existed. Without documentation, disputes become "he said/she said" situations that are harder to win. Courts and opposing parties take claims more seriously when you can produce receipts, emails, text messages, or contracts.
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">
          Can you clearly prove what was promised?
          <span class="tooltip-trigger" data-tooltip="Screenshots, emails, texts, or recordings showing what the other side committed to.">?</span>
        </label>
        <div class="options-row">
          <button class="option-btn positive" data-field="proofPromise" data-value="yes">Yes, I have clear proof</button>
          <button class="option-btn neutral" data-field="proofPromise" data-value="partial">I have some evidence</button>
          <button class="option-btn negative" data-field="proofPromise" data-value="no">It's mostly my word</button>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">
          Has the other side admitted anything helpful?
          <span class="tooltip-trigger" data-tooltip="Any messages where they acknowledge the problem, apologize, or offer partial resolution.">?</span>
        </label>
        <div class="options-row">
          <button class="option-btn positive" data-field="admissions" data-value="yes">Yes, they admitted fault</button>
          <button class="option-btn neutral" data-field="admissions" data-value="partial">Kind of / vague acknowledgment</button>
          <button class="option-btn negative" data-field="admissions" data-value="no">No, they deny everything</button>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">
          Is it clear exactly how much you're owed?
          <span class="tooltip-trigger" data-tooltip="Can you show the exact dollar amount through invoices, receipts, or a clear calculation?">?</span>
        </label>
        <div class="options-row">
          <button class="option-btn positive" data-field="damagesClear" data-value="yes">Yes, exact amount documented</button>
          <button class="option-btn neutral" data-field="damagesClear" data-value="partial">Roughly calculable</button>
          <button class="option-btn negative" data-field="damagesClear" data-value="no">Hard to calculate precisely</button>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">
          How long ago did this happen?
          <span class="tooltip-trigger" data-tooltip="More recent disputes typically have better outcomes and more options.">?</span>
        </label>
        <div class="options-row">
          <button class="option-btn positive" data-field="timeAgo" data-value="recent">Less than 3 months</button>
          <button class="option-btn neutral" data-field="timeAgo" data-value="moderate">3-12 months</button>
          <button class="option-btn negative" data-field="timeAgo" data-value="old">Over a year ago</button>
        </div>
      </div>

      <div class="calc-nav">
        <button class="btn btn-secondary" onclick="prevStep(1)"><span>&#8592;</span> Back</button>
        <button class="btn btn-primary" onclick="nextStep(3)">Continue <span>&#8594;</span></button>
      </div>
    </div>

    <!-- Step 3: Other Side -->
    <div class="calc-section" id="step3">
      <h2 class="section-title">About the other party</h2>
      <p class="section-subtitle">This helps us assess how likely they are to respond and what leverage you have.</p>

      <!-- Progressive Legal Insight -->
      <div class="legal-insight visible" id="step3Insight">
        <div class="legal-insight-header">
          <div class="legal-insight-icon">&#128200;</div>
          <div class="legal-insight-title">Your Negotiating Leverage</div>
        </div>
        <div class="legal-insight-content" id="step3InsightContent">
          <strong>Leverage determines negotiating power.</strong> Your leverage depends on: (1) <strong>Alternative remedies</strong> like chargebacks, platform disputes, or regulatory complaints; (2) <strong>Credible litigation threat</strong> - whether you'd actually file in small claims; (3) <strong>Reputational pressure</strong> - reviews and social media exposure. The more options you have, the more seriously the other side takes your demand.
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">Who are you dealing with?</label>
        <div class="options-row">
          <button class="option-btn" data-field="opponentType" data-value="bigCompany">Established Company</button>
          <button class="option-btn" data-field="opponentType" data-value="smallBusiness">Small Business</button>
          <button class="option-btn" data-field="opponentType" data-value="individual">Individual / Freelancer</button>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">
          How have they responded so far?
          <span class="tooltip-trigger" data-tooltip="Their communication style predicts how they'll respond to a demand letter.">?</span>
        </label>
        <div class="options-row">
          <button class="option-btn positive" data-field="priorResponse" data-value="responsive">Responsive, trying to work it out</button>
          <button class="option-btn neutral" data-field="priorResponse" data-value="slow">Slow / making excuses</button>
          <button class="option-btn negative" data-field="priorResponse" data-value="hostile">Ignoring me or hostile</button>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">
          Have they already refunded or paid you anything?
          <span class="tooltip-trigger" data-tooltip="If they've already given a partial refund, getting more often requires stronger proof and reduces the upside.">?</span>
        </label>
        <div class="options-row">
          <button class="option-btn positive" data-field="partialOffer" data-value="significant">Yes, more than half</button>
          <button class="option-btn neutral" data-field="partialOffer" data-value="some">Yes, some but less than half</button>
          <button class="option-btn negative" data-field="partialOffer" data-value="no">No, nothing at all</button>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">
          Do you need to send letters to multiple parties?
          <span class="tooltip-trigger" data-tooltip="Sometimes you need to contact both the seller AND your bank/PayPal, which doubles the work.">?</span>
        </label>
        <div class="options-row">
          <button class="option-btn positive" data-field="multipleTargets" data-value="one">Just one party</button>
          <button class="option-btn negative" data-field="multipleTargets" data-value="multiple">Multiple (seller + bank/platform)</button>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">
          Can you still dispute the payment with your bank/PayPal/platform?
          <span class="tooltip-trigger" data-tooltip="If chargeback or platform dispute is available, it changes your leverage significantly.">?</span>
        </label>
        <div class="options-row">
          <button class="option-btn positive" data-field="chargebackAvail" data-value="yes">Yes, still within window</button>
          <button class="option-btn neutral" data-field="chargebackAvail" data-value="maybe">Not sure</button>
          <button class="option-btn negative" data-field="chargebackAvail" data-value="no">No / Not applicable</button>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">
          Would you actually file in small claims court if they ignore the letter?
          <span class="tooltip-trigger" data-tooltip="Demand letters work best when the other side believes you'll follow through.">?</span>
        </label>
        <div class="options-row">
          <button class="option-btn positive" data-field="willingToSue" data-value="yes">Yes, I would follow through</button>
          <button class="option-btn neutral" data-field="willingToSue" data-value="maybe">Maybe, depends on cost</button>
          <button class="option-btn negative" data-field="willingToSue" data-value="no">Probably not</button>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">
          How much hassle are you willing to deal with?
        </label>
        <div class="slider-container">
          <div class="slider-labels">
            <span>Just want it over ($0)</span>
            <span>Moderate effort ($250)</span>
            <span>I'll fight ($500+)</span>
          </div>
          <input type="range" id="hassleSlider" min="0" max="500" value="250" step="50">
        </div>
      </div>

      <div class="calc-nav">
        <button class="btn btn-secondary" onclick="prevStep(2)"><span>&#8592;</span> Back</button>
        <button class="btn btn-success" onclick="calculateResults()">See My Results <span>&#8594;</span></button>
      </div>
    </div>

    <!-- Step 4: Results -->
    <div class="calc-section results-container" id="step4">

      <!-- Verdict Banner -->
      <div class="verdict-banner positive" id="verdictBanner">
        <div class="verdict-icon" id="verdictIcon">&#10003;</div>
        <div class="verdict-title" id="verdictTitle">A Demand Letter Is Likely Worth It</div>
        <div class="verdict-subtitle" id="verdictSubtitle">Your expected net benefit is positive, even accounting for costs and risks.</div>
      </div>

      <!-- Key Numbers -->
      <div class="key-numbers">
        <div class="key-number">
          <div class="value positive" id="expectedNet">+$1,250</div>
          <div class="label">Expected Net Benefit</div>
        </div>
        <div class="key-number">
          <div class="value" id="successOdds">65%</div>
          <div class="label">Chance of Some Recovery</div>
        </div>
        <div class="key-number">
          <div class="value" id="breakEvenOdds">30%</div>
          <div class="label">Break-Even Threshold</div>
        </div>
      </div>

      <!-- Legal Analysis Section -->
      <div class="legal-analysis-section" id="legalAnalysisSection">
        <h3 class="legal-analysis-title">&#9878; Legal Analysis of Your Case</h3>
        <div class="legal-analysis-grid" id="legalAnalysisGrid">
          <!-- Populated dynamically -->
        </div>
      </div>

      <!-- Success Gauge -->
      <div class="gauge-section">
        <div class="gauge-title">Overall Success Probability</div>
        <div class="gauge-container">
          <div class="gauge-bg"></div>
          <div class="gauge-needle" id="gaugeNeedle"></div>
          <div class="gauge-center"></div>
        </div>
        <div class="gauge-labels">
          <span>0%</span>
          <span>50%</span>
          <span>100%</span>
        </div>
      </div>

      <!-- Outcome Breakdown -->
      <div class="outcomes-section">
        <h3 class="outcomes-title">&#128200; Possible Outcomes</h3>

        <div class="outcome-row">
          <div class="outcome-label">No Payment</div>
          <div class="outcome-bar-wrap">
            <div class="outcome-bar-bg">
              <div class="outcome-bar zero" id="barZero" style="width: 35%">35%</div>
            </div>
            <div class="outcome-amount">$0</div>
          </div>
        </div>

        <div class="outcome-row">
          <div class="outcome-label">Lowball Offer</div>
          <div class="outcome-bar-wrap">
            <div class="outcome-bar-bg">
              <div class="outcome-bar lowball" id="barLowball" style="width: 20%">20%</div>
            </div>
            <div class="outcome-amount" id="amountLowball">$500</div>
          </div>
        </div>

        <div class="outcome-row">
          <div class="outcome-label">Partial Settlement</div>
          <div class="outcome-bar-wrap">
            <div class="outcome-bar-bg">
              <div class="outcome-bar partial" id="barPartial" style="width: 30%">30%</div>
            </div>
            <div class="outcome-amount" id="amountPartial">$2,500</div>
          </div>
        </div>

        <div class="outcome-row">
          <div class="outcome-label">Full/Near-Full</div>
          <div class="outcome-bar-wrap">
            <div class="outcome-bar-bg">
              <div class="outcome-bar full" id="barFull" style="width: 15%">15%</div>
            </div>
            <div class="outcome-amount" id="amountFull">$4,750</div>
          </div>
        </div>
      </div>

      <!-- Stacked Bar -->
      <div class="stacked-bar-section">
        <div class="stacked-bar-title">Outcome Distribution</div>
        <div class="stacked-bar" id="stackedBar">
          <div class="stacked-segment zero" style="width: 35%">35%</div>
          <div class="stacked-segment lowball" style="width: 20%">20%</div>
          <div class="stacked-segment partial" style="width: 30%">30%</div>
          <div class="stacked-segment full" style="width: 15%">15%</div>
        </div>
        <div class="stacked-legend">
          <div class="legend-item"><div class="legend-dot zero"></div> No Payment</div>
          <div class="legend-item"><div class="legend-dot lowball"></div> Lowball</div>
          <div class="legend-item"><div class="legend-dot partial"></div> Partial</div>
          <div class="legend-item"><div class="legend-dot full"></div> Full</div>
        </div>
      </div>

      <!-- Alternative Options -->
      <div class="alternatives-section" id="alternativesSection">
        <h3 class="alternatives-title">&#128161; Other Options to Consider</h3>
        <div class="alternatives-grid" id="alternativesGrid">
          <!-- Populated dynamically -->
        </div>
      </div>

      <!-- Comparison Cards -->
      <div class="comparison-section">
        <h3 class="comparison-title">Compare Your Options</h3>
        <div class="comparison-cards">
          <div class="comparison-card" id="cardDIY">
            <div class="card-icon">&#128221;</div>
            <div class="card-title">DIY Letter</div>
            <div class="card-cost">Cost: $0</div>
            <div class="card-expected neutral" id="diyExpected">+$650</div>
            <div class="card-label">Expected Net</div>
            <div class="card-factors">
              <div class="factor-row">
                <span class="label">Success rate</span>
                <span class="value" id="diySuccess">35%</span>
              </div>
              <div class="factor-row">
                <span class="label">You do</span>
                <span class="value">Everything</span>
              </div>
            </div>
          </div>

          <div class="comparison-card" id="cardAssist">
            <div class="card-icon">&#128203;</div>
            <div class="card-title">DIY-Assist</div>
            <div class="card-cost">Cost: $240</div>
            <div class="card-expected neutral" id="assistExpected">+$560</div>
            <div class="card-label">Expected Net</div>
            <div class="card-factors">
              <div class="factor-row">
                <span class="label">Success rate</span>
                <span class="value" id="assistSuccess">45%</span>
              </div>
              <div class="factor-row">
                <span class="label">You get</span>
                <span class="value">Legal memo</span>
              </div>
            </div>
          </div>

          <div class="comparison-card recommended" id="cardLawyer">
            <div class="card-icon">&#9878;</div>
            <div class="card-title">Full Letter</div>
            <div class="card-cost">Cost: $450</div>
            <div class="card-expected positive" id="lawyerExpected">+$1,250</div>
            <div class="card-label">Expected Net</div>
            <div class="card-factors">
              <div class="factor-row">
                <span class="label">Success rate</span>
                <span class="value" id="lawyerSuccess">65%</span>
              </div>
              <div class="factor-row">
                <span class="label">You get</span>
                <span class="value">Full service</span>
              </div>
            </div>
          </div>

          <div class="comparison-card" id="cardSmallClaims">
            <div class="card-icon">&#127963;</div>
            <div class="card-title">Small Claims</div>
            <div class="card-cost">Cost: $75-200</div>
            <div class="card-expected neutral" id="smallClaimsExpected">+$800</div>
            <div class="card-label">Expected Net</div>
            <div class="card-factors">
              <div class="factor-row">
                <span class="label">Success rate</span>
                <span class="value" id="smallClaimsSuccess">50%</span>
              </div>
              <div class="factor-row">
                <span class="label">Time</span>
                <span class="value">2-4 months</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Service Explainer -->
        <div class="service-explainer">
          <div class="service-explainer-grid">
            <div>
              <h4>DIY-Assist ($240)</h4>
              <p>I write a legal opinion memo with your arguments. You send it yourself to PayPal/bank/seller. Good for weaker cases or tight budgets.</p>
            </div>
            <div>
              <h4>Full Demand Letter ($450)</h4>
              <p>I draft, sign, and send a formal demand on law firm letterhead via certified mail + email. Includes one follow-up if needed.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Risk Factors -->
      <div class="risks-section">
        <h3 class="risks-title">&#9888; Costs & Risks to Consider</h3>
        <div class="risk-cards">
          <div class="risk-card low" id="riskTime">
            <div class="risk-header">
              <span class="risk-icon">&#9201;</span>
              <span class="risk-label">Time Investment</span>
              <span class="risk-level low" id="riskTimeLevel">LOW</span>
            </div>
            <div class="risk-cost" id="riskTimeCost">~2-5 hours over 2-3 weeks</div>
          </div>

          <div class="risk-card medium" id="riskRetaliation">
            <div class="risk-header">
              <span class="risk-icon">&#128172;</span>
              <span class="risk-label">Retaliation Risk</span>
              <span class="risk-level medium" id="riskRetaliationLevel">MEDIUM</span>
            </div>
            <div class="risk-cost" id="riskRetaliationCost">Possible negative review, ~$100-300 hassle value</div>
          </div>

          <div class="risk-card low" id="riskEscalation">
            <div class="risk-header">
              <span class="risk-icon">&#128200;</span>
              <span class="risk-label">Escalation Cost</span>
              <span class="risk-level low" id="riskEscalationLevel">LOW</span>
            </div>
            <div class="risk-cost" id="riskEscalationCost">Small claims: $75-200 if needed</div>
          </div>
        </div>
      </div>

      <!-- Improve Your Odds -->
      <div class="improve-section" id="improveSection">
        <h3 class="improve-title">&#128200; How to Improve Your Odds</h3>
        <div class="improve-items" id="improveItems">
          <div class="improve-item">
            <div class="improve-icon">&#128248;</div>
            <div class="improve-text">Get screenshots of the original promises or ads</div>
            <span class="improve-impact">+15%</span>
          </div>
          <div class="improve-item">
            <div class="improve-icon">&#128231;</div>
            <div class="improve-text">Document a clear written refusal from them</div>
            <span class="improve-impact">+10%</span>
          </div>
          <div class="improve-item">
            <div class="improve-icon">&#128203;</div>
            <div class="improve-text">Gather all payment receipts and invoices</div>
            <span class="improve-impact">+8%</span>
          </div>
        </div>
      </div>

      <!-- CTA -->
      <div class="cta-section">
        <h3 id="ctaTitle">Ready to Move Forward?</h3>
        <p id="ctaText">Based on your inputs, a demand letter appears to be a good investment for your situation.</p>
        <div class="cta-buttons" id="ctaButtons">
          <a href="https://terms.law/#contact" class="cta-btn cta-btn-primary">
            Get Started - $450
          </a>
          <a href="https://terms.law/demand-letters/" class="cta-btn cta-btn-secondary">
            Learn More
          </a>
        </div>
      </div>

      <!-- Disclaimer -->
      <div class="disclaimer">
        This calculator provides estimates for educational purposes only. Results vary based on specific facts.
        This is not legal advice and does not create an attorney-client relationship.
      </div>

      <!-- Recalculate -->
      <div class="calc-nav" style="padding: 1.5rem 2rem; border-top: none;">
        <button class="btn btn-secondary" onclick="prevStep(3)"><span>&#8592;</span> Adjust Inputs</button>
        <button class="btn btn-primary" onclick="resetCalculator()">Start Over</button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer style="background: #0f172a; color: rgba(255,255,255,0.6); padding: 2rem 0; text-align: center; font-size: 0.875rem;">
    <div class="container">
      <p>&copy; <a href="https://terms.law" style="color: #60a5fa; text-decoration: none;">Terms.Law</a> - Sergei Tokmakov, Esq. | <a href="https://apps.calbar.ca.gov/attorney/Licensee/Detail/279869" style="color: #60a5fa; text-decoration: none;">CA Bar #279869</a></p>
    </div>
  </footer>

  <script>
    // State
    const state = {
      currentStep: 1,
      claimAmount: 0,
      category: '',
      hasContract: '',
      proofPromise: '',
      admissions: '',
      damagesClear: '',
      timeAgo: '',
      opponentType: '',
      priorResponse: '',
      partialOffer: '',
      multipleTargets: '',
      chargebackAvail: '',
      willingToSue: '',
      hassleValue: 250
    };

    // Category legal insights
    const categoryInsights = {
      refund: {
        title: 'Consumer Purchase Disputes',
        content: `<strong>Consumer protection laws may apply.</strong> Under state consumer protection statutes (like California's Consumer Legal Remedies Act), you may be entitled to not just a refund but also <strong>attorney's fees and statutory damages</strong> if the seller engaged in deceptive practices. Federal laws like the FTC Act also prohibit unfair business practices. <strong>Chargeback rights</strong> under the Fair Credit Billing Act give you 60 days to dispute charges for goods not received or significantly different than described.`,
        link: 'Demand%20Letters%20Catalog.html#category-consumer',
        linkText: 'Consumer dispute guides'
      },
      invoice: {
        title: 'Unpaid Invoice Claims',
        content: `<strong>Breach of contract is straightforward when you have clear documentation.</strong> Most states allow recovery of the unpaid amount plus interest (typically 10-18% annually). If you have a written agreement with attorney's fee provisions, you may recover legal costs too. <strong>Key evidence:</strong> signed contracts, purchase orders, delivery confirmations, and written acknowledgments of receipt. A demand letter starts the formal collection process and creates a paper trail for court.`,
        link: 'Demand%20Letters%20Catalog.html#category-business',
        linkText: 'Business dispute guides'
      },
      contractor: {
        title: 'Contractor & Service Disputes',
        content: `<strong>Service contracts are governed by state contract law and often specific licensing requirements.</strong> Unlicensed contractors in many states cannot enforce contracts or collect payment. <strong>Consumer remedies</strong> include refunds for unperformed work, cost to complete, and damages for defective work. Many states have Contractor State License Board complaint processes that provide alternative resolution without litigation.`,
        link: 'Demand%20Letters%20Catalog.html#category-business',
        linkText: 'Contractor dispute guides'
      },
      landlord: {
        title: 'Landlord-Tenant Disputes',
        content: `<strong>Security deposit laws vary significantly by state but heavily favor tenants.</strong> Many states require landlords to return deposits within 14-30 days with itemized deductions, or face <strong>penalties of 2-3x the deposit amount</strong>. Normal wear and tear cannot be deducted. Landlords must prove damages with photos and receipts. These statutory penalties make security deposit claims particularly strong for demand letters.`,
        link: 'Demand%20Letters%20Catalog.html#category-real-estate',
        linkText: 'Security deposit guides'
      },
      employment: {
        title: 'Employment & Wage Claims',
        content: `<strong>Wage claims have strong statutory protections.</strong> Federal FLSA and state labor laws provide for <strong>unpaid wages, overtime, waiting time penalties, and often attorney's fees</strong>. California Labor Code Section 203 awards waiting time penalties equal to 30 days' wages if final pay is late. <strong>Filing a wage claim with the Labor Commissioner (DLSE) is free</strong> and may be more effective than a demand letter for smaller amounts.`,
        link: 'Demand%20Letters%20Catalog.html#category-employment',
        linkText: 'Employment dispute guides'
      },
      other: {
        title: 'Contract Disputes',
        content: `<strong>Contract enforcement requires proving: (1) valid agreement, (2) your performance, (3) their breach, and (4) your damages.</strong> Written contracts are strongest, but oral agreements are enforceable for amounts under the Statute of Frauds threshold (typically $500-$1000). Email and text message exchanges can prove oral contract terms. Courts award expectation damages - what you would have received had the contract been performed.`,
        link: 'Demand%20Letters%20Catalog.html#category-business',
        linkText: 'Contract dispute guides'
      }
    };

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      // Amount input formatting
      const amountInput = document.getElementById('claimAmount');
      amountInput.addEventListener('input', (e) => {
        let value = e.target.value.replace(/[^0-9]/g, '');
        if (value) {
          state.claimAmount = parseInt(value);
          e.target.value = parseInt(value).toLocaleString();
        } else {
          state.claimAmount = 0;
          e.target.value = '';
        }
      });

      // Category tiles
      document.querySelectorAll('.category-tile').forEach(tile => {
        tile.addEventListener('click', () => {
          document.querySelectorAll('.category-tile').forEach(t => t.classList.remove('selected'));
          tile.classList.add('selected');
          state.category = tile.dataset.category;
          updateCategoryInsight();
        });
      });

      // Option buttons
      document.querySelectorAll('.option-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const field = btn.dataset.field;
          const value = btn.dataset.value;

          // Deselect siblings
          btn.parentElement.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
          btn.classList.add('selected');

          state[field] = value;
        });
      });

      // Hassle slider
      const hassleSlider = document.getElementById('hassleSlider');
      hassleSlider.addEventListener('input', (e) => {
        state.hassleValue = parseInt(e.target.value);
      });
    });

    // Update category legal insight
    function updateCategoryInsight() {
      const insight = categoryInsights[state.category];
      if (insight) {
        const insightEl = document.getElementById('step1Insight');
        const contentEl = document.getElementById('step1InsightContent');
        insightEl.classList.add('visible');
        contentEl.innerHTML = `${insight.content}<a href="${insight.link}" class="legal-insight-link" target="_blank">${insight.linkText} &#8594;</a>`;
      }
    }

    // Navigation
    function nextStep(step) {
      // Validation for step 1
      if (step === 2 && state.currentStep === 1) {
        if (!state.claimAmount || state.claimAmount < 100) {
          alert('Please enter the amount you\'re seeking (minimum $100).');
          return;
        }
        if (!state.category) {
          alert('Please select a dispute type.');
          return;
        }
      }

      goToStep(step);
    }

    function prevStep(step) {
      goToStep(step);
    }

    function goToStep(step) {
      // Update progress
      document.querySelectorAll('.progress-step').forEach((el, i) => {
        el.classList.remove('active', 'completed');
        if (i + 1 < step) el.classList.add('completed');
        if (i + 1 === step) el.classList.add('active');
      });

      // Show section
      document.querySelectorAll('.calc-section').forEach(s => s.classList.remove('active'));
      document.getElementById(`step${step}`).classList.add('active');

      state.currentStep = step;

      // Scroll to top of card
      document.querySelector('.calc-card').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // Calculate Results
    function calculateResults() {
      const amount = state.claimAmount;
      const letterCost = 450;

      // Calculate base success probability
      let baseProb = 0.40;

      // Adjust for evidence strength
      const evidenceScore = calculateEvidenceScore();
      baseProb += evidenceScore * 0.25;

      // Adjust for opponent factors
      const opponentScore = calculateOpponentScore();
      baseProb += opponentScore * 0.15;

      // Adjust for leverage
      const leverageScore = calculateLeverageScore();
      baseProb += leverageScore * 0.10;

      // Cap probability
      baseProb = Math.max(0.15, Math.min(0.85, baseProb));

      // Calculate outcome distribution
      const outcomes = calculateOutcomes(baseProb, amount);

      // Calculate expected values
      const expectedGross = (outcomes.lowball.prob * outcomes.lowball.amount) +
                           (outcomes.partial.prob * outcomes.partial.amount) +
                           (outcomes.full.prob * outcomes.full.amount);

      // Calculate costs
      const retaliationCost = calculateRetaliationCost();

      // Net expected value
      const expectedNet = expectedGross - letterCost - retaliationCost;

      // Break-even probability
      const breakEvenProb = letterCost / (amount * 0.5);

      // Calculate comparison options
      const diySuccess = baseProb * 0.55;
      const diyExpected = (diySuccess * amount * 0.4) - 0;

      const assistCost = 240;
      const assistSuccess = baseProb * 0.75;
      const assistExpectedGross = (outcomes.lowball.prob * 0.75 * outcomes.lowball.amount) +
                                  (outcomes.partial.prob * 0.75 * outcomes.partial.amount) +
                                  (outcomes.full.prob * 0.75 * outcomes.full.amount);
      const assistExpected = assistExpectedGross - assistCost - (retaliationCost * 0.8);

      const smallClaimsSuccess = baseProb * 0.85;
      const smallClaimsCost = 150;
      const smallClaimsExpected = (smallClaimsSuccess * amount * 0.7) - smallClaimsCost;

      // Update UI
      updateResults({
        amount,
        outcomes,
        successProb: 1 - outcomes.zero.prob,
        expectedNet,
        breakEvenProb,
        diy: { success: diySuccess, expected: diyExpected },
        assist: { success: assistSuccess, expected: assistExpected, cost: assistCost },
        smallClaims: { success: smallClaimsSuccess, expected: smallClaimsExpected },
        lawyerSuccess: 1 - outcomes.zero.prob,
        retaliationCost,
        evidenceScore,
        leverageScore
      });

      goToStep(4);
    }

    function calculateEvidenceScore() {
      let score = 0;

      if (state.hasContract === 'yes') score += 0.35;
      else if (state.hasContract === 'partial') score += 0.15;

      if (state.proofPromise === 'yes') score += 0.30;
      else if (state.proofPromise === 'partial') score += 0.15;

      if (state.admissions === 'yes') score += 0.20;
      else if (state.admissions === 'partial') score += 0.10;

      if (state.damagesClear === 'yes') score += 0.15;
      else if (state.damagesClear === 'partial') score += 0.08;

      return Math.min(1, score);
    }

    function calculateOpponentScore() {
      let score = 0.5;

      if (state.opponentType === 'bigCompany') score += 0.15;
      else if (state.opponentType === 'smallBusiness') score += 0.05;
      else if (state.opponentType === 'individual') score -= 0.10;

      if (state.priorResponse === 'responsive') score += 0.20;
      else if (state.priorResponse === 'slow') score += 0.0;
      else if (state.priorResponse === 'hostile') score -= 0.15;

      if (state.timeAgo === 'recent') score += 0.15;
      else if (state.timeAgo === 'moderate') score += 0.05;
      else if (state.timeAgo === 'old') score -= 0.15;

      return Math.max(0, Math.min(1, score));
    }

    function calculateLeverageScore() {
      let score = 0.3;

      if (state.chargebackAvail === 'yes') score += 0.30;
      else if (state.chargebackAvail === 'maybe') score += 0.10;

      if (state.willingToSue === 'yes') score += 0.30;
      else if (state.willingToSue === 'maybe') score += 0.15;

      if (state.partialOffer === 'yes') score += 0.10;

      return Math.min(1, score);
    }

    function calculateOutcomes(baseProb, amount) {
      let fullCap, partialCap, fullRecoveryRate, partialRecoveryRate;

      if (state.partialOffer === 'significant') {
        fullCap = 0.08;
        partialCap = 0.25;
        fullRecoveryRate = 0.70;
        partialRecoveryRate = 0.40;
      } else if (state.partialOffer === 'some') {
        fullCap = 0.15;
        partialCap = 0.35;
        fullRecoveryRate = 0.85;
        partialRecoveryRate = 0.50;
      } else {
        fullCap = 0.25;
        partialCap = 0.45;
        fullRecoveryRate = 0.90;
        partialRecoveryRate = 0.50;
      }

      if (state.multipleTargets === 'multiple') {
        baseProb *= 0.80;
      }

      let zeroProb = 1 - baseProb;
      let successProb = baseProb;

      const evidenceScore = calculateEvidenceScore();
      const leverageScore = calculateLeverageScore();
      const qualityScore = (evidenceScore + leverageScore) / 2;

      let fullProb = successProb * Math.min(fullCap, qualityScore * 0.35);
      let partialProb = successProb * Math.min(partialCap, 0.35 + qualityScore * 0.25);
      let lowballProb = successProb - fullProb - partialProb;

      lowballProb = Math.max(0.05, lowballProb);

      const total = zeroProb + lowballProb + partialProb + fullProb;

      return {
        zero: { prob: zeroProb / total, amount: 0 },
        lowball: { prob: lowballProb / total, amount: amount * 0.15 },
        partial: { prob: partialProb / total, amount: amount * partialRecoveryRate },
        full: { prob: fullProb / total, amount: amount * fullRecoveryRate }
      };
    }

    function calculateRetaliationCost() {
      let risk = 0;

      if (state.priorResponse === 'hostile') risk = 200;
      else if (state.priorResponse === 'slow') risk = 100;
      else risk = 50;

      if (state.opponentType === 'individual') risk *= 1.5;

      return risk;
    }

    function updateResults(data) {
      const { amount, outcomes, successProb, expectedNet, breakEvenProb, diy, assist, smallClaims, lawyerSuccess, retaliationCost, evidenceScore, leverageScore } = data;

      // Verdict banner
      const verdictBanner = document.getElementById('verdictBanner');
      const verdictIcon = document.getElementById('verdictIcon');
      const verdictTitle = document.getElementById('verdictTitle');
      const verdictSubtitle = document.getElementById('verdictSubtitle');

      if (expectedNet > 300) {
        verdictBanner.className = 'verdict-banner positive';
        verdictIcon.innerHTML = '&#10003;';
        verdictTitle.textContent = 'A Demand Letter Is Likely Worth It';
        verdictSubtitle.textContent = 'Your expected net benefit is positive, even accounting for costs and risks.';
      } else if (expectedNet > 0) {
        verdictBanner.className = 'verdict-banner neutral';
        verdictIcon.innerHTML = '~';
        verdictTitle.textContent = 'It\'s a Close Call';
        verdictSubtitle.textContent = 'A demand letter could help, but consider DIY or platform disputes first.';
      } else {
        verdictBanner.className = 'verdict-banner negative';
        verdictIcon.innerHTML = '&#10005;';
        verdictTitle.textContent = 'Probably Not Worth the Cost';
        verdictSubtitle.textContent = 'Consider DIY options, platform disputes, or small claims instead.';
      }

      // Key numbers
      document.getElementById('expectedNet').textContent = formatCurrency(expectedNet, true);
      document.getElementById('expectedNet').className = 'value ' + (expectedNet > 0 ? 'positive' : 'negative');
      document.getElementById('successOdds').textContent = formatPercent(successProb);
      document.getElementById('breakEvenOdds').textContent = formatPercent(breakEvenProb);

      // Gauge needle
      const gaugeNeedle = document.getElementById('gaugeNeedle');
      const rotation = -90 + (successProb * 180);
      gaugeNeedle.style.transform = `translateX(-50%) rotate(${rotation}deg)`;

      // Legal analysis section
      updateLegalAnalysis(evidenceScore, leverageScore);

      // Alternative options section
      updateAlternatives();

      // Outcome bars
      updateBar('barZero', outcomes.zero.prob);
      updateBar('barLowball', outcomes.lowball.prob);
      updateBar('barPartial', outcomes.partial.prob);
      updateBar('barFull', outcomes.full.prob);

      document.getElementById('amountLowball').textContent = formatCurrency(outcomes.lowball.amount);
      document.getElementById('amountPartial').textContent = formatCurrency(outcomes.partial.amount);
      document.getElementById('amountFull').textContent = formatCurrency(outcomes.full.amount);

      // Stacked bar
      const stackedBar = document.getElementById('stackedBar');
      stackedBar.innerHTML = `
        <div class="stacked-segment zero" style="width: ${outcomes.zero.prob * 100}%">${outcomes.zero.prob > 0.08 ? formatPercent(outcomes.zero.prob) : ''}</div>
        <div class="stacked-segment lowball" style="width: ${outcomes.lowball.prob * 100}%">${outcomes.lowball.prob > 0.08 ? formatPercent(outcomes.lowball.prob) : ''}</div>
        <div class="stacked-segment partial" style="width: ${outcomes.partial.prob * 100}%">${outcomes.partial.prob > 0.08 ? formatPercent(outcomes.partial.prob) : ''}</div>
        <div class="stacked-segment full" style="width: ${outcomes.full.prob * 100}%">${outcomes.full.prob > 0.08 ? formatPercent(outcomes.full.prob) : ''}</div>
      `;

      // Comparison cards
      document.getElementById('diyExpected').textContent = formatCurrency(diy.expected, true);
      document.getElementById('diyExpected').className = 'card-expected ' + (diy.expected > 0 ? 'neutral' : 'negative');
      document.getElementById('diySuccess').textContent = formatPercent(diy.success);

      document.getElementById('assistExpected').textContent = formatCurrency(assist.expected, true);
      document.getElementById('assistExpected').className = 'card-expected ' + (assist.expected > 0 ? 'neutral' : 'negative');
      document.getElementById('assistSuccess').textContent = formatPercent(assist.success);

      document.getElementById('lawyerExpected').textContent = formatCurrency(expectedNet, true);
      document.getElementById('lawyerExpected').className = 'card-expected ' + (expectedNet > 0 ? 'positive' : 'negative');
      document.getElementById('lawyerSuccess').textContent = formatPercent(lawyerSuccess);

      document.getElementById('smallClaimsExpected').textContent = formatCurrency(smallClaims.expected, true);
      document.getElementById('smallClaimsExpected').className = 'card-expected ' + (smallClaims.expected > 0 ? 'neutral' : 'negative');
      document.getElementById('smallClaimsSuccess').textContent = formatPercent(smallClaims.success);

      // Update recommended card
      const cards = [
        { id: 'cardDIY', expected: diy.expected, name: 'DIY' },
        { id: 'cardAssist', expected: assist.expected, name: 'DIY-Assist' },
        { id: 'cardLawyer', expected: expectedNet, name: 'Full Letter' },
        { id: 'cardSmallClaims', expected: smallClaims.expected, name: 'Small Claims' }
      ];

      cards.sort((a, b) => b.expected - a.expected);
      document.querySelectorAll('.comparison-card').forEach(c => c.classList.remove('recommended'));

      if (cards[0].expected > 50) {
        document.getElementById(cards[0].id).classList.add('recommended');
        updateCTA(cards[0], amount, expectedNet, assist.expected);
      }

      // Risk cards
      updateRiskCard('riskRetaliation', retaliationCost,
        retaliationCost < 100 ? 'low' : retaliationCost < 200 ? 'medium' : 'high',
        `Possible negative response, ~${formatCurrency(retaliationCost)} hassle value`
      );

      // Improve items
      updateImproveItems();
    }

    function updateLegalAnalysis(evidenceScore, leverageScore) {
      const grid = document.getElementById('legalAnalysisGrid');
      const insight = categoryInsights[state.category] || categoryInsights.other;

      let contractAnalysis = '';
      if (state.hasContract === 'yes') {
        contractAnalysis = '<strong>Strong contract formation.</strong> Written agreement establishes clear terms, making breach easier to prove.';
      } else if (state.hasContract === 'partial') {
        contractAnalysis = '<strong>Partial documentation.</strong> Emails/texts may establish contract terms, but some ambiguity exists.';
      } else {
        contractAnalysis = '<strong>Contract formation is questionable.</strong> Oral agreements are enforceable but harder to prove. Focus on gathering any written communications.';
      }

      let evidenceAnalysis = '';
      if (evidenceScore > 0.7) {
        evidenceAnalysis = '<strong>Strong evidence position.</strong> Your documentation supports your claim well.';
      } else if (evidenceScore > 0.4) {
        evidenceAnalysis = '<strong>Moderate evidence.</strong> Some gaps exist. Strengthen with additional documentation if possible.';
      } else {
        evidenceAnalysis = '<strong>Evidence needs strengthening.</strong> Without better documentation, this becomes a credibility contest.';
      }

      let leverageAnalysis = '';
      if (state.chargebackAvail === 'yes') {
        leverageAnalysis = '<strong>Chargeback available.</strong> This is powerful leverage - consider filing before the window closes.';
      } else if (state.willingToSue === 'yes') {
        leverageAnalysis = '<strong>Litigation credibility.</strong> Your willingness to pursue small claims adds weight to demands.';
      } else {
        leverageAnalysis = '<strong>Limited leverage.</strong> Without chargeback rights or litigation credibility, demand letter is your main tool.';
      }

      let categoryAnalysis = `<strong>${insight.title}:</strong> ` + insight.content.split('<strong>')[1]?.split('</strong>')[0] || 'Standard contract law applies.';

      grid.innerHTML = `
        <div class="legal-card">
          <div class="legal-card-header">
            <span class="legal-card-icon">&#128196;</span>
            <span class="legal-card-title">Contract Formation</span>
          </div>
          <div class="legal-card-content">${contractAnalysis}</div>
        </div>
        <div class="legal-card">
          <div class="legal-card-header">
            <span class="legal-card-icon">&#128269;</span>
            <span class="legal-card-title">Evidence Strength</span>
          </div>
          <div class="legal-card-content">${evidenceAnalysis}</div>
        </div>
        <div class="legal-card">
          <div class="legal-card-header">
            <span class="legal-card-icon">&#128200;</span>
            <span class="legal-card-title">Your Leverage</span>
          </div>
          <div class="legal-card-content">${leverageAnalysis}</div>
        </div>
        <div class="legal-card">
          <div class="legal-card-header">
            <span class="legal-card-icon">&#9878;</span>
            <span class="legal-card-title">Applicable Law</span>
          </div>
          <div class="legal-card-content">${categoryAnalysis}</div>
          <a href="${insight.link}" class="legal-card-link" target="_blank">Read more &#8594;</a>
        </div>
      `;
    }

    function updateAlternatives() {
      const grid = document.getElementById('alternativesGrid');
      let cards = [];

      // Always show chargeback if applicable
      if (state.chargebackAvail === 'yes' || state.chargebackAvail === 'maybe') {
        cards.push({
          icon: '&#128179;',
          title: 'Payment Dispute',
          desc: state.chargebackAvail === 'yes' ? 'File within 60-120 days of payment' : 'Check with your bank/card issuer',
          tag: 'FREE',
          tagClass: 'free',
          recommended: state.chargebackAvail === 'yes' && state.category === 'refund'
        });
      }

      // Show platform dispute for refund cases
      if (state.category === 'refund') {
        cards.push({
          icon: '&#128172;',
          title: 'Platform Dispute',
          desc: 'Use Amazon/eBay/PayPal buyer protection',
          tag: 'FREE',
          tagClass: 'free',
          recommended: false
        });
      }

      // Consumer complaint for business disputes
      if (state.opponentType === 'bigCompany' || state.opponentType === 'smallBusiness') {
        cards.push({
          icon: '&#127970;',
          title: 'BBB / Consumer Complaint',
          desc: 'File with BBB, FTC, or state AG',
          tag: 'FREE',
          tagClass: 'free',
          recommended: false
        });
      }

      // Labor board for employment
      if (state.category === 'employment') {
        cards.push({
          icon: '&#128221;',
          title: 'Wage Claim / DLSE',
          desc: 'File free wage claim with Labor Commissioner',
          tag: 'RECOMMENDED',
          tagClass: 'recommended',
          recommended: true
        });
      }

      // Limit to 3 cards
      cards = cards.slice(0, 3);

      if (cards.length > 0) {
        grid.innerHTML = cards.map(card => `
          <div class="alt-card ${card.recommended ? 'recommended' : ''}">
            <div class="alt-card-icon">${card.icon}</div>
            <div class="alt-card-title">${card.title}</div>
            <div class="alt-card-desc">${card.desc}</div>
            <span class="alt-card-tag ${card.tagClass}">${card.tag}</span>
          </div>
        `).join('');
        document.getElementById('alternativesSection').style.display = 'block';
      } else {
        document.getElementById('alternativesSection').style.display = 'none';
      }
    }

    function updateBar(id, prob) {
      const bar = document.getElementById(id);
      const percent = Math.round(prob * 100);
      bar.style.width = `${percent}%`;
      bar.textContent = percent > 5 ? `${percent}%` : '';
    }

    function updateRiskCard(id, cost, level, text) {
      const card = document.getElementById(id);
      card.className = `risk-card ${level}`;
      card.querySelector('.risk-level').className = `risk-level ${level}`;
      card.querySelector('.risk-level').textContent = level.toUpperCase();
      card.querySelector('.risk-cost').textContent = text;
    }

    function updateImproveItems() {
      const items = [];

      if (state.proofPromise !== 'yes') {
        items.push({
          icon: '&#128248;',
          text: 'Get screenshots of the original promises or ads',
          impact: '+15%'
        });
      }

      if (state.admissions !== 'yes') {
        items.push({
          icon: '&#128231;',
          text: 'Document a clear written refusal or acknowledgment from them',
          impact: '+10%'
        });
      }

      if (state.damagesClear !== 'yes') {
        items.push({
          icon: '&#128203;',
          text: 'Gather all payment receipts and create a clear damages summary',
          impact: '+8%'
        });
      }

      if (state.willingToSue !== 'yes') {
        items.push({
          icon: '&#9878;',
          text: 'Be prepared to follow through with small claims if needed',
          impact: '+12%'
        });
      }

      if (state.chargebackAvail === 'maybe' || state.chargebackAvail === 'no') {
        items.push({
          icon: '&#128179;',
          text: 'Check if you can still file a payment dispute with your bank/card',
          impact: '+10%'
        });
      }

      const container = document.getElementById('improveItems');
      if (items.length > 0) {
        container.innerHTML = items.slice(0, 3).map(item => `
          <div class="improve-item">
            <div class="improve-icon">${item.icon}</div>
            <div class="improve-text">${item.text}</div>
            <span class="improve-impact">${item.impact}</span>
          </div>
        `).join('');
        document.getElementById('improveSection').style.display = 'block';
      } else {
        document.getElementById('improveSection').style.display = 'none';
      }
    }

    function formatCurrency(num, showSign = false) {
      const formatted = '$' + Math.abs(Math.round(num)).toLocaleString();
      if (showSign) {
        return num >= 0 ? '+' + formatted : '-' + formatted;
      }
      return formatted;
    }

    function formatPercent(num) {
      return Math.round(num * 100) + '%';
    }

    function updateCTA(recommended, amount, fullLetterNet, assistNet) {
      const ctaTitle = document.getElementById('ctaTitle');
      const ctaText = document.getElementById('ctaText');
      const ctaButtons = document.getElementById('ctaButtons');

      if (recommended.id === 'cardAssist') {
        ctaTitle.textContent = 'DIY-Assist May Be Your Best Option';
        ctaText.textContent = `For a ${formatCurrency(amount)} claim with these circumstances, I can write a legal opinion memo ($240) that you send yourself. This gives you professional legal arguments at lower cost.`;
        ctaButtons.innerHTML = `
          <a href="https://terms.law/#contact" class="cta-btn cta-btn-primary">
            Get DIY-Assist - $240
          </a>
          <a href="https://terms.law/demand-letters/" class="cta-btn cta-btn-secondary">
            Learn More
          </a>
        `;
      } else if (recommended.id === 'cardLawyer' && fullLetterNet > 200) {
        ctaTitle.textContent = 'Ready to Move Forward?';
        ctaText.textContent = `Based on your inputs, a full demand letter appears to be a good investment with expected net benefit of ${formatCurrency(fullLetterNet, true)}.`;
        ctaButtons.innerHTML = `
          <a href="https://terms.law/#contact" class="cta-btn cta-btn-primary">
            Get Full Letter - $450
          </a>
          <a href="https://terms.law/demand-letters/" class="cta-btn cta-btn-secondary">
            Learn More
          </a>
        `;
      } else if (recommended.id === 'cardDIY') {
        ctaTitle.textContent = 'Consider Starting with a DIY Approach';
        ctaText.textContent = 'Given your situation, trying a DIY letter first may be the most cost-effective approach. If that doesn\'t work, you can always escalate.';
        ctaButtons.innerHTML = `
          <a href="https://terms.law/#contact" class="cta-btn cta-btn-secondary">
            Get a Free Consult
          </a>
          <a href="https://terms.law/demand-letters/" class="cta-btn cta-btn-secondary">
            DIY Letter Tips
          </a>
        `;
      } else if (recommended.id === 'cardSmallClaims') {
        ctaTitle.textContent = 'Small Claims Court May Be Your Best Bet';
        ctaText.textContent = 'For your situation, filing directly in small claims court might be more effective than a demand letter.';
        ctaButtons.innerHTML = `
          <a href="https://terms.law/#contact" class="cta-btn cta-btn-primary">
            Get Help Filing
          </a>
          <a href="https://terms.law/demand-letters/" class="cta-btn cta-btn-secondary">
            Learn More
          </a>
        `;
      }
    }

    function resetCalculator() {
      Object.keys(state).forEach(key => {
        if (key === 'currentStep') state[key] = 1;
        else if (key === 'hassleValue') state[key] = 250;
        else if (key === 'claimAmount') state[key] = 0;
        else state[key] = '';
      });

      document.getElementById('claimAmount').value = '';
      document.querySelectorAll('.category-tile, .option-btn').forEach(el => el.classList.remove('selected'));
      document.getElementById('hassleSlider').value = 250;
      document.getElementById('step1Insight').classList.remove('visible');

      goToStep(1);
    }
  </script>

</body>
</html>
