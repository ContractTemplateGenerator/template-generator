<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-901N2Y3CDZ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-901N2Y3CDZ');
    </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Airline In-Flight Injury Demand Letters | Seat, Overhead Bin & Turbulence Injuries | Terms.Law</title>
  <meta name="description" content="Free airline injury demand letter generator. Draft professional demands for in-flight injuries from faulty seats, overhead bins, beverage carts, and turbulence. Includes Montreal Convention guidance for international flights.">
  <meta name="keywords" content="airline injury demand letter, in-flight injury claim, delta injury claim, united injury, american airlines injury, overhead bin injury, turbulence injury, seat malfunction injury, montreal convention, common carrier liability">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">

  <!-- Calendly Widget -->
  <link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
  <script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>

  <style>
    /* ============================================
       CSS VARIABLES
       ============================================ */
    :root {
      --color-primary: #1e40af;
      --color-primary-dark: #1e3a8a;
      --color-primary-light: #3b82f6;
      --color-accent: #0891b2;
      --color-accent-light: #06b6d4;
      --color-success: #059669;
      --color-warning: #d97706;
      --color-danger: #dc2626;
      --color-info: #7c3aed;

      --color-bg: #f8fafc;
      --color-surface: #ffffff;
      --color-border: #e2e8f0;
      --color-border-light: #f1f5f9;
      --color-text: #0f172a;
      --color-text-secondary: #334155;
      --color-text-muted: #64748b;
      --color-text-light: #94a3b8;

      --color-dark: #0f172a;
      --color-dark-surface: #1e293b;

      /* Document preview colors */
      --doc-bg: #fefefe;
      --doc-border: #d1d5db;
      --doc-highlight: #fef3c7;
      --doc-highlight-border: #fcd34d;
      --doc-text: #1f2937;

      --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);

      --radius-sm: 6px;
      --radius-md: 10px;
      --radius-lg: 14px;
      --radius-xl: 20px;
      --radius-full: 9999px;

      --space-xs: 0.25rem;
      --space-sm: 0.5rem;
      --space-md: 1rem;
      --space-lg: 1.5rem;
      --space-xl: 2rem;
      --space-2xl: 3rem;
      --space-3xl: 4rem;

      --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
      --font-serif: 'Merriweather', Georgia, serif;
      --max-width: 1400px;

      --transition-fast: 150ms ease;
      --transition-base: 200ms ease;
    }

    /* ============================================
       RESET & BASE
       ============================================ */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
      -webkit-font-smoothing: antialiased;
    }

    body {
      font-family: var(--font-sans);
      font-size: 16px;
      line-height: 1.6;
      color: var(--color-text);
      background: var(--color-bg);
    }

    a {
      color: var(--color-primary);
      text-decoration: none;
      transition: color var(--transition-fast);
    }

    a:hover {
      color: var(--color-primary-dark);
    }

    .container {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 var(--space-lg);
    }

    /* ============================================
       HEADER
       ============================================ */
    .site-header {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      padding: 0;
      position: sticky;
      top: 0;
      z-index: 100;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }

    .header-content {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 52px;
      max-width: var(--max-width);
      margin: 0 auto;
    }

    .header-nav {
      display: flex;
      align-items: center;
      gap: 0;
      height: 100%;
    }

    .nav-link {
      color: #94a3b8;
      font-size: 0.85rem;
      font-weight: 600;
      padding: 16px 24px;
      transition: all 150ms ease;
      text-decoration: none;
      height: 100%;
      display: flex;
      align-items: center;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      border-bottom: 2px solid transparent;
      margin-bottom: -1px;
    }

    .nav-link:hover {
      color: #ffffff;
      background: rgba(255, 255, 255, 0.05);
    }

    .nav-link.active {
      color: #ffffff;
      background: rgba(255, 255, 255, 0.08);
      border-bottom-color: #3b82f6;
    }

    .nav-link.home-logo {
      padding: 12px 20px;
      font-size: 1.1rem;
      font-weight: 800;
      letter-spacing: -0.02em;
      text-transform: none;
    }

    .nav-link.home-logo .logo-text {
      background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    /* Breadcrumb */
    .breadcrumb {
      background: var(--color-surface);
      border-bottom: 1px solid var(--color-border);
      padding: var(--space-sm) 0;
    }

    .breadcrumb-content {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      font-size: 0.85rem;
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 var(--space-lg);
      flex-wrap: wrap;
    }

    .breadcrumb-link {
      color: var(--color-text-muted);
    }

    .breadcrumb-link:hover {
      color: var(--color-primary);
    }

    .breadcrumb-separator {
      color: var(--color-text-light);
    }

    .breadcrumb-current {
      color: var(--color-text);
      font-weight: 500;
    }

    /* ============================================
       HERO SECTION
       ============================================ */
    .hero {
      background: linear-gradient(135deg, #1e40af 0%, #7c3aed 50%, #0891b2 100%);
      color: #ffffff;
      padding: var(--space-2xl) 0;
      position: relative;
      overflow: hidden;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
      opacity: 0.5;
    }

    .hero-content {
      position: relative;
      z-index: 1;
      text-align: center;
      max-width: 900px;
      margin: 0 auto;
    }

    .hero-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      padding: 8px 16px;
      border-radius: var(--radius-full);
      font-size: 0.85rem;
      font-weight: 600;
      margin-bottom: var(--space-md);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .hero h1 {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: var(--space-md);
      line-height: 1.2;
    }

    .hero p {
      font-size: 1.15rem;
      opacity: 0.95;
      margin-bottom: var(--space-lg);
      line-height: 1.7;
    }

    .hero-stats {
      display: flex;
      justify-content: center;
      gap: var(--space-xl);
      flex-wrap: wrap;
    }

    .hero-stat {
      text-align: center;
    }

    .hero-stat-value {
      font-size: 2rem;
      font-weight: 800;
      display: block;
    }

    .hero-stat-label {
      font-size: 0.85rem;
      opacity: 0.8;
    }

    /* ============================================
       TAB NAVIGATION
       ============================================ */
    .tab-nav-container {
      background: var(--color-surface);
      border-bottom: 1px solid var(--color-border);
      position: sticky;
      top: 52px;
      z-index: 90;
    }

    .tab-nav {
      display: flex;
      max-width: var(--max-width);
      margin: 0 auto;
      overflow-x: auto;
      scrollbar-width: none;
    }

    .tab-nav::-webkit-scrollbar {
      display: none;
    }

    .tab-btn {
      padding: 16px 24px;
      background: none;
      border: none;
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--color-text-muted);
      cursor: pointer;
      white-space: nowrap;
      border-bottom: 3px solid transparent;
      transition: all var(--transition-fast);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .tab-btn:hover {
      color: var(--color-text);
      background: var(--color-bg);
    }

    .tab-btn.active {
      color: var(--color-primary);
      border-bottom-color: var(--color-primary);
    }

    .tab-btn .tab-icon {
      font-size: 1.1rem;
    }

    /* ============================================
       TAB CONTENT
       ============================================ */
    .tab-content {
      display: none;
      animation: fadeIn 0.3s ease;
    }

    .tab-content.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* ============================================
       EDUCATIONAL CONTENT STYLES
       ============================================ */
    .content-section {
      padding: var(--space-2xl) 0;
    }

    .content-section:nth-child(even) {
      background: var(--color-surface);
    }

    .section-header {
      text-align: center;
      margin-bottom: var(--space-2xl);
    }

    .section-header h2 {
      font-size: 2rem;
      font-weight: 800;
      color: var(--color-text);
      margin-bottom: var(--space-sm);
    }

    .section-header p {
      font-size: 1.1rem;
      color: var(--color-text-secondary);
      max-width: 700px;
      margin: 0 auto;
    }

    /* Info Cards */
    .info-card {
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      padding: var(--space-xl);
      margin-bottom: var(--space-lg);
      box-shadow: var(--shadow-sm);
    }

    .info-card.highlight {
      border-left: 4px solid var(--color-primary);
      background: linear-gradient(135deg, #eff6ff 0%, #f0f9ff 100%);
    }

    .info-card.warning {
      border-left: 4px solid var(--color-warning);
      background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
    }

    .info-card.success {
      border-left: 4px solid var(--color-success);
      background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
    }

    .info-card.danger {
      border-left: 4px solid var(--color-danger);
      background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
    }

    .info-card h3 {
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: var(--space-md);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    .info-card ul, .info-card ol {
      margin-left: var(--space-lg);
    }

    .info-card li {
      margin-bottom: var(--space-sm);
    }

    /* Visual Framework Diagram */
    .framework-diagram {
      background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
      border-radius: var(--radius-xl);
      padding: var(--space-2xl);
      color: #ffffff;
      margin: var(--space-xl) 0;
    }

    .framework-title {
      text-align: center;
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: var(--space-xl);
    }

    .framework-flow {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-md);
      flex-wrap: wrap;
    }

    .framework-step {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      text-align: center;
      min-width: 150px;
      backdrop-filter: blur(10px);
    }

    .framework-step-number {
      width: 32px;
      height: 32px;
      background: var(--color-primary-light);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      margin: 0 auto var(--space-sm);
    }

    .framework-step-title {
      font-weight: 600;
      margin-bottom: 4px;
    }

    .framework-step-desc {
      font-size: 0.8rem;
      opacity: 0.8;
    }

    .framework-arrow {
      font-size: 1.5rem;
      color: var(--color-primary-light);
    }

    /* Comparison Table */
    .comparison-table-container {
      overflow-x: auto;
      margin: var(--space-xl) 0;
      border-radius: var(--radius-lg);
      border: 1px solid var(--color-border);
    }

    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      min-width: 600px;
    }

    .comparison-table th {
      background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-info) 100%);
      color: #ffffff;
      padding: var(--space-md) var(--space-lg);
      text-align: left;
      font-weight: 600;
      font-size: 0.9rem;
    }

    .comparison-table td {
      padding: var(--space-md) var(--space-lg);
      border-bottom: 1px solid var(--color-border);
      vertical-align: top;
    }

    .comparison-table tr:nth-child(even) {
      background: var(--color-bg);
    }

    .comparison-table tr:hover {
      background: #f0f9ff;
    }

    .table-badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: var(--radius-full);
      font-size: 0.75rem;
      font-weight: 600;
    }

    .table-badge.domestic {
      background: #dbeafe;
      color: #1e40af;
    }

    .table-badge.international {
      background: #f3e8ff;
      color: #7c3aed;
    }

    /* Injury Type Cards */
    .injury-types-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: var(--space-lg);
      margin: var(--space-xl) 0;
    }

    .injury-type-card {
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      padding: var(--space-xl);
      transition: all var(--transition-base);
      cursor: pointer;
    }

    .injury-type-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
      border-color: var(--color-primary-light);
    }

    .injury-type-card.selected {
      border-color: var(--color-primary);
      background: linear-gradient(135deg, #eff6ff 0%, #f0f9ff 100%);
      box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.1);
    }

    .injury-type-icon {
      font-size: 2.5rem;
      margin-bottom: var(--space-md);
    }

    .injury-type-title {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: var(--space-sm);
    }

    .injury-type-desc {
      font-size: 0.9rem;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-md);
    }

    .injury-type-examples {
      font-size: 0.8rem;
      color: var(--color-text-muted);
    }

    /* Timeline */
    .timeline {
      position: relative;
      padding-left: 30px;
      margin: var(--space-xl) 0;
    }

    .timeline::before {
      content: '';
      position: absolute;
      left: 8px;
      top: 0;
      bottom: 0;
      width: 2px;
      background: linear-gradient(to bottom, var(--color-primary), var(--color-accent));
    }

    .timeline-item {
      position: relative;
      padding-bottom: var(--space-xl);
    }

    .timeline-item::before {
      content: '';
      position: absolute;
      left: -26px;
      top: 4px;
      width: 12px;
      height: 12px;
      background: var(--color-primary);
      border-radius: 50%;
      border: 3px solid var(--color-surface);
      box-shadow: var(--shadow-sm);
    }

    .timeline-title {
      font-weight: 700;
      margin-bottom: var(--space-xs);
    }

    .timeline-desc {
      color: var(--color-text-secondary);
      font-size: 0.95rem;
    }

    /* ============================================
       GENERATOR SECTION
       ============================================ */
    .generator-layout {
      display: grid;
      grid-template-columns: 480px 1fr;
      min-height: calc(100vh - 200px);
      background: var(--color-bg);
    }

    /* Form Sidebar */
    .generator-sidebar {
      background: var(--color-surface);
      border-right: 1px solid var(--color-border);
      overflow-y: auto;
      max-height: calc(100vh - 160px);
      position: sticky;
      top: 160px;
    }

    .sidebar-content {
      padding: var(--space-xl);
    }

    .form-section {
      margin-bottom: var(--space-xl);
    }

    .form-section-title {
      font-size: 0.75rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--color-text-muted);
      margin-bottom: var(--space-md);
      padding-bottom: var(--space-sm);
      border-bottom: 2px solid var(--color-border-light);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    .form-group {
      margin-bottom: var(--space-md);
    }

    .form-label {
      display: block;
      font-size: 0.875rem;
      font-weight: 600;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-xs);
    }

    .form-label .required {
      color: var(--color-danger);
    }

    .form-input,
    .form-select,
    .form-textarea {
      width: 100%;
      padding: 12px 14px;
      border: 1.5px solid var(--color-border);
      border-radius: var(--radius-md);
      font-size: 0.95rem;
      font-family: var(--font-sans);
      transition: all var(--transition-fast);
      background: var(--color-surface);
    }

    .form-input:focus,
    .form-select:focus,
    .form-textarea:focus {
      outline: none;
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.1);
    }

    .form-textarea {
      min-height: 100px;
      resize: vertical;
    }

    .form-help {
      font-size: 0.8rem;
      color: var(--color-text-muted);
      margin-top: 4px;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-md);
    }

    /* Flight Type Toggle */
    .flight-type-toggle {
      display: flex;
      background: var(--color-bg);
      border-radius: var(--radius-md);
      padding: 4px;
      margin-bottom: var(--space-md);
    }

    .flight-type-btn {
      flex: 1;
      padding: 12px;
      border: none;
      background: transparent;
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--color-text-muted);
      cursor: pointer;
      border-radius: var(--radius-sm);
      transition: all var(--transition-fast);
    }

    .flight-type-btn.active {
      background: var(--color-surface);
      color: var(--color-primary);
      box-shadow: var(--shadow-sm);
    }

    /* Injury Type Selection */
    .injury-select-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-sm);
      margin-bottom: var(--space-md);
    }

    .injury-select-card {
      border: 2px solid var(--color-border);
      border-radius: var(--radius-md);
      padding: var(--space-md);
      cursor: pointer;
      transition: all var(--transition-fast);
      text-align: center;
    }

    .injury-select-card:hover {
      border-color: var(--color-primary-light);
      background: rgba(30, 64, 175, 0.02);
    }

    .injury-select-card.selected {
      border-color: var(--color-primary);
      background: rgba(30, 64, 175, 0.05);
    }

    .injury-select-card .icon {
      font-size: 1.5rem;
      margin-bottom: var(--space-xs);
    }

    .injury-select-card .label {
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--color-text-secondary);
    }

    /* Damages Checklist */
    .damages-checklist {
      display: flex;
      flex-direction: column;
      gap: var(--space-sm);
    }

    .damage-item {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      padding: var(--space-sm) var(--space-md);
      background: var(--color-bg);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .damage-item:hover {
      background: var(--color-border-light);
    }

    .damage-item.selected {
      background: rgba(30, 64, 175, 0.1);
      border: 1px solid var(--color-primary-light);
    }

    .damage-item input[type="checkbox"] {
      width: 18px;
      height: 18px;
      accent-color: var(--color-primary);
    }

    .damage-item label {
      flex: 1;
      font-size: 0.9rem;
      cursor: pointer;
    }

    .damage-item input[type="text"] {
      width: 100px;
      padding: 6px 10px;
      border: 1px solid var(--color-border);
      border-radius: var(--radius-sm);
      font-size: 0.85rem;
    }

    /* Severity Slider */
    .severity-slider-container {
      margin: var(--space-md) 0;
    }

    .severity-slider {
      width: 100%;
      height: 8px;
      border-radius: 4px;
      background: linear-gradient(to right, #10b981, #f59e0b, #ef4444);
      -webkit-appearance: none;
      appearance: none;
      cursor: pointer;
    }

    .severity-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      background: var(--color-surface);
      border: 3px solid var(--color-primary);
      border-radius: 50%;
      cursor: pointer;
      box-shadow: var(--shadow-md);
    }

    .severity-labels {
      display: flex;
      justify-content: space-between;
      margin-top: var(--space-xs);
      font-size: 0.75rem;
      color: var(--color-text-muted);
    }

    /* ============================================
       PREVIEW PANEL
       ============================================ */
    .preview-panel {
      background: var(--color-bg);
      padding: var(--space-xl);
      overflow-y: auto;
    }

    .preview-toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-lg);
      padding-bottom: var(--space-md);
      border-bottom: 1px solid var(--color-border);
      flex-wrap: wrap;
      gap: var(--space-md);
    }

    .preview-title {
      font-size: 1rem;
      font-weight: 700;
      color: var(--color-text);
    }

    .preview-actions {
      display: flex;
      gap: var(--space-sm);
      flex-wrap: wrap;
    }

    .preview-btn {
      padding: 10px 18px;
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      background: var(--color-surface);
      color: var(--color-text-secondary);
      font-size: 0.85rem;
      font-weight: 500;
      cursor: pointer;
      transition: all var(--transition-fast);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .preview-btn:hover {
      border-color: var(--color-primary);
      color: var(--color-primary);
    }

    .preview-btn.primary {
      background: var(--color-primary);
      border-color: var(--color-primary);
      color: #ffffff;
    }

    .preview-btn.primary:hover {
      background: var(--color-primary-dark);
    }

    .preview-btn.edit-mode.active {
      background: var(--color-warning);
      border-color: var(--color-warning);
      color: #ffffff;
    }

    /* Document Container */
    .document-container {
      background: var(--doc-bg);
      border: 1px solid var(--doc-border);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-lg);
      overflow: hidden;
    }

    .document-body {
      padding: 60px;
      font-family: var(--font-serif);
      font-size: 13px;
      line-height: 1.8;
      color: var(--doc-text);
      max-height: calc(100vh - 320px);
      overflow-y: auto;
    }

    .document-body.full-edit-mode {
      outline: 3px solid var(--color-warning);
      background: #fffbeb;
    }

    /* Document Styles */
    .doc-header {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid #333;
    }

    .doc-title {
      font-size: 16px;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 8px;
    }

    .doc-subtitle {
      font-size: 13px;
      color: #666;
    }

    .doc-date-line {
      text-align: right;
      margin-bottom: 20px;
      font-size: 12px;
    }

    .doc-address-block {
      margin-bottom: 25px;
      line-height: 1.6;
    }

    .doc-re-line {
      margin-bottom: 20px;
      font-weight: bold;
    }

    .doc-salutation {
      margin-bottom: 15px;
    }

    .doc-paragraph {
      margin-bottom: 15px;
      text-align: justify;
    }

    .doc-section-title {
      font-weight: bold;
      text-transform: uppercase;
      margin-top: 25px;
      margin-bottom: 12px;
      font-size: 12px;
      letter-spacing: 0.5px;
      color: #1e40af;
    }

    .doc-list {
      margin-left: 25px;
      margin-bottom: 15px;
    }

    .doc-list li {
      margin-bottom: 8px;
    }

    .doc-legal-cite {
      font-style: italic;
      color: #1e40af;
    }

    .doc-closing {
      margin-top: 30px;
    }

    .doc-signature-block {
      margin-top: 40px;
    }

    .doc-signature-line {
      border-bottom: 1px solid #000;
      width: 250px;
      margin-bottom: 4px;
      margin-top: 50px;
    }

    .doc-signature-name {
      font-weight: bold;
    }

    /* Highlighted editable fields */
    .doc-highlight {
      background: var(--doc-highlight);
      padding: 2px 6px;
      border-radius: 4px;
      border-bottom: 2px solid var(--doc-highlight-border);
      transition: all var(--transition-fast);
      display: inline;
      font-family: var(--font-serif);
    }

    .doc-highlight.empty {
      color: var(--color-text-muted);
      font-style: italic;
    }

    .doc-highlight.flash {
      animation: flashHighlight 1.5s ease;
    }

    @keyframes flashHighlight {
      0%, 100% { background: var(--doc-highlight); }
      25% { background: #fbbf24; box-shadow: 0 0 12px rgba(251, 191, 36, 0.5); }
      50% { background: #fde68a; }
      75% { background: #fbbf24; box-shadow: 0 0 8px rgba(251, 191, 36, 0.3); }
    }

    /* Flash animation for container divs */
    div.flash, ul.flash, ol.flash {
      animation: flashContainer 1.5s ease;
      border-radius: 8px;
    }

    @keyframes flashContainer {
      0%, 100% { background: transparent; }
      25% { background: rgba(251, 191, 36, 0.2); box-shadow: 0 0 12px rgba(251, 191, 36, 0.3); }
      50% { background: rgba(253, 230, 138, 0.3); }
      75% { background: rgba(251, 191, 36, 0.15); box-shadow: 0 0 8px rgba(251, 191, 36, 0.2); }
    }

    /* Inline editing */
    .doc-highlight[contenteditable="true"] {
      cursor: text;
    }

    .doc-highlight[contenteditable="true"]:focus {
      outline: 2px solid var(--color-primary);
      outline-offset: 2px;
      background: #fef9c3;
    }

    /* ============================================
       NEXT STEPS SECTION
       ============================================ */
    .next-steps-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: var(--space-lg);
      margin: var(--space-xl) 0;
    }

    .next-step-card {
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      padding: var(--space-xl);
      position: relative;
      overflow: hidden;
    }

    .next-step-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
    }

    .next-step-card.step-1::before { background: #10b981; }
    .next-step-card.step-2::before { background: #3b82f6; }
    .next-step-card.step-3::before { background: #8b5cf6; }
    .next-step-card.step-4::before { background: #f59e0b; }

    .next-step-number {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 1.1rem;
      margin-bottom: var(--space-md);
    }

    .step-1 .next-step-number { background: #d1fae5; color: #065f46; }
    .step-2 .next-step-number { background: #dbeafe; color: #1e40af; }
    .step-3 .next-step-number { background: #ede9fe; color: #5b21b6; }
    .step-4 .next-step-number { background: #fef3c7; color: #92400e; }

    .next-step-title {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: var(--space-sm);
    }

    .next-step-desc {
      color: var(--color-text-secondary);
      font-size: 0.95rem;
      margin-bottom: var(--space-md);
    }

    .next-step-details {
      font-size: 0.85rem;
      color: var(--color-text-muted);
    }

    .next-step-details li {
      margin-bottom: 4px;
    }

    /* ============================================
       ATTORNEY CTA
       ============================================ */
    .attorney-cta {
      margin-top: var(--space-xl);
      padding: var(--space-xl);
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      border-radius: var(--radius-lg);
      color: #ffffff;
      text-align: center;
    }

    .attorney-cta h3 {
      font-size: 1.25rem;
      margin-bottom: var(--space-sm);
    }

    .attorney-cta p {
      font-size: 0.95rem;
      opacity: 0.9;
      margin-bottom: var(--space-md);
    }

    .attorney-cta-btn {
      display: inline-block;
      padding: 12px 28px;
      background: #ffffff;
      color: var(--color-primary);
      border-radius: var(--radius-md);
      font-weight: 600;
      font-size: 0.95rem;
      cursor: pointer;
      border: none;
      transition: all var(--transition-fast);
    }

    .attorney-cta-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    /* ============================================
       TOAST
       ============================================ */
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--color-dark);
      color: #ffffff;
      padding: 14px 28px;
      border-radius: var(--radius-md);
      font-size: 0.9rem;
      box-shadow: var(--shadow-xl);
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.3s ease;
      z-index: 1000;
    }

    .toast.show {
      transform: translateY(0);
      opacity: 1;
    }

    /* ============================================
       FOOTER
       ============================================ */
    .site-footer {
      background: var(--color-dark);
      color: #94a3b8;
      padding: var(--space-xl) 0;
    }

    .footer-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 var(--space-lg);
      flex-wrap: wrap;
      gap: var(--space-md);
    }

    .footer-links {
      display: flex;
      gap: var(--space-lg);
    }

    .footer-links a {
      color: #94a3b8;
      font-size: 0.85rem;
    }

    .footer-links a:hover {
      color: #ffffff;
    }

    /* ============================================
       RESPONSIVE
       ============================================ */
    @media (max-width: 1200px) {
      .generator-layout {
        grid-template-columns: 400px 1fr;
      }
    }

    @media (max-width: 1024px) {
      .generator-layout {
        grid-template-columns: 1fr;
      }

      .generator-sidebar {
        max-height: none;
        position: relative;
        top: 0;
      }

      .document-body {
        max-height: none;
        padding: 40px;
      }

      .hero h1 {
        font-size: 2rem;
      }

      .framework-flow {
        flex-direction: column;
      }

      .framework-arrow {
        transform: rotate(90deg);
      }
    }

    @media (max-width: 768px) {
      .hero h1 {
        font-size: 1.75rem;
      }

      .hero-stats {
        gap: var(--space-lg);
      }

      .tab-btn {
        padding: 12px 16px;
        font-size: 0.85rem;
      }

      .form-row {
        grid-template-columns: 1fr;
      }

      .injury-select-grid {
        grid-template-columns: 1fr;
      }

      .document-body {
        padding: 24px;
        font-size: 12px;
      }
    }

    /* ============================================
       PRINT STYLES
       ============================================ */
    @media print {
      .site-header, .hero, .tab-nav-container, .generator-sidebar,
      .preview-toolbar, .attorney-cta, .site-footer, .toast, .breadcrumb {
        display: none !important;
      }

      .generator-layout {
        display: block !important;
      }

      .preview-panel {
        padding: 0 !important;
        background: white !important;
      }

      .document-container {
        box-shadow: none !important;
        border: none !important;
      }

      .document-body {
        max-height: none !important;
        padding: 0 !important;
      }

      .doc-highlight {
        background: transparent !important;
        border: none !important;
        padding: 0 !important;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <div class="header-content">
      <nav class="header-nav">
        <a href="https://terms.law" class="nav-link home-logo">
          <span class="logo-text">Terms.Law</span>
        </a>
        <a href="https://terms.law/legal-templates/" class="nav-link">Templates</a>
        <a href="https://terms.law/Templates/" class="nav-link">Contracts</a>
        <a href="https://terms.law/Demand-Letters/" class="nav-link active">Demand Letters</a>
        <a href="https://terms.law/contact" class="nav-link">Contact</a>
      </nav>
    </div>
  </header>

  <!-- Breadcrumb -->
  <nav class="breadcrumb">
    <div class="breadcrumb-content">
      <a href="https://terms.law/Demand-Letters/" class="breadcrumb-link">Demand Letter Hub</a>
      <span class="breadcrumb-separator">/</span>
      <a href="#" class="breadcrumb-link">Personal Injury</a>
      <span class="breadcrumb-separator">/</span>
      <span class="breadcrumb-current">Airline & In-Flight Injuries</span>
    </div>
  </nav>

  <!-- Hero -->
  <section class="hero">
    <div class="container hero-content">
      <div class="hero-badge">
        <span>&#9992;</span> Transportation Injury Claims
      </div>
      <h1>Airline & In-Flight Injury Demand Letters</h1>
      <p>Professional demand letter generator for injuries caused by faulty seats, overhead bins, beverage carts, and turbulence. Includes guidance for both domestic flights and international travel under the Montreal Convention.</p>
      <div class="hero-stats">
        <div class="hero-stat">
          <span class="hero-stat-value">$151,880</span>
          <span class="hero-stat-label">SDR Montreal Convention Limit (2024)</span>
        </div>
        <div class="hero-stat">
          <span class="hero-stat-value">2 Years</span>
          <span class="hero-stat-label">Statute of Limitations</span>
        </div>
        <div class="hero-stat">
          <span class="hero-stat-value">Heightened</span>
          <span class="hero-stat-label">Duty of Care (Common Carrier)</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Tab Navigation -->
  <div class="tab-nav-container">
    <nav class="tab-nav">
      <button class="tab-btn active" onclick="openTab(event, 'learn')" data-tab="learn">
        <span class="tab-icon">&#128218;</span> Learn the Law
      </button>
      <button class="tab-btn" onclick="openTab(event, 'generator')" data-tab="generator">
        <span class="tab-icon">&#128221;</span> Generate Letter
      </button>
      <button class="tab-btn" onclick="openTab(event, 'evidence')" data-tab="evidence">
        <span class="tab-icon">&#128203;</span> Evidence Checklist
      </button>
      <button class="tab-btn" onclick="openTab(event, 'nextsteps')" data-tab="nextsteps">
        <span class="tab-icon">&#128640;</span> Next Steps
      </button>
    </nav>
  </div>

  <!-- LEARN TAB -->
  <div id="learn" class="tab-content active">
    <section class="content-section">
      <div class="container">
        <div class="section-header">
          <h2>Understanding Airline Injury Claims</h2>
          <p>The legal framework depends on whether your flight was domestic or international. Here's what you need to know.</p>
        </div>

        <!-- Framework Diagram -->
        <div class="framework-diagram">
          <div class="framework-title">Determining Your Legal Framework</div>
          <div class="framework-flow">
            <div class="framework-step">
              <div class="framework-step-number">1</div>
              <div class="framework-step-title">Identify Flight Type</div>
              <div class="framework-step-desc">Domestic vs International</div>
            </div>
            <span class="framework-arrow">&#8594;</span>
            <div class="framework-step">
              <div class="framework-step-number">2</div>
              <div class="framework-step-title">Apply Legal Standard</div>
              <div class="framework-step-desc">State Law or Montreal Convention</div>
            </div>
            <span class="framework-arrow">&#8594;</span>
            <div class="framework-step">
              <div class="framework-step-number">3</div>
              <div class="framework-step-title">Prove Liability</div>
              <div class="framework-step-desc">Negligence or "Accident"</div>
            </div>
            <span class="framework-arrow">&#8594;</span>
            <div class="framework-step">
              <div class="framework-step-number">4</div>
              <div class="framework-step-title">Document Damages</div>
              <div class="framework-step-desc">Medical + Other Losses</div>
            </div>
          </div>
        </div>

        <!-- Domestic vs International -->
        <div class="info-card highlight">
          <h3>&#127482;&#127480; Domestic Flights (U.S. to U.S.)</h3>
          <p><strong>Examples:</strong> Los Angeles to New York, Honolulu to Dallas, Chicago to Miami</p>
          <p>Domestic flights are governed by <strong>state tort law</strong> with a <strong>common carrier overlay</strong>. Airlines owe passengers the "highest degree of care practicable" consistent with air travel.</p>
          <ul>
            <li><strong>Legal Standard:</strong> Negligence - duty, breach, causation, damages</li>
            <li><strong>Statute of Limitations:</strong> Typically 2-3 years depending on state (California: 2 years per CCP &sect; 335.1)</li>
            <li><strong>No damage cap:</strong> Full compensatory damages available</li>
            <li><strong>Venue:</strong> State or federal court where accident occurred or defendant resides</li>
          </ul>
        </div>

        <div class="info-card" style="border-left-color: #7c3aed;">
          <h3>&#127758; International Flights (Montreal Convention)</h3>
          <p><strong>Examples:</strong> New York to London, Los Angeles to Tokyo, any flight with departure AND destination in different countries</p>
          <p>The <strong>Montreal Convention of 1999</strong> provides a uniform, exclusive regime for international air passenger injury claims.</p>
          <ul>
            <li><strong>Legal Standard:</strong> Article 17 - "accident" causing "bodily injury" on board or during embarking/disembarking</li>
            <li><strong>Statute of Limitations:</strong> Strict 2-year deadline from arrival or scheduled arrival</li>
            <li><strong>First-tier liability:</strong> Strict liability up to 151,880 SDR (~$200,000 USD) per passenger</li>
            <li><strong>Above that:</strong> Carrier liable unless it proves no negligence or third-party fault</li>
            <li><strong>Exclusivity:</strong> Preempts state law claims within its scope (El Al v. Tseng, 525 U.S. 155)</li>
          </ul>
        </div>

        <!-- Comparison Table -->
        <div class="comparison-table-container">
          <table class="comparison-table">
            <thead>
              <tr>
                <th>Factor</th>
                <th><span class="table-badge domestic">Domestic Flight</span></th>
                <th><span class="table-badge international">International Flight</span></th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Governing Law</strong></td>
                <td>State tort law + common carrier duty</td>
                <td>Montreal Convention (1999)</td>
              </tr>
              <tr>
                <td><strong>Standard of Care</strong></td>
                <td>Highest degree of care practicable</td>
                <td>"Accident" external to passenger</td>
              </tr>
              <tr>
                <td><strong>Liability Threshold</strong></td>
                <td>Must prove airline negligence</td>
                <td>Strict liability up to ~$200K; negligence above</td>
              </tr>
              <tr>
                <td><strong>Statute of Limitations</strong></td>
                <td>2-3 years (state dependent)</td>
                <td>Strict 2 years from arrival</td>
              </tr>
              <tr>
                <td><strong>Damages Cap</strong></td>
                <td>None (full compensatory)</td>
                <td>151,880 SDR for strict liability tier</td>
              </tr>
              <tr>
                <td><strong>Mental Distress Only</strong></td>
                <td>May be available under state law</td>
                <td>NOT recoverable without bodily injury (Floyd)</td>
              </tr>
              <tr>
                <td><strong>Key Cases</strong></td>
                <td>State negligence precedents</td>
                <td>Air France v. Saks, Olympic v. Husain</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- What Qualifies as an "Accident" -->
        <div class="section-header" style="margin-top: var(--space-2xl);">
          <h2>What Qualifies as an "Accident"?</h2>
          <p>Under the Montreal Convention, the injury must result from an "unexpected or unusual event external to the passenger."</p>
        </div>

        <div class="injury-types-grid">
          <div class="injury-type-card">
            <div class="injury-type-icon">&#128186;</div>
            <div class="injury-type-title">Seat & Hardware Failures</div>
            <div class="injury-type-desc">Malfunctioning seat backs, armrests, tray tables, or seat panels that collapse, snap, or crush body parts.</div>
            <div class="injury-type-examples"><strong>Qualifies:</strong> Yes - equipment malfunction is external to passenger</div>
          </div>
          <div class="injury-type-card">
            <div class="injury-type-icon">&#128188;</div>
            <div class="injury-type-title">Overhead Bin Injuries</div>
            <div class="injury-type-desc">Luggage falling from overhead bins due to improper latching, turbulence, or other passengers' actions.</div>
            <div class="injury-type-examples"><strong>Qualifies:</strong> Yes - latch failure or crew negligence is external</div>
          </div>
          <div class="injury-type-card">
            <div class="injury-type-icon">&#127861;</div>
            <div class="injury-type-title">Beverage Cart Collisions</div>
            <div class="injury-type-desc">Flight attendants striking passengers with service carts, spilling hot liquids, or running over feet/toes.</div>
            <div class="injury-type-examples"><strong>Qualifies:</strong> Yes - crew conduct is external to passenger</div>
          </div>
          <div class="injury-type-card">
            <div class="injury-type-icon">&#127787;</div>
            <div class="injury-type-title">Turbulence Injuries</div>
            <div class="injury-type-desc">Injuries during unexpected turbulence when fasten-seatbelt sign wasn't illuminated or crew failed to warn.</div>
            <div class="injury-type-examples"><strong>Qualifies:</strong> May qualify if crew failed to warn; pure weather may not</div>
          </div>
          <div class="injury-type-card">
            <div class="injury-type-icon">&#128682;</div>
            <div class="injury-type-title">Jet Bridge & Boarding</div>
            <div class="injury-type-desc">Slips, trips, and falls on jet bridges, boarding stairs, or during the embarking/disembarking process.</div>
            <div class="injury-type-examples"><strong>Qualifies:</strong> Yes if during boarding process; may involve airport too</div>
          </div>
          <div class="injury-type-card">
            <div class="injury-type-icon">&#128107;</div>
            <div class="injury-type-title">Crew Misconduct</div>
            <div class="injury-type-desc">Physical altercations with crew, failure to reseat away from hazards, or ignoring medical emergencies.</div>
            <div class="injury-type-examples"><strong>Qualifies:</strong> Yes - Olympic v. Husain (2004) established crew refusals can be "accidents"</div>
          </div>
        </div>

        <!-- Key Cases -->
        <div class="info-card warning">
          <h3>&#9878; Key Supreme Court Cases to Know</h3>
          <ul>
            <li><strong>Air France v. Saks (1985):</strong> Defined "accident" as an unexpected or unusual event <em>external to the passenger</em>. Normal cabin pressure changes causing deafness = NOT an accident.</li>
            <li><strong>Olympic Airways v. Husain (2004):</strong> Flight attendant's refusal to reseat asthmatic passenger away from smoke WAS an "accident." Crew conduct counts.</li>
            <li><strong>Eastern Airlines v. Floyd (1991):</strong> Mental distress without bodily injury is NOT recoverable under the Convention.</li>
            <li><strong>El Al Israel Airlines v. Tseng (1999):</strong> The Convention is EXCLUSIVE - you cannot bypass it with state law claims if it applies.</li>
          </ul>
        </div>

        <!-- Common Carrier Duty -->
        <div class="section-header" style="margin-top: var(--space-2xl);">
          <h2>Common Carrier Duty of Care</h2>
          <p>For domestic flights, airlines are held to an elevated standard of care as common carriers.</p>
        </div>

        <div class="info-card success">
          <h3>&#128737; What "Highest Degree of Care" Means</h3>
          <p>Unlike ordinary businesses, airlines must:</p>
          <ul>
            <li>Maintain aircraft and seating in safe condition through regular inspection and repair</li>
            <li>Train crew to identify and respond to hazards</li>
            <li>Warn passengers of known dangers (turbulence, hot beverages, etc.)</li>
            <li>Take reasonable steps to protect passengers from foreseeable harm, including from other passengers</li>
            <li>Provide assistance during medical emergencies</li>
          </ul>
          <p style="margin-top: var(--space-md);"><strong>Key Point:</strong> This heightened duty makes it easier to establish breach compared to ordinary negligence cases.</p>
        </div>
      </div>
    </section>
  </div>

  <!-- GENERATOR TAB -->
  <div id="generator" class="tab-content">
    <div class="generator-layout">
      <!-- Form Sidebar -->
      <aside class="generator-sidebar">
        <div class="sidebar-content">
          <!-- Flight Type -->
          <div class="form-section">
            <div class="form-section-title">
              <span>&#9992;</span> Flight Information
            </div>
            <div class="flight-type-toggle">
              <button class="flight-type-btn active" data-type="domestic" onclick="setFlightType('domestic')">
                &#127482;&#127480; Domestic
              </button>
              <button class="flight-type-btn" data-type="international" onclick="setFlightType('international')">
                &#127758; International
              </button>
            </div>
            <div class="form-group">
              <label class="form-label">Airline <span class="required">*</span></label>
              <select class="form-select" id="airline" onchange="trackFieldEdit('airline')">
                <option value="">Select airline...</option>
                <option value="Air Canada">Air Canada</option>
                <option value="Alaska Airlines">Alaska Airlines</option>
                <option value="Allegiant Air">Allegiant Air</option>
                <option value="American Airlines">American Airlines</option>
                <option value="British Airways">British Airways</option>
                <option value="Delta Air Lines">Delta Air Lines</option>
                <option value="Emirates">Emirates</option>
                <option value="Frontier Airlines">Frontier Airlines</option>
                <option value="Hawaiian Airlines">Hawaiian Airlines</option>
                <option value="JetBlue Airways">JetBlue Airways</option>
                <option value="Lufthansa">Lufthansa</option>
                <option value="Qatar Airways">Qatar Airways</option>
                <option value="Singapore Airlines">Singapore Airlines</option>
                <option value="Southwest Airlines">Southwest Airlines</option>
                <option value="Spirit Airlines">Spirit Airlines</option>
                <option value="Sun Country Airlines">Sun Country Airlines</option>
                <option value="United Airlines">United Airlines</option>
                <option value="Other">Other (specify below)</option>
              </select>
            </div>
            <div class="form-group" id="otherAirlineGroup" style="display: none;">
              <label class="form-label">Specify Airline</label>
              <input type="text" class="form-input" id="otherAirline" placeholder="Enter airline name" oninput="trackFieldEdit('airline')">
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Flight Number</label>
                <input type="text" class="form-input" id="flightNumber" placeholder="DL 1234" oninput="trackFieldEdit('flightNumber')">
              </div>
              <div class="form-group">
                <label class="form-label">Flight Date <span class="required">*</span></label>
                <input type="date" class="form-input" id="flightDate" oninput="trackFieldEdit('flightDate')">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Departure Airport</label>
                <input type="text" class="form-input" id="departureAirport" placeholder="LAX" oninput="trackFieldEdit('departureAirport')">
              </div>
              <div class="form-group">
                <label class="form-label">Arrival Airport</label>
                <input type="text" class="form-input" id="arrivalAirport" placeholder="JFK" oninput="trackFieldEdit('arrivalAirport')">
              </div>
            </div>
            <div class="form-group">
              <label class="form-label">Seat Number</label>
              <input type="text" class="form-input" id="seatNumber" placeholder="24A" oninput="trackFieldEdit('seatNumber')">
            </div>
          </div>

          <!-- Injury Type -->
          <div class="form-section">
            <div class="form-section-title">
              <span>&#129656;</span> Injury Type
            </div>
            <div class="injury-select-grid">
              <div class="injury-select-card selected" data-type="seat" onclick="selectInjuryType(this)">
                <div class="icon">&#128186;</div>
                <div class="label">Seat/Hardware</div>
              </div>
              <div class="injury-select-card" data-type="overhead" onclick="selectInjuryType(this)">
                <div class="icon">&#128188;</div>
                <div class="label">Overhead Bin</div>
              </div>
              <div class="injury-select-card" data-type="cart" onclick="selectInjuryType(this)">
                <div class="icon">&#127861;</div>
                <div class="label">Beverage Cart</div>
              </div>
              <div class="injury-select-card" data-type="turbulence" onclick="selectInjuryType(this)">
                <div class="icon">&#127787;</div>
                <div class="label">Turbulence</div>
              </div>
              <div class="injury-select-card" data-type="boarding" onclick="selectInjuryType(this)">
                <div class="icon">&#128682;</div>
                <div class="label">Jet Bridge</div>
              </div>
              <div class="injury-select-card" data-type="other" onclick="selectInjuryType(this)">
                <div class="icon">&#128296;</div>
                <div class="label">Other</div>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label">Describe What Happened <span class="required">*</span></label>
              <textarea class="form-textarea" id="incidentDescription" placeholder="As I stood up to use the restroom, the seat panel unexpectedly snapped inward and crushed my finger against the armrest..." oninput="trackFieldEdit('incidentDescription')"></textarea>
              <div class="form-help">Be specific: what malfunctioned, how it happened, immediate effects</div>
            </div>
          </div>

          <!-- Injury Details -->
          <div class="form-section">
            <div class="form-section-title">
              <span>&#129658;</span> Injury Details
            </div>
            <div class="form-group">
              <label class="form-label">Body Part(s) Injured <span class="required">*</span></label>
              <input type="text" class="form-input" id="bodyPart" placeholder="Right pinky finger" oninput="trackFieldEdit('bodyPart')">
            </div>
            <div class="form-group">
              <label class="form-label">Injury Description</label>
              <textarea class="form-textarea" id="injuryDescription" placeholder="Crushing injury causing bleeding, discoloration, swelling, and pain. X-rays showed no fracture but soft tissue damage..." oninput="trackFieldEdit('injuryDescription')" style="min-height: 80px;"></textarea>
            </div>
            <div class="form-group">
              <label class="form-label">Severity Level</label>
              <div class="severity-slider-container">
                <input type="range" class="severity-slider" id="severityLevel" min="1" max="5" value="2" oninput="updateSeverity()">
                <div class="severity-labels">
                  <span>Minor</span>
                  <span>Moderate</span>
                  <span>Serious</span>
                  <span>Severe</span>
                  <span>Catastrophic</span>
                </div>
              </div>
              <div class="form-help" id="severityDescription">Soft tissue injury, resolved within weeks</div>
            </div>
          </div>

          <!-- Incident Reporting -->
          <div class="form-section">
            <div class="form-section-title">
              <span>&#128203;</span> Incident Reporting
            </div>
            <div class="form-group">
              <label class="form-label">Did you report to flight crew?</label>
              <select class="form-select" id="reportedToCrew" onchange="trackFieldEdit('reportedToCrew')">
                <option value="yes">Yes, reported and documented</option>
                <option value="verbal">Yes, verbal report only</option>
                <option value="no">No, did not report on flight</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">Incident/Claim Number (if any)</label>
              <input type="text" class="form-input" id="claimNumber" placeholder="Delta case #12345678" oninput="trackFieldEdit('claimNumber')">
            </div>
            <div class="form-group">
              <label class="form-label">Prior Communication with Airline</label>
              <textarea class="form-textarea" id="priorCommunication" placeholder="Contacted Delta customer service on Nov 15. Told claim would go to Risk Management..." oninput="trackFieldEdit('priorCommunication')" style="min-height: 70px;"></textarea>
            </div>
          </div>

          <!-- Damages -->
          <div class="form-section">
            <div class="form-section-title">
              <span>&#128176;</span> Damages
            </div>
            <div class="damages-checklist" id="damagesChecklist">
              <div class="damage-item" onclick="toggleDamage(this, 'medicalExpenses')">
                <input type="checkbox" id="dmg_medical" checked>
                <label for="dmg_medical">Medical Expenses</label>
                <input type="text" class="damage-amount" id="medicalAmount" placeholder="$0.00" onclick="event.stopPropagation()" oninput="trackFieldEdit('damages')">
              </div>
              <div class="damage-item" onclick="toggleDamage(this, 'lostWages')">
                <input type="checkbox" id="dmg_wages">
                <label for="dmg_wages">Lost Wages/Income</label>
                <input type="text" class="damage-amount" id="wagesAmount" placeholder="$0.00" onclick="event.stopPropagation()" oninput="trackFieldEdit('damages')">
              </div>
              <div class="damage-item" onclick="toggleDamage(this, 'painSuffering')">
                <input type="checkbox" id="dmg_pain" checked>
                <label for="dmg_pain">Pain & Suffering</label>
              </div>
              <div class="damage-item" onclick="toggleDamage(this, 'travelDisruption')">
                <input type="checkbox" id="dmg_travel">
                <label for="dmg_travel">Travel Disruption Costs</label>
                <input type="text" class="damage-amount" id="travelAmount" placeholder="$0.00" onclick="event.stopPropagation()" oninput="trackFieldEdit('damages')">
              </div>
              <div class="damage-item" onclick="toggleDamage(this, 'futureMedical')">
                <input type="checkbox" id="dmg_future">
                <label for="dmg_future">Future Medical Care</label>
              </div>
            </div>
            <div class="form-group" style="margin-top: var(--space-md);">
              <label class="form-label">Total Demand Amount</label>
              <input type="text" class="form-input" id="demandAmount" placeholder="$5,000.00" oninput="trackFieldEdit('demandAmount')">
              <div class="form-help">Leave blank for "fair and reasonable compensation" language</div>
            </div>
          </div>

          <!-- Your Information -->
          <div class="form-section">
            <div class="form-section-title">
              <span>&#128100;</span> Your Information
            </div>
            <div class="form-group">
              <label class="form-label">Your Full Name <span class="required">*</span></label>
              <input type="text" class="form-input" id="claimantName" placeholder="John Smith" oninput="trackFieldEdit('claimantName')">
            </div>
            <div class="form-group">
              <label class="form-label">Your Address</label>
              <textarea class="form-textarea" id="claimantAddress" placeholder="123 Main Street&#10;Los Angeles, CA 90001" oninput="trackFieldEdit('claimantAddress')" style="min-height: 70px;"></textarea>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Phone</label>
                <input type="text" class="form-input" id="claimantPhone" placeholder="(555) 123-4567" oninput="trackFieldEdit('claimantPhone')">
              </div>
              <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" class="form-input" id="claimantEmail" placeholder="john@email.com" oninput="trackFieldEdit('claimantEmail')">
              </div>
            </div>
          </div>

          <!-- Response Deadline -->
          <div class="form-section">
            <div class="form-section-title">
              <span>&#128197;</span> Response & Deadline
            </div>
            <div class="form-group">
              <label class="form-label">Response Deadline (days)</label>
              <select class="form-select" id="responseDays" onchange="trackFieldEdit('responseDays')">
                <option value="14">14 days</option>
                <option value="21">21 days</option>
                <option value="30" selected>30 days</option>
                <option value="45">45 days</option>
              </select>
            </div>
          </div>

          <!-- Attorney CTA with Calendly Embed -->
          <div class="attorney-cta">
            <h3>Need Professional Help?</h3>
            <p>Complex injury claims benefit from legal representation. Schedule a consultation.</p>
            <div class="calendly-inline-widget" data-url="https://calendly.com/sergei-tokmakov/30-minute-zoom-meeting?hide_gdpr_banner=1" style="min-width:280px;height:600px;margin-top:16px;"></div>
          </div>
        </div>
      </aside>

      <!-- Preview Panel -->
      <section class="preview-panel">
        <div class="preview-toolbar">
          <span class="preview-title">Demand Letter Preview</span>
          <div class="preview-actions">
            <button class="preview-btn edit-mode" id="editModeBtn" onclick="toggleFullEditMode()">
              &#9998; Edit Mode
            </button>
            <button class="preview-btn" onclick="printDocument()">
              &#128424; Print
            </button>
            <button class="preview-btn" onclick="copyToClipboard()">
              &#128203; Copy
            </button>
            <button class="preview-btn primary" onclick="downloadDocument()">
              &#128229; Download
            </button>
          </div>
        </div>

        <div class="document-container">
          <div class="document-body" id="documentPreview">
            <!-- Generated content here -->
          </div>
        </div>
      </section>
    </div>
  </div>

  <!-- EVIDENCE TAB -->
  <div id="evidence" class="tab-content">
    <section class="content-section">
      <div class="container">
        <div class="section-header">
          <h2>Evidence Checklist for Airline Injury Claims</h2>
          <p>Document everything thoroughly to strengthen your claim. Here's what you need.</p>
        </div>

        <div class="info-card highlight">
          <h3>&#128247; Immediate Documentation (On the Plane)</h3>
          <ul>
            <li><strong>Photograph the injury</strong> - Take photos immediately showing bleeding, swelling, discoloration</li>
            <li><strong>Photograph the hazard</strong> - The broken seat, loose panel, spilled liquid, fallen luggage</li>
            <li><strong>Report to flight crew</strong> - Ask them to document the incident in their report</li>
            <li><strong>Get crew names</strong> - Note the names of flight attendants who witnessed or documented</li>
            <li><strong>Identify witnesses</strong> - Get contact info from nearby passengers who saw what happened</li>
            <li><strong>Keep your boarding pass</strong> - Contains flight number, seat assignment, date</li>
          </ul>
        </div>

        <div class="info-card">
          <h3>&#127973; Medical Documentation</h3>
          <ul>
            <li><strong>Seek medical attention promptly</strong> - ER, urgent care, or your doctor within 24-48 hours</li>
            <li><strong>Describe the cause accurately</strong> - Tell providers exactly how the injury occurred on the flight</li>
            <li><strong>Get copies of all records</strong> - Intake forms, examination notes, diagnosis, treatment plan</li>
            <li><strong>Keep receipts</strong> - All co-pays, prescriptions, medical equipment, follow-up visits</li>
            <li><strong>Document recovery</strong> - Photos of healing process, limitations on activities</li>
          </ul>
        </div>

        <div class="info-card">
          <h3>&#128233; Airline Communications</h3>
          <ul>
            <li><strong>Written confirmation</strong> - Email the airline immediately after landing to create a paper trail</li>
            <li><strong>Claim/case numbers</strong> - Document any reference numbers provided by customer service</li>
            <li><strong>Save all correspondence</strong> - Emails, letters, chat transcripts with airline</li>
            <li><strong>Note phone calls</strong> - Date, time, representative name, what was discussed</li>
            <li><strong>Request incident report</strong> - Ask for a copy of the flight crew's incident documentation</li>
          </ul>
        </div>

        <div class="info-card warning">
          <h3>&#9888; Preservation Demands (Spoliation Prevention)</h3>
          <p>Airlines may dispose of evidence if you don't act quickly. Your demand letter should request preservation of:</p>
          <ul>
            <li>The airline's incident report and internal investigation documents</li>
            <li>Maintenance and repair records for your seat row and adjacent seats</li>
            <li>Prior complaints or incidents involving similar equipment failures</li>
            <li>Cabin crew statements and reports</li>
            <li>Any cabin video or surveillance footage (if available)</li>
            <li>Manifest and seating chart for the flight</li>
          </ul>
        </div>

        <div class="info-card success">
          <h3>&#128200; Financial Documentation</h3>
          <ul>
            <li><strong>Medical bills</strong> - Itemized statements from all providers</li>
            <li><strong>Prescription costs</strong> - Pharmacy receipts for medications</li>
            <li><strong>Lost wages</strong> - Pay stubs, employer letter confirming missed work</li>
            <li><strong>Travel disruption</strong> - Hotel, meals, rebooking fees if you missed connections</li>
            <li><strong>Out-of-pocket expenses</strong> - Transportation to doctors, medical equipment, etc.</li>
          </ul>
        </div>
      </div>
    </section>
  </div>

  <!-- NEXT STEPS TAB -->
  <div id="nextsteps" class="tab-content">
    <section class="content-section">
      <div class="container">
        <div class="section-header">
          <h2>What Happens After You Send the Demand Letter</h2>
          <p>Understanding the claims process helps you set realistic expectations and make informed decisions.</p>
        </div>

        <div class="next-steps-grid">
          <div class="next-step-card step-1">
            <div class="next-step-number">1</div>
            <div class="next-step-title">Airline Acknowledges Receipt</div>
            <div class="next-step-desc">The airline's risk management or claims department will acknowledge your letter, usually within 1-2 weeks.</div>
            <ul class="next-step-details">
              <li>You'll receive a claim number for reference</li>
              <li>An adjuster will be assigned to your case</li>
              <li>They may request additional documentation</li>
              <li>Initial contact is typically by mail or email</li>
            </ul>
          </div>

          <div class="next-step-card step-2">
            <div class="next-step-number">2</div>
            <div class="next-step-title">Investigation & Evaluation</div>
            <div class="next-step-desc">The insurer reviews your claim, medical records, and the incident circumstances. This can take 2-8 weeks.</div>
            <ul class="next-step-details">
              <li>They may request medical authorization forms</li>
              <li>Adjuster reviews maintenance records</li>
              <li>They evaluate liability and damages</li>
              <li>May ask for recorded statement (be cautious)</li>
            </ul>
          </div>

          <div class="next-step-card step-3">
            <div class="next-step-number">3</div>
            <div class="next-step-title">Settlement Negotiation</div>
            <div class="next-step-desc">If they accept liability, expect an initial offer. This is typically negotiable.</div>
            <ul class="next-step-details">
              <li>First offers are often low - don't accept immediately</li>
              <li>Counter with documented damages</li>
              <li>May involve multiple rounds of offers</li>
              <li>Settlement typically includes release of all claims</li>
            </ul>
          </div>

          <div class="next-step-card step-4">
            <div class="next-step-number">4</div>
            <div class="next-step-title">Resolution or Escalation</div>
            <div class="next-step-desc">Either reach a settlement or consider escalating to formal legal action.</div>
            <ul class="next-step-details">
              <li><strong>Settlement:</strong> Sign release, receive payment</li>
              <li><strong>DOT Complaint:</strong> File with Dept. of Transportation</li>
              <li><strong>Small Claims:</strong> For claims under $10-12K</li>
              <li><strong>Litigation:</strong> Hire attorney for larger claims</li>
            </ul>
          </div>
        </div>

        <!-- Timeline -->
        <div class="info-card">
          <h3>&#128197; Typical Timeline for Minor to Moderate Injuries</h3>
          <div class="timeline">
            <div class="timeline-item">
              <div class="timeline-title">Week 1-2: Send Demand Letter</div>
              <div class="timeline-desc">Mail certified letter to airline risk management; keep proof of delivery.</div>
            </div>
            <div class="timeline-item">
              <div class="timeline-title">Week 2-4: Acknowledgment</div>
              <div class="timeline-desc">Receive claim number and adjuster assignment.</div>
            </div>
            <div class="timeline-item">
              <div class="timeline-title">Week 4-8: Investigation</div>
              <div class="timeline-desc">Provide requested documentation; adjuster evaluates claim.</div>
            </div>
            <div class="timeline-item">
              <div class="timeline-title">Week 8-12: Initial Offer</div>
              <div class="timeline-desc">Receive first settlement offer (if liability accepted).</div>
            </div>
            <div class="timeline-item">
              <div class="timeline-title">Week 12-16: Negotiation</div>
              <div class="timeline-desc">Counter-offers and negotiation to reach fair settlement.</div>
            </div>
            <div class="timeline-item">
              <div class="timeline-title">Week 16-20: Resolution</div>
              <div class="timeline-desc">Sign release and receive settlement payment.</div>
            </div>
          </div>
        </div>

        <!-- Settlement Ranges -->
        <div class="info-card highlight">
          <h3>&#128176; Typical Settlement Ranges (Illustrative)</h3>
          <p><strong>Disclaimer:</strong> Every case is different. These ranges are for general reference only.</p>
          <div class="comparison-table-container" style="margin-top: var(--space-md);">
            <table class="comparison-table">
              <thead>
                <tr>
                  <th>Injury Severity</th>
                  <th>Examples</th>
                  <th>Typical Range</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><strong>Minor</strong></td>
                  <td>Bruises, minor cuts, soft tissue, resolves in days/weeks</td>
                  <td>$500 - $5,000</td>
                </tr>
                <tr>
                  <td><strong>Moderate</strong></td>
                  <td>Sprains, minor fractures, requires medical treatment</td>
                  <td>$5,000 - $25,000</td>
                </tr>
                <tr>
                  <td><strong>Serious</strong></td>
                  <td>Fractures requiring surgery, significant recovery time</td>
                  <td>$25,000 - $100,000</td>
                </tr>
                <tr>
                  <td><strong>Severe</strong></td>
                  <td>Multiple injuries, long-term impairment, extensive treatment</td>
                  <td>$100,000 - $500,000+</td>
                </tr>
                <tr>
                  <td><strong>Catastrophic</strong></td>
                  <td>Permanent disability, TBI, paralysis, death</td>
                  <td>$500,000 - Multi-million</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- When to Hire Attorney -->
        <div class="info-card danger">
          <h3>&#9878; When You Should Hire an Attorney</h3>
          <ul>
            <li><strong>Serious injuries:</strong> Anything requiring surgery, hospitalization, or long-term treatment</li>
            <li><strong>Disputed liability:</strong> Airline denies responsibility or blames you</li>
            <li><strong>International flights:</strong> Montreal Convention claims have complex procedural rules</li>
            <li><strong>Lowball offers:</strong> Settlement offer doesn't cover your documented damages</li>
            <li><strong>Approaching deadline:</strong> SOL is near and negotiations aren't progressing</li>
            <li><strong>Multiple parties:</strong> Airport, airline, and equipment manufacturer may share fault</li>
          </ul>
        </div>

        <!-- Attorney CTA with Calendly Embed -->
        <div class="attorney-cta" style="margin-top: var(--space-2xl);">
          <h3>Ready to Discuss Your Claim?</h3>
          <p>Get professional guidance on your airline injury case.</p>
          <div class="calendly-inline-widget" data-url="https://calendly.com/sergei-tokmakov/30-minute-zoom-meeting?hide_gdpr_banner=1" style="min-width:320px;height:700px;margin-top:20px;"></div>
        </div>
      </div>
    </section>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast"></div>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="footer-content">
      <div>&copy; Terms.Law. All rights reserved. Not legal advice.</div>
      <div class="footer-links">
        <a href="https://terms.law/privacy">Privacy Policy</a>
        <a href="https://terms.law/terms">Terms of Service</a>
        <a href="https://terms.law/contact">Contact</a>
      </div>
    </div>
  </footer>

  <script>
    // ============================================
    // STATE MANAGEMENT
    // ============================================
    let flightType = 'domestic';
    let injuryType = 'seat';
    let isFullEditMode = false;
    let savedDocumentHTML = '';
    let hasCustomEdits = false;
    let lastEditedField = null;

    const severityDescriptions = {
      1: 'Minor soft tissue injury, resolved within days to weeks',
      2: 'Moderate injury requiring medical attention, weeks to recover',
      3: 'Serious injury with potential long-term effects',
      4: 'Severe injury requiring extensive treatment or surgery',
      5: 'Catastrophic injury with permanent impairment'
    };

    const injuryTypeDescriptions = {
      seat: 'seat hardware malfunction',
      overhead: 'falling luggage from the overhead bin',
      cart: 'a beverage cart collision',
      turbulence: 'turbulence-related incident',
      boarding: 'a jet bridge/boarding accident',
      other: 'an in-flight incident'
    };

    function trackFieldEdit(fieldId) {
      if (hasCustomEdits) {
        const proceed = confirm(
          'You have custom edits in the document preview.\n\n' +
          'Changing form inputs will regenerate the document and your custom edits will be lost.\n\n' +
          'Click OK to regenerate, or Cancel to keep your edits.'
        );
        if (!proceed) return;
        hasCustomEdits = false;
      }
      lastEditedField = fieldId;
      updatePreview();
    }

    // ============================================
    // INITIALIZATION
    // ============================================
    document.addEventListener('DOMContentLoaded', function() {
      // Check for airline "Other" selection
      document.getElementById('airline').addEventListener('change', function() {
        document.getElementById('otherAirlineGroup').style.display =
          this.value === 'Other' ? 'block' : 'none';
      });

      updatePreview();
    });

    // ============================================
    // TAB NAVIGATION
    // ============================================
    function openTab(event, tabId) {
      document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));

      document.getElementById(tabId).classList.add('active');
      event.currentTarget.classList.add('active');

      // If opening generator tab, update preview
      if (tabId === 'generator') {
        setTimeout(updatePreview, 100);
      }
    }

    // ============================================
    // FLIGHT TYPE
    // ============================================
    function setFlightType(type) {
      flightType = type;
      document.querySelectorAll('.flight-type-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.type === type);
      });
      lastEditedField = 'flightType';
      updatePreview();
    }

    // ============================================
    // INJURY TYPE SELECTION
    // ============================================
    function selectInjuryType(card) {
      document.querySelectorAll('.injury-select-card').forEach(c => c.classList.remove('selected'));
      card.classList.add('selected');
      injuryType = card.dataset.type;
      lastEditedField = 'injuryType';
      updatePreview();
    }

    // ============================================
    // SEVERITY SLIDER
    // ============================================
    function updateSeverity() {
      const level = document.getElementById('severityLevel').value;
      document.getElementById('severityDescription').textContent = severityDescriptions[level];
      trackFieldEdit('severity');
    }

    // ============================================
    // DAMAGES TOGGLE
    // ============================================
    function toggleDamage(item, damageType) {
      const checkbox = item.querySelector('input[type="checkbox"]');
      checkbox.checked = !checkbox.checked;
      item.classList.toggle('selected', checkbox.checked);
      trackFieldEdit('damages');
    }

    // ============================================
    // DOCUMENT PREVIEW
    // ============================================
    function updatePreview() {
      if (isFullEditMode) return;

      const h = (value, placeholder, fieldId) => {
        const isEmpty = !value || value.trim() === '';
        const displayValue = isEmpty ? `[${placeholder}]` : escapeHtml(value);
        const emptyClass = isEmpty ? ' empty' : '';
        return `<span class="doc-highlight${emptyClass}" data-field="${fieldId}" contenteditable="true">${displayValue}</span>`;
      };

      // Get form values
      let airline = document.getElementById('airline').value;
      if (airline === 'Other') {
        airline = document.getElementById('otherAirline').value || '';
      }
      const flightNumber = document.getElementById('flightNumber').value || '';
      const flightDate = document.getElementById('flightDate').value;
      const departureAirport = document.getElementById('departureAirport').value || '';
      const arrivalAirport = document.getElementById('arrivalAirport').value || '';
      const seatNumber = document.getElementById('seatNumber').value || '';

      const incidentDescription = document.getElementById('incidentDescription').value || '';
      const bodyPart = document.getElementById('bodyPart').value || '';
      const injuryDescription = document.getElementById('injuryDescription').value || '';
      const severityLevel = document.getElementById('severityLevel').value;

      const reportedToCrew = document.getElementById('reportedToCrew').value;
      const claimNumber = document.getElementById('claimNumber').value || '';
      const priorCommunication = document.getElementById('priorCommunication').value || '';

      const claimantName = document.getElementById('claimantName').value || '';
      const claimantAddress = document.getElementById('claimantAddress').value || '';
      const claimantPhone = document.getElementById('claimantPhone').value || '';
      const claimantEmail = document.getElementById('claimantEmail').value || '';

      const demandAmount = document.getElementById('demandAmount').value || '';
      const responseDays = document.getElementById('responseDays').value;

      // Get damages
      const damages = {
        medical: document.getElementById('dmg_medical').checked,
        medicalAmount: document.getElementById('medicalAmount').value,
        wages: document.getElementById('dmg_wages').checked,
        wagesAmount: document.getElementById('wagesAmount').value,
        pain: document.getElementById('dmg_pain').checked,
        travel: document.getElementById('dmg_travel').checked,
        travelAmount: document.getElementById('travelAmount').value,
        future: document.getElementById('dmg_future').checked
      };

      // Format date
      const formattedFlightDate = flightDate ? formatDate(flightDate) : '';
      const todayDate = formatDate(new Date().toISOString().split('T')[0]);

      // Calculate response deadline
      const deadline = new Date();
      deadline.setDate(deadline.getDate() + parseInt(responseDays));
      const deadlineDate = formatDate(deadline.toISOString().split('T')[0]);

      // Route description
      const route = departureAirport && arrivalAirport ?
        `${departureAirport} to ${arrivalAirport}` : '[DEPARTURE] to [ARRIVAL]';

      // Build document HTML
      let html = `
        <div class="doc-header">
          <div class="doc-title">DEMAND FOR COMPENSATION</div>
          <div class="doc-subtitle">In-Flight Personal Injury Claim</div>
        </div>

        <div class="doc-date-line">${todayDate}</div>

        <div class="doc-address-block">
          <strong>${h(airline, 'AIRLINE NAME', 'airline')}</strong><br>
          Risk Management / Claims Department<br>
          ${getAirlineAddress(airline)}
        </div>

        <div class="doc-re-line">
          <strong>RE:</strong> Personal Injury Claim<br>
          Flight: ${h(flightNumber, 'FLIGHT NUMBER', 'flightNumber')} on ${h(formattedFlightDate, 'DATE', 'flightDate')}<br>
          Route: ${h(route, 'ROUTE', 'departureAirport')}<br>
          ${claimNumber ? `Claim Reference: ${h(claimNumber, 'CLAIM #', 'claimNumber')}<br>` : ''}
          Claimant: ${h(claimantName, 'YOUR NAME', 'claimantName')}
        </div>

        <div class="doc-salutation">To Whom It May Concern:</div>

        <div data-field="letterBody">
        <p class="doc-paragraph">
          I am writing to formally demand compensation for personal injuries I sustained while a passenger on ${h(airline, 'AIRLINE', 'airline')} Flight ${h(flightNumber, 'FLIGHT #', 'flightNumber')} on ${h(formattedFlightDate, 'DATE', 'flightDate')}, traveling from ${h(route, 'ROUTE', 'departureAirport')}. I was seated in seat ${h(seatNumber, 'SEAT', 'seatNumber')}.
        </p>

        <div class="doc-section-title">Statement of Facts</div>

        <p class="doc-paragraph">
          ${incidentDescription ? h(incidentDescription, 'DESCRIBE WHAT HAPPENED', 'incidentDescription') : `During the flight, I was injured due to ${injuryTypeDescriptions[injuryType]}. [DESCRIBE EXACTLY WHAT HAPPENED]`}
        </p>

        <p class="doc-paragraph">
          As a result of this incident, I suffered injury to my ${h(bodyPart, 'BODY PART', 'bodyPart')}. ${injuryDescription ? h(injuryDescription, 'INJURY DETAILS', 'injuryDescription') : '[DESCRIBE THE NATURE AND EXTENT OF YOUR INJURIES]'}
        </p>

        ${reportedToCrew === 'yes' || reportedToCrew === 'verbal' ? `
        <p class="doc-paragraph">
          I reported this incident to your flight crew ${reportedToCrew === 'yes' ? 'who documented the incident' : 'verbally'} during the flight. ${priorCommunication ? `Following the flight, ${h(priorCommunication, 'PRIOR COMMUNICATIONS', 'priorCommunication')}` : ''}
        </p>
        ` : ''}

        <div class="doc-section-title">Legal Basis for Liability</div>
      `;

      // Add legal basis based on flight type
      if (flightType === 'domestic') {
        html += `
        <p class="doc-paragraph">
          ${h(airline, 'AIRLINE', 'airline')}, as a common carrier, owes its passengers the highest degree of care practicable consistent with the mode of transportation. This duty includes maintaining aircraft equipment in safe operating condition and protecting passengers from foreseeable hazards.
        </p>

        <p class="doc-paragraph">
          The incident described above demonstrates a clear breach of this duty. ${getBreachLanguage(injuryType)} This failure directly and proximately caused my injuries.
        </p>

        <p class="doc-paragraph">
          Under applicable state law, including general negligence principles and the heightened common carrier standard, ${h(airline, 'AIRLINE', 'airline')} is liable for the damages I have sustained.
        </p>
        `;
      } else {
        html += `
        <p class="doc-paragraph">
          This flight constitutes "international carriage" under the <span class="doc-legal-cite">Montreal Convention of 1999</span>, which governs airline liability for passenger injuries on international flights.
        </p>

        <p class="doc-paragraph">
          Under <span class="doc-legal-cite">Article 17</span> of the Montreal Convention, a carrier is liable for damage sustained in case of death or bodily injury of a passenger upon condition only that the accident which caused the injury took place on board the aircraft or in the course of embarking or disembarking.
        </p>

        <p class="doc-paragraph">
          The incident I have described constitutes an "accident" within the meaning of the Convention, as established by <span class="doc-legal-cite">Air France v. Saks</span>, 470 U.S. 392 (1985)an unexpected or unusual event external to the passenger. ${getAccidentLanguage(injuryType)}
        </p>

        <p class="doc-paragraph">
          Under <span class="doc-legal-cite">Article 21</span>, the carrier cannot exclude or limit its liability for damages up to 151,880 Special Drawing Rights (approximately $200,000 USD) per passenger for proven bodily injury claims.
        </p>
        `;
      }

      // Damages section
      html += `
        <div class="doc-section-title">Damages</div>

        <p class="doc-paragraph">
          As a direct result of ${h(airline, 'AIRLINE', 'airline')}'s ${flightType === 'domestic' ? 'negligence' : 'liability under the Montreal Convention'}, I have suffered the following damages:
        </p>

        <ul class="doc-list">
      `;

      if (damages.medical) {
        html += `<li><strong>Medical expenses:</strong> ${damages.medicalAmount ? h(damages.medicalAmount, 'AMOUNT', 'damages') : 'Treatment costs for injury evaluation and care'}</li>`;
      }
      if (damages.wages) {
        html += `<li><strong>Lost wages:</strong> ${damages.wagesAmount ? h(damages.wagesAmount, 'AMOUNT', 'damages') : 'Income lost due to injury and recovery'}</li>`;
      }
      if (damages.pain) {
        html += `<li><strong>Pain and suffering:</strong> Physical pain, discomfort, and emotional distress resulting from the injury</li>`;
      }
      if (damages.travel) {
        html += `<li><strong>Travel disruption costs:</strong> ${damages.travelAmount ? h(damages.travelAmount, 'AMOUNT', 'damages') : 'Additional expenses incurred due to the incident'}</li>`;
      }
      if (damages.future) {
        html += `<li><strong>Future medical care:</strong> Anticipated ongoing treatment and monitoring</li>`;
      }

      html += `</ul>`;

      // Demand
      html += `
        <div class="doc-section-title">Demand</div>

        <p class="doc-paragraph">
          Based on the foregoing, I hereby demand ${demandAmount ? `the sum of <strong>${h(demandAmount, 'AMOUNT', 'demandAmount')}</strong>` : 'fair and reasonable compensation'} for full settlement of this claim, including all past and future damages arising from this incident.
        </p>

        <div class="doc-section-title">Preservation of Evidence</div>

        <p class="doc-paragraph">
          Please preserve all documents and evidence related to this incident, including but not limited to:
        </p>

        <ul class="doc-list">
          <li>The flight crew's incident report and any internal investigation documents</li>
          <li>Maintenance and inspection records for the aircraft and specifically the seat/equipment involved</li>
          <li>Any prior complaints or incident reports involving similar equipment on this or other aircraft</li>
          <li>Crew rosters, statements, and training records</li>
          <li>Any cabin video or surveillance footage</li>
          <li>The passenger manifest and seating chart for this flight</li>
        </ul>

        <p class="doc-paragraph">
          Destruction or spoliation of this evidence may result in adverse inferences and sanctions.
        </p>

        <div class="doc-section-title">Response Requested</div>

        <p class="doc-paragraph">
          Please respond to this demand in writing within <strong>${responseDays} days</strong> (by ${deadlineDate}). If I do not receive a satisfactory response within this timeframe, I will have no choice but to consider all available legal remedies, including but not limited to filing a complaint with the U.S. Department of Transportation and initiating litigation to recover my damages.
        </p>
        </div>

        <div class="doc-closing">
          <p class="doc-paragraph">
            I trust ${h(airline, 'AIRLINE', 'airline')} will address this matter promptly and fairly. Please direct all correspondence regarding this claim to the address below.
          </p>

          <p class="doc-paragraph">Respectfully submitted,</p>
        </div>

        <div class="doc-signature-block">
          <div class="doc-signature-line"></div>
          <div class="doc-signature-name">${h(claimantName, 'YOUR NAME', 'claimantName')}</div>
          ${claimantAddress ? `<div>${claimantAddress.replace(/\n/g, '<br>')}</div>` : ''}
          ${claimantPhone ? `<div>Phone: ${claimantPhone}</div>` : ''}
          ${claimantEmail ? `<div>Email: ${claimantEmail}</div>` : ''}
        </div>

        <p class="doc-paragraph" style="margin-top: 30px; font-size: 11px; color: #666;">
          <em>Sent via Certified Mail, Return Receipt Requested</em>
        </p>
      `;

      document.getElementById('documentPreview').innerHTML = html;
      setupInlineEditing();

      // Scroll to and highlight edited field
      if (lastEditedField) {
        setTimeout(() => {
          const highlight = document.querySelector(`[data-field="${lastEditedField}"]`);
          if (highlight) {
            highlight.scrollIntoView({ behavior: 'smooth', block: 'center' });
            highlight.classList.add('flash');
            setTimeout(() => highlight.classList.remove('flash'), 1500);
          }
          lastEditedField = null;
        }, 50);
      }
    }

    // Helper functions
    function getAirlineAddress(airline) {
      const addresses = {
        'Delta Air Lines': 'P.O. Box 20980<br>Atlanta, GA 30320-2980',
        'United Airlines': 'P.O. Box 66100<br>Chicago, IL 60666',
        'American Airlines': '4333 Amon Carter Blvd.<br>Fort Worth, TX 76155',
        'Southwest Airlines': 'P.O. Box 36647<br>Dallas, TX 75235',
        'JetBlue Airways': '27-01 Queens Plaza North<br>Long Island City, NY 11101',
        'Alaska Airlines': 'P.O. Box 68900<br>Seattle, WA 98168',
        'Spirit Airlines': '2800 Executive Way<br>Miramar, FL 33025',
        'Frontier Airlines': '4545 Airport Way<br>Denver, CO 80239',
        'Hawaiian Airlines': 'P.O. Box 30008<br>Honolulu, HI 96820',
      };
      return addresses[airline] || '[AIRLINE ADDRESS]<br>[CITY, STATE ZIP]';
    }

    function getBreachLanguage(type) {
      const language = {
        seat: 'A properly maintained and inspected seat should not malfunction in a manner that causes injury to passengers. The failure of this seat component indicates inadequate maintenance, inspection, or repair protocols.',
        overhead: 'Overhead bin latches must be properly secured to prevent luggage from falling on passengers. The failure to ensure secure closure demonstrates a failure in safety protocols.',
        cart: 'Flight crew are trained to operate beverage carts safely. The collision with my person indicates a failure to exercise appropriate care in cart operation.',
        turbulence: 'Airlines have a duty to warn passengers of anticipated turbulence and ensure the fasten-seatbelt sign is illuminated when conditions warrant. The failure to provide adequate warning contributed to this injury.',
        boarding: 'The boarding area and jet bridge must be maintained in safe condition for passenger use. The hazardous condition that caused my fall demonstrates inadequate maintenance.',
        other: 'The airline failed to maintain a safe environment for passengers, directly causing this preventable injury.'
      };
      return language[type] || language.other;
    }

    function getAccidentLanguage(type) {
      const language = {
        seat: 'The sudden malfunction of aircraft seating equipment is clearly an unexpected event external to the passenger.',
        overhead: 'Falling luggage from an overhead compartment is an unexpected event external to the passenger, not a normal incident of air travel.',
        cart: 'Being struck by a service cart operated by crew is an unexpected event external to the passenger.',
        turbulence: 'The failure to warn of turbulence, combined with the resulting injury, constitutes an unexpected event. See also <span class="doc-legal-cite">Olympic Airways v. Husain</span>, 540 U.S. 644 (2004), establishing that crew conduct can constitute an "accident."',
        boarding: 'A slip or fall during embarking or disembarking, caused by hazardous conditions, is an accident within the scope of Article 17.',
        other: 'The circumstances of this injury constitute an unexpected event external to the passenger within the meaning of the Convention.'
      };
      return language[type] || language.other;
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    function formatDate(dateString) {
      if (!dateString) return '';
      const date = new Date(dateString + 'T00:00:00');
      const options = { year: 'numeric', month: 'long', day: 'numeric' };
      return date.toLocaleDateString('en-US', options);
    }

    // ============================================
    // INLINE EDITING
    // ============================================
    function setupInlineEditing() {
      document.querySelectorAll('.doc-highlight[contenteditable="true"]').forEach(el => {
        el.addEventListener('blur', function() {
          // Mark as having custom edits
          hasCustomEdits = true;
        });
        el.addEventListener('keydown', function(e) {
          if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            this.blur();
          }
        });
      });
    }

    // ============================================
    // FULL EDIT MODE
    // ============================================
    function toggleFullEditMode() {
      const docBody = document.getElementById('documentPreview');
      const toggleBtn = document.getElementById('editModeBtn');

      if (!isFullEditMode) {
        isFullEditMode = true;
        savedDocumentHTML = docBody.innerHTML;
        docBody.contentEditable = 'true';
        docBody.classList.add('full-edit-mode');
        toggleBtn.innerHTML = '&#128190; Save Edits';
        toggleBtn.classList.add('active');
        showToast('Edit mode enabled - make any changes you need');
      } else {
        saveFullEdits();
      }
    }

    function saveFullEdits() {
      const docBody = document.getElementById('documentPreview');
      const toggleBtn = document.getElementById('editModeBtn');

      isFullEditMode = false;
      hasCustomEdits = true;
      docBody.contentEditable = 'false';
      docBody.classList.remove('full-edit-mode');
      toggleBtn.innerHTML = '&#9998; Edit Mode';
      toggleBtn.classList.remove('active');
      showToast('Edits saved! Your custom changes are preserved.');
    }

    // ============================================
    // UTILITY FUNCTIONS
    // ============================================
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 3000);
    }

    function printDocument() {
      window.print();
    }

    function copyToClipboard() {
      const docBody = document.getElementById('documentPreview');
      const text = docBody.innerText;
      navigator.clipboard.writeText(text).then(() => {
        showToast('Document copied to clipboard!');
      }).catch(() => {
        showToast('Failed to copy. Please try again.');
      });
    }

    function downloadDocument() {
      const docBody = document.getElementById('documentPreview');
      const content = docBody.innerHTML;

      const htmlContent = `
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="UTF-8">
          <title>Airline Injury Demand Letter</title>
          <style>
            body { font-family: 'Times New Roman', Georgia, serif; font-size: 12pt; line-height: 1.6; max-width: 8.5in; margin: 1in auto; padding: 0 1in; }
            .doc-header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #333; }
            .doc-title { font-size: 14pt; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
            .doc-subtitle { font-size: 11pt; color: #666; }
            .doc-date-line { text-align: right; margin-bottom: 20px; font-size: 11pt; }
            .doc-address-block { margin-bottom: 25px; line-height: 1.6; }
            .doc-re-line { margin-bottom: 20px; }
            .doc-salutation { margin-bottom: 15px; }
            .doc-paragraph { margin-bottom: 12pt; text-align: justify; }
            .doc-section-title { font-weight: bold; text-transform: uppercase; margin-top: 18pt; margin-bottom: 10pt; font-size: 11pt; letter-spacing: 0.5px; }
            .doc-list { margin-left: 0.5in; margin-bottom: 12pt; }
            .doc-list li { margin-bottom: 6pt; }
            .doc-legal-cite { font-style: italic; }
            .doc-highlight { background: transparent; border: none; padding: 0; }
            .doc-signature-block { margin-top: 36pt; }
            .doc-signature-line { border-bottom: 1px solid #000; width: 3in; margin-bottom: 4px; margin-top: 50px; }
            .doc-signature-name { font-weight: bold; }
          </style>
        </head>
        <body>${content}</body>
        </html>
      `;

      const blob = new Blob([htmlContent], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'Airline-Injury-Demand-Letter.html';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      showToast('Document downloaded!');
    }
  </script>
</body>
</html>
