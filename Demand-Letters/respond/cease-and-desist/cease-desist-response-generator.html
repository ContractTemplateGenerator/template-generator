<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-901N2Y3CDZ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-901N2Y3CDZ');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cease & Desist Response Letter Generator | Draft Your Reply | Terms.Law</title>
    <meta name="description" content="Interactive wizard to generate professional cease and desist response letters. Choose your posture, request substantiation, and protect your rights.">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://terms.law/Demand-Letters/respond/cease-and-desist/cease-desist-response-generator.html">

    <!-- Shared site-wide styles -->
    <link rel="stylesheet" href="/shared/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #7c3aed;
            --primary-dark: #5b21b6;
            --primary-light: #f5f3ff;
            --secondary: #1e3a8a;
            --accent: #f59e0b;
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #dc2626;
            --info: #3b82f6;
            --surface: #ffffff;
            --bg: #0f172a;
            --bg-card: #1e293b;
            --text: #f1f5f9;
            --text-muted: #94a3b8;
            --border: #334155;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.7;
            color: var(--text);
            background: var(--bg);
            min-height: 100vh;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: #1e293b;
            padding: 12px 24px;
            font-size: 0.85rem;
            border-bottom: 1px solid var(--border);
        }
        .breadcrumb a {
            color: var(--primary);
            text-decoration: none;
        }
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        .breadcrumb .separator {
            color: #64748b;
            margin: 0 8px;
        }
        .breadcrumb .current {
            color: var(--text-muted);
        }

        @media (max-width: 768px) {
            .breadcrumb {
                padding: 12px 16px;
                font-size: 0.8rem;
            }
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #4c1d95 0%, #5b21b6 30%, #7c3aed 100%);
            text-align: center;
            padding: 50px 20px 90px;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            inset: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            pointer-events: none;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #e9d5ff;
            padding: 10px 24px;
            border-radius: 50px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 20px;
            letter-spacing: 0.5px;
            position: relative;
            z-index: 1;
        }

        .pulse-dot {
            width: 10px;
            height: 10px;
            background: #fbbf24;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.2); }
        }

        .hero h1 {
            font-size: clamp(28px, 5vw, 44px);
            font-weight: 800;
            color: #ffffff;
            margin-bottom: 16px;
            line-height: 1.2;
            position: relative;
            z-index: 1;
        }

        .hero h1 span {
            color: #fbbf24;
        }

        .hero-subtitle {
            font-size: clamp(16px, 2.5vw, 18px);
            color: #e9d5ff;
            max-width: 700px;
            margin: 0 auto;
            font-weight: 400;
            position: relative;
            z-index: 1;
        }

        @media (max-width: 768px) {
            .hero {
                padding: 40px 16px 70px;
            }
        }

        /* Main Content */
        .page-wrapper {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 20px 60px;
        }

        @media (max-width: 768px) {
            .page-wrapper {
                padding: 0 16px 40px;
            }
        }

        /* Generator Container */
        .generator-container {
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 20px;
            margin-top: -50px;
            position: relative;
            z-index: 10;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        @media (max-width: 768px) {
            .generator-container {
                margin-top: -40px;
            }
        }

        /* Tabs */
        .tabs-container {
            display: flex;
            background: #0f172a;
            border-bottom: 2px solid var(--border);
            overflow-x: auto;
            flex-shrink: 0;
        }

        .tab-btn {
            padding: 18px 24px;
            cursor: pointer;
            border: none;
            background: transparent;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-muted);
            white-space: nowrap;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: inherit;
        }

        .tab-btn:hover {
            background: rgba(124, 58, 237, 0.1);
            color: var(--primary);
        }

        .tab-btn.active {
            color: var(--primary);
            background: var(--bg-card);
            border-bottom-color: var(--primary);
        }

        .tab-btn .tab-number {
            width: 26px;
            height: 26px;
            background: var(--border);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
        }

        .tab-btn.active .tab-number {
            background: var(--primary);
            color: white;
        }

        .tab-btn.completed .tab-number {
            background: var(--success);
            color: white;
        }

        /* Tab Panels */
        .tab-panel {
            display: none;
            padding: 35px;
            animation: fadeIn 0.3s ease;
        }

        .tab-panel.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            .tab-panel {
                padding: 25px 20px;
            }
        }

        .panel-header {
            margin-bottom: 30px;
        }

        .panel-header h3 {
            font-size: 22px;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .panel-header h3 span {
            font-size: 28px;
        }

        .panel-header p {
            color: var(--text-muted);
            font-size: 15px;
        }

        /* Form Fields */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 25px;
        }

        .form-field {
            display: flex;
            flex-direction: column;
        }

        .form-field.full-width {
            grid-column: 1 / -1;
        }

        .form-field label {
            font-size: 14px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 8px;
        }

        .form-field .hint {
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 6px;
        }

        .form-field input,
        .form-field select,
        .form-field textarea {
            width: 100%;
            padding: 14px 16px;
            background: #0f172a;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 15px;
            font-family: inherit;
            color: var(--text);
            transition: all 0.3s;
        }

        .form-field input:focus,
        .form-field select:focus,
        .form-field textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .form-field input::placeholder,
        .form-field textarea::placeholder {
            color: #64748b;
        }

        .form-field select option {
            background: #1e293b;
            color: var(--text);
        }

        .form-field textarea {
            min-height: 100px;
            resize: vertical;
        }

        /* Checkbox Groups */
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 12px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 16px;
            background: #0f172a;
            border: 2px solid var(--border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .checkbox-item:hover {
            border-color: var(--primary);
        }

        .checkbox-item.checked {
            border-color: var(--primary);
            background: rgba(124, 58, 237, 0.1);
        }

        .checkbox-item input {
            display: none;
        }

        .checkbox-box {
            width: 22px;
            height: 22px;
            background: var(--border);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all 0.3s;
            font-size: 14px;
            color: white;
        }

        .checkbox-item.checked .checkbox-box {
            background: var(--primary);
        }

        .checkbox-label {
            font-size: 14px;
            color: var(--text);
        }

        /* Radio Groups */
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .radio-item {
            display: flex;
            align-items: flex-start;
            gap: 14px;
            padding: 18px 20px;
            background: #0f172a;
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .radio-item:hover {
            border-color: var(--primary);
        }

        .radio-item.selected {
            border-color: var(--primary);
            background: rgba(124, 58, 237, 0.1);
        }

        .radio-item input {
            display: none;
        }

        .radio-circle {
            width: 24px;
            height: 24px;
            border: 2px solid var(--border);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all 0.3s;
        }

        .radio-item.selected .radio-circle {
            border-color: var(--primary);
        }

        .radio-circle::after {
            content: '';
            width: 12px;
            height: 12px;
            background: var(--primary);
            border-radius: 50%;
            transform: scale(0);
            transition: transform 0.2s;
        }

        .radio-item.selected .radio-circle::after {
            transform: scale(1);
        }

        .radio-content {
            flex: 1;
        }

        .radio-title {
            font-size: 15px;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 4px;
        }

        .radio-desc {
            font-size: 13px;
            color: var(--text-muted);
        }

        /* Dynamic Section */
        .dynamic-section {
            display: none;
            margin-top: 25px;
            padding: 25px;
            background: rgba(124, 58, 237, 0.05);
            border: 2px solid rgba(124, 58, 237, 0.2);
            border-radius: 14px;
        }

        .dynamic-section.visible {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .dynamic-section h4 {
            font-size: 16px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 25px;
            border-top: 1px solid var(--border);
        }

        .nav-btn {
            padding: 14px 28px;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-btn.prev {
            background: transparent;
            border: 2px solid var(--border);
            color: var(--text-muted);
        }

        .nav-btn.prev:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .nav-btn.next {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border: none;
            color: white;
        }

        .nav-btn.next:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(124, 58, 237, 0.4);
        }

        .nav-btn.generate {
            background: linear-gradient(135deg, var(--success) 0%, #16a34a 100%);
            border: none;
            color: white;
        }

        .nav-btn.generate:hover {
            box-shadow: 0 8px 25px rgba(34, 197, 94, 0.4);
        }

        /* Preview Section */
        .preview-section {
            display: none;
            margin-top: 35px;
            animation: fadeIn 0.5s ease;
        }

        .preview-section.visible {
            display: block;
        }

        .preview-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .preview-header h3 {
            font-size: 20px;
            font-weight: 700;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .preview-actions {
            display: flex;
            gap: 12px;
        }

        .action-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
        }

        .action-btn.copy {
            background: var(--primary-light);
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .action-btn.copy:hover {
            background: var(--primary);
            color: white;
        }

        .action-btn.copy.copied {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .preview-content {
            background: #0f172a;
            border: 2px solid var(--border);
            border-radius: 14px;
            padding: 30px;
        }

        .letter-section {
            margin-bottom: 25px;
        }

        .letter-section:last-child {
            margin-bottom: 0;
        }

        .letter-section h4 {
            font-size: 13px;
            font-weight: 700;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .letter-text {
            font-size: 15px;
            line-height: 1.8;
            color: var(--text);
            white-space: pre-wrap;
        }

        .letter-placeholder {
            color: var(--accent);
            font-weight: 600;
        }

        /* Back Link */
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            font-size: 15px;
            margin-top: 30px;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        /* Disclaimer */
        .disclaimer {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            margin-top: 30px;
            font-size: 13px;
            color: var(--text-muted);
            text-align: center;
        }

        /* Calendly Section */
        .calendly-section {
            background: linear-gradient(135deg, #4c1d95 0%, #5b21b6 50%, #7c3aed 100%);
            border-radius: 24px;
            padding: 50px;
            margin-top: 50px;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .calendly-section::before {
            content: '';
            position: absolute;
            inset: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            pointer-events: none;
        }

        .calendly-section .cta-content {
            position: relative;
            z-index: 1;
        }

        .calendly-section .cta-badge {
            display: inline-block;
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #e9d5ff;
            padding: 8px 20px;
            border-radius: 50px;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .calendly-section h2 {
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 15px;
            color: white;
        }

        .calendly-section > .cta-content > p {
            font-size: 17px;
            color: #e9d5ff;
            margin-bottom: 25px;
            max-width: 700px;
        }

        .calendly-container {
            background: white;
            border-radius: 16px;
            padding: 10px;
            margin-top: 25px;
        }

        .calendly-inline-widget {
            min-height: 700px;
            border-radius: 12px;
            overflow: hidden;
        }

        @media (max-width: 768px) {
            .calendly-section {
                padding: 30px 20px;
                border-radius: 16px;
            }
            .calendly-section h2 {
                font-size: 22px;
            }
            .calendly-inline-widget {
                min-height: 650px;
            }
        }

        /* Footer */
        .page-footer {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 30px;
            text-align: center;
            margin-top: 50px;
        }

        .page-footer h3 {
            color: var(--text);
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .page-footer p {
            color: var(--text-muted);
            font-size: 14px;
            max-width: 700px;
            margin: 0 auto 20px;
        }

        .bar-number {
            display: inline-block;
            background: var(--primary-light);
            border: 1px solid rgba(124, 58, 237, 0.3);
            color: var(--primary);
            padding: 10px 25px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
        }
    </style>
</head>
<body>

    <!-- Shared Site Header -->
    <div id="site-header"></div>

    <!-- Breadcrumb -->
    <nav class="breadcrumb">
        <a href="/">Home</a>
        <span class="separator">&#8250;</span>
        <a href="/Demand-Letters/">Demand Letters</a>
        <span class="separator">&#8250;</span>
        <a href="/Demand-Letters/respond/">Respond</a>
        <span class="separator">&#8250;</span>
        <a href="/Demand-Letters/respond/cease-and-desist/">Cease & Desist</a>
        <span class="separator">&#8250;</span>
        <span class="current">Response Generator</span>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-badge">
            <span class="pulse-dot"></span>
            Interactive Response Builder
        </div>
        <h1>C&D <span>Response Letter Generator</span></h1>
        <p class="hero-subtitle">Build a professional response to any cease and desist letter. Choose your posture, request substantiation, and protect your legal rights.</p>
    </section>

    <div class="page-wrapper">
        <div class="generator-container">
            <!-- Tabs -->
            <div class="tabs-container">
                <button class="tab-btn active" data-tab="1" onclick="switchTab(1)">
                    <span class="tab-number">1</span>
                    Incoming Letter
                </button>
                <button class="tab-btn" data-tab="2" onclick="switchTab(2)">
                    <span class="tab-number">2</span>
                    Your Posture
                </button>
                <button class="tab-btn" data-tab="3" onclick="switchTab(3)">
                    <span class="tab-number">3</span>
                    Substantiation
                </button>
                <button class="tab-btn" data-tab="4" onclick="switchTab(4)">
                    <span class="tab-number">4</span>
                    Safety Modules
                </button>
            </div>

            <!-- Tab 1: Incoming Letter Snapshot -->
            <div class="tab-panel active" id="panel1">
                <div class="panel-header">
                    <h3><span>&#128232;</span> Incoming Letter Snapshot</h3>
                    <p>Provide details about the cease and desist letter you received</p>
                </div>

                <div class="form-grid">
                    <div class="form-field">
                        <label for="senderType">Sender Identity</label>
                        <select id="senderType" onchange="updateState()">
                            <option value="">Select sender type...</option>
                            <option value="lawfirm">Law Firm / Attorney</option>
                            <option value="company">Company / Corporation</option>
                            <option value="individual">Individual (Pro Se)</option>
                        </select>
                        <span class="hint">Who sent the letter?</span>
                    </div>

                    <div class="form-field">
                        <label for="senderName">Sender Name</label>
                        <input type="text" id="senderName" placeholder="e.g., Smith & Associates LLP" onchange="updateState()">
                        <span class="hint">Name of law firm, company, or individual</span>
                    </div>

                    <div class="form-field">
                        <label for="dateReceived">Date Received</label>
                        <input type="date" id="dateReceived" onchange="updateState()">
                        <span class="hint">When did you receive the letter?</span>
                    </div>

                    <div class="form-field">
                        <label for="deadline">Deadline Given</label>
                        <input type="date" id="deadline" onchange="updateState()">
                        <span class="hint">Response deadline stated in letter</span>
                    </div>

                    <div class="form-field full-width">
                        <label for="topic">Topic / Claim Type</label>
                        <select id="topic" onchange="updateState()">
                            <option value="">Select claim type...</option>
                            <option value="trademark">Trademark Infringement</option>
                            <option value="copyright">Copyright Infringement</option>
                            <option value="dmca">DMCA Takedown</option>
                            <option value="patent">Patent Infringement</option>
                            <option value="defamation">Defamation / Libel / Slander</option>
                            <option value="tradesecret">Trade Secret Misappropriation</option>
                            <option value="credential">Credential / Licensing Violation</option>
                            <option value="other">Other</option>
                        </select>
                        <span class="hint">Primary subject matter of the claim</span>
                    </div>
                </div>

                <div class="form-field">
                    <label>What They Demanded</label>
                    <div class="checkbox-group" id="demandsGroup">
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="demands" value="stop">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Stop Use / Cease Activity</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="demands" value="remove">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Remove Content</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="demands" value="money">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Pay Money / Damages</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="demands" value="accounting">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Provide Accounting</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="demands" value="undertaking">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Sign Written Undertaking</span>
                        </label>
                    </div>
                </div>

                <div class="form-field" style="margin-top: 25px;">
                    <label>Threats Made</label>
                    <div class="checkbox-group" id="threatsGroup">
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="threats" value="sue">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">File Lawsuit</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="threats" value="police">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Report to Police</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="threats" value="board">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Report to Board / Regulator</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="threats" value="platform">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Notify Platform (DMCA, etc.)</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="threats" value="employer">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Contact Employer / Investors</span>
                        </label>
                    </div>
                </div>

                <div class="nav-buttons">
                    <div></div>
                    <button class="nav-btn next" onclick="nextTab()">
                        Continue to Posture <span>&#8594;</span>
                    </button>
                </div>
            </div>

            <!-- Tab 2: Your Posture -->
            <div class="tab-panel" id="panel2">
                <div class="panel-header">
                    <h3><span>&#9878;</span> Your Response Posture</h3>
                    <p>Choose how you want to approach your response</p>
                </div>

                <div class="radio-group" id="postureGroup">
                    <label class="radio-item" onclick="selectPosture(this, 'comply-full')">
                        <input type="radio" name="posture" value="comply-full">
                        <span class="radio-circle"></span>
                        <div class="radio-content">
                            <div class="radio-title">Full Compliance</div>
                            <div class="radio-desc">Agree to all demands. Best when claims are clearly valid and you want to minimize conflict and costs.</div>
                        </div>
                    </label>

                    <label class="radio-item" onclick="selectPosture(this, 'comply-partial')">
                        <input type="radio" name="posture" value="comply-partial">
                        <span class="radio-circle"></span>
                        <div class="radio-content">
                            <div class="radio-title">Partial Compliance</div>
                            <div class="radio-desc">Agree to some demands while pushing back on others. Good for mixed-validity situations.</div>
                        </div>
                    </label>

                    <label class="radio-item" onclick="selectPosture(this, 'deny')">
                        <input type="radio" name="posture" value="deny">
                        <span class="radio-circle"></span>
                        <div class="radio-content">
                            <div class="radio-title">Deny & Demand Substantiation</div>
                            <div class="radio-desc">Reject claims and require proof. Use when you believe claims are unfounded or unsupported.</div>
                        </div>
                    </label>

                    <label class="radio-item" onclick="selectPosture(this, 'negotiate')">
                        <input type="radio" name="posture" value="negotiate">
                        <span class="radio-circle"></span>
                        <div class="radio-content">
                            <div class="radio-title">Negotiate / License / Settlement</div>
                            <div class="radio-desc">Open discussion for resolution. Good when you want to continue use under licensed terms.</div>
                        </div>
                    </label>

                    <label class="radio-item" onclick="selectPosture(this, 'preserve')">
                        <input type="radio" name="posture" value="preserve">
                        <span class="radio-circle"></span>
                        <div class="radio-content">
                            <div class="radio-title">Preserve Rights / Standstill</div>
                            <div class="radio-desc">Acknowledge receipt without admissions. Buys time to investigate and consult counsel.</div>
                        </div>
                    </label>

                    <label class="radio-item" onclick="selectPosture(this, 'counter')">
                        <input type="radio" name="posture" value="counter">
                        <span class="radio-circle"></span>
                        <div class="radio-content">
                            <div class="radio-title">Countermeasure</div>
                            <div class="radio-desc">Assert your own claims against sender. For situations where you have valid counter-claims.</div>
                        </div>
                    </label>
                </div>

                <div class="nav-buttons">
                    <button class="nav-btn prev" onclick="prevTab()">
                        <span>&#8592;</span> Back
                    </button>
                    <button class="nav-btn next" onclick="nextTab()">
                        Continue to Substantiation <span>&#8594;</span>
                    </button>
                </div>
            </div>

            <!-- Tab 3: Substantiation Requests -->
            <div class="tab-panel" id="panel3">
                <div class="panel-header">
                    <h3><span>&#128270;</span> Substantiation Requests</h3>
                    <p>Select what proof or documentation to request from the sender</p>
                </div>

                <!-- Trademark -->
                <div class="dynamic-section" id="substantiation-trademark">
                    <h4>&#9650; Trademark Substantiation</h4>
                    <div class="checkbox-group">
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="tm-reg">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Registration Number & Certificate</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="tm-firstuse">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Date of First Use in Commerce</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="tm-specimen">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Specimen of Current Use</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="tm-confusion">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Confusion Theory / Evidence</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="tm-goods">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Goods/Services Classification</span>
                        </label>
                    </div>
                </div>

                <!-- Copyright -->
                <div class="dynamic-section" id="substantiation-copyright">
                    <h4>&#169; Copyright Substantiation</h4>
                    <div class="checkbox-group">
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="cr-reg">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Copyright Registration Number</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="cr-ownership">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Proof of Ownership / Chain of Title</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="cr-urls">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Specific URLs / Locations of Infringement</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="cr-elements">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Specific Elements Allegedly Copied</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="cr-original">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Original Work for Comparison</span>
                        </label>
                    </div>
                </div>

                <!-- DMCA -->
                <div class="dynamic-section" id="substantiation-dmca">
                    <h4>&#128274; DMCA Takedown Information</h4>
                    <div class="checkbox-group">
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="dmca-platform">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Platform(s) Contacted</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="dmca-status">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Current Takedown Status</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="dmca-counter">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Counter-Notice Intent Statement</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="dmca-512">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">512(f) Misrepresentation Warning</span>
                        </label>
                    </div>
                </div>

                <!-- Patent -->
                <div class="dynamic-section" id="substantiation-patent">
                    <h4>&#128736; Patent Substantiation</h4>
                    <div class="checkbox-group">
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="pat-numbers">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Patent Numbers</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="pat-claims">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Specific Claims Allegedly Infringed</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="pat-chart">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Claim Chart / Element Mapping</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="pat-features">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Accused Product Features</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="pat-validity">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Patent Validity Status</span>
                        </label>
                    </div>
                </div>

                <!-- Defamation -->
                <div class="dynamic-section" id="substantiation-defamation">
                    <h4>&#128483; Defamation Substantiation</h4>
                    <div class="checkbox-group">
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="def-statements">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Identify Specific Statements</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="def-false">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Explain Why Each is False</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="def-damages">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Evidence of Actual Damages</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="def-corrections">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Demanded Corrections</span>
                        </label>
                    </div>
                </div>

                <!-- Trade Secret -->
                <div class="dynamic-section" id="substantiation-tradesecret">
                    <h4>&#128274; Trade Secret Substantiation</h4>
                    <div class="checkbox-group">
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="ts-identify">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Identify Specific Trade Secrets</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="ts-measures">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Reasonable Secrecy Measures Taken</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="ts-access">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">How You Allegedly Obtained Access</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="ts-use">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">How You Allegedly Used the Information</span>
                        </label>
                    </div>
                </div>

                <!-- Credential -->
                <div class="dynamic-section" id="substantiation-credential">
                    <h4>&#127891; Credential / Licensing Substantiation</h4>
                    <div class="checkbox-group">
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="cred-requirements">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Specific Licensing Requirements</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="cred-authority">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Regulatory Authority Citation</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="cred-violation">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Specific Acts Constituting Violation</span>
                        </label>
                    </div>
                </div>

                <!-- Other -->
                <div class="dynamic-section" id="substantiation-other">
                    <h4>&#128196; General Substantiation</h4>
                    <div class="checkbox-group">
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="other-legal">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Legal Basis for Claims</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="other-facts">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Factual Basis / Evidence</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="other-damages">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Damages Calculation</span>
                        </label>
                        <label class="checkbox-item" onclick="toggleCheckbox(this)">
                            <input type="checkbox" name="subst" value="other-authority">
                            <span class="checkbox-box"></span>
                            <span class="checkbox-label">Sender's Authority to Assert Claim</span>
                        </label>
                    </div>
                </div>

                <div class="nav-buttons">
                    <button class="nav-btn prev" onclick="prevTab()">
                        <span>&#8592;</span> Back
                    </button>
                    <button class="nav-btn next" onclick="nextTab()">
                        Continue to Safety Modules <span>&#8594;</span>
                    </button>
                </div>
            </div>

            <!-- Tab 4: Safety Modules -->
            <div class="tab-panel" id="panel4">
                <div class="panel-header">
                    <h3><span>&#128737;</span> Safety Modules</h3>
                    <p>Add protective language and legal safeguards to your response</p>
                </div>

                <div class="checkbox-group" id="safetyGroup" style="flex-direction: column;">
                    <label class="checkbox-item" onclick="toggleCheckbox(this)" style="align-items: flex-start; padding: 20px;">
                        <input type="checkbox" name="safety" value="no-admissions" checked>
                        <span class="checkbox-box">&#10003;</span>
                        <div style="flex: 1;">
                            <span class="checkbox-label" style="font-weight: 600; font-size: 15px;">No Admissions / Reserve Rights</span>
                            <p style="color: var(--text-muted); font-size: 13px; margin-top: 6px;">Standard protective language stating nothing in your response constitutes an admission of liability or waiver of defenses.</p>
                        </div>
                    </label>

                    <label class="checkbox-item" onclick="toggleCheckbox(this)" style="align-items: flex-start; padding: 20px;">
                        <input type="checkbox" name="safety" value="preservation">
                        <span class="checkbox-box"></span>
                        <div style="flex: 1;">
                            <span class="checkbox-label" style="font-weight: 600; font-size: 15px;">Preservation of Evidence Notice</span>
                            <p style="color: var(--text-muted); font-size: 13px; margin-top: 6px;">Remind the sender of their duty to preserve relevant evidence and documents in anticipation of potential litigation.</p>
                        </div>
                    </label>

                    <label class="checkbox-item" onclick="toggleCheckbox(this)" style="align-items: flex-start; padding: 20px;">
                        <input type="checkbox" name="safety" value="no-harassment">
                        <span class="checkbox-box"></span>
                        <div style="flex: 1;">
                            <span class="checkbox-label" style="font-weight: 600; font-size: 15px;">No Harassment / No Third-Party Contact</span>
                            <p style="color: var(--text-muted); font-size: 13px; margin-top: 6px;">Request that sender cease contact with third parties (employer, platforms, investors) and communicate only with you or your counsel.</p>
                        </div>
                    </label>

                    <label class="checkbox-item" onclick="toggleCheckbox(this)" style="align-items: flex-start; padding: 20px;">
                        <input type="checkbox" name="safety" value="written-only">
                        <span class="checkbox-box"></span>
                        <div style="flex: 1;">
                            <span class="checkbox-label" style="font-weight: 600; font-size: 15px;">Communications in Writing Only</span>
                            <p style="color: var(--text-muted); font-size: 13px; margin-top: 6px;">Require all future communications to be in writing to maintain a clear record and prevent misunderstandings.</p>
                        </div>
                    </label>
                </div>

                <div class="form-grid" style="margin-top: 30px;">
                    <div class="form-field">
                        <label for="yourName">Your Name / Entity</label>
                        <input type="text" id="yourName" placeholder="e.g., John Doe or Acme Inc.">
                    </div>
                    <div class="form-field">
                        <label for="responseDeadline">Request Response By</label>
                        <input type="date" id="responseDeadline">
                        <span class="hint">Deadline for sender to provide requested information</span>
                    </div>
                </div>

                <div class="nav-buttons">
                    <button class="nav-btn prev" onclick="prevTab()">
                        <span>&#8592;</span> Back
                    </button>
                    <button class="nav-btn generate" onclick="generateLetter()">
                        &#9998; Generate Response Letter
                    </button>
                </div>
            </div>

            <!-- Preview Section (shown after generation) -->
            <div class="preview-section" id="previewSection">
                <div class="preview-header">
                    <h3><span>&#128196;</span> Your Response Letter</h3>
                    <div class="preview-actions">
                        <button class="action-btn copy" onclick="copyLetter(this)">
                            <span>&#128203;</span> Copy Letter
                        </button>
                    </div>
                </div>

                <div class="preview-content">
                    <div id="letterOutput"></div>
                </div>
            </div>
        </div>

        <a href="/Demand-Letters/respond/cease-and-desist/" class="back-link">
            <span>&#8592;</span> Back to C&D Response Hub
        </a>

        <!-- Disclaimer -->
        <div class="disclaimer">
            <strong>Disclaimer:</strong> This tool generates sample response language for educational purposes only and does not constitute legal advice. Cease and desist responses can have significant legal consequences. Always consult with a qualified attorney before sending any response.
        </div>

        <!-- Calendly Section -->
        <section class="calendly-section">
            <div class="cta-content">
                <span class="cta-badge">Professional Legal Guidance</span>
                <h2>Need Help With Your Response?</h2>
                <p>Schedule a consultation to review the C&D letter, discuss your options, and develop a strategic response plan.</p>

                <div class="calendly-container">
                    <!-- Calendly inline widget begin -->
                    <div class="calendly-inline-widget" data-url="https://calendly.com/sergei-tokmakov/30-minute-zoom-meeting?hide_gdpr_banner=1" style="min-width:320px;height:700px;"></div>
                    <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
                    <!-- Calendly inline widget end -->
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="page-footer">
            <h3>About This Tool</h3>
            <p>This C&D Response Letter Generator is provided by a California-licensed attorney to help individuals and businesses understand their response options. Generated text should be reviewed by legal counsel before use.</p>
            <div class="bar-number">California State Bar #279869</div>
        </footer>
    </div>

    <script>
        // State management
        let currentTab = 1;
        let formState = {
            senderType: '',
            senderName: '',
            dateReceived: '',
            deadline: '',
            topic: '',
            demands: [],
            threats: [],
            posture: '',
            substantiation: [],
            safety: ['no-admissions'],
            yourName: '',
            responseDeadline: ''
        };

        // Tab switching
        function switchTab(tabNum) {
            // Update tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
                if (parseInt(btn.dataset.tab) === tabNum) {
                    btn.classList.add('active');
                }
            });

            // Update panels
            document.querySelectorAll('.tab-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            document.getElementById('panel' + tabNum).classList.add('active');

            currentTab = tabNum;

            // Update substantiation visibility
            if (tabNum === 3) {
                updateSubstantiationVisibility();
            }
        }

        function nextTab() {
            if (currentTab < 4) {
                // Mark current tab as completed
                document.querySelector(`.tab-btn[data-tab="${currentTab}"]`).classList.add('completed');
                switchTab(currentTab + 1);
            }
        }

        function prevTab() {
            if (currentTab > 1) {
                switchTab(currentTab - 1);
            }
        }

        // Checkbox handling
        function toggleCheckbox(element) {
            element.classList.toggle('checked');
            const checkbox = element.querySelector('input[type="checkbox"]');
            checkbox.checked = !checkbox.checked;

            const box = element.querySelector('.checkbox-box');
            box.innerHTML = checkbox.checked ? '&#10003;' : '';

            updateState();
        }

        // Radio handling
        function selectPosture(element, value) {
            document.querySelectorAll('.radio-item').forEach(item => {
                item.classList.remove('selected');
            });
            element.classList.add('selected');
            element.querySelector('input').checked = true;
            formState.posture = value;
        }

        // Update state from form
        function updateState() {
            formState.senderType = document.getElementById('senderType').value;
            formState.senderName = document.getElementById('senderName').value;
            formState.dateReceived = document.getElementById('dateReceived').value;
            formState.deadline = document.getElementById('deadline').value;
            formState.topic = document.getElementById('topic').value;

            // Collect checked demands
            formState.demands = [];
            document.querySelectorAll('input[name="demands"]:checked').forEach(cb => {
                formState.demands.push(cb.value);
            });

            // Collect checked threats
            formState.threats = [];
            document.querySelectorAll('input[name="threats"]:checked').forEach(cb => {
                formState.threats.push(cb.value);
            });
        }

        // Update substantiation visibility based on topic
        function updateSubstantiationVisibility() {
            const topic = formState.topic;
            document.querySelectorAll('.dynamic-section').forEach(section => {
                section.classList.remove('visible');
            });

            if (topic) {
                const section = document.getElementById('substantiation-' + topic);
                if (section) {
                    section.classList.add('visible');
                }
            }
        }

        // Generate the letter
        function generateLetter() {
            // Collect all form data
            formState.yourName = document.getElementById('yourName').value || '[YOUR NAME]';
            formState.responseDeadline = document.getElementById('responseDeadline').value;

            // Collect safety options
            formState.safety = [];
            document.querySelectorAll('input[name="safety"]:checked').forEach(cb => {
                formState.safety.push(cb.value);
            });

            // Collect substantiation requests
            formState.substantiation = [];
            document.querySelectorAll('input[name="subst"]:checked').forEach(cb => {
                formState.substantiation.push(cb.value);
            });

            // Build the letter
            let letter = '';

            // Header
            letter += `<div class="letter-section">
                <h4>Header</h4>
                <div class="letter-text">[DATE]

${formState.senderName || '[SENDER NAME]'}
[SENDER ADDRESS]

Re: Your Letter Dated ${formState.dateReceived ? new Date(formState.dateReceived).toLocaleDateString('en-US', {month: 'long', day: 'numeric', year: 'numeric'}) : '[DATE]'}

Dear ${formState.senderType === 'lawfirm' ? 'Counsel' : formState.senderType === 'company' ? 'Sir or Madam' : 'Sir or Madam'}:</div>
            </div>`;

            // Acknowledgment + Posture
            letter += `<div class="letter-section">
                <h4>Acknowledgment & Position</h4>
                <div class="letter-text">${getPostureText()}</div>
            </div>`;

            // Substantiation Requests
            if (formState.substantiation.length > 0 && (formState.posture === 'deny' || formState.posture === 'preserve')) {
                letter += `<div class="letter-section">
                    <h4>Substantiation Requests</h4>
                    <div class="letter-text">${getSubstantiationText()}</div>
                </div>`;
            }

            // Conditional Commitments
            if (formState.posture === 'comply-partial' || formState.posture === 'negotiate') {
                letter += `<div class="letter-section">
                    <h4>Conditional Terms</h4>
                    <div class="letter-text">${getConditionalText()}</div>
                </div>`;
            }

            // Safety Modules
            if (formState.safety.length > 0) {
                letter += `<div class="letter-section">
                    <h4>Reservations & Notices</h4>
                    <div class="letter-text">${getSafetyText()}</div>
                </div>`;
            }

            // Response Deadline
            if (formState.responseDeadline) {
                letter += `<div class="letter-section">
                    <h4>Response Requested</h4>
                    <div class="letter-text">Please provide your response and the requested information by ${new Date(formState.responseDeadline).toLocaleDateString('en-US', {month: 'long', day: 'numeric', year: 'numeric'})}. If I do not hear from you by that date, I will assume this matter is closed.</div>
                </div>`;
            }

            // Closing
            letter += `<div class="letter-section">
                <h4>Closing</h4>
                <div class="letter-text">Sincerely,

${formState.yourName}
[ADDRESS]
[EMAIL]
[PHONE]</div>
            </div>`;

            // Display the letter
            document.getElementById('letterOutput').innerHTML = letter;
            document.getElementById('previewSection').classList.add('visible');
            document.getElementById('previewSection').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Get posture-specific text
        function getPostureText() {
            const postureTexts = {
                'comply-full': `I am in receipt of your letter dated ${formState.dateReceived ? new Date(formState.dateReceived).toLocaleDateString('en-US', {month: 'long', day: 'numeric', year: 'numeric'}) : '[DATE]'} concerning ${getTopicDescription()}.

After reviewing your correspondence and the underlying claims, I have determined that compliance is the appropriate course of action. I will take the following steps to address your concerns:

${getComplianceSteps()}

Please confirm in writing that these actions satisfy your demands and that you consider this matter resolved.`,

                'comply-partial': `I am in receipt of your letter dated ${formState.dateReceived ? new Date(formState.dateReceived).toLocaleDateString('en-US', {month: 'long', day: 'numeric', year: 'numeric'}) : '[DATE]'} concerning ${getTopicDescription()}.

While I am willing to address certain of your concerns, I do not agree with all of your demands. Specifically:

[DESCRIBE WHAT YOU WILL AND WILL NOT DO]

I am open to discussing a reasonable resolution that addresses your legitimate concerns while protecting my rights.`,

                'deny': `I am in receipt of your letter dated ${formState.dateReceived ? new Date(formState.dateReceived).toLocaleDateString('en-US', {month: 'long', day: 'numeric', year: 'numeric'}) : '[DATE]'} concerning ${getTopicDescription()}.

I dispute the claims made in your letter. Your correspondence fails to provide sufficient basis for the demands made. Before I can meaningfully respond, I require substantiation of the following:`,

                'negotiate': `I am in receipt of your letter dated ${formState.dateReceived ? new Date(formState.dateReceived).toLocaleDateString('en-US', {month: 'long', day: 'numeric', year: 'numeric'}) : '[DATE]'} concerning ${getTopicDescription()}.

While I do not admit to any wrongdoing, I am interested in exploring a mutually beneficial resolution. I am open to discussing:

- Licensing arrangements
- Settlement terms
- Alternative dispute resolution

Please advise if you are authorized to negotiate on behalf of your client.`,

                'preserve': `I am in receipt of your letter dated ${formState.dateReceived ? new Date(formState.dateReceived).toLocaleDateString('en-US', {month: 'long', day: 'numeric', year: 'numeric'}) : '[DATE]'} concerning ${getTopicDescription()}.

This letter acknowledges receipt of your correspondence. I am currently reviewing the matters raised therein and consulting with counsel. This acknowledgment should not be construed as an admission of any facts, claims, or liability.

I require additional time and information to properly evaluate and respond to your demands.`,

                'counter': `I am in receipt of your letter dated ${formState.dateReceived ? new Date(formState.dateReceived).toLocaleDateString('en-US', {month: 'long', day: 'numeric', year: 'numeric'}) : '[DATE]'} concerning ${getTopicDescription()}.

I categorically deny the claims made in your letter. Moreover, I have claims of my own arising from your conduct:

[DESCRIBE YOUR COUNTER-CLAIMS]

I reserve all rights to pursue these claims if this matter is not resolved amicably.`
            };

            return postureTexts[formState.posture] || postureTexts['preserve'];
        }

        // Get topic description
        function getTopicDescription() {
            const topics = {
                'trademark': 'alleged trademark infringement',
                'copyright': 'alleged copyright infringement',
                'dmca': 'the DMCA takedown notice',
                'patent': 'alleged patent infringement',
                'defamation': 'alleged defamatory statements',
                'tradesecret': 'alleged trade secret misappropriation',
                'credential': 'alleged credential/licensing violations',
                'other': 'the matters described'
            };
            return topics[formState.topic] || 'the matters described in your letter';
        }

        // Get compliance steps based on demands
        function getComplianceSteps() {
            let steps = [];
            if (formState.demands.includes('stop')) steps.push('- I will cease the identified activity immediately.');
            if (formState.demands.includes('remove')) steps.push('- I will remove the identified content within [X] business days.');
            if (formState.demands.includes('money')) steps.push('- I am prepared to discuss reasonable compensation for any damages.');
            if (formState.demands.includes('accounting')) steps.push('- I will provide an accounting of [SPECIFY SCOPE] upon execution of a confidentiality agreement.');
            if (formState.demands.includes('undertaking')) steps.push('- I am willing to provide a written undertaking, subject to review of the proposed terms.');
            return steps.join('\n') || '- [SPECIFY COMPLIANCE STEPS]';
        }

        // Get substantiation request text
        function getSubstantiationText() {
            let requests = [];

            const substLabels = {
                'tm-reg': 'A copy of the trademark registration certificate and registration number',
                'tm-firstuse': 'Evidence of first use in commerce with specific dates',
                'tm-specimen': 'Current specimens of use showing how the mark is used',
                'tm-confusion': 'Evidence or analysis supporting likelihood of confusion',
                'tm-goods': 'The specific goods/services classification at issue',
                'cr-reg': 'Copyright registration number and certificate',
                'cr-ownership': 'Documentation establishing chain of title and ownership',
                'cr-urls': 'Specific URLs or locations where infringement allegedly occurs',
                'cr-elements': 'Identification of specific elements allegedly copied',
                'cr-original': 'A copy of the original work for comparison purposes',
                'dmca-platform': 'Identification of platforms contacted with takedown notices',
                'dmca-status': 'Current status of any pending takedown requests',
                'dmca-counter': 'Acknowledgment of counter-notice procedures under 17 U.S.C. 512(g)',
                'dmca-512': 'Note: Misrepresentation in a DMCA notice may subject you to liability under 17 U.S.C. 512(f)',
                'pat-numbers': 'Complete patent numbers for all patents allegedly infringed',
                'pat-claims': 'Identification of specific claims within each patent at issue',
                'pat-chart': 'A claim chart mapping patent claims to accused product features',
                'pat-features': 'Identification of accused product features for each claim',
                'pat-validity': 'Current status of patent validity (maintenance fees, IPR, etc.)',
                'def-statements': 'Identification of each specific statement alleged to be defamatory',
                'def-false': 'Explanation of why each identified statement is false',
                'def-damages': 'Evidence of actual damages suffered',
                'def-corrections': 'The specific corrections or retractions demanded',
                'ts-identify': 'Specific identification of each trade secret allegedly misappropriated',
                'ts-measures': 'Description of reasonable measures taken to maintain secrecy',
                'ts-access': 'How I allegedly obtained access to the trade secrets',
                'ts-use': 'How I allegedly used the trade secret information',
                'cred-requirements': 'Specific licensing or credential requirements at issue',
                'cred-authority': 'Citation to regulatory authority governing these requirements',
                'cred-violation': 'Specific acts allegedly constituting violations',
                'other-legal': 'The legal basis for your claims, including applicable statutes',
                'other-facts': 'The factual basis for your claims with supporting evidence',
                'other-damages': 'Calculation and documentation of claimed damages',
                'other-authority': 'Documentation of your authority to assert these claims'
            };

            formState.substantiation.forEach(key => {
                if (substLabels[key]) {
                    requests.push('- ' + substLabels[key]);
                }
            });

            return requests.join('\n') || 'Please provide documentation supporting your claims.';
        }

        // Get conditional text
        function getConditionalText() {
            return `Subject to the following conditions, I am prepared to discuss resolution:

1. [CONDITION 1 - e.g., Verification of rights/authority]
2. [CONDITION 2 - e.g., Mutual release of claims]
3. [CONDITION 3 - e.g., Confidentiality agreement]
4. [CONDITION 4 - e.g., No admission of liability]

Any agreement would need to be reduced to writing and signed by all parties.`;
        }

        // Get safety module text
        function getSafetyText() {
            let safetyTexts = [];

            if (formState.safety.includes('no-admissions')) {
                safetyTexts.push('Nothing in this correspondence constitutes an admission of fact, liability, or wrongdoing. All rights and defenses are expressly reserved, including but not limited to defenses based on fair use, first sale, independent creation, truth, privilege, and any applicable limitations or immunities.');
            }

            if (formState.safety.includes('preservation')) {
                safetyTexts.push('Please be advised that you and your client are under a duty to preserve all documents, communications, and electronically stored information relevant to this matter, including but not limited to documents relating to your claimed rights, damages, and any communications with third parties about this matter.');
            }

            if (formState.safety.includes('no-harassment')) {
                safetyTexts.push('I demand that you and your client cease and desist from any contact with third parties regarding this matter, including but not limited to my employer, business partners, platforms, or investors. Any such contact may constitute tortious interference and defamation per se, and I will pursue all available remedies.');
            }

            if (formState.safety.includes('written-only')) {
                safetyTexts.push('All future communications regarding this matter must be in writing. I will not respond to or acknowledge any oral communications, and any such attempts will not be considered valid correspondence.');
            }

            return safetyTexts.join('\n\n');
        }

        // Copy letter
        function copyLetter(button) {
            const letterOutput = document.getElementById('letterOutput');
            const text = letterOutput.innerText;

            navigator.clipboard.writeText(text).then(() => {
                button.classList.add('copied');
                button.innerHTML = '<span>&#10003;</span> Copied!';
                setTimeout(() => {
                    button.classList.remove('copied');
                    button.innerHTML = '<span>&#128203;</span> Copy Letter';
                }, 2000);
            }).catch(err => {
                // Fallback
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);

                button.classList.add('copied');
                button.innerHTML = '<span>&#10003;</span> Copied!';
                setTimeout(() => {
                    button.classList.remove('copied');
                    button.innerHTML = '<span>&#128203;</span> Copy Letter';
                }, 2000);
            });
        }

        // Initialize - set first checkbox as checked
        document.addEventListener('DOMContentLoaded', function() {
            const firstSafetyCheckbox = document.querySelector('input[name="safety"][value="no-admissions"]');
            if (firstSafetyCheckbox) {
                firstSafetyCheckbox.closest('.checkbox-item').classList.add('checked');
            }
        });
    </script>

    <!-- Shared header loader -->
    <script src="/shared/header-loader.js"></script>

</body>
</html>
