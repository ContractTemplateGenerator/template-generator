<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unpaid Invoice Demand Letter Generator | Professional Collection Tool</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Generate professional demand letters for unpaid invoices. Perfect for SaaS businesses, freelancers, contractors, and small businesses. Get paid faster with legally compliant collection letters.">
    <meta name="keywords" content="unpaid invoice, demand letter, collection letter, freelancer, SaaS, contractor, small business, accounts receivable">
    
    <!-- Styles -->
    <link rel="stylesheet" href="../Tenant-Security-Deposit-Generator/styles.css">
    
    <!-- React CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>
    
    <style>
        /* Custom styles for invoice generator */
        .form-section {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .form-section:last-child {
            border-bottom: none;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        
        .form-row-three {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 1rem;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: auto;
        }
        
        .letter-content {
            line-height: 1.6;
            font-family: 'Times New Roman', serif;
            font-size: 14px;
        }
        
        .letter-header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #000;
        }
        
        .letter-date {
            text-align: right;
            margin-bottom: 2rem;
        }
        
        .letter-body p {
            margin-bottom: 1rem;
        }
        
        .invoice-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        
        .invoice-table th,
        .invoice-table td {
            border: 1px solid #000;
            padding: 8px;
            text-align: left;
        }
        
        .invoice-table th {
            background-color: #f3f4f6;
        }
        
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .form-row-three {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- Load dependencies -->
    <script src="../Tenant-Security-Deposit-Generator/paywall-system.js"></script>
    
    <script>
        const { useState, useRef, useEffect } = React;

        // Icon component
        const Icon = ({ name, style = {} }) => React.createElement('i', {
            'data-feather': name,
            style: style
        });

        // Main Invoice Generator Component
        const InvoiceGenerator = () => {
            // State management
            const [currentTab, setCurrentTab] = useState(0);
            const [hasPaywallAccess, setHasPaywallAccess] = useState(false);
            const previewRef = useRef(null);
            
            // Form data state
            const [formData, setFormData] = useState({
                // Business Information
                businessName: '',
                businessEmail: '',
                businessPhone: '',
                businessAddress: '',
                
                // Client Information
                clientName: '',
                clientEmail: '',
                contactPerson: '',
                clientAddress: '',
                
                // Invoice Details
                invoiceNumber: '',
                invoiceDate: '',
                dueDate: '',
                totalAmount: '',
                currency: 'USD',
                workDescription: '',
                
                // Collection Options
                demandTone: 'professional',
                paymentDeadline: '10',
                interestRate: '1.5',
                reportCredit: true,
                collectionAgency: true,
                legalAction: true,
                lienRights: false,
                
                // Previous Communication
                previousAttempts: ''
            });

            // Tab definitions
            const tabs = [
                { id: 'details', label: 'Invoice Details', icon: 'file-text' },
                { id: 'collection', label: 'Collection Strategy', icon: 'target' },
                { id: 'preview', label: 'Review & Send', icon: 'send' }
            ];

            // Paywall integration
            useEffect(() => {
                const checkPaymentStatus = () => {
                    if (window.PaywallSystem && window.PaywallSystem.hasAccess()) {
                        setHasPaywallAccess(true);
                        return true;
                    }
                    return false;
                };
                
                if (!checkPaymentStatus()) {
                    setTimeout(() => {
                        if (window.PaywallSystem && window.PaywallSystem.makePreviewNonCopyable) {
                            window.PaywallSystem.makePreviewNonCopyable();
                        }
                    }, 1000);
                } else {
                    setTimeout(() => {
                        if (window.PaywallSystem && window.PaywallSystem.enablePreviewInteraction) {
                            window.PaywallSystem.enablePreviewInteraction();
                        }
                    }, 1000);
                }

                // Set default dates
                const today = new Date();
                const thirtyDaysAgo = new Date();
                thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
                const sixtyDaysAgo = new Date();
                sixtyDaysAgo.setDate(sixtyDaysAgo.getDate() - 60);
                
                setFormData(prev => ({
                    ...prev,
                    invoiceDate: thirtyDaysAgo.toISOString().split('T')[0],
                    dueDate: sixtyDaysAgo.toISOString().split('T')[0]
                }));

                // Initialize feather icons
                if (window.feather) {
                    window.feather.replace();
                }
            }, []);

            // Update form data
            const updateFormData = (field, value) => {
                setFormData(prev => ({ ...prev, [field]: value }));
            };

            // Generate letter content
            const generateLetterContent = () => {
                const currencySymbol = formData.currency === 'USD' ? '$' : formData.currency === 'EUR' ? 'â‚¬' : formData.currency === 'GBP' ? 'Â£' : '$';
                const formattedAmount = `${currencySymbol}${formData.totalAmount || '[Amount]'}`;
                
                // Calculate days overdue
                let daysOverdue = 0;
                if (formData.dueDate) {
                    const dueDateObj = new Date(formData.dueDate);
                    const today = new Date();
                    daysOverdue = Math.ceil((today - dueDateObj) / (1000 * 60 * 60 * 24));
                }

                // Generate consequences list
                let consequences = [];
                if (formData.reportCredit) {
                    consequences.push('Reporting this debt to credit bureaus, which may damage your credit score');
                }
                if (formData.collectionAgency) {
                    consequences.push('Referral to a professional collection agency');
                }
                if (formData.legalAction) {
                    consequences.push('Legal action seeking judgment, attorney fees, and court costs');
                }
                if (formData.lienRights) {
                    consequences.push('Filing of mechanic\\'s lien against your property (where applicable)');
                }
                consequences.unshift(`Late fees and interest charges at ${formData.interestRate || '1.5'}% per month`);

                // Generate tone-specific demand paragraph
                let demandParagraph = '';
                switch(formData.demandTone) {
                    case 'professional':
                        demandParagraph = `We respectfully request payment of this outstanding invoice within <strong>${formData.paymentDeadline} days</strong> of receiving this notice. We value our business relationship and would prefer to resolve this matter amicably.`;
                        break;
                    case 'firm':
                        demandParagraph = `Payment of this outstanding debt is required within <strong>${formData.paymentDeadline} days</strong> of receiving this notice. Continued non-payment will force us to pursue more aggressive collection measures.`;
                        break;
                    case 'urgent':
                        demandParagraph = `<strong>IMMEDIATE PAYMENT REQUIRED:</strong> This debt must be paid in full within <strong>${formData.paymentDeadline} days</strong> or we will proceed with collection action without further notice.`;
                        break;
                }

                return `
                    <div class="letter-header">
                        <h2>DEMAND FOR PAYMENT</h2>
                        <p><strong>UNPAID INVOICE COLLECTION NOTICE</strong></p>
                    </div>
                    
                    <div class="letter-date">
                        <p>${new Date().toLocaleDateString()}</p>
                    </div>
                    
                    <div class="letter-body">
                        <p><strong>TO:</strong> ${formData.clientName || '[Client Name]'}<br>
                        ${formData.clientAddress || '[Client Address]'}</p>
                        
                        <p><strong>FROM:</strong> ${formData.businessName || '[Your Business Name]'}<br>
                        ${formData.businessAddress || '[Your Business Address]'}<br>
                        Email: ${formData.businessEmail || '[Your Email]'}<br>
                        Phone: ${formData.businessPhone || '[Your Phone]'}</p>
                        
                        <p><strong>RE: DEMAND FOR PAYMENT - INVOICE #${formData.invoiceNumber || '[Invoice Number]'}</strong></p>
                        
                        <p>This letter serves as formal notice that your account is seriously past due. Despite our previous attempts to collect this debt, payment remains outstanding.</p>
                        
                        <p><strong>INVOICE DETAILS:</strong></p>
                        <table class="invoice-table">
                            <tr>
                                <th>Invoice Number</th>
                                <th>Invoice Date</th>
                                <th>Due Date</th>
                                <th>Amount Owed</th>
                                <th>Days Overdue</th>
                            </tr>
                            <tr>
                                <td>${formData.invoiceNumber || '[Invoice Number]'}</td>
                                <td>${formData.invoiceDate || '[Invoice Date]'}</td>
                                <td>${formData.dueDate || '[Due Date]'}</td>
                                <td>${formattedAmount}</td>
                                <td>${daysOverdue > 0 ? daysOverdue : '0'}</td>
                            </tr>
                        </table>
                        
                        <p><strong>Services Provided:</strong> ${formData.workDescription || '[Work Description]'}</p>
                        
                        <p>${demandParagraph}</p>
                        
                        <p><strong>Consequences of Non-Payment:</strong></p>
                        <ul>
                            ${consequences.map(c => `<li>${c}</li>`).join('')}
                        </ul>
                        
                        <p><strong>PAYMENT INSTRUCTIONS:</strong><br>
                        Please remit payment immediately to avoid further collection action. Contact us at ${formData.businessEmail || '[Your Email]'} to arrange payment or discuss payment plans.</p>
                        
                        <p>This letter is an attempt to collect a debt. Any information obtained will be used for that purpose.</p>
                        
                        <p>Sincerely,<br><br>
                        ${formData.businessName || '[Your Business Name]'}</p>
                    </div>
                `;
            };

            // Copy to clipboard functionality
            const copyToClipboard = () => {
                if (!hasPaywallAccess) {
                    if (window.PaywallSystem) {
                        window.PaywallSystem.showAccessDenied('copy');
                        window.PaywallSystem.createPaywallModal(() => {
                            if (window.PaywallSystem && window.PaywallSystem.hasAccess()) {
                                setHasPaywallAccess(true);
                                window.PaywallSystem.enablePreviewInteraction();
                                const content = generateLetterContent().replace(/<[^>]*>/g, '');
                                navigator.clipboard.writeText(content);
                                alert('Demand letter copied to clipboard!');
                            }
                        });
                    }
                    return;
                }
                const content = generateLetterContent().replace(/<[^>]*>/g, '');
                navigator.clipboard.writeText(content).then(() => {
                    alert('Demand letter copied to clipboard!');
                });
            };

            // Download letter
            const downloadLetter = () => {
                if (!hasPaywallAccess) {
                    if (window.PaywallSystem) {
                        window.PaywallSystem.showAccessDenied('download');
                        window.PaywallSystem.createPaywallModal(() => {
                            if (window.PaywallSystem && window.PaywallSystem.hasAccess()) {
                                setHasPaywallAccess(true);
                                window.PaywallSystem.enablePreviewInteraction();
                                downloadWordDoc();
                            }
                        });
                    }
                    return;
                }
                downloadWordDoc();
            };

            const downloadWordDoc = () => {
                const letterContent = generateLetterContent();
                const fullDocument = `
                    <!DOCTYPE html>
                    <html>
                    <head>
                        <title>Demand Letter - Invoice ${formData.invoiceNumber}</title>
                        <style>
                            body { font-family: 'Times New Roman', serif; line-height: 1.6; margin: 1in; }
                            .letter-header { text-align: center; margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 2px solid #000; }
                            .letter-date { text-align: right; margin-bottom: 2rem; }
                            .invoice-table { width: 100%; border-collapse: collapse; margin: 1rem 0; }
                            .invoice-table th, .invoice-table td { border: 1px solid #000; padding: 8px; text-align: left; }
                            .invoice-table th { background-color: #f3f4f6; }
                        </style>
                    </head>
                    <body>
                        ${letterContent}
                    </body>
                    </html>
                `;
                
                const blob = new Blob([fullDocument], { type: 'application/msword' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `Demand_Letter_Invoice_${formData.invoiceNumber || 'Draft'}.doc`;
                link.click();
                URL.revokeObjectURL(url);
            };

            // Tab content renderers
            const renderDetailsTab = () => {
                return React.createElement('div', { className: 'tab-content' }, [
                    // Business Information Section
                    React.createElement('div', { key: 'business-section', className: 'form-section' }, [
                        React.createElement('h3', { key: 'title' }, 'Your Business Information'),
                        React.createElement('div', { key: 'business-name', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Business/Your Name *'),
                            React.createElement('input', {
                                key: 'input',
                                type: 'text',
                                value: formData.businessName,
                                onChange: (e) => updateFormData('businessName', e.target.value),
                                placeholder: 'ABC Consulting LLC'
                            })
                        ]),
                        React.createElement('div', { key: 'business-contact', className: 'form-row' }, [
                            React.createElement('div', { key: 'email', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Email Address *'),
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'email',
                                    value: formData.businessEmail,
                                    onChange: (e) => updateFormData('businessEmail', e.target.value),
                                    placeholder: 'billing@abcconsulting.com'
                                })
                            ]),
                            React.createElement('div', { key: 'phone', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Phone Number'),
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'tel',
                                    value: formData.businessPhone,
                                    onChange: (e) => updateFormData('businessPhone', e.target.value),
                                    placeholder: '(555) 123-4567'
                                })
                            ])
                        ]),
                        React.createElement('div', { key: 'business-address', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Business Address'),
                            React.createElement('textarea', {
                                key: 'input',
                                value: formData.businessAddress,
                                onChange: (e) => updateFormData('businessAddress', e.target.value),
                                placeholder: '123 Business Ave\\nSuite 100\\nCity, State 12345'
                            })
                        ])
                    ]),

                    // Client Information Section
                    React.createElement('div', { key: 'client-section', className: 'form-section' }, [
                        React.createElement('h3', { key: 'title' }, 'Client/Debtor Information'),
                        React.createElement('div', { key: 'client-name', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Client Name/Company *'),
                            React.createElement('input', {
                                key: 'input',
                                type: 'text',
                                value: formData.clientName,
                                onChange: (e) => updateFormData('clientName', e.target.value),
                                placeholder: 'XYZ Corporation'
                            })
                        ]),
                        React.createElement('div', { key: 'client-contact', className: 'form-row' }, [
                            React.createElement('div', { key: 'email', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Client Email'),
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'email',
                                    value: formData.clientEmail,
                                    onChange: (e) => updateFormData('clientEmail', e.target.value),
                                    placeholder: 'ap@xyzcorp.com'
                                })
                            ]),
                            React.createElement('div', { key: 'person', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Contact Person'),
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'text',
                                    value: formData.contactPerson,
                                    onChange: (e) => updateFormData('contactPerson', e.target.value),
                                    placeholder: 'John Smith'
                                })
                            ])
                        ]),
                        React.createElement('div', { key: 'client-address', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Client Address'),
                            React.createElement('textarea', {
                                key: 'input',
                                value: formData.clientAddress,
                                onChange: (e) => updateFormData('clientAddress', e.target.value),
                                placeholder: '456 Client St\\nCity, State 67890'
                            })
                        ])
                    ]),

                    // Invoice Details Section
                    React.createElement('div', { key: 'invoice-section', className: 'form-section' }, [
                        React.createElement('h3', { key: 'title' }, 'Invoice Details'),
                        React.createElement('div', { key: 'invoice-basic', className: 'form-row-three' }, [
                            React.createElement('div', { key: 'number', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Invoice Number *'),
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'text',
                                    value: formData.invoiceNumber,
                                    onChange: (e) => updateFormData('invoiceNumber', e.target.value),
                                    placeholder: 'INV-2024-001'
                                })
                            ]),
                            React.createElement('div', { key: 'date', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Invoice Date *'),
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'date',
                                    value: formData.invoiceDate,
                                    onChange: (e) => updateFormData('invoiceDate', e.target.value)
                                })
                            ]),
                            React.createElement('div', { key: 'due', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Due Date *'),
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'date',
                                    value: formData.dueDate,
                                    onChange: (e) => updateFormData('dueDate', e.target.value)
                                })
                            ])
                        ]),
                        React.createElement('div', { key: 'invoice-amount', className: 'form-row' }, [
                            React.createElement('div', { key: 'amount', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Total Amount Owed *'),
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'number',
                                    step: '0.01',
                                    value: formData.totalAmount,
                                    onChange: (e) => updateFormData('totalAmount', e.target.value),
                                    placeholder: '5000.00'
                                })
                            ]),
                            React.createElement('div', { key: 'currency', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Currency'),
                                React.createElement('select', {
                                    key: 'input',
                                    value: formData.currency,
                                    onChange: (e) => updateFormData('currency', e.target.value)
                                }, [
                                    React.createElement('option', { key: 'usd', value: 'USD' }, 'USD ($)'),
                                    React.createElement('option', { key: 'eur', value: 'EUR' }, 'EUR (â‚¬)'),
                                    React.createElement('option', { key: 'gbp', value: 'GBP' }, 'GBP (Â£)'),
                                    React.createElement('option', { key: 'cad', value: 'CAD' }, 'CAD ($)')
                                ])
                            ])
                        ]),
                        React.createElement('div', { key: 'work-desc', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Description of Work/Services *'),
                            React.createElement('textarea', {
                                key: 'input',
                                value: formData.workDescription,
                                onChange: (e) => updateFormData('workDescription', e.target.value),
                                placeholder: 'Web development services for e-commerce platform...'
                            })
                        ])
                    ])
                ]);
            };

            // Collection Strategy Tab
            const renderCollectionTab = () => {
                return React.createElement('div', { className: 'tab-content' }, [
                    React.createElement('div', { key: 'collection-section', className: 'form-section' }, [
                        React.createElement('h3', { key: 'title' }, 'Collection Strategy'),
                        React.createElement('div', { key: 'tone', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Letter Tone'),
                            React.createElement('select', {
                                key: 'input',
                                value: formData.demandTone,
                                onChange: (e) => updateFormData('demandTone', e.target.value)
                            }, [
                                React.createElement('option', { key: 'professional', value: 'professional' }, 'Professional (Recommended)'),
                                React.createElement('option', { key: 'firm', value: 'firm' }, 'Firm but Respectful'),
                                React.createElement('option', { key: 'urgent', value: 'urgent' }, 'Urgent Collection')
                            ])
                        ]),
                        React.createElement('div', { key: 'timing', className: 'form-row' }, [
                            React.createElement('div', { key: 'deadline', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Payment Deadline (Days from today)'),
                                React.createElement('select', {
                                    key: 'input',
                                    value: formData.paymentDeadline,
                                    onChange: (e) => updateFormData('paymentDeadline', e.target.value)
                                }, [
                                    React.createElement('option', { key: '7', value: '7' }, '7 Days'),
                                    React.createElement('option', { key: '10', value: '10' }, '10 Days'),
                                    React.createElement('option', { key: '14', value: '14' }, '14 Days'),
                                    React.createElement('option', { key: '30', value: '30' }, '30 Days')
                                ])
                            ]),
                            React.createElement('div', { key: 'interest', className: 'form-group' }, [
                                React.createElement('label', { key: 'label' }, 'Late Fee/Interest Rate (%)'),
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'number',
                                    step: '0.1',
                                    value: formData.interestRate,
                                    onChange: (e) => updateFormData('interestRate', e.target.value),
                                    placeholder: '1.5'
                                })
                            ])
                        ]),
                        React.createElement('div', { key: 'consequences', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Additional Consequences'),
                            React.createElement('div', { key: 'credit', className: 'checkbox-group' }, [
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'checkbox',
                                    checked: formData.reportCredit,
                                    onChange: (e) => updateFormData('reportCredit', e.target.checked)
                                }),
                                React.createElement('label', { key: 'label' }, 'Report to Credit Agencies')
                            ]),
                            React.createElement('div', { key: 'collection', className: 'checkbox-group' }, [
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'checkbox',
                                    checked: formData.collectionAgency,
                                    onChange: (e) => updateFormData('collectionAgency', e.target.checked)
                                }),
                                React.createElement('label', { key: 'label' }, 'Refer to Collection Agency')
                            ]),
                            React.createElement('div', { key: 'legal', className: 'checkbox-group' }, [
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'checkbox',
                                    checked: formData.legalAction,
                                    onChange: (e) => updateFormData('legalAction', e.target.checked)
                                }),
                                React.createElement('label', { key: 'label' }, 'Pursue Legal Action')
                            ]),
                            React.createElement('div', { key: 'lien', className: 'checkbox-group' }, [
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'checkbox',
                                    checked: formData.lienRights,
                                    onChange: (e) => updateFormData('lienRights', e.target.checked)
                                }),
                                React.createElement('label', { key: 'label' }, 'File Mechanic\\'s Lien (if applicable)')
                            ])
                        ])
                    ]),
                    React.createElement('div', { key: 'communication-section', className: 'form-section' }, [
                        React.createElement('h3', { key: 'title' }, 'Previous Attempts'),
                        React.createElement('div', { key: 'attempts', className: 'form-group' }, [
                            React.createElement('label', { key: 'label' }, 'Previous Collection Attempts'),
                            React.createElement('textarea', {
                                key: 'input',
                                value: formData.previousAttempts,
                                onChange: (e) => updateFormData('previousAttempts', e.target.value),
                                placeholder: 'Email sent on [date], phone call on [date], etc.'
                            })
                        ])
                    ])
                ]);
            };

            // Review Tab
            const renderReviewTab = () => {
                return React.createElement('div', { className: 'tab-content' }, [
                    React.createElement('div', { key: 'review-info', className: 'form-section' }, [
                        React.createElement('h3', { key: 'title' }, 'ðŸ“‹ Review Your Demand Letter'),
                        React.createElement('p', { key: 'subtitle' }, 'Review the generated letter in the preview pane. Make any final adjustments using the previous tabs, then download or copy your professional demand letter.')
                    ])
                ]);
            };

            // Main tab content renderer
            const renderTabContent = () => {
                switch(currentTab) {
                    case 0: return renderDetailsTab();
                    case 1: return renderCollectionTab();
                    case 2: return renderReviewTab();
                    default: return renderDetailsTab();
                }
            };

            // Render main component
            return React.createElement('div', { className: 'app-container' }, [
                // Header
                React.createElement('header', { key: 'header', className: 'app-header' }, [
                    React.createElement('h1', { key: 'title' }, 'ðŸ’¼ Unpaid Invoice Demand Letter Generator'),
                    React.createElement('p', { key: 'subtitle' }, 'Professional collection letters for SaaS businesses, freelancers, contractors, and small businesses')
                ]),
                
                // Main container
                React.createElement('div', { key: 'main', className: 'main-container' }, [
                    // Form pane
                    React.createElement('div', { key: 'form', className: 'form-pane' }, [
                        // Tab navigation
                        React.createElement('div', { key: 'tabs', className: 'tab-navigation' },
                            tabs.map((tab, index) => 
                                React.createElement('button', {
                                    key: tab.id,
                                    className: `tab-button ${currentTab === index ? 'active' : ''}`,
                                    onClick: () => setCurrentTab(index)
                                }, [
                                    React.createElement(Icon, { key: 'icon', name: tab.icon }),
                                    React.createElement('span', { key: 'label' }, tab.label)
                                ])
                            )
                        ),
                        
                        // Tab content
                        React.createElement('div', { key: 'content', className: 'tab-content-container' },
                            renderTabContent()
                        ),
                        
                        // Action buttons
                        React.createElement('div', { key: 'actions', className: 'action-buttons' }, [
                            // Navigation buttons
                            React.createElement('button', {
                                key: 'prev-tab',
                                className: 'btn btn-secondary',
                                disabled: currentTab === 0,
                                onClick: () => setCurrentTab(Math.max(0, currentTab - 1))
                            }, [
                                React.createElement(Icon, { key: 'icon', name: 'chevron-left' }),
                                React.createElement('span', { key: 'text' }, 'Previous')
                            ]),
                            React.createElement('button', {
                                key: 'next-tab',
                                className: 'btn btn-primary',
                                disabled: currentTab === tabs.length - 1,
                                onClick: () => setCurrentTab(Math.min(tabs.length - 1, currentTab + 1))
                            }, [
                                React.createElement('span', { key: 'text' }, 'Next'),
                                React.createElement(Icon, { key: 'icon', name: 'chevron-right' })
                            ]),
                            
                            // Document action buttons
                            React.createElement('button', {
                                key: 'copy',
                                className: 'btn btn-secondary',
                                onClick: copyToClipboard
                            }, [
                                React.createElement(Icon, { key: 'icon', name: 'copy' }),
                                React.createElement('span', { key: 'text' }, 'Copy')
                            ]),
                            
                            React.createElement('button', {
                                key: 'download',
                                className: 'btn btn-primary',
                                onClick: downloadLetter
                            }, [
                                React.createElement(Icon, { key: 'icon', name: 'download' }),
                                React.createElement('span', { key: 'text' }, 'Word Doc')
                            ])
                        ])
                    ]),
                    
                    // Preview pane
                    React.createElement('div', { key: 'preview', className: 'preview-pane' }, [
                        React.createElement('div', { key: 'header', className: 'preview-header' }, [
                            React.createElement('h3', { key: 'title' }, 'Live Preview')
                        ]),
                        React.createElement('div', {
                            key: 'content',
                            className: 'preview-content',
                            ref: previewRef,
                            dangerouslySetInnerHTML: { 
                                __html: generateLetterContent()
                            }
                        })
                    ])
                ])
            ]);
        };

        // Render the component
        ReactDOM.render(React.createElement(InvoiceGenerator), document.getElementById('root'));

        // Initialize feather icons after render
        setTimeout(() => {
            if (window.feather) {
                window.feather.replace();
            }
        }, 100);

        // Initialize PayPal if available
        if (typeof PaywallSystem !== 'undefined') {
            PaywallSystem.initializePayPal().catch(console.error);
        }
    </script>
</body>
</html>
