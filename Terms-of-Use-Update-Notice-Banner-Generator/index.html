<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terms of Use Update Notice & Banner Generator</title>
    <style>
        :root {
            --primary-color: #0069ff;
            --secondary-color: #f8f9fa;
            --border-color: #dee2e6;
            --highlight-color: #ffff00;
            --text-color: #212529;
            --light-text: #6c757d;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #fff;
            color: var(--text-color);
            line-height: 1.6;
        }
        
        .container {
            display: flex;
            max-width: 1200px;
            margin: 0 auto;
            min-height: 100vh;
        }
        
        .form-container {
            flex: 1;
            padding: 20px;
            border-right: 1px solid var(--border-color);
            overflow-y: auto;
            max-height: 100vh;
        }
        
        .preview-container {
            flex: 1;
            padding: 20px;
            position: relative;
            overflow-y: auto;
            max-height: 100vh;
        }
        
        h1 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 24px;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
        }
        
        h2 {
            color: var(--text-color);
            margin: 15px 0;
            font-size: 18px;
        }
        
        .tab-container {
            margin-bottom: 20px;
        }
        
        .tab-buttons {
            display: flex;
            flex-wrap: wrap;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 15px;
        }
        
        .tab-button {
            background: none;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            font-weight: 500;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            margin-right: 5px;
        }
        
        .tab-button.active {
            border-bottom: 3px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        input[type="text"],
        input[type="date"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 14px;
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .checkbox-group {
            margin-top: 10px;
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .checkbox-label input {
            margin-right: 8px;
        }
        
        .button-group {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #0056cc;
        }
        
        button.secondary {
            background-color: var(--light-text);
        }
        
        button.secondary:hover {
            background-color: #5a6268;
        }
        
        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .preview-actions button {
            margin-left: 10px;
        }
        
        .preview-content {
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 20px;
            min-height: 400px;
        }
        
        .banner-preview, .email-preview, .app-notification-preview {
            margin-top: 20px;
            padding: 15px;
            border-radius: 4px;
        }
        
        .banner-preview {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        
        .highlighted {
            background-color: var(--highlight-color);
            transition: background-color 0.5s;
        }
        
        .color-picker-group {
            display: flex;
            align-items: center;
        }
        
        .color-picker-group input[type="color"] {
            width: 50px;
            height: 30px;
            margin-right: 10px;
        }
        
        .custom-checkbox {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .custom-checkbox input {
            margin-right: 8px;
        }
        
        .help-text {
            font-size: 12px;
            color: var(--light-text);
            margin-top: 5px;
        }
        
        .notification-settings {
            border: 1px solid var(--border-color);
            padding: 15px;
            margin-top: 10px;
            border-radius: 4px;
        }
        
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .form-container, .preview-container {
                flex: none;
                width: 100%;
                max-height: none;
            }
            
            .form-container {
                border-right: none;
                border-bottom: 1px solid var(--border-color);
            }
        }

        /* Banner Styles */
        .banner-box {
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
            position: relative;
        }

        .banner-top {
            position: relative;
            width: 100%;
            top: 0;
        }

        .banner-bottom {
            position: relative;
            width: 100%;
            bottom: 0;
        }

        .banner-sticky {
            position: sticky;
            width: 100%;
            top: 0;
        }

        .banner-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 500px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
            z-index: 1000;
        }

        .banner-actions {
            display: flex;
            justify-content: flex-end;
            margin-top: 10px;
        }

        .banner-actions button {
            margin-left: 10px;
            padding: 5px 10px;
            font-size: 14px;
        }

        .banner-close {
            position: absolute;
            right: 10px;
            top: 10px;
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: inherit;
        }

        .preview-section {
            margin-bottom: 30px;
        }

        .preview-section h3 {
            margin-bottom: 15px;
            font-size: 16px;
            color: var(--primary-color);
        }

        .notice-box {
            padding: 20px;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            margin-bottom: 20px;
        }

        .email-preview {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            border: 1px solid #ddd;
            padding: 20px;
        }

        .email-header {
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
            margin-bottom: 15px;
        }

        .email-footer {
            border-top: 1px solid #eee;
            padding-top: 15px;
            margin-top: 15px;
            font-size: 12px;
            color: #777;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="form-container">
            <h1>Terms of Use Update Notice & Banner Generator</h1>
            
            <div class="tab-container">
                <div class="tab-buttons">
                    <button class="tab-button active" data-tab="company-info">Company Info</button>
                    <button class="tab-button" data-tab="update-details">Update Details</button>
                    <button class="tab-button" data-tab="notification-methods">Notification Methods</button>
                    <button class="tab-button" data-tab="banner-customization">Banner Design</button>
                    <button class="tab-button" data-tab="email-customization">Email Design</button>
                </div>
                
                <div class="tab-content active" id="company-info">
                    <h2>Company Information</h2>
                    <div class="form-group">
                        <label for="company-name">Company/Website Name</label>
                        <input type="text" id="company-name" placeholder="E.g., Acme Inc. or example.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="website-url">Website URL</label>
                        <input type="text" id="website-url" placeholder="E.g., https://example.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="company-logo">Company Logo URL (Optional)</label>
                        <input type="text" id="company-logo" placeholder="E.g., https://example.com/logo.png">
                    </div>
                    
                    <div class="form-group">
                        <label for="company-address">Company Address (Optional)</label>
                        <textarea id="company-address" placeholder="Your company's physical address"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="contact-email">Contact Email</label>
                        <input type="text" id="contact-email" placeholder="E.g., support@example.com">
                    </div>
                    
                    <div class="button-group">
                        <div></div> <!-- Empty div for spacing -->
                        <button id="company-next">Next</button>
                    </div>
                </div>
                
                <div class="tab-content" id="update-details">
                    <h2>Terms Update Details</h2>
                    
                    <div class="form-group">
                        <label for="current-terms-url">Current Terms of Use URL</label>
                        <input type="text" id="current-terms-url" placeholder="E.g., https://example.com/terms">
                    </div>
                    
                    <div class="form-group">
                        <label for="new-terms-url">New Terms of Use URL (if different)</label>
                        <input type="text" id="new-terms-url" placeholder="Leave blank if same as current">
                    </div>
                    
                    <div class="form-group">
                        <label for="update-date">Update Effective Date</label>
                        <input type="date" id="update-date">
                    </div>
                    
                    <div class="form-group">
                        <label for="update-type">Type of Update</label>
                        <select id="update-type">
                            <option value="minor">Minor (formatting, clarifications, corrections)</option>
                            <option value="moderate">Moderate (some policy changes, limited impact)</option>
                            <option value="major">Major (significant changes to rights, obligations)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Sections Being Updated</label>
                        <div class="checkbox-group">
                            <div class="checkbox-label">
                                <input type="checkbox" id="update-privacy" value="privacy">
                                <span>Privacy Provisions</span>
                            </div>
                            <div class="checkbox-label">
                                <input type="checkbox" id="update-user-rights" value="user-rights">
                                <span>User Rights & Responsibilities</span>
                            </div>
                            <div class="checkbox-label">
                                <input type="checkbox" id="update-liability" value="liability">
                                <span>Liability & Disclaimers</span>
                            </div>
                            <div class="checkbox-label">
                                <input type="checkbox" id="update-payment" value="payment">
                                <span>Payment Terms</span>
                            </div>
                            <div class="checkbox-label">
                                <input type="checkbox" id="update-content" value="content">
                                <span>Content Policies</span>
                            </div>
                            <div class="checkbox-label">
                                <input type="checkbox" id="update-disputes" value="disputes">
                                <span>Dispute Resolution</span>
                            </div>
                            <div class="checkbox-label">
                                <input type="checkbox" id="update-termination" value="termination">
                                <span>Termination Conditions</span>
                            </div>
                            <div class="checkbox-label">
                                <input type="checkbox" id="update-other" value="other">
                                <span>Other</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="update-summary">Brief Summary of Key Changes</label>
                        <textarea id="update-summary" placeholder="Briefly explain the most important changes (1-2 sentences)"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="update-details-text">Detailed Description of Changes (Optional)</label>
                        <textarea id="update-details-text" placeholder="Provide more detailed explanation of the changes if needed"></textarea>
                    </div>
                    
                    <div class="button-group">
                        <button class="secondary" id="update-prev">Previous</button>
                        <button id="update-next">Next</button>
                    </div>
                </div>
                
                <div class="tab-content" id="notification-methods">
                    <h2>Notification Methods</h2>
                    
                    <div class="form-group">
                        <label>How will users be notified?</label>
                        <div class="checkbox-group">
                            <div class="checkbox-label">
                                <input type="checkbox" id="notify-email" value="email" checked>
                                <span>Email Notification</span>
                            </div>
                            <div class="notification-settings" id="email-settings">
                                <div class="form-group">
                                    <label for="email-subject">Email Subject Line</label>
                                    <input type="text" id="email-subject" placeholder="E.g., Important Update to Our Terms of Use">
                                </div>
                                <div class="form-group">
                                    <label for="email-from">From Name</label>
                                    <input type="text" id="email-from" placeholder="E.g., Example.com Team">
                                </div>
                                <div class="form-group">
                                    <label for="email-sender">Sender Email</label>
                                    <input type="text" id="email-sender" placeholder="E.g., updates@example.com">
                                </div>
                            </div>
                            
                            <div class="checkbox-label">
                                <input type="checkbox" id="notify-banner" value="banner" checked>
                                <span>Website Banner/Notice</span>
                            </div>
                            <div class="notification-settings" id="banner-settings">
                                <div class="form-group">
                                    <label for="banner-display-time">Display Duration (in days)</label>
                                    <input type="number" id="banner-display-time" min="1" max="90" value="30">
                                    <div class="help-text">How long to display the banner after the update goes live</div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="banner-position">Banner Position</label>
                                    <select id="banner-position">
                                        <option value="top">Top of page</option>
                                        <option value="bottom">Bottom of page</option>
                                        <option value="popup">Popup/Modal</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="banner-dismissible">Dismissible</label>
                                    <select id="banner-dismissible">
                                        <option value="yes">Yes, can be dismissed (recommended for minor updates)</option>
                                        <option value="temp">Temporarily (hides for current session only)</option>
                                        <option value="no">No, must be acknowledged (recommended for major updates)</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="checkbox-label">
                                <input type="checkbox" id="notify-account" value="account">
                                <span>In-Account Notification</span>
                            </div>
                            
                            <div class="checkbox-label">
                                <input type="checkbox" id="notify-app" value="app">
                                <span>Mobile App Notification</span>
                            </div>
                            <div class="notification-settings" id="app-settings" style="display: none;">
                                <div class="form-group">
                                    <label for="app-message">App Notification Message</label>
                                    <input type="text" id="app-message" placeholder="E.g., We've updated our Terms of Use. Tap to review.">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="acceptance-type">User Acceptance Requirement</label>
                        <select id="acceptance-type">
                            <option value="explicit">Explicit Acceptance Required (user must click "I Accept")</option>
                            <option value="implicit">Implicit Acceptance (continued use = acceptance)</option>
                            <option value="login">Force Accept on Next Login (for registered users)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="advance-notice">Advance Notice Period (days before effective date)</label>
                        <input type="number" id="advance-notice" min="0" max="90" value="30">
                        <div class="help-text">How many days before the effective date to start notifications</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="documentation-method">Documentation Method</label>
                        <select id="documentation-method">
                            <option value="changelog">Public Changelog</option>
                            <option value="archive">Terms Archive</option>
                            <option value="version">Version Control</option>
                            <option value="internal">Internal Documentation Only</option>
                        </select>
                        <div class="help-text">How you'll document the changes for record-keeping and transparency</div>
                    </div>
                    
                    <div class="button-group">
                        <button class="secondary" id="notification-prev">Previous</button>
                        <button id="notification-next">Next</button>
                    </div>
                </div>
                
                <div class="tab-content" id="banner-customization">
                    <h2>Banner Design Customization</h2>
                    
                    <div class="form-group">
                        <label for="banner-title">Banner Title/Heading</label>
                        <input type="text" id="banner-title" placeholder="E.g., Terms of Use Update" value="Terms of Use Update">
                    </div>
                    
                    <div class="form-group">
                        <label for="banner-text">Banner Message</label>
                        <textarea id="banner-text" placeholder="E.g., We've updated our Terms of Use effective [date]. Please review the changes.">We've updated our Terms of Use effective [date]. Please review the changes.</textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="banner-bg-color">Background Color</label>
                        <div class="color-picker-group">
                            <input type="color" id="banner-bg-color" value="#f8d7da">
                            <input type="text" id="banner-bg-color-hex" placeholder="#RRGGBB" value="#f8d7da">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="banner-text-color">Text Color</label>
                        <div class="color-picker-group">
                            <input type="color" id="banner-text-color" value="#721c24">
                            <input type="text" id="banner-text-color-hex" placeholder="#RRGGBB" value="#721c24">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="banner-border-color">Border Color</label>
                        <div class="color-picker-group">
                            <input type="color" id="banner-border-color" value="#f5c6cb">
                            <input type="text" id="banner-border-color-hex" placeholder="#RRGGBB" value="#f5c6cb">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="accept-button-text">Accept Button Text</label>
                        <input type="text" id="accept-button-text" placeholder="E.g., I Accept" value="I Accept">
                    </div>
                    
                    <div class="form-group">
                        <label for="review-button-text">Review Button Text</label>
                        <input type="text" id="review-button-text" placeholder="E.g., Review Changes" value="Review Changes">
                    </div>
                    
                    <div class="form-group">
                        <label for="dismiss-button-text">Dismiss Button Text (if dismissible)</label>
                        <input type="text" id="dismiss-button-text" placeholder="E.g., Dismiss" value="Dismiss">
                    </div>
                    
                    <div class="form-group">
                        <label for="banner-custom-css">Additional Custom CSS (Advanced)</label>
                        <textarea id="banner-custom-css" placeholder="Any additional custom CSS for the banner"></textarea>
                        <div class="help-text">For developers: Add any custom CSS to further style the banner</div>
                    </div>
                    
                    <div class="button-group">
                        <button class="secondary" id="banner-prev">Previous</button>
                        <button id="banner-next">Next</button>
                    </div>
                </div>
                
                <div class="tab-content" id="email-customization">
                    <h2>Email Notification Customization</h2>
                    
                    <div class="form-group">
                        <label for="email-greeting">Email Greeting</label>
                        <input type="text" id="email-greeting" placeholder="E.g., Dear User," value="Dear User,">
                    </div>
                    
                    <div class="form-group">
                        <label for="email-intro">Email Introduction</label>
                        <textarea id="email-intro" placeholder="Introductory paragraph explaining the update">We're writing to inform you about upcoming changes to our Terms of Use, which will take effect on [date].</textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="email-body">Email Body Content</label>
                        <textarea id="email-body" placeholder="Main content of the email notification">These updates include changes to our [sections] policies. We encourage you to review the updated terms in full by visiting our website.</textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="email-action">Call to Action</label>
                        <input type="text" id="email-action" placeholder="E.g., Please review the updated terms" value="Please review the updated terms by clicking the link below.">
                    </div>
                    
                    <div class="form-group">
                        <label for="email-closing">Email Closing</label>
                        <textarea id="email-closing" placeholder="Closing paragraph">If you have any questions about these changes, please contact our support team. Thank you for your understanding.</textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="email-signature">Email Signature</label>
                        <input type="text" id="email-signature" placeholder="E.g., The Example.com Team" value="The [Company] Team">
                    </div>
                    
                    <div class="form-group">
                        <label for="email-footer">Email Footer Text</label>
                        <textarea id="email-footer" placeholder="Text for the email footer section">© [Year] [Company]. All rights reserved. [Address]</textarea>
                    </div>
                    
                    <div class="button-group">
                        <button class="secondary" id="email-prev">Previous</button>
                        <button id="generate-btn">Generate Notices</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="preview-container">
            <div class="preview-header">
                <h2>Live Preview</h2>
                <div class="preview-actions">
                    <button id="copy-code">Copy HTML</button>
                    <button id="download-txt">Download .txt</button>
                </div>
            </div>
            
            <div class="preview-content">
                <div class="preview-section">
                    <h3>Website Banner Preview</h3>
                    <div class="banner-box" id="banner-preview" style="background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb;">
                        <h4>Terms of Use Update</h4>
                        <p>We've updated our Terms of Use effective [date]. Please review the changes.</p>
                        <div class="banner-actions">
                            <button style="background-color: #0069ff;">Review Changes</button>
                            <button style="background-color: #0069ff;">I Accept</button>
                            <button class="secondary">Dismiss</button>
                        </div>
                    </div>
                </div>
                
                <div class="preview-section">
                    <h3>Email Notification Preview</h3>
                    <div class="email-preview" id="email-preview">
                        <div class="email-header">
                            <h4>Terms of Use Update</h4>
                        </div>
                        <p>Dear User,</p>
                        <p>We're writing to inform you about upcoming changes to our Terms of Use, which will take effect on [date].</p>
                        <p>These updates include changes to our [sections] policies. We encourage you to review the updated terms in full by visiting our website.</p>
                        <p>Please review the updated terms by clicking the link below.</p>
                        <p><a href="#" style="color: #0069ff;">View Updated Terms of Use</a></p>
                        <p>If you have any questions about these changes, please contact our support team. Thank you for your understanding.</p>
                        <p>The [Company] Team</p>
                        <div class="email-footer">
                            <p>© [Year] [Company]. All rights reserved. [Address]</p>
                        </div>
                    </div>
                </div>
                
                <div class="preview-section">
                    <h3>Documentation for Records</h3>
                    <div class="notice-box" id="documentation-preview">
                        <h4>Terms of Use Update Documentation</h4>
                        <p><strong>Company:</strong> [Company Name]</p>
                        <p><strong>Update Type:</strong> [Update Type]</p>
                        <p><strong>Effective Date:</strong> [Effective Date]</p>
                        <p><strong>Notification Methods:</strong> [Notification Methods]</p>
                        <p><strong>Sections Updated:</strong> [Sections Updated]</p>
                        <p><strong>Summary of Changes:</strong> [Summary]</p>
                        <p><strong>Notice Period:</strong> [Notice Period] days</p>
                        <p><strong>Acceptance Method:</strong> [Acceptance Method]</p>
                        <p><strong>Documentation Method:</strong> [Documentation Method]</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab Navigation
        document.addEventListener('DOMContentLoaded', function() {
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
            let lastChanges = {};
            let highlightTimeout;
            
            // Tab switching functionality
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.getAttribute('data-tab');
                    
                    // Hide all tab contents and deactivate all buttons
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    tabButtons.forEach(btn => {
                        btn.classList.remove('active');
                    });
                    
                    // Show selected tab content and activate button
                    document.getElementById(tabId).classList.add('active');
                    button.classList.add('active');
                });
            });
            
            // Next/Previous button navigation
            document.getElementById('company-next').addEventListener('click', () => {
                activateTab('update-details');
            });
            
            document.getElementById('update-prev').addEventListener('click', () => {
                activateTab('company-info');
            });
            
            document.getElementById('update-next').addEventListener('click', () => {
                activateTab('notification-methods');
            });
            
            document.getElementById('notification-prev').addEventListener('click', () => {
                activateTab('update-details');
            });
            
            document.getElementById('notification-next').addEventListener('click', () => {
                activateTab('banner-customization');
            });
            
            document.getElementById('banner-prev').addEventListener('click', () => {
                activateTab('notification-methods');
            });
            
            document.getElementById('banner-next').addEventListener('click', () => {
                activateTab('email-customization');
            });
            
            document.getElementById('email-prev').addEventListener('click', () => {
                activateTab('banner-customization');
            });
            
            function activateTab(tabId) {
                tabButtons.forEach(btn => {
                    if (btn.getAttribute('data-tab') === tabId) {
                        btn.click();
                    }
                });
            }
            
            // Toggle notification settings based on checkboxes
            document.getElementById('notify-email').addEventListener('change', function() {
                document.getElementById('email-settings').style.display = this.checked ? 'block' : 'none';
                updatePreviews();
            });
            
            document.getElementById('notify-banner').addEventListener('change', function() {
                document.getElementById('banner-settings').style.display = this.checked ? 'block' : 'none';
                updatePreviews();
            });
            
            document.getElementById('notify-app').addEventListener('change', function() {
                document.getElementById('app-settings').style.display = this.checked ? 'block' : 'none';
                updatePreviews();
            });
            
            // Color picker synchronization
            document.getElementById('banner-bg-color').addEventListener('input', function() {
                document.getElementById('banner-bg-color-hex').value = this.value;
                updateBannerStyles();
            });
            
            document.getElementById('banner-bg-color-hex').addEventListener('input', function() {
                document.getElementById('banner-bg-color').value = this.value;
                updateBannerStyles();
            });
            
            document.getElementById('banner-text-color').addEventListener('input', function() {
                document.getElementById('banner-text-color-hex').value = this.value;
                updateBannerStyles();
            });
            
            document.getElementById('banner-text-color-hex').addEventListener('input', function() {
                document.getElementById('banner-text-color').value = this.value;
                updateBannerStyles();
            });
            
            document.getElementById('banner-border-color').addEventListener('input', function() {
                document.getElementById('banner-border-color-hex').value = this.value;
                updateBannerStyles();
            });
            
            document.getElementById('banner-border-color-hex').addEventListener('input', function() {
                document.getElementById('banner-border-color').value = this.value;
                updateBannerStyles();
            });
            
            // Update banner styles
            function updateBannerStyles() {
                const bannerPreview = document.getElementById('banner-preview');
                const bgColor = document.getElementById('banner-bg-color').value;
                const textColor = document.getElementById('banner-text-color').value;
                const borderColor = document.getElementById('banner-border-color').value;
                
                bannerPreview.style.backgroundColor = bgColor;
                bannerPreview.style.color = textColor;
                bannerPreview.style.borderColor = borderColor;
                
                highlightChanges('banner-preview');
                updatePreviews();
            }
            
            // Banner position update
            document.getElementById('banner-position').addEventListener('change', function() {
                const bannerPreview = document.getElementById('banner-preview');
                const position = this.value;
                
                // Remove all position classes
                bannerPreview.classList.remove('banner-top', 'banner-bottom', 'banner-popup');
                
                // Add selected position class
                if (position === 'top') {
                    bannerPreview.classList.add('banner-top');
                } else if (position === 'bottom') {
                    bannerPreview.classList.add('banner-bottom');
                } else if (position === 'popup') {
                    bannerPreview.classList.add('banner-popup');
                }
                
                highlightChanges('banner-preview');
                updatePreviews();
            });
            
            // Banner dismissible update
            document.getElementById('banner-dismissible').addEventListener('change', function() {
                const dismissBtn = document.querySelector('#banner-preview .secondary');
                const dismissible = this.value;
                
                dismissBtn.style.display = dismissible === 'no' ? 'none' : 'inline-block';
                
                highlightChanges('banner-preview');
                updatePreviews();
            });
            
            // Banner content updates
            document.getElementById('banner-title').addEventListener('input', function() {
                document.querySelector('#banner-preview h4').textContent = this.value;
                highlightChanges('banner-preview h4');
                updatePreviews();
            });
            
            document.getElementById('banner-text').addEventListener('input', function() {
                document.querySelector('#banner-preview p').textContent = this.value;
                highlightChanges('banner-preview p');
                updatePreviews();
            });
            
            document.getElementById('accept-button-text').addEventListener('input', function() {
                const buttons = document.querySelectorAll('#banner-preview .banner-actions button');
                buttons[1].textContent = this.value;
                highlightChanges('banner-preview .banner-actions button:nth-child(2)');
                updatePreviews();
            });
            
            document.getElementById('review-button-text').addEventListener('input', function() {
                const buttons = document.querySelectorAll('#banner-preview .banner-actions button');
                buttons[0].textContent = this.value;
                highlightChanges('banner-preview .banner-actions button:nth-child(1)');
                updatePreviews();
            });
            
            document.getElementById('dismiss-button-text').addEventListener('input', function() {
                const buttons = document.querySelectorAll('#banner-preview .banner-actions button');
                buttons[2].textContent = this.value;
                highlightChanges('banner-preview .banner-actions button:nth-child(3)');
                updatePreviews();
            });
            
            // Email content updates
            document.getElementById('email-greeting').addEventListener('input', function() {
                document.querySelector('#email-preview p:nth-child(2)').textContent = this.value;
                highlightChanges('email-preview p:nth-child(2)');
                updatePreviews();
            });
            
            document.getElementById('email-intro').addEventListener('input', function() {
                document.querySelector('#email-preview p:nth-child(3)').textContent = this.value;
                highlightChanges('email-preview p:nth-child(3)');
                updatePreviews();
            });
            
            document.getElementById('email-body').addEventListener('input', function() {
                document.querySelector('#email-preview p:nth-child(4)').textContent = this.value;
                highlightChanges('email-preview p:nth-child(4)');
                updatePreviews();
            });
            
            document.getElementById('email-action').addEventListener('input', function() {
                document.querySelector('#email-preview p:nth-child(5)').textContent = this.value;
                highlightChanges('email-preview p:nth-child(5)');
                updatePreviews();
            });
            
            document.getElementById('email-closing').addEventListener('input', function() {
                document.querySelector('#email-preview p:nth-child(7)').textContent = this.value;
                highlightChanges('email-preview p:nth-child(7)');
                updatePreviews();
            });
            
            document.getElementById('email-signature').addEventListener('input', function() {
                document.querySelector('#email-preview p:nth-child(8)').textContent = this.value;
                highlightChanges('email-preview p:nth-child(8)');
                updatePreviews();
            });
            
            document.getElementById('email-footer').addEventListener('input', function() {
                document.querySelector('#email-preview .email-footer p').textContent = this.value;
                highlightChanges('email-preview .email-footer p');
                updatePreviews();
            });
            
            document.getElementById('email-subject').addEventListener('input', function() {
                document.querySelector('#email-preview .email-header h4').textContent = this.value || 'Terms of Use Update';
                highlightChanges('email-preview .email-header h4');
                updatePreviews();
            });
            
            // Company info and update details
            document.getElementById('company-name').addEventListener('input', function() {
                const companyPlaceholders = document.querySelectorAll('[data-placeholder="company"]');
                companyPlaceholders.forEach(el => {
                    el.textContent = this.value || '[Company]';
                });
                updateCompanyInfo();
                updatePreviews();
            });
            
            document.getElementById('update-date').addEventListener('input', function() {
                const dateStr = formatDate(this.value);
                const datePlaceholders = document.querySelectorAll('[data-placeholder="date"]');
                datePlaceholders.forEach(el => {
                    el.textContent = dateStr || '[date]';
                });
                updateDocumentation();
                updatePreviews();
            });
            
            // Update types and sections
            document.getElementById('update-type').addEventListener('change', updateDocumentation);
            
            const sectionCheckboxes = document.querySelectorAll('input[id^="update-"]');
            sectionCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', updateDocumentation);
            });
            
            document.getElementById('update-summary').addEventListener('input', updateDocumentation);
            document.getElementById('acceptance-type').addEventListener('change', updateDocumentation);
            document.getElementById('advance-notice').addEventListener('input', updateDocumentation);
            document.getElementById('documentation-method').addEventListener('change', updateDocumentation);
            
            // Generate button
            document.getElementById('generate-btn').addEventListener('click', function() {
                updateAllPreviews();
                // Flash the preview to indicate generation is complete
                document.querySelector('.preview-content').style.transition = 'background-color 0.3s';
                document.querySelector('.preview-content').style.backgroundColor = '#e8f5e9';
                setTimeout(() => {
                    document.querySelector('.preview-content').style.backgroundColor = 'white';
                }, 300);
            });
            
            // Copy code button
            document.getElementById('copy-code').addEventListener('click', function() {
                // Generate final HTML code
                const html = generateHTML();
                
                // Copy to clipboard
                navigator.clipboard.writeText(html).then(() => {
                    alert('HTML code copied to clipboard!');
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                    alert('Failed to copy HTML. Please try again.');
                });
            });
            
            // Download text button
            document.getElementById('download-txt').addEventListener('click', function() {
                // Generate plain text versions
                const text = generateTextContent();
                
                // Create download link
                const element = document.createElement('a');
                element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
                element.setAttribute('download', 'terms_update_notices.txt');
                element.style.display = 'none';
                
                document.body.appendChild(element);
                element.click();
                document.body.removeChild(element);
            });
            
            // Helper function to highlight changes
            function highlightChanges(selector) {
                // Clear previous highlights after delay
                clearTimeout(highlightTimeout);
                
                const elements = document.querySelectorAll('.highlighted');
                elements.forEach(el => {
                    el.classList.remove('highlighted');
                });
                
                // Apply new highlight
                const targetElements = document.querySelectorAll(`#${selector}`) || document.querySelectorAll(`.${selector}`) || document.querySelectorAll(selector);
                targetElements.forEach(el => {
                    el.classList.add('highlighted');
                    
                    // Ensure the element is in view
                    el.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                });
                
                // Schedule highlight removal
                highlightTimeout = setTimeout(() => {
                    targetElements.forEach(el => {
                        el.classList.remove('highlighted');
                    });
                }, 2000);
            }
            
            // Helper function to update company info in previews
            function updateCompanyInfo() {
                const companyName = document.getElementById('company-name').value || '[Company Name]';
                const websiteUrl = document.getElementById('website-url').value || '[Website URL]';
                const contactEmail = document.getElementById('contact-email').value || '[Contact Email]';
                
                // Update email preview
                document.querySelector('#email-preview .email-signature').textContent = 
                    `The ${companyName} Team`;
                    
                document.querySelector('#email-preview .email-footer p').textContent = 
                    `© ${new Date().getFullYear()} ${companyName}. All rights reserved.`;
                
                // Update documentation preview
                document.querySelector('#documentation-preview p:nth-child(2)').innerHTML = 
                    `<strong>Company:</strong> ${companyName}`;
                
                highlightChanges('documentation-preview p:nth-child(2)');
            }
            
            // Helper function to update documentation preview
            function updateDocumentation() {
                const companyName = document.getElementById('company-name').value || '[Company Name]';
                const updateType = document.getElementById('update-type').value;
                const updateTypeText = document.getElementById('update-type').options[document.getElementById('update-type').selectedIndex].text;
                const updateDate = formatDate(document.getElementById('update-date').value) || '[Effective Date]';
                
                // Get selected sections
                const selectedSections = [];
                document.querySelectorAll('input[id^="update-"]:checked').forEach(checkbox => {
                    const label = checkbox.nextElementSibling.textContent;
                    selectedSections.push(label);
                });
                
                const sectionsText = selectedSections.length > 0 ? selectedSections.join(', ') : '[Sections Updated]';
                
                // Get notification methods
                const notificationMethods = [];
                if (document.getElementById('notify-email').checked) notificationMethods.push('Email');
                if (document.getElementById('notify-banner').checked) notificationMethods.push('Website Banner');
                if (document.getElementById('notify-account').checked) notificationMethods.push('Account Notification');
                if (document.getElementById('notify-app').checked) notificationMethods.push('Mobile App');
                
                const notificationText = notificationMethods.length > 0 ? notificationMethods.join(', ') : '[Notification Methods]';
                
                const acceptanceType = document.getElementById('acceptance-type').value;
                let acceptanceText = '[Acceptance Method]';
                if (acceptanceType === 'explicit') acceptanceText = 'Explicit Acceptance Required';
                if (acceptanceType === 'implicit') acceptanceText = 'Implicit (Continued Use)';
                if (acceptanceType === 'login') acceptanceText = 'Accept on Next Login';
                
                const advanceNotice = document.getElementById('advance-notice').value || '30';
                const documentationMethod = document.getElementById('documentation-method').options[document.getElementById('documentation-method').selectedIndex].text;
                const updateSummary = document.getElementById('update-summary').value || '[Summary]';
                
                // Update documentation preview
                document.querySelector('#documentation-preview p:nth-child(2)').innerHTML = 
                    `<strong>Company:</strong> ${companyName}`;
                document.querySelector('#documentation-preview p:nth-child(3)').innerHTML = 
                    `<strong>Update Type:</strong> ${updateTypeText}`;
                document.querySelector('#documentation-preview p:nth-child(4)').innerHTML = 
                    `<strong>Effective Date:</strong> ${updateDate}`;
                document.querySelector('#documentation-preview p:nth-child(5)').innerHTML = 
                    `<strong>Notification Methods:</strong> ${notificationText}`;
                document.querySelector('#documentation-preview p:nth-child(6)').innerHTML = 
                    `<strong>Sections Updated:</strong> ${sectionsText}`;
                document.querySelector('#documentation-preview p:nth-child(7)').innerHTML = 
                    `<strong>Summary of Changes:</strong> ${updateSummary}`;
                document.querySelector('#documentation-preview p:nth-child(8)').innerHTML = 
                    `<strong>Notice Period:</strong> ${advanceNotice} days`;
                document.querySelector('#documentation-preview p:nth-child(9)').innerHTML = 
                    `<strong>Acceptance Method:</strong> ${acceptanceText}`;
                document.querySelector('#documentation-preview p:nth-child(10)').innerHTML = 
                    `<strong>Documentation Method:</strong> ${documentationMethod}`;
                
                // Update the other previews with the section information
                let bannerText = document.getElementById('banner-text').value;
                bannerText = bannerText.replace('[date]', updateDate).replace('[sections]', getSectionsList());
                document.querySelector('#banner-preview p').textContent = bannerText;
                
                let emailIntro = document.getElementById('email-intro').value;
                emailIntro = emailIntro.replace('[date]', updateDate);
                document.querySelector('#email-preview p:nth-child(3)').textContent = emailIntro;
                
                let emailBody = document.getElementById('email-body').value;
                emailBody = emailBody.replace('[sections]', getSectionsList());
                document.querySelector('#email-preview p:nth-child(4)').textContent = emailBody;
                
                highlightChanges('documentation-preview');
            }
            
            // Helper function to get a readable list of sections
            function getSectionsList() {
                const selectedSections = [];
                document.querySelectorAll('input[id^="update-"]:checked').forEach(checkbox => {
                    if (checkbox.id !== 'update-other') { // Exclude 'Other' option from the list
                        const label = checkbox.nextElementSibling.textContent;
                        selectedSections.push(label);
                    }
                });
                
                if (selectedSections.length === 0) return '[sections]';
                if (selectedSections.length === 1) return selectedSections[0];
                if (selectedSections.length === 2) return `${selectedSections[0]} and ${selectedSections[1]}`;
                
                const lastSection = selectedSections.pop();
                return `${selectedSections.join(', ')}, and ${lastSection}`;
            }
            
            // Helper function to format date
            function formatDate(dateStr) {
                if (!dateStr) return '';
                
                const date = new Date(dateStr);
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                return date.toLocaleDateString('en-US', options);
            }
            
            // Helper function to update all previews
            function updateAllPreviews() {
                updateCompanyInfo();
                updateDocumentation();
                updateBannerStyles();
                updatePreviews();
            }
            
            // Helper function to update previews with actual data
            function updatePreviews() {
                const companyName = document.getElementById('company-name').value || '[Company]';
                const updateDate = formatDate(document.getElementById('update-date').value) || '[date]';
                const currentYear = new Date().getFullYear();
                
                // Replace all placeholders
                const elements = document.querySelectorAll('.preview-content p, .preview-content h4');
                elements.forEach(el => {
                    let content = el.textContent;
                    content = content.replace(/\[Company\]/g, companyName);
                    content = content.replace(/\[Company Name\]/g, companyName);
                    content = content.replace(/\[date\]/g, updateDate);
                    content = content.replace(/\[Year\]/g, currentYear);
                    content = content.replace(/\[sections\]/g, getSectionsList());
                    el.textContent = content;
                });
                
                // Update email link href
                const termsUrl = document.getElementById('current-terms-url').value || 
                               document.getElementById('new-terms-url').value || 
                               '#';
                document.querySelector('#email-preview a').href = termsUrl;
            }
            
            // Generate HTML function
            function generateHTML() {
                const bannerPreview = document.getElementById('banner-preview').cloneNode(true);
                const emailPreview = document.getElementById('email-preview').cloneNode(true);
                
                // Format the HTML with proper indentation
                const html = `
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terms of Use Update Notice</title>
    <style>
        /* Banner Styles */
        .terms-update-banner {
            ${bannerPreview.getAttribute('style')}
            padding: 15px;
            margin: 0;
            position: ${document.getElementById('banner-position').value === 'popup' ? 'fixed' : 'relative'};
            ${document.getElementById('banner-position').value === 'top' ? 'top: 0;' : ''}
            ${document.getElementById('banner-position').value === 'bottom' ? 'bottom: 0;' : ''}
            ${document.getElementById('banner-position').value === 'popup' ? 'top: 50%; left: 50%; transform: translate(-50%, -50%); max-width: 500px; z-index: 9999; box-shadow: 0 0 15px rgba(0,0,0,0.2);' : ''}
            width: ${document.getElementById('banner-position').value === 'popup' ? 'auto' : '100%'};
            z-index: 1000;
        }
        
        .terms-update-banner h4 {
            margin-top: 0;
            margin-bottom: 10px;
        }
        
        .terms-update-banner p {
            margin-bottom: 15px;
        }
        
        .terms-update-banner .banner-actions {
            display: flex;
            justify-content: flex-end;
        }
        
        .terms-update-banner .banner-actions button {
            margin-left: 10px;
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            background-color: #0069ff;
            color: white;
        }
        
        .terms-update-banner .banner-actions button.secondary {
            background-color: #6c757d;
        }
        
        /* Email Styles */
        .terms-update-email {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            border: 1px solid #ddd;
        }
        
        .terms-update-email .email-header {
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
            margin-bottom: 15px;
        }
        
        .terms-update-email .email-footer {
            border-top: 1px solid #eee;
            padding-top: 15px;
            margin-top: 15px;
            font-size: 12px;
            color: #777;
        }
        
        ${document.getElementById('banner-custom-css').value || ''}
    </style>
</head>
<body>
    <!-- Terms Update Banner -->
    <div class="terms-update-banner">
        <h4>${bannerPreview.querySelector('h4').textContent}</h4>
        <p>${bannerPreview.querySelector('p').textContent}</p>
        <div class="banner-actions">
            <button onclick="window.location.href='${document.getElementById('current-terms-url').value || '#'}'">
                ${bannerPreview.querySelectorAll('.banner-actions button')[0].textContent}
            </button>
            <button onclick="acceptTerms()">
                ${bannerPreview.querySelectorAll('.banner-actions button')[1].textContent}
            </button>
            ${document.getElementById('banner-dismissible').value !== 'no' ? 
                `<button class="secondary" onclick="dismissBanner()">
                    ${bannerPreview.querySelectorAll('.banner-actions button')[2].textContent}
                </button>` : ''}
        </div>
    </div>

    <script>
        // Function to handle terms acceptance
        function acceptTerms() {
            // Set a cookie or localStorage item to remember acceptance
            localStorage.setItem('termsAccepted', 'true');
            // Hide the banner
            document.querySelector('.terms-update-banner').style.display = 'none';
            // You can also redirect the user or perform other actions
            // window.location.href = '/';
        }
        
        // Function to dismiss the banner
        function dismissBanner() {
            ${document.getElementById('banner-dismissible').value === 'temp' ? 
                `// Only hide for this session
                document.querySelector('.terms-update-banner').style.display = 'none';` : 
                `// Set a cookie or localStorage item to remember dismissal
                localStorage.setItem('termsDismissed', 'true');
                // Hide the banner
                document.querySelector('.terms-update-banner').style.display = 'none';`}
        }
        
        // Check if the user has already accepted or dismissed
        window.onload = function() {
            const accepted = localStorage.getItem('termsAccepted');
            const dismissed = localStorage.getItem('termsDismissed');
            
            if (accepted === 'true' || ${document.getElementById('banner-dismissible').value !== 'temp' ? `dismissed === 'true'` : 'false'}) {
                document.querySelector('.terms-update-banner').style.display = 'none';
            }
        };
    </script>
</body>
</html>`;
                
                return html;
            }
            
            // Generate plain text content
            function generateTextContent() {
                const companyName = document.getElementById('company-name').value || '[Company Name]';
                const updateDate = formatDate(document.getElementById('update-date').value) || '[Effective Date]';
                const bannerText = document.querySelector('#banner-preview p').textContent;
                const emailContent = document.getElementById('email-preview').innerText;
                const documentationContent = document.getElementById('documentation-preview').innerText;
                
                return `TERMS OF USE UPDATE NOTICES FOR ${companyName.toUpperCase()}
Effective Date: ${updateDate}

==== WEBSITE BANNER TEXT ====
${document.querySelector('#banner-preview h4').textContent}
${bannerText}

==== EMAIL NOTIFICATION ====
${emailContent}

==== DOCUMENTATION FOR RECORDS ====
${documentationContent}

Generated on: ${new Date().toLocaleString()}
`;
            }
            
            // Initialize the preview on load
            updateAllPreviews();
        });
    </script>
</body>
</html>
