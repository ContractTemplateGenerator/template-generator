<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Party Privacy NDA Generator | Terms.Law</title>
    <style>
        :root {
            --primary: #1a73e8;
            --primary-dark: #0d47a1;
            --secondary: #f5f5f5;
            --text: #333333;
            --highlight: #ffeb3b;
            --border: #dddddd;
            --success: #4caf50;
            --gray-light: #f9f9f9;
            --gray: #e0e0e0;
            --red: #f44336;
            --warning: #ffc107;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            color: var(--text);
            line-height: 1.6;
            font-size: 16px;
            background-color: #fafafa;
        }
        
        .container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            gap: 30px;
        }
        
        h1, h2, h3 {
            margin-bottom: 15px;
        }
        
        h1 {
            font-size: 28px;
            color: var(--primary-dark);
            border-bottom: 3px solid var(--primary);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        h2 {
            font-size: 22px;
            margin-top: 20px;
            color: var(--primary-dark);
        }
        
        h3 {
            font-size: 18px;
            color: var(--text);
            margin-top: 15px;
        }
        
        p {
            margin-bottom: 15px;
        }
        
        .form-section {
            flex: 1;
            min-width: 400px;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            height: fit-content;
        }
        
        .preview-section {
            flex: 1;
            min-width: 400px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            height: fit-content;
        }
        
        .preview-section h2 {
            padding: 20px 30px 0;
            margin-bottom: 15px;
        }
        
        .preview-container {
            border: 1px solid var(--border);
            margin: 0 30px 30px;
            background-color: white;
            max-height: 800px;
            overflow-y: auto;
            border-radius: 4px;
        }
        
        .preview-content {
            padding: 30px;
            font-size: 11pt;
            line-height: 1.4;
        }
        
        .tab-container {
            margin-top: 20px;
        }
        
        .tab-nav {
            display: flex;
            border-bottom: 2px solid var(--border);
            margin-bottom: 25px;
            gap: 5px;
        }
        
        .tab-btn {
            padding: 12px 20px;
            border: none;
            background: none;
            cursor: pointer;
            position: relative;
            font-weight: 600;
            color: var(--text);
            border-radius: 4px 4px 0 0;
            transition: all 0.2s;
        }
        
        .tab-btn:hover {
            background-color: var(--gray-light);
        }
        
        .tab-btn.active {
            color: var(--primary);
            background-color: var(--gray-light);
        }
        
        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--primary);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .party-section {
            background: var(--gray-light);
            padding: 20px;
            border-radius: 6px;
            margin-bottom: 20px;
            border-left: 4px solid var(--primary);
        }
        
        .party-section h3 {
            color: var(--primary-dark);
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text);
        }
        
        input[type="text"],
        input[type="email"],
        input[type="number"],
        input[type="date"],
        select,
        textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border);
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.2s;
        }
        
        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="number"]:focus,
        input[type="date"]:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
        }
        
        input[type="checkbox"] {
            margin-right: 12px;
            transform: scale(1.2);
        }
        
        .checkbox-group {
            margin-top: 15px;
        }
        
        .checkbox-label {
            display: flex;
            align-items: flex-start;
            margin-bottom: 12px;
            font-weight: normal;
            cursor: pointer;
            padding: 8px;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        
        .checkbox-label:hover {
            background-color: var(--gray-light);
        }
        
        .button-group {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.2s;
            min-width: 120px;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(26, 115, 232, 0.3);
        }
        
        .btn-secondary {
            background-color: var(--gray);
            color: var(--text);
        }
        
        .btn-secondary:hover {
            background-color: #d0d0d0;
            transform: translateY(-1px);
        }
        
        .download-btn {
            width: 100%;
            margin-top: 15px;
            padding: 15px 24px;
            font-size: 18px;
        }
        
        .add-btn {
            background-color: var(--success);
            color: white;
            width: 100%;
            margin-top: 15px;
        }
        
        .add-btn:hover {
            background-color: #388e3c;
            transform: translateY(-1px);
        }
        
        .remove-btn {
            background-color: var(--red);
            color: white;
            font-size: 14px;
            padding: 8px 16px;
            margin-top: 10px;
        }
        
        .remove-btn:hover {
            background-color: #d32f2f;
        }
        
        .info-box {
            background-color: #e3f2fd;
            border-left: 4px solid var(--primary);
            padding: 15px 20px;
            margin: 15px 0;
            font-size: 14px;
            border-radius: 0 4px 4px 0;
        }
        
        .warning-box {
            background-color: #fff8e1;
            border-left: 4px solid var(--warning);
            padding: 15px 20px;
            margin: 20px 0;
            font-size: 14px;
            border-radius: 0 4px 4px 0;
        }
        
        .footer-info {
            margin-top: 50px;
            padding: 30px;
            text-align: center;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 14px;
            color: #666;
        }
        
        .footer-info a {
            color: var(--primary);
            text-decoration: none;
        }
        
        .footer-info a:hover {
            text-decoration: underline;
        }
        
        /* Responsive Design */
        @media (max-width: 1200px) {
            .container {
                flex-direction: column;
                max-width: 800px;
            }
            
            .form-section,
            .preview-section {
                min-width: auto;
            }
            
            .preview-container {
                max-height: 600px;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .form-section,
            .preview-section {
                padding: 20px;
            }
            
            .preview-section h2 {
                padding: 15px 20px 0;
            }
            
            .preview-container {
                margin: 0 20px 20px;
            }
            
            .preview-content {
                padding: 20px;
            }
            
            .tab-nav {
                flex-wrap: wrap;
            }
            
            .tab-btn {
                flex: 1;
                min-width: 120px;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
        }
        
        @media (max-width: 480px) {
            h1 {
                font-size: 24px;
            }
            
            .tab-btn {
                padding: 10px 12px;
                font-size: 14px;
            }
            
            .form-section,
            .preview-section {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="form-section">
            <h1>Multi-Party Privacy NDA Generator</h1>
            <p>Create a comprehensive non-disclosure agreement for polyamorous relationships, swinger activities, and multi-partner encounters (3+ participants). This attorney-drafted template ensures privacy protection for all parties involved.</p>
            
            <div class="warning-box">
                <strong>Legal Disclaimer:</strong> This generator provides a template based on general legal principles. While designed by a licensed attorney, it is not a substitute for personalized legal advice. Consider consulting with an attorney before finalizing any legal document.
            </div>

            <div class="tab-container">
                <div class="tab-nav">
                    <button class="tab-btn active" data-tab="parties">1. Parties</button>
                    <button class="tab-btn" data-tab="terms">2. Terms</button>
                    <button class="tab-btn" data-tab="protections">3. Protections</button>
                    <button class="tab-btn" data-tab="finalize">4. Finalize</button>
                </div>

                <div class="tab-content active" id="parties">
                    <h2>Parties Information</h2>
                    <div class="info-box">
                        Add all parties who will be bound by this agreement. Minimum 3 parties required.
                    </div>

                    <div id="partiesContainer">
                        <!-- Parties will be generated by JavaScript -->
                    </div>

                    <button class="add-btn" id="addPartyBtn">Add Another Party</button>
                </div>

                <div class="tab-content" id="terms">
                    <h2>Agreement Terms</h2>
                    
                    <div class="form-group">
                        <label for="stateJurisdiction">Governing Law (State/Jurisdiction):</label>
                        <select id="stateJurisdiction">
                            <option value="">Select a State/Jurisdiction</option>
                            <option value="Alabama">Alabama</option>
                            <option value="Alaska">Alaska</option>
                            <option value="Arizona">Arizona</option>
                            <option value="Arkansas">Arkansas</option>
                            <option value="California">California</option>
                            <option value="Colorado">Colorado</option>
                            <option value="Connecticut">Connecticut</option>
                            <option value="Delaware">Delaware</option>
                            <option value="Florida">Florida</option>
                            <option value="Georgia">Georgia</option>
                            <option value="Hawaii">Hawaii</option>
                            <option value="Idaho">Idaho</option>
                            <option value="Illinois">Illinois</option>
                            <option value="Indiana">Indiana</option>
                            <option value="Iowa">Iowa</option>
                            <option value="Kansas">Kansas</option>
                            <option value="Kentucky">Kentucky</option>
                            <option value="Louisiana">Louisiana</option>
                            <option value="Maine">Maine</option>
                            <option value="Maryland">Maryland</option>
                            <option value="Massachusetts">Massachusetts</option>
                            <option value="Michigan">Michigan</option>
                            <option value="Minnesota">Minnesota</option>
                            <option value="Mississippi">Mississippi</option>
                            <option value="Missouri">Missouri</option>
                            <option value="Montana">Montana</option>
                            <option value="Nebraska">Nebraska</option>
                            <option value="Nevada">Nevada</option>
                            <option value="New Hampshire">New Hampshire</option>
                            <option value="New Jersey">New Jersey</option>
                            <option value="New Mexico">New Mexico</option>
                            <option value="New York">New York</option>
                            <option value="North Carolina">North Carolina</option>
                            <option value="North Dakota">North Dakota</option>
                            <option value="Ohio">Ohio</option>
                            <option value="Oklahoma">Oklahoma</option>
                            <option value="Oregon">Oregon</option>
                            <option value="Pennsylvania">Pennsylvania</option>
                            <option value="Rhode Island">Rhode Island</option>
                            <option value="South Carolina">South Carolina</option>
                            <option value="South Dakota">South Dakota</option>
                            <option value="Tennessee">Tennessee</option>
                            <option value="Texas">Texas</option>
                            <option value="Utah">Utah</option>
                            <option value="Vermont">Vermont</option>
                            <option value="Virginia">Virginia</option>
                            <option value="Washington">Washington</option>
                            <option value="West Virginia">West Virginia</option>
                            <option value="Wisconsin">Wisconsin</option>
                            <option value="Wyoming">Wyoming</option>
                            <option value="District of Columbia">District of Columbia</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="effectiveDate">Effective Date:</label>
                        <input type="date" id="effectiveDate">
                    </div>

                    <div class="form-group">
                        <label for="duration">Duration of Agreement:</label>
                        <select id="duration">
                            <option value="1">1 year</option>
                            <option value="2">2 years</option>
                            <option value="3" selected>3 years</option>
                            <option value="5">5 years</option>
                            <option value="10">10 years</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="liquidatedDamages">Liquidated Damages Amount:</label>
                        <input type="number" id="liquidatedDamages" value="10000" min="0">
                        <div class="info-box">
                            Reasonable amounts ($5k-$50k) are more enforceable than excessive penalties.
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="disputeResolution">Dispute Resolution:</label>
                        <select id="disputeResolution">
                            <option value="arbitration" selected>Private Confidential Arbitration</option>
                            <option value="mediation">Mediation then Confidential Arbitration</option>
                            <option value="court">Court Litigation</option>
                        </select>
                        <div class="info-box">
                            Confidential arbitration keeps disputes private, while court proceedings become public record.
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="protections">
                    <h2>Enhanced Protections</h2>

                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="includeSTIProtection" checked>
                            STI/Health Information Protection
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="includeSocialMediaRestrictions" checked>
                            Social Media Restrictions (tagging, posting, identifying)
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="includeVenueProtection" checked>
                            Venue/Location Privacy Protection
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="includeGroupChatProtection" checked>
                            Group Chat/Communication Protection
                        </label>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" id="includeUnanimousConsent" checked>
                            Unanimous Consent for Media Creation
                        </label>
                    </div>

                    <div class="form-group">
                        <label for="digitalContentHandling">Digital Content Handling:</label>
                        <select id="digitalContentHandling">
                            <option value="deleteUponRequest" selected>Must be deleted upon any party's request</option>
                            <option value="deleteUponTermination">Must be deleted when agreement ends</option>
                            <option value="noDistribution">May be kept but never distributed</option>
                            <option value="custom">Custom handling (specify below)</option>
                        </select>
                    </div>

                    <div class="form-group" id="customDigitalGroup" style="display: none;">
                        <label for="customDigitalHandling">Custom Digital Content Handling:</label>
                        <textarea id="customDigitalHandling" rows="3" placeholder="Specify custom handling requirements..."></textarea>
                    </div>
                </div>

                <div class="tab-content" id="finalize">
                    <h2>Finalize Agreement</h2>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="includeJoinderForm" checked>
                            Include Joinder Form (allows new parties to join later)
                        </label>
                    </div>

                    <div class="form-group">
                        <label for="additionalTerms">Additional Terms (optional):</label>
                        <textarea id="additionalTerms" rows="4" placeholder="Add any additional terms not covered above..."></textarea>
                    </div>

                    <div class="button-group">
                        <button class="btn-primary download-btn" id="downloadNDA">
                            Download Multi-Party NDA
                        </button>
                        
                        <button class="btn-secondary download-btn" id="downloadJoinder">
                            Download Joinder Form
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="preview-section">
            <h2>Live Preview</h2>
            <div class="preview-container">
                <div class="preview-content" id="previewContent">
                    <!-- Preview will be generated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <div class="footer-info">
        <p>Created by <a href="https://terms.law" target="_blank">Terms.Law</a> | California Attorney Sergei Tokmakov (CA Bar #279869)</p>
        <p>For personalized legal assistance, <a href="https://calendly.com/sergei-tokmakov/30-minute-zoom-meeting" target="_blank">schedule a consultation</a></p>
    </div>

    <script>
        // Application state
        let formData = {
            parties: [
                { name: '', email: '' },
                { name: '', email: '' },
                { name: '', email: '' }
            ],
            stateJurisdiction: '',
            effectiveDate: '',
            duration: '3',
            liquidatedDamages: '10000',
            disputeResolution: 'arbitration',
            includeSTIProtection: true,
            includeSocialMediaRestrictions: true,
            includeVenueProtection: true,
            includeGroupChatProtection: true,
            includeUnanimousConsent: true,
            digitalContentHandling: 'deleteUponRequest',
            customDigitalHandling: '',
            additionalTerms: '',
            includeJoinderForm: true
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initializeTabs();
            initializeParties();
            initializeEventListeners();
            generatePreview();
        });

        // Tab functionality
        function initializeTabs() {
            const tabButtons = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.getAttribute('data-tab');
                    
                    // Remove active class from all tabs and contents
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding content
                    button.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });
        }

        // Party management
        function initializeParties() {
            renderParties();
            
            document.getElementById('addPartyBtn').addEventListener('click', () => {
                formData.parties.push({ name: '', email: '' });
                renderParties();
                generatePreview();
            });
        }

        function renderParties() {
            const container = document.getElementById('partiesContainer');
            container.innerHTML = '';

            formData.parties.forEach((party, index) => {
                const partyDiv = document.createElement('div');
                partyDiv.className = 'party-section';
                partyDiv.innerHTML = `
                    <h3>Party ${index + 1}</h3>
                    <div class="form-group">
                        <label>Full Legal Name:</label>
                        <input type="text" data-party="${index}" data-field="name" value="${party.name}" placeholder="e.g., Jane A. Smith">
                    </div>
                    <div class="form-group">
                        <label>Email Address (optional):</label>
                        <input type="email" data-party="${index}" data-field="email" value="${party.email}" placeholder="e.g., jane@example.com">
                    </div>
                    ${formData.parties.length > 3 ? `<button class="remove-btn" onclick="removeParty(${index})">Remove Party</button>` : ''}
                `;
                container.appendChild(partyDiv);
            });

            // Add event listeners to party inputs
            container.querySelectorAll('input').forEach(input => {
                input.addEventListener('input', (e) => {
                    const partyIndex = parseInt(e.target.getAttribute('data-party'));
                    const field = e.target.getAttribute('data-field');
                    formData.parties[partyIndex][field] = e.target.value;
                    generatePreview();
                });
            });
        }

        function removeParty(index) {
            if (formData.parties.length > 3) {
                formData.parties.splice(index, 1);
                renderParties();
                generatePreview();
            }
        }

        // Event listeners for form inputs
        function initializeEventListeners() {
            // State jurisdiction
            document.getElementById('stateJurisdiction').addEventListener('change', (e) => {
                formData.stateJurisdiction = e.target.value;
                generatePreview();
            });

            // Effective date
            document.getElementById('effectiveDate').addEventListener('change', (e) => {
                formData.effectiveDate = e.target.value;
                generatePreview();
            });

            // Duration
            document.getElementById('duration').addEventListener('change', (e) => {
                formData.duration = e.target.value;
                generatePreview();
            });

            // Liquidated damages
            document.getElementById('liquidatedDamages').addEventListener('input', (e) => {
                formData.liquidatedDamages = e.target.value;
                generatePreview();
            });

            // Dispute resolution
            document.getElementById('disputeResolution').addEventListener('change', (e) => {
                formData.disputeResolution = e.target.value;
                generatePreview();
            });

            // Checkboxes
            const checkboxes = [
                'includeSTIProtection', 'includeSocialMediaRestrictions', 
                'includeVenueProtection', 'includeGroupChatProtection', 
                'includeUnanimousConsent', 'includeJoinderForm'
            ];
            
            checkboxes.forEach(checkboxId => {
                document.getElementById(checkboxId).addEventListener('change', (e) => {
                    formData[checkboxId] = e.target.checked;
                    generatePreview();
                });
            });

            // Digital content handling
            document.getElementById('digitalContentHandling').addEventListener('change', (e) => {
                formData.digitalContentHandling = e.target.value;
                const customGroup = document.getElementById('customDigitalGroup');
                customGroup.style.display = e.target.value === 'custom' ? 'block' : 'none';
                generatePreview();
            });

            // Custom digital handling
            document.getElementById('customDigitalHandling').addEventListener('input', (e) => {
                formData.customDigitalHandling = e.target.value;
                generatePreview();
            });

            // Additional terms
            document.getElementById('additionalTerms').addEventListener('input', (e) => {
                formData.additionalTerms = e.target.value;
                generatePreview();
            });

            // Download buttons
            document.getElementById('downloadNDA').addEventListener('click', () => downloadDocument(false));
            document.getElementById('downloadJoinder').addEventListener('click', () => downloadDocument(true));
        }

        // Generate document preview
        function generatePreview() {
            const jurisdictionText = formData.stateJurisdiction === "District of Columbia" 
                ? "District of Columbia" 
                : formData.stateJurisdiction ? `State of ${formData.stateJurisdiction}` : '_______________';

            const partyNames = formData.parties
                .filter(party => party.name.trim())
                .map(party => party.name.trim());

            const partyList = partyNames.length > 0
                ? partyNames.map((name, index) => `${name} ("Party ${index + 1}")`).join(', ')
                : '[Party names will appear here]';

            const effectiveDateFormatted = formData.effectiveDate 
                ? new Date(formData.effectiveDate).toLocaleDateString('en-US', { 
                    year: 'numeric', month: 'long', day: 'numeric' 
                  })
                : '_______________';

            const disputeText = formData.disputeResolution === 'arbitration'
                ? "Any dispute arising out of or relating to this Agreement shall be resolved through binding confidential arbitration in accordance with the rules of the American Arbitration Association."
                : formData.disputeResolution === 'mediation'
                ? "Any dispute arising out of or relating to this Agreement shall first be submitted to mediation. If mediation is unsuccessful, the dispute shall then be resolved through binding confidential arbitration in accordance with the rules of the American Arbitration Association."
                : "Any dispute arising out of or relating to this Agreement shall be resolved through litigation in the appropriate courts with jurisdiction over the matter.";

            const stiProtectionClause = formData.includeSTIProtection
                ? `<p><strong>7. HEALTH INFORMATION PROTECTION</strong></p>
                   <p>Any health information, including but not limited to STI test results, medical conditions, or health-related communications shared between the Parties, shall be treated as highly confidential information subject to the strictest protections under this Agreement. No Party shall disclose another Party's health information to any third party without explicit written consent, except as required by law or for emergency medical treatment.</p>`
                : '';

            const socialMediaClause = formData.includeSocialMediaRestrictions
                ? `<p><strong>8. SOCIAL MEDIA AND DIGITAL RESTRICTIONS</strong></p>
                   <p>No Party shall tag, mention, reference, or identify any other Party on any social media platform, dating application, or public digital forum without explicit written consent. This includes but is not limited to posting photos, videos, or comments that could identify other Parties or reveal their participation in activities covered by this Agreement.</p>`
                : '';

            const venueProtectionClause = formData.includeVenueProtection
                ? `<p><strong>9. VENUE AND LOCATION PRIVACY</strong></p>
                   <p>All details regarding locations where activities occur, including but not limited to private residences, clubs, events, hotels, or other venues, shall remain strictly confidential. No Party shall disclose addresses, venue names, event details, or any information that could identify or lead to the identification of locations used for activities covered by this Agreement.</p>`
                : '';

            const groupChatClause = formData.includeGroupChatProtection
                ? `<p><strong>10. GROUP COMMUNICATIONS PROTECTION</strong></p>
                   <p>All group communications, including but not limited to group text messages, shared photos or videos, private social media groups, email chains, and any other multi-party communications, are subject to the confidentiality obligations of this Agreement. Screenshots, forwarding, or sharing of group communications outside the group is strictly prohibited.</p>`
                : '';

            const unanimousConsentClause = formData.includeUnanimousConsent
                ? `<p><strong>11. UNANIMOUS CONSENT FOR MEDIA</strong></p>
                   <p>The creation, recording, or sharing of any photos, videos, audio recordings, or other media depicting or relating to activities covered by this Agreement requires the prior written consent of ALL Parties. No media may be created, distributed, or retained without unanimous written agreement from every Party involved.</p>`
                : '';

            const digitalHandlingText = formData.digitalContentHandling === 'custom' && formData.customDigitalHandling
                ? formData.customDigitalHandling
                : formData.digitalContentHandling === 'deleteUponRequest'
                ? "Any digital content containing Confidential Information must be deleted upon written request by any Party."
                : formData.digitalContentHandling === 'deleteUponTermination'
                ? "Any digital content containing Confidential Information must be deleted upon termination of this Agreement or any Party's withdrawal from the group."
                : "Any digital content containing Confidential Information may be kept but never distributed to any third party without unanimous written consent of all Parties.";

            const joinderFormSection = formData.includeJoinderForm
                ? `<p><strong>15. JOINDER OF ADDITIONAL PARTIES</strong></p>
                   <p>New parties may join this Agreement by executing the attached Joinder Agreement, which incorporates all terms and conditions of this Agreement. The addition of new parties requires unanimous written consent of all existing Parties. Upon execution of a Joinder Agreement, new parties become bound by all obligations and entitled to all protections under this Agreement as if they were original signatories.</p>`
                : '';

            const content = `
                <h1 style="text-align: center; font-size: 14pt; margin-bottom: 30px;">MULTI-PARTY RELATIONSHIP PRIVACY NON-DISCLOSURE AGREEMENT</h1>
                
                <p>This Multi-Party Non-Disclosure Agreement (the "Agreement") is entered into by and between the following parties (collectively, the "Parties"):</p>
                <p style="margin-left: 20px;">${partyList}</p>
                
                <p><strong>EFFECTIVE DATE:</strong> This Agreement is effective as of ${effectiveDateFormatted} (the "Effective Date").</p>
                
                <p><strong>1. PURPOSE</strong></p>
                <p>The Parties wish to protect the confidentiality and privacy of information related to their consensual adult activities, relationships, and interactions. This Agreement ensures that all Parties can engage in private activities with confidence that their privacy, dignity, and personal information will be protected.</p>
                
                <p><strong>2. CONFIDENTIAL INFORMATION</strong></p>
                <p>For purposes of this Agreement, "Confidential Information" includes, but is not limited to:</p>
                <p>a) Personal identity information of all Parties, including names, contact information, employment details, and personal identification;<br>
                b) Photos, videos, and audio recordings of any activities or interactions between Parties;<br>
                c) All communications between Parties, including texts, emails, calls, and in-person conversations;<br>
                d) Details about the nature, scope, and participants of any relationship or activities;<br>
                e) Location information, venue details, and event specifics;<br>
                f) Health and medical information shared between Parties;<br>
                g) Social media interactions and digital communications;<br>
                h) Any other information that could identify Parties or their participation in activities covered by this Agreement.</p>
                
                <p><strong>3. OBLIGATIONS OF CONFIDENTIALITY</strong></p>
                <p>Each Party agrees to maintain strict confidentiality regarding all Confidential Information of every other Party. No Party shall disclose, distribute, share, or otherwise communicate any Confidential Information to third parties without the express written consent of ALL affected Parties.</p>
                
                <p><strong>4. EXCEPTIONS TO CONFIDENTIALITY</strong></p>
                <p>This Agreement does not restrict disclosure of information that:</p>
                <p>a) Is or becomes publicly available through no breach of this Agreement;<br>
                b) Is disclosed pursuant to court order or legal requirement, provided the disclosing Party gives prompt notice to all other Parties;<br>
                c) Is disclosed to report suspected criminal activity as required by law;<br>
                d) Is disclosed with the prior written consent of ALL Parties.</p>
                
                <p><strong>5. PERMITTED DISCLOSURES</strong></p>
                <p>Confidential Information may be disclosed only to:</p>
                <p>a) Legal counsel retained by a Party for advice relating to this Agreement;<br>
                b) Licensed healthcare providers when directly relevant to medical treatment;<br>
                c) Mental health professionals during therapy, subject to patient-therapist privilege.</p>
                
                <p><strong>6. DIGITAL CONTENT AND MEDIA</strong></p>
                <p>${digitalHandlingText} All digital content must be stored securely with appropriate password protection and encryption when possible.</p>
                
                ${stiProtectionClause}
                ${socialMediaClause}
                ${venueProtectionClause}
                ${groupChatClause}
                ${unanimousConsentClause}
                
                <p><strong>12. TERM AND DURATION</strong></p>
                <p>This Agreement shall remain in effect for ${formData.duration} years from the Effective Date. Confidentiality obligations shall survive termination of this Agreement and continue indefinitely.</p>
                
                <p><strong>13. REMEDIES AND ENFORCEMENT</strong></p>
                <p>In the event of a breach, the non-breaching Parties shall be entitled to seek monetary damages of $${parseInt(formData.liquidatedDamages).toLocaleString()} per breach as liquidated damages, plus injunctive relief. The Parties acknowledge that breach would cause irreparable harm for which monetary damages alone would be inadequate.</p>
                
                <p><strong>14. DISPUTE RESOLUTION</strong></p>
                <p>${disputeText}</p>
                
                ${joinderFormSection}
                
                <p><strong>16. GOVERNING LAW</strong></p>
                <p>This Agreement shall be governed by the laws of the ${jurisdictionText}, without regard to conflict of law principles.</p>
                
                <p><strong>17. SEVERABILITY</strong></p>
                <p>If any provision of this Agreement is found unenforceable, the remainder shall continue in full force and effect.</p>
                
                <p><strong>18. ENTIRE AGREEMENT</strong></p>
                <p>This Agreement constitutes the entire understanding between the Parties and may only be modified by written agreement signed by all Parties.</p>
                
                <p><strong>19. COUNTERPARTS</strong></p>
                <p>This Agreement may be executed in separate counterparts, including digital signatures and electronic transmission, each deemed an original.</p>
                
                ${formData.additionalTerms ? `<p><strong>20. ADDITIONAL TERMS</strong></p><p>${formData.additionalTerms}</p>` : ''}
                
                <div style="margin-top: 40px;">
                    <p><strong>SIGNATURE PAGE FOLLOWS</strong></p>
                    <p>IN WITNESS WHEREOF, the Parties have executed this Agreement as of the Effective Date.</p>
                    
                    <div style="margin-top: 40px;">
                        ${formData.parties.map((party, index) => `
                            <div style="margin-bottom: 40px;">
                                <p>_________________________________</p>
                                <p>${party.name || `Party ${index + 1} Name`}</p>
                                <p>Date: _____________</p>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            document.getElementById('previewContent').innerHTML = content;
        }

        // Generate joinder form
        function generateJoinderForm() {
            const jurisdictionText = formData.stateJurisdiction === "District of Columbia" 
                ? "District of Columbia" 
                : formData.stateJurisdiction ? `State of ${formData.stateJurisdiction}` : '_______________';

            return `
                <h1 style="text-align: center; font-size: 14pt; margin-bottom: 30px;">JOINDER AGREEMENT</h1>
                <p style="text-align: center;"><em>Multi-Party Relationship Privacy Non-Disclosure Agreement</em></p>
                
                <p>This Joinder Agreement ("Joinder") is entered into by _________________ ("New Party") to join the Multi-Party Relationship Privacy Non-Disclosure Agreement dated ${formData.effectiveDate || '_______________'} (the "Original Agreement").</p>
                
                <p><strong>JOINDER TERMS:</strong></p>
                
                <p>1. <strong>Incorporation:</strong> New Party hereby agrees to be bound by all terms, conditions, obligations, and provisions of the Original Agreement as if New Party were an original signatory thereto.</p>
                
                <p>2. <strong>Confidentiality Obligations:</strong> New Party acknowledges receiving copies of all Confidential Information subject to the Original Agreement and agrees to maintain strict confidentiality regarding all such information.</p>
                
                <p>3. <strong>Retroactive Effect:</strong> New Party's confidentiality obligations shall apply retroactively to any Confidential Information received prior to execution of this Joinder.</p>
                
                <p>4. <strong>Rights and Protections:</strong> New Party shall be entitled to all protections afforded to original Parties under the Original Agreement.</p>
                
                <p>5. <strong>Unanimous Consent:</strong> New Party acknowledges that joining required unanimous written consent of all existing Parties, which consent has been obtained.</p>
                
                <p>6. <strong>Governing Law:</strong> This Joinder shall be governed by the laws of the ${jurisdictionText}.</p>
                
                <p>7. <strong>Counterparts:</strong> This Joinder may be executed in counterparts, including digital signatures.</p>
                
                <div style="margin-top: 40px;">
                    <p>IN WITNESS WHEREOF, New Party has executed this Joinder as of _____________, 20__.</p>
                    
                    <div style="margin-top: 40px;">
                        <p>_________________________________</p>
                        <p>New Party Signature</p>
                        <p>Print Name: _________________________</p>
                        <p>Date: _____________</p>
                    </div>
                    
                    <div style="margin-top: 40px;">
                        <p><strong>EXISTING PARTIES' CONSENT:</strong></p>
                        <p>The undersigned existing Parties consent to New Party's joinder:</p>
                        
                        <div style="margin-top: 20px;">
                            ${formData.parties.map((party, index) => `
                                <div style="margin-bottom: 30px;">
                                    <p>_________________________________</p>
                                    <p>${party.name || `Party ${index + 1} Name`} - Date: _______</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        // Download document
        function downloadDocument(isJoinder = false) {
            const content = isJoinder ? generateJoinderForm() : document.getElementById('previewContent').innerHTML;
            const filename = isJoinder ? 'Joinder-Agreement.html' : 'Multi-Party-NDA.html';
            
            const htmlDoc = `
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    <title>${isJoinder ? 'Joinder Agreement' : 'Multi-Party Privacy NDA'}</title>
                    <style>
                        body { 
                            font-family: Arial, sans-serif; 
                            line-height: 1.5; 
                            margin: 20px;
                            font-size: 11pt;
                        }
                        @media print { 
                            body { margin: 0; } 
                        }
                    </style>
                </head>
                <body>${content}</body>
                </html>
            `;
            
            const blob = new Blob([htmlDoc], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
        }

        // Make removeParty available globally
        window.removeParty = removeParty;
    </script>
</body>
</html>