<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimal Test - Three Tabs</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- React CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>
</head>
<body>
    <div id="root"></div>

    <script>
        // Initialize after Feather icons load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded - minimal test');
            
            // Mock state laws
            window.STATE_LAWS = {
                'CA': {
                    state: 'California',
                    returnDeadline: 21,
                    citation: 'Civil Code ยง1950.5',
                    penaltyDescription: 'Up to twice the amount plus attorney fees'
                }
            };
            
            window.StateLawUtils = {
                calculateTotalDemand: (formData, state) => ({
                    total: 1000,
                    deposits: 1000,
                    penalty: 0,
                    interest: 0,
                    daysPassed: 45
                })
            };
            
            // Mock utility functions
            window.generateWordDoc = () => console.log('Word doc generation');
            window.initiateESign = () => console.log('eSign initiation');
            window.copyToClipboard = (text) => console.log('Copy to clipboard');

            // Icon component
            const Icon = ({ name, style = {} }) => React.createElement('i', {
                'data-feather': name,
                style: style
            });

            // Minimal component
            const MinimalGenerator = () => {
                const [currentTab, setCurrentTab] = React.useState(0);
                const [formData, setFormData] = React.useState({
                    letterTone: 'firm',
                    primaryScenario: '',
                    totalDepositAmount: '',
                    tenantName: '',
                    landlordName: ''
                });

                const tabs = [
                    { id: 'scenarios', label: 'Your Situation', icon: 'message-circle' },
                    { id: 'details', label: 'Details', icon: 'edit-3' },
                    { id: 'assessment', label: 'Case Assessment', icon: 'bar-chart-2' }
                ];

                const updateFormData = (field, value) => {
                    setFormData(prev => ({ ...prev, [field]: value }));
                };

                const renderTabContent = () => {
                    switch (currentTab) {
                        case 0:
                            return React.createElement('div', { className: 'tab-content' }, [
                                React.createElement('h3', { key: 'title' }, 'Your Situation'),
                                React.createElement('p', { key: 'desc' }, 'Select your scenario and provide details.'),
                                React.createElement('div', { key: 'form' }, [
                                    React.createElement('label', { key: 'label' }, 'Primary Scenario:'),
                                    React.createElement('select', {
                                        key: 'select',
                                        value: formData.primaryScenario,
                                        onChange: (e) => updateFormData('primaryScenario', e.target.value)
                                    }, [
                                        React.createElement('option', { key: 'empty', value: '' }, 'Select...'),
                                        React.createElement('option', { key: 'complete', value: 'complete-non-return' }, 'Complete Non-Return'),
                                        React.createElement('option', { key: 'partial', value: 'partial-non-return' }, 'Partial Non-Return')
                                    ])
                                ])
                            ]);
                        case 1:
                            return React.createElement('div', { className: 'tab-content' }, [
                                React.createElement('h3', { key: 'title' }, 'Details'),
                                React.createElement('p', { key: 'desc' }, 'Enter your contact information and property details.'),
                                React.createElement('div', { key: 'form' }, [
                                    React.createElement('label', { key: 'label' }, 'Your Name:'),
                                    React.createElement('input', {
                                        key: 'input',
                                        type: 'text',
                                        value: formData.tenantName,
                                        onChange: (e) => updateFormData('tenantName', e.target.value)
                                    })
                                ])
                            ]);
                        case 2:
                            return React.createElement('div', { className: 'tab-content' }, [
                                React.createElement('h3', { key: 'title' }, 'Case Assessment'),
                                React.createElement('p', { key: 'desc' }, 'Legal analysis of your security deposit case.'),
                                React.createElement('div', { key: 'analysis' }, [
                                    React.createElement('h4', { key: 'strength-title' }, 'Case Strengths'),
                                    React.createElement('ul', { key: 'strength-list' }, [
                                        React.createElement('li', { key: 'item1' }, 'State law violation timeline'),
                                        React.createElement('li', { key: 'item2' }, 'Missing itemization requirements')
                                    ])
                                ])
                            ]);
                        default:
                            return React.createElement('div', {}, 'Tab content');
                    }
                };

                const generateLetterContent = () => {
                    return `
                        <h1>DEMAND FOR RETURN OF SECURITY DEPOSIT</h1>
                        <p>Scenario: ${formData.primaryScenario || 'Not selected'}</p>
                        <p>Tenant: ${formData.tenantName || '[Your Name]'}</p>
                        <p>This is a minimal test of the letter generation.</p>
                    `;
                };

                return React.createElement('div', { className: 'app-container' }, [
                    React.createElement('header', { key: 'header', className: 'app-header' }, [
                        React.createElement('h1', { key: 'title' }, 'Tenant Security Deposit Generator - Minimal Test'),
                        React.createElement('p', { key: 'subtitle' }, 'Testing three-tab interface')
                    ]),
                    
                    React.createElement('div', { key: 'main', className: 'main-container' }, [
                        React.createElement('div', { key: 'form', className: 'form-pane' }, [
                            React.createElement('div', { key: 'tabs', className: 'tab-navigation' },
                                tabs.map((tab, index) => 
                                    React.createElement('button', {
                                        key: tab.id,
                                        className: `tab-button ${currentTab === index ? 'active' : ''}`,
                                        onClick: () => setCurrentTab(index)
                                    }, [
                                        React.createElement(Icon, { key: 'icon', name: tab.icon }),
                                        React.createElement('span', { key: 'label' }, tab.label)
                                    ])
                                )
                            ),
                            
                            React.createElement('div', { key: 'content', className: 'tab-content-container' },
                                renderTabContent()
                            )
                        ]),
                        
                        React.createElement('div', { key: 'preview', className: 'preview-pane' }, [
                            React.createElement('div', { key: 'header', className: 'preview-header' }, [
                                React.createElement('h3', { key: 'title' }, 'Live Preview')
                            ]),
                            React.createElement('div', { 
                                key: 'content', 
                                className: 'preview-content',
                                dangerouslySetInnerHTML: { __html: generateLetterContent() }
                            })
                        ])
                    ])
                ]);
            };

            try {
                const root = ReactDOM.createRoot(document.getElementById('root'));
                root.render(React.createElement(MinimalGenerator));
                console.log('Minimal component rendered successfully');
                
                // Initialize Feather icons after component renders
                setTimeout(() => {
                    if (window.feather) {
                        feather.replace();
                    }
                }, 100);
            } catch (error) {
                console.error('Error rendering minimal component:', error);
                document.getElementById('root').innerHTML = '<div style="color: red; padding: 20px;"><h2>Error:</h2><pre>' + error.message + '</pre></div>';
            }
        });
    </script>
</body>
</html>