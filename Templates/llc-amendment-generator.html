<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LLC Amendment Generator | Operating Agreement Amendment Builder | Terms.Law</title>
  <meta name="description" content="Free LLC Amendment generator. Add or remove members, change management structure, update profit distributions. Attorney-drafted with clause explanations.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Dancing+Script:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Calendly Widget -->
  <link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
  <script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>

  <style>
    /* ============================================
       CSS VARIABLES - Professional Theme
       ============================================ */
    :root {
      --color-primary: #1e40af;
      --color-primary-dark: #1e3a8a;
      --color-primary-light: #3b82f6;
      --color-accent: #0d9488;
      --color-accent-light: #14b8a6;
      --color-success: #059669;
      --color-warning: #d97706;
      --color-danger: #dc2626;

      --color-bg: #f8fafc;
      --color-surface: #ffffff;
      --color-border: #e2e8f0;
      --color-border-light: #f1f5f9;
      --color-text: #0f172a;
      --color-text-secondary: #334155;
      --color-text-muted: #64748b;
      --color-text-light: #94a3b8;

      --color-dark: #0f172a;
      --color-dark-surface: #1e293b;

      /* Document preview colors */
      --doc-bg: #fefefe;
      --doc-border: #d1d5db;
      --doc-highlight: #fef3c7;
      --doc-highlight-border: #fcd34d;
      --doc-text: #1f2937;
      --doc-clause-title: #1e40af;
      --doc-section-num: #6366f1;

      --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);

      --radius-sm: 6px;
      --radius-md: 10px;
      --radius-lg: 14px;
      --radius-xl: 20px;
      --radius-full: 9999px;

      --space-xs: 0.25rem;
      --space-sm: 0.5rem;
      --space-md: 1rem;
      --space-lg: 1.5rem;
      --space-xl: 2rem;
      --space-2xl: 3rem;
      --space-3xl: 4rem;

      --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
      --font-serif: Georgia, 'Times New Roman', serif;
      --max-width: 1280px;

      --transition-fast: 150ms ease;
      --transition-base: 200ms ease;
    }

    /* ============================================
       RESET & BASE
       ============================================ */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
      -webkit-font-smoothing: antialiased;
    }

    body {
      font-family: var(--font-sans);
      font-size: 16px;
      line-height: 1.6;
      color: var(--color-text);
      background: var(--color-bg);
    }

    a {
      color: var(--color-primary);
      text-decoration: none;
      transition: color var(--transition-fast);
    }

    a:hover {
      color: var(--color-primary-dark);
    }

    .container {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 var(--space-lg);
    }

    /* ============================================
       HEADER - Dark Professional (Matching site)
       ============================================ */
    .site-header {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      padding: 0;
      position: sticky;
      top: 0;
      z-index: 100;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }

    .header-content {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 52px;
      max-width: var(--max-width);
      margin: 0 auto;
    }

    .header-nav {
      display: flex;
      align-items: center;
      gap: 0;
      height: 100%;
    }

    .nav-link {
      color: #94a3b8;
      font-size: 0.85rem;
      font-weight: 600;
      padding: 16px 24px;
      transition: all 150ms ease;
      text-decoration: none;
      height: 100%;
      display: flex;
      align-items: center;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      border-bottom: 2px solid transparent;
      margin-bottom: -1px;
    }

    .nav-link:hover {
      color: #ffffff;
      background: rgba(255, 255, 255, 0.05);
    }

    .nav-link.active {
      color: #ffffff;
      background: rgba(255, 255, 255, 0.08);
      border-bottom-color: #3b82f6;
    }

    .nav-link.home-logo {
      padding: 12px 20px;
      font-size: 1.1rem;
      font-weight: 800;
      letter-spacing: -0.02em;
      text-transform: none;
    }

    .nav-link.home-logo .logo-text {
      background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .header-email-cta {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 10px 20px;
      background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
      border: none;
      border-radius: 8px;
      color: #fff;
      font-size: 0.8rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      transition: all 150ms ease;
      text-decoration: none;
      margin-left: 1.5rem;
      box-shadow: 0 2px 8px rgba(37, 99, 235, 0.3);
    }

    .header-email-cta:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.4);
      color: #fff;
    }

    /* ============================================
       HERO
       ============================================ */
    .hero {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
      padding: var(--space-2xl) 0;
      position: relative;
      overflow: hidden;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 50%;
      height: 100%;
      background: radial-gradient(ellipse at 70% 30%, rgba(59, 130, 246, 0.12) 0%, transparent 60%);
      pointer-events: none;
    }

    .hero-content {
      position: relative;
      z-index: 1;
      max-width: 800px;
    }

    .hero-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 14px 6px 6px;
      background: rgba(59, 130, 246, 0.1);
      border: 1px solid rgba(59, 130, 246, 0.2);
      border-radius: var(--radius-full);
      font-size: 0.8rem;
      color: #93c5fd;
      margin-bottom: var(--space-lg);
    }

    .hero-badge-icon {
      width: 22px;
      height: 22px;
      background: var(--color-primary);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      color: #fff;
    }

    .hero h1 {
      font-size: 2.25rem;
      font-weight: 800;
      color: #fff;
      line-height: 1.15;
      letter-spacing: -0.025em;
      margin-bottom: var(--space-md);
    }

    .hero h1 .highlight {
      background: linear-gradient(135deg, #60a5fa, #34d399);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .hero-subtitle {
      font-size: 1.1rem;
      color: #94a3b8;
      line-height: 1.7;
      margin-bottom: var(--space-lg);
      max-width: 650px;
    }

    .hero-subtitle strong {
      color: #e2e8f0;
    }

    .hero-features {
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-lg);
    }

    .hero-feature {
      display: flex;
      align-items: center;
      gap: 8px;
      color: #94a3b8;
      font-size: 0.9rem;
    }

    .hero-feature-icon {
      color: var(--color-accent-light);
    }

    /* ============================================
       MAIN LAYOUT - Split View
       ============================================ */
    .builder-layout {
      display: grid;
      grid-template-columns: 420px 1fr;
      gap: 0;
      min-height: calc(100vh - 200px);
    }

    @media (max-width: 1024px) {
      .builder-layout {
        grid-template-columns: 1fr;
      }
    }

    /* ============================================
       BUILDER SIDEBAR (Left Panel)
       ============================================ */
    .builder-sidebar {
      background: var(--color-surface);
      border-right: 1px solid var(--color-border);
      padding: var(--space-xl);
      overflow-y: auto;
      max-height: calc(100vh - 150px);
      position: sticky;
      top: 70px;
    }

    @media (max-width: 1024px) {
      .builder-sidebar {
        max-height: none;
        position: static;
      }
    }

    .builder-section {
      margin-bottom: var(--space-xl);
      padding-bottom: var(--space-xl);
      border-bottom: 1px solid var(--color-border-light);
    }

    .builder-section:last-child {
      border-bottom: none;
      margin-bottom: 0;
    }

    .builder-section-title {
      font-size: 0.75rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--color-text-muted);
      margin-bottom: var(--space-md);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    .builder-section-title .icon {
      font-size: 1rem;
    }

    /* Form Elements */
    .form-group {
      margin-bottom: var(--space-lg);
    }

    .form-label {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--color-text);
      margin-bottom: var(--space-sm);
    }

    .form-label .help-trigger {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 16px;
      height: 16px;
      background: var(--color-border);
      color: var(--color-text-muted);
      border-radius: 50%;
      font-size: 10px;
      font-weight: 700;
      cursor: help;
      position: relative;
    }

    .form-label .help-trigger:hover .help-tooltip {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .help-tooltip {
      position: absolute;
      bottom: calc(100% + 8px);
      left: 50%;
      transform: translateX(-50%) translateY(5px);
      width: 280px;
      background: var(--color-dark);
      color: #fff;
      padding: 12px 14px;
      border-radius: var(--radius-md);
      font-size: 0.8rem;
      font-weight: 400;
      line-height: 1.5;
      box-shadow: var(--shadow-xl);
      opacity: 0;
      visibility: hidden;
      transition: all var(--transition-base);
      z-index: 100;
      text-align: left;
    }

    .help-tooltip::after {
      content: '';
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      border: 6px solid transparent;
      border-top-color: var(--color-dark);
    }

    .form-input,
    .form-textarea,
    .form-select {
      width: 100%;
      padding: 12px 14px;
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      font-size: 0.95rem;
      font-family: inherit;
      transition: all var(--transition-fast);
      background: var(--color-surface);
    }

    .form-input:focus,
    .form-textarea:focus,
    .form-select:focus {
      outline: none;
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.1);
    }

    .form-textarea {
      min-height: 80px;
      resize: vertical;
    }

    .form-hint {
      font-size: 0.8rem;
      color: var(--color-text-muted);
      margin-top: 6px;
    }

    /* Info Boxes */
    .info-box {
      margin-top: 12px;
      padding: 12px 14px;
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(13, 148, 136, 0.05));
      border-left: 3px solid var(--color-primary-light);
      border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
      font-size: 0.85rem;
      line-height: 1.5;
      color: var(--color-text-secondary);
    }

    .info-box-title {
      font-weight: 600;
      color: var(--color-primary);
      margin-bottom: 4px;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.02em;
    }

    .info-box p {
      margin: 0;
    }

    .info-box-muted {
      background: var(--color-bg);
      border-left-color: var(--color-border);
    }

    .info-box-muted .info-box-title {
      color: var(--color-text-muted);
    }

    .info-box-warning {
      background: linear-gradient(135deg, rgba(217, 119, 6, 0.08), rgba(217, 119, 6, 0.05));
      border-left-color: var(--color-warning);
    }

    .info-box-warning .info-box-title {
      color: var(--color-warning);
    }

    /* Section Description */
    .section-description {
      font-size: 0.85rem;
      color: var(--color-text-muted);
      margin-bottom: var(--space-md);
      line-height: 1.5;
    }

    /* Toggle Switch */
    .toggle-group {
      display: flex;
      background: var(--color-bg);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      padding: 4px;
      gap: 4px;
    }

    .toggle-option {
      flex: 1;
      padding: 10px 16px;
      border: none;
      background: transparent;
      border-radius: var(--radius-sm);
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--color-text-muted);
      cursor: pointer;
      transition: all var(--transition-fast);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }

    .toggle-option:hover {
      color: var(--color-text);
    }

    .toggle-option.active {
      background: var(--color-primary);
      color: #fff;
      box-shadow: var(--shadow-sm);
    }

    .toggle-option .toggle-icon {
      font-size: 1rem;
    }

    /* Amendment Type Cards */
    .amendment-type-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-sm);
      margin-bottom: var(--space-md);
    }

    .amendment-type-card {
      padding: var(--space-md);
      background: var(--color-bg);
      border: 2px solid var(--color-border);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all var(--transition-fast);
      text-align: center;
    }

    .amendment-type-card:hover {
      border-color: var(--color-primary-light);
      background: rgba(59, 130, 246, 0.03);
    }

    .amendment-type-card.selected {
      border-color: var(--color-primary);
      background: rgba(59, 130, 246, 0.08);
    }

    .amendment-type-card .type-icon {
      font-size: 1.5rem;
      margin-bottom: var(--space-xs);
    }

    .amendment-type-card .type-label {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--color-text);
    }

    .amendment-type-card.selected .type-label {
      color: var(--color-primary);
    }

    /* Clause Toggle Switches */
    .clause-toggle {
      margin-bottom: 12px;
    }

    .clause-toggle-label {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 12px;
      background: var(--color-bg);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .clause-toggle-label:hover {
      border-color: var(--color-primary-light);
      background: rgba(59, 130, 246, 0.03);
    }

    .clause-toggle-label input[type="checkbox"] {
      display: none;
    }

    .clause-toggle-switch {
      width: 40px;
      height: 22px;
      background: var(--color-border);
      border-radius: 11px;
      position: relative;
      flex-shrink: 0;
      transition: all var(--transition-fast);
    }

    .clause-toggle-switch::after {
      content: '';
      position: absolute;
      width: 18px;
      height: 18px;
      background: #fff;
      border-radius: 50%;
      top: 2px;
      left: 2px;
      transition: all var(--transition-fast);
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }

    .clause-toggle-label input:checked + .clause-toggle-switch {
      background: var(--color-primary);
    }

    .clause-toggle-label input:checked + .clause-toggle-switch::after {
      left: 20px;
    }

    .clause-toggle-text {
      flex: 1;
      line-height: 1.4;
    }

    .clause-toggle-text strong {
      display: block;
      font-size: 0.9rem;
      color: var(--color-text);
      margin-bottom: 2px;
    }

    .clause-toggle-text small {
      font-size: 0.8rem;
      color: var(--color-text-muted);
    }

    /* Member Entry */
    .member-entry {
      background: var(--color-bg);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      padding: var(--space-md);
      margin-bottom: var(--space-md);
      position: relative;
    }

    .member-entry-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: var(--space-md);
    }

    .member-entry-title {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--color-text);
    }

    .member-remove-btn {
      padding: 4px 10px;
      background: none;
      border: 1px solid var(--color-border);
      border-radius: var(--radius-sm);
      font-size: 0.75rem;
      color: var(--color-text-muted);
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .member-remove-btn:hover {
      border-color: var(--color-danger);
      color: var(--color-danger);
      background: rgba(220, 38, 38, 0.05);
    }

    .add-member-btn {
      width: 100%;
      padding: var(--space-md);
      background: var(--color-bg);
      border: 2px dashed var(--color-border);
      border-radius: var(--radius-md);
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--color-text-muted);
      cursor: pointer;
      transition: all var(--transition-fast);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-sm);
    }

    .add-member-btn:hover {
      border-color: var(--color-primary);
      color: var(--color-primary);
      background: rgba(59, 130, 246, 0.03);
    }

    /* Percentage Input */
    .percentage-input-group {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    .percentage-input-group .form-input {
      width: 80px;
      text-align: center;
    }

    .percentage-suffix {
      font-size: 0.9rem;
      color: var(--color-text-muted);
      font-weight: 600;
    }

    .percentage-bar {
      flex: 1;
      height: 8px;
      background: var(--color-border);
      border-radius: 4px;
      overflow: hidden;
    }

    .percentage-fill {
      height: 100%;
      background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
      border-radius: 4px;
      transition: width 0.3s ease;
    }

    /* ============================================
       SIGNATURE COMPONENTS
       ============================================ */
    .signature-type-toggle {
      display: flex;
      gap: 4px;
      margin-bottom: 12px;
    }

    .sig-toggle-btn {
      flex: 1;
      padding: 8px 12px;
      background: var(--color-bg);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-sm);
      font-size: 0.85rem;
      font-weight: 500;
      color: var(--color-text-muted);
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .sig-toggle-btn:hover {
      border-color: var(--color-primary-light);
      color: var(--color-text);
    }

    .sig-toggle-btn.active {
      background: var(--color-primary);
      border-color: var(--color-primary);
      color: #fff;
    }

    .signature-draw-container {
      position: relative;
    }

    .signature-canvas {
      width: 100%;
      height: 100px;
      border: 2px dashed var(--color-border);
      border-radius: var(--radius-md);
      background: #fff;
      cursor: crosshair;
      touch-action: none;
    }

    .signature-canvas:hover {
      border-color: var(--color-primary-light);
    }

    .sig-clear-btn {
      position: absolute;
      top: 8px;
      right: 8px;
      padding: 4px 10px;
      background: rgba(0,0,0,0.05);
      border: none;
      border-radius: var(--radius-sm);
      font-size: 0.75rem;
      color: var(--color-text-muted);
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .sig-clear-btn:hover {
      background: rgba(220, 38, 38, 0.1);
      color: var(--color-danger);
    }

    .signature-type-container {
      margin-top: 8px;
    }

    .signature-typed-input {
      margin-bottom: 8px;
    }

    .signature-typed-preview {
      min-height: 60px;
      padding: 12px 16px;
      background: #fff;
      border: 2px dashed var(--color-border);
      border-radius: var(--radius-md);
      font-family: 'Dancing Script', 'Brush Script MT', cursive;
      font-size: 28px;
      color: #1a365d;
      display: flex;
      align-items: center;
    }

    .signature-typed-preview:empty::before {
      content: 'Your signature will appear here';
      color: var(--color-text-light);
      font-family: var(--font-sans);
      font-size: 0.85rem;
      font-style: italic;
    }

    .doc-signature-typed {
      font-family: 'Dancing Script', 'Brush Script MT', cursive;
      font-size: 24px;
      color: #1a365d;
      margin: 8px 0;
      display: block;
    }

    /* ============================================
       DOCUMENT PREVIEW (Right Panel)
       ============================================ */
    .preview-panel {
      background: var(--color-bg);
      padding: var(--space-xl);
      overflow-y: auto;
    }

    .preview-toolbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--space-md);
      margin-bottom: var(--space-lg);
      padding-bottom: var(--space-md);
      border-bottom: 1px solid var(--color-border);
      flex-wrap: wrap;
    }

    .preview-title {
      font-size: 1rem;
      font-weight: 700;
      color: var(--color-text);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    .preview-title .icon {
      font-size: 1.25rem;
    }

    .preview-actions {
      display: flex;
      gap: var(--space-sm);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 10px 18px;
      border-radius: var(--radius-md);
      font-size: 0.9rem;
      font-weight: 600;
      text-decoration: none;
      transition: all var(--transition-base);
      border: none;
      cursor: pointer;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--color-primary), #2563eb);
      color: #fff;
      box-shadow: 0 2px 8px rgba(37, 99, 235, 0.3);
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.4);
    }

    .btn-secondary {
      background: var(--color-surface);
      color: var(--color-text);
      border: 1px solid var(--color-border);
    }

    .btn-secondary:hover {
      background: var(--color-bg);
      border-color: var(--color-primary-light);
    }

    .btn-sm {
      padding: 8px 14px;
      font-size: 0.85rem;
    }

    /* Document Container */
    .document-container {
      background: var(--doc-bg);
      border: 1px solid var(--doc-border);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-lg);
      max-width: 850px;
      margin: 0 auto;
    }

    .document-header {
      padding: var(--space-lg);
      border-bottom: 1px solid var(--color-border-light);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .document-title {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--color-text-muted);
    }

    .document-status {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.8rem;
      color: var(--color-success);
    }

    .document-status::before {
      content: '';
      width: 8px;
      height: 8px;
      background: var(--color-success);
      border-radius: 50%;
    }

    .document-body {
      padding: var(--space-2xl);
      font-family: var(--font-serif);
      font-size: 14px;
      line-height: 1.8;
      color: var(--doc-text);
      max-height: calc(100vh - 350px);
      overflow-y: auto;
    }

    @media (max-width: 1024px) {
      .document-body {
        max-height: none;
      }
    }

    /* Document Typography */
    .doc-title {
      text-align: center;
      font-size: 18px;
      font-weight: 700;
      color: var(--doc-clause-title);
      margin-bottom: 24px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .doc-subtitle {
      text-align: center;
      font-size: 14px;
      font-weight: 600;
      color: var(--color-text-secondary);
      margin-bottom: 24px;
    }

    .doc-clause-title {
      font-size: 14px;
      font-weight: 700;
      color: var(--doc-clause-title);
      margin-top: 28px;
      margin-bottom: 12px;
      text-transform: uppercase;
      letter-spacing: 0.02em;
    }

    .doc-section-num {
      font-weight: 700;
      color: var(--doc-section-num);
    }

    .doc-highlight {
      background: var(--doc-highlight);
      border-bottom: 2px solid var(--doc-highlight-border);
      padding: 1px 4px;
      border-radius: 3px;
      transition: all var(--transition-fast);
      cursor: text;
      outline: none;
      min-width: 20px;
      display: inline-block;
    }

    .doc-highlight:hover {
      background: #fde68a;
    }

    .doc-highlight:focus {
      background: #fef3c7;
      border-bottom-color: var(--color-primary);
      box-shadow: 0 0 0 2px rgba(30, 64, 175, 0.2);
    }

    .doc-highlight.empty {
      color: var(--color-text-muted);
      font-style: italic;
    }

    .doc-highlight.flash {
      animation: flashHighlight 1.5s ease;
    }

    @keyframes flashHighlight {
      0%, 100% { background: var(--doc-highlight); }
      25% { background: #fbbf24; box-shadow: 0 0 12px rgba(251, 191, 36, 0.5); }
      50% { background: #fde68a; }
      75% { background: #fbbf24; box-shadow: 0 0 8px rgba(251, 191, 36, 0.3); }
    }

    /* Flash animation for container divs (amendment content blocks) */
    div.flash, ul.flash, ol.flash {
      animation: flashContainer 1.5s ease;
      border-radius: 8px;
    }

    @keyframes flashContainer {
      0%, 100% { background: transparent; }
      25% { background: rgba(251, 191, 36, 0.2); box-shadow: 0 0 12px rgba(251, 191, 36, 0.3); }
      50% { background: rgba(253, 230, 138, 0.3); }
      75% { background: rgba(251, 191, 36, 0.15); box-shadow: 0 0 8px rgba(251, 191, 36, 0.2); }
    }

    /* Inline editing cursor */
    .doc-highlight[contenteditable="true"] {
      cursor: text;
    }

    .doc-highlight[contenteditable="true"]:focus {
      outline: 2px solid var(--color-primary);
      outline-offset: 2px;
      background: #fef9c3;
    }

    /* Full Edit Mode */
    .full-edit-mode {
      border: 2px dashed var(--color-primary) !important;
      background: linear-gradient(135deg, #fefce8 0%, #fef9c3 100%) !important;
    }

    .full-edit-mode:focus {
      outline: none;
    }

    .full-edit-mode .doc-highlight {
      background: transparent;
      border: none;
    }

    /* Edit Toolbar */
    .edit-toolbar {
      display: none;
      align-items: center;
      gap: 4px;
      padding: 8px 12px;
      background: var(--color-dark);
      border-radius: var(--radius-md);
      margin-top: var(--space-sm);
    }

    .edit-toolbar button {
      padding: 6px 10px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: var(--radius-sm);
      color: #fff;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .edit-toolbar button:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .edit-toolbar .cancel-btn {
      background: rgba(220, 38, 38, 0.3);
      border-color: rgba(220, 38, 38, 0.5);
    }

    .edit-toolbar .cancel-btn:hover {
      background: rgba(220, 38, 38, 0.5);
    }

    .toolbar-divider {
      width: 1px;
      height: 20px;
      background: rgba(255, 255, 255, 0.2);
      margin: 0 4px;
    }

    /* Preview hint */
    .preview-hint {
      font-size: 0.75rem;
      color: var(--color-text-muted);
      font-weight: 400;
      margin-left: var(--space-sm);
    }

    /* Edit mode button active state */
    #editModeBtn.active {
      background: var(--color-primary);
      color: #fff;
      border-color: var(--color-primary);
    }

    .doc-paragraph {
      margin-bottom: 16px;
      text-align: justify;
    }

    .doc-indent {
      margin-left: 28px;
    }

    .doc-list {
      margin-left: 28px;
      margin-bottom: 16px;
    }

    .doc-list li {
      margin-bottom: 8px;
    }

    .doc-signature-block {
      margin-top: 40px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
    }

    .doc-signature-party {
      border-top: 1px solid var(--doc-border);
      padding-top: 20px;
    }

    .doc-signature-line {
      margin-top: 40px;
      border-top: 1px solid var(--doc-text);
      padding-top: 4px;
      font-size: 12px;
      color: var(--color-text-muted);
    }

    /* ============================================
       ATTORNEY CTA SECTION
       ============================================ */
    .attorney-cta {
      background: linear-gradient(135deg, var(--color-dark) 0%, #1e293b 100%);
      border-radius: var(--radius-lg);
      padding: var(--space-xl);
      margin-top: var(--space-xl);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--space-xl);
      flex-wrap: wrap;
    }

    .attorney-cta-content h3 {
      font-size: 1.15rem;
      font-weight: 700;
      color: #fff;
      margin-bottom: var(--space-sm);
    }

    .attorney-cta-content p {
      color: #94a3b8;
      font-size: 0.9rem;
      max-width: 450px;
    }

    .attorney-cta-price {
      text-align: right;
    }

    .attorney-cta-price .price-label {
      font-size: 0.8rem;
      color: #64748b;
    }

    /* ============================================
       EXPLANATION PANEL
       ============================================ */
    .explanation-panel {
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      padding: var(--space-xl);
      margin-top: var(--space-xl);
    }

    .explanation-title {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--color-text);
      margin-bottom: var(--space-lg);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      padding-bottom: var(--space-md);
      border-bottom: 1px solid var(--color-border-light);
    }

    .explanation-content {
      font-size: 0.9rem;
      color: var(--color-text-secondary);
      line-height: 1.7;
    }

    .explanation-content p {
      margin-bottom: var(--space-md);
    }

    .explanation-content p:last-child {
      margin-bottom: 0;
    }

    .explanation-divider {
      height: 1px;
      background: var(--color-border-light);
      margin: var(--space-lg) 0;
    }

    .explanation-subtitle {
      font-size: 0.85rem;
      font-weight: 700;
      color: var(--color-primary);
      text-transform: uppercase;
      letter-spacing: 0.03em;
      margin-bottom: var(--space-md);
    }

    .explanation-content strong {
      color: var(--color-text);
    }

    /* ============================================
       FOOTER
       ============================================ */
    .site-footer {
      background: var(--color-dark);
      padding: var(--space-xl) 0;
      color: #64748b;
      font-size: 0.9rem;
      margin-top: var(--space-3xl);
    }

    .footer-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: var(--space-lg);
    }

    .footer-brand strong {
      color: #fff;
    }

    .footer-links {
      display: flex;
      gap: var(--space-lg);
    }

    .footer-links a {
      color: #94a3b8;
    }

    .footer-links a:hover {
      color: #fff;
    }

    /* ============================================
       RESPONSIVE
       ============================================ */
    @media (max-width: 768px) {
      .hero h1 {
        font-size: 1.75rem;
      }

      .builder-sidebar {
        padding: var(--space-lg);
      }

      .document-body {
        padding: var(--space-lg);
      }

      .doc-signature-block {
        grid-template-columns: 1fr;
      }

      .preview-toolbar {
        flex-direction: column;
        align-items: flex-start;
      }

      .attorney-cta {
        flex-direction: column;
        text-align: center;
      }

      .attorney-cta-price {
        text-align: center;
      }

      .header-nav {
        display: none;
      }

      .amendment-type-grid {
        grid-template-columns: 1fr;
      }
    }

    /* ============================================
       SCROLL TO PREVIEW INDICATOR
       ============================================ */
    .scroll-indicator {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 12px 20px;
      background: var(--color-primary);
      color: #fff;
      border-radius: var(--radius-full);
      font-size: 0.85rem;
      font-weight: 600;
      box-shadow: var(--shadow-lg);
      cursor: pointer;
      display: none;
      z-index: 50;
      animation: pulse 2s infinite;
      border: none;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    @media (max-width: 1024px) {
      .scroll-indicator {
        display: flex;
        align-items: center;
        gap: 6px;
      }
    }

    /* Toast Notification */
    .toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: var(--color-dark);
      color: #fff;
      padding: 14px 24px;
      border-radius: var(--radius-md);
      font-size: 0.9rem;
      box-shadow: var(--shadow-xl);
      opacity: 0;
      transition: all 0.3s ease;
      z-index: 1000;
    }

    .toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }

    /* Conditional Sections */
    .conditional-section {
      display: none;
    }

    .conditional-section.visible {
      display: block;
    }

    /* Field highlight animation when scrolled to */
    .field-highlight {
      animation: fieldPulse 2s ease;
    }

    @keyframes fieldPulse {
      0%, 100% { box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.1); }
      25%, 75% { box-shadow: 0 0 0 6px rgba(30, 64, 175, 0.3); border-color: var(--color-primary); }
      50% { box-shadow: 0 0 0 8px rgba(30, 64, 175, 0.2); border-color: var(--color-primary); }
    }

    /* Clickable highlights in document */
    .doc-highlight[data-field] {
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .doc-highlight[data-field]:hover {
      background: #fde68a;
      transform: scale(1.02);
    }

    /* Breadcrumb Navigation */
    .breadcrumb-nav {
      background: var(--color-surface);
      border-bottom: 1px solid var(--color-border);
      padding: var(--space-sm) 0;
    }

    .breadcrumb-container {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 var(--space-lg);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      flex-wrap: wrap;
    }

    .breadcrumb-item {
      display: inline-flex;
      align-items: center;
      gap: var(--space-xs);
      font-size: 0.8rem;
      color: var(--color-text-muted);
      text-decoration: none;
      transition: color var(--transition-fast);
    }

    .breadcrumb-item:hover {
      color: var(--color-primary);
    }

    .breadcrumb-item.current {
      color: var(--color-text);
      font-weight: 600;
    }

    .breadcrumb-separator {
      color: var(--color-text-light);
      font-size: 0.7rem;
    }

    .breadcrumb-count {
      background: var(--color-bg);
      padding: 2px 6px;
      border-radius: var(--radius-full);
      font-size: 0.7rem;
      font-weight: 600;
      color: var(--color-text-muted);
    }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header class="site-header">
    <div class="header-content">
      <nav class="header-nav">
        <a href="../index.html" class="nav-link home-logo" title="Home">
          <span class="logo-text">Terms.Law</span>
        </a>
        <a href="../Demand-Letters/demand-letters-landing.html" class="nav-link">Demands</a>
        <a href="contract-library-landing.html" class="nav-link active">Contracts</a>
        <a href="../INC/formation-landing.html" class="nav-link">Incorporation</a>
        <a href="../Blog/blog-landing.html" class="nav-link">Blog</a>
        <a href="mailto:owner@terms.law" class="header-email-cta">Email</a>
      </nav>
    </div>
  </header>

  <!-- BREADCRUMB NAVIGATION -->
  <nav class="breadcrumb-nav">
    <div class="breadcrumb-container">
      <a href="contract-library-landing.html" class="breadcrumb-item">
        üìù Contracts
      </a>
      <span class="breadcrumb-separator">‚Ä∫</span>
      <a href="contract-library-landing.html#category-startups" class="breadcrumb-item">
        üöÄ Startups, Corporations & LLCs
        <span class="breadcrumb-count">22</span>
      </a>
      <span class="breadcrumb-separator">‚Ä∫</span>
      <a href="contract-library-landing.html#category-startups" class="breadcrumb-item">
        üìÑ LLC Formation
        <span class="breadcrumb-count">4</span>
      </a>
      <span class="breadcrumb-separator">‚Ä∫</span>
      <span class="breadcrumb-item current">
        LLC Amendment Generator
      </span>
    </div>
  </nav>

  <!-- HERO -->
  <section class="hero">
    <div class="container">
      <div class="hero-content">
        <div class="hero-badge">
          <span class="hero-badge-icon">‚ö°</span>
          Interactive Document Builder
        </div>
        <h1>LLC Amendment <span class="highlight">Generator</span></h1>
        <p class="hero-subtitle">
          <strong>Amend your LLC Operating Agreement in minutes.</strong> Add or remove members, update ownership percentages, change management structure, or modify profit distributions. Your document updates in real-time.
        </p>
        <div class="hero-features">
          <div class="hero-feature">
            <span class="hero-feature-icon">‚úì</span>
            Attorney-drafted language
          </div>
          <div class="hero-feature">
            <span class="hero-feature-icon">‚úì</span>
            Multiple amendment types
          </div>
          <div class="hero-feature">
            <span class="hero-feature-icon">‚úì</span>
            Instant preview & download
          </div>
          <div class="hero-feature">
            <span class="hero-feature-icon">‚úì</span>
            All 50 states
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- MAIN BUILDER -->
  <main class="builder-layout">

    <!-- LEFT: Form Controls -->
    <aside class="builder-sidebar">

      <!-- Amendment Type -->
      <div class="builder-section">
        <div class="builder-section-title">
          <span class="icon">üìù</span>
          Amendment Type
        </div>
        <p class="section-description">Select what you're changing in your Operating Agreement. You can select multiple types.</p>

        <div class="amendment-type-grid">
          <div class="amendment-type-card selected" data-type="add-member" onclick="toggleAmendmentType(this)">
            <div class="type-icon">üë§+</div>
            <div class="type-label">Add Member</div>
          </div>
          <div class="amendment-type-card" data-type="remove-member" onclick="toggleAmendmentType(this)">
            <div class="type-icon">üë§‚àí</div>
            <div class="type-label">Remove Member</div>
          </div>
          <div class="amendment-type-card" data-type="change-ownership" onclick="toggleAmendmentType(this)">
            <div class="type-icon">üìä</div>
            <div class="type-label">Change Ownership %</div>
          </div>
          <div class="amendment-type-card" data-type="change-management" onclick="toggleAmendmentType(this)">
            <div class="type-icon">üëî</div>
            <div class="type-label">Change Management</div>
          </div>
          <div class="amendment-type-card" data-type="change-distributions" onclick="toggleAmendmentType(this)">
            <div class="type-icon">üí∞</div>
            <div class="type-label">Update Distributions</div>
          </div>
          <div class="amendment-type-card" data-type="change-name" onclick="toggleAmendmentType(this)">
            <div class="type-icon">‚úèÔ∏è</div>
            <div class="type-label">Change LLC Name</div>
          </div>
        </div>

        <div class="info-box">
          <div class="info-box-title">Pro Tip</div>
          <p>Most states require unanimous member consent for amendments. Check your current Operating Agreement for the voting threshold.</p>
        </div>
      </div>

      <!-- LLC Information -->
      <div class="builder-section">
        <div class="builder-section-title">
          <span class="icon">üè¢</span>
          LLC Information
        </div>
        <div class="form-group">
          <label class="form-label">LLC Legal Name</label>
          <input type="text" class="form-input" id="llcName" placeholder="Acme Holdings LLC" oninput="trackFieldEdit('llcName')">
        </div>
        <div class="form-group">
          <label class="form-label">State of Formation</label>
          <select class="form-select" id="llcState" onchange="trackFieldEdit('llcState')">
            <option value="">Select state...</option>
            <option value="Alabama">Alabama</option>
            <option value="Alaska">Alaska</option>
            <option value="Arizona">Arizona</option>
            <option value="Arkansas">Arkansas</option>
            <option value="California">California</option>
            <option value="Colorado">Colorado</option>
            <option value="Connecticut">Connecticut</option>
            <option value="Delaware">Delaware</option>
            <option value="Florida">Florida</option>
            <option value="Georgia">Georgia</option>
            <option value="Hawaii">Hawaii</option>
            <option value="Idaho">Idaho</option>
            <option value="Illinois">Illinois</option>
            <option value="Indiana">Indiana</option>
            <option value="Iowa">Iowa</option>
            <option value="Kansas">Kansas</option>
            <option value="Kentucky">Kentucky</option>
            <option value="Louisiana">Louisiana</option>
            <option value="Maine">Maine</option>
            <option value="Maryland">Maryland</option>
            <option value="Massachusetts">Massachusetts</option>
            <option value="Michigan">Michigan</option>
            <option value="Minnesota">Minnesota</option>
            <option value="Mississippi">Mississippi</option>
            <option value="Missouri">Missouri</option>
            <option value="Montana">Montana</option>
            <option value="Nebraska">Nebraska</option>
            <option value="Nevada">Nevada</option>
            <option value="New Hampshire">New Hampshire</option>
            <option value="New Jersey">New Jersey</option>
            <option value="New Mexico">New Mexico</option>
            <option value="New York">New York</option>
            <option value="North Carolina">North Carolina</option>
            <option value="North Dakota">North Dakota</option>
            <option value="Ohio">Ohio</option>
            <option value="Oklahoma">Oklahoma</option>
            <option value="Oregon">Oregon</option>
            <option value="Pennsylvania">Pennsylvania</option>
            <option value="Rhode Island">Rhode Island</option>
            <option value="South Carolina">South Carolina</option>
            <option value="South Dakota">South Dakota</option>
            <option value="Tennessee">Tennessee</option>
            <option value="Texas">Texas</option>
            <option value="Utah">Utah</option>
            <option value="Vermont">Vermont</option>
            <option value="Virginia">Virginia</option>
            <option value="Washington">Washington</option>
            <option value="West Virginia">West Virginia</option>
            <option value="Wisconsin">Wisconsin</option>
            <option value="Wyoming">Wyoming</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">
            Date of Original Operating Agreement
            <span class="help-trigger">?
              <span class="help-tooltip">The date your original LLC Operating Agreement was signed. This helps identify which document you're amending.</span>
            </span>
          </label>
          <input type="date" class="form-input" id="originalDate" onchange="trackFieldEdit('originalDate')">
        </div>
        <div class="form-group">
          <label class="form-label">Amendment Number</label>
          <select class="form-select" id="amendmentNumber" onchange="trackFieldEdit('amendmentNumber')">
            <option value="First">First Amendment</option>
            <option value="Second">Second Amendment</option>
            <option value="Third">Third Amendment</option>
            <option value="Fourth">Fourth Amendment</option>
            <option value="Fifth">Fifth Amendment</option>
          </select>
        </div>
      </div>

      <!-- Add New Member Section -->
      <div class="builder-section conditional-section visible" id="addMemberSection">
        <div class="builder-section-title">
          <span class="icon">üë§+</span>
          New Member Details
        </div>
        <div id="newMembersContainer">
          <div class="member-entry" data-member-id="new-1">
            <div class="member-entry-header">
              <span class="member-entry-title">New Member #1</span>
            </div>
            <div class="form-group">
              <label class="form-label">Full Legal Name</label>
              <input type="text" class="form-input new-member-name" placeholder="Jane Smith" oninput="trackFieldEdit('newMembers')">
            </div>
            <div class="form-group">
              <label class="form-label">Address</label>
              <input type="text" class="form-input new-member-address" placeholder="123 Main St, City, State ZIP" oninput="trackFieldEdit('newMembers')">
            </div>
            <div class="form-group">
              <label class="form-label">Ownership Percentage</label>
              <div class="percentage-input-group">
                <input type="number" class="form-input new-member-percentage" value="25" min="0" max="100" step="0.01" oninput="trackFieldEdit('newMembers')">
                <span class="percentage-suffix">%</span>
                <div class="percentage-bar">
                  <div class="percentage-fill" style="width: 25%;"></div>
                </div>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label">
                Capital Contribution
                <span class="help-trigger">?
                  <span class="help-tooltip">The amount of money or value the new member is contributing to join the LLC.</span>
                </span>
              </label>
              <input type="text" class="form-input new-member-contribution" placeholder="$50,000" oninput="trackFieldEdit('newMembers')">
            </div>
          </div>
        </div>
        <button type="button" class="add-member-btn" onclick="addNewMember()">
          + Add Another New Member
        </button>
      </div>

      <!-- Remove Member Section -->
      <div class="builder-section conditional-section" id="removeMemberSection">
        <div class="builder-section-title">
          <span class="icon">üë§‚àí</span>
          Member Being Removed
        </div>
        <div class="form-group">
          <label class="form-label">Member Name</label>
          <input type="text" class="form-input" id="removedMemberName" placeholder="John Doe" oninput="trackFieldEdit('removedMemberName')">
        </div>
        <div class="form-group">
          <label class="form-label">Reason for Removal</label>
          <select class="form-select" id="removalReason" onchange="trackFieldEdit('removalReason')">
            <option value="voluntary">Voluntary Withdrawal</option>
            <option value="buyout">Buyout by Remaining Members</option>
            <option value="death">Death of Member</option>
            <option value="expulsion">Expulsion per Operating Agreement</option>
            <option value="other">Other</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">
            Buyout Amount (if applicable)
            <span class="help-trigger">?
              <span class="help-tooltip">The amount being paid to the departing member for their ownership interest.</span>
            </span>
          </label>
          <input type="text" class="form-input" id="buyoutAmount" placeholder="$100,000" oninput="trackFieldEdit('buyoutAmount')">
        </div>

        <div class="info-box info-box-warning">
          <div class="info-box-title">Important</div>
          <p>Removing a member typically requires updating ownership percentages for remaining members. Make sure the percentages add up to 100%.</p>
        </div>
      </div>

      <!-- Change Management Section -->
      <div class="builder-section conditional-section" id="changeManagementSection">
        <div class="builder-section-title">
          <span class="icon">üëî</span>
          Management Structure Change
        </div>
        <div class="form-group">
          <label class="form-label">Current Management Type</label>
          <div class="toggle-group">
            <button type="button" class="toggle-option active" data-value="member" onclick="setManagementType('current', 'member')">
              Member-Managed
            </button>
            <button type="button" class="toggle-option" data-value="manager" onclick="setManagementType('current', 'manager')">
              Manager-Managed
            </button>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">New Management Type</label>
          <div class="toggle-group">
            <button type="button" class="toggle-option" data-value="member" onclick="setManagementType('new', 'member')">
              Member-Managed
            </button>
            <button type="button" class="toggle-option active" data-value="manager" onclick="setManagementType('new', 'manager')">
              Manager-Managed
            </button>
          </div>
        </div>
        <div class="form-group" id="managerNameGroup">
          <label class="form-label">Manager Name(s)</label>
          <input type="text" class="form-input" id="managerNames" placeholder="Jane Smith, John Doe" oninput="trackFieldEdit('managerNames')">
          <div class="form-hint">Enter multiple names separated by commas</div>
        </div>

        <div class="info-box">
          <div class="info-box-title">Member vs Manager Managed</div>
          <p><strong>Member-Managed:</strong> All members participate in day-to-day decisions.<br>
          <strong>Manager-Managed:</strong> Designated manager(s) handle operations; members are passive investors.</p>
        </div>
      </div>

      <!-- Change Name Section -->
      <div class="builder-section conditional-section" id="changeNameSection">
        <div class="builder-section-title">
          <span class="icon">‚úèÔ∏è</span>
          LLC Name Change
        </div>
        <div class="form-group">
          <label class="form-label">Current LLC Name</label>
          <input type="text" class="form-input" id="currentLLCName" placeholder="Old Name LLC" oninput="trackFieldEdit('currentLLCName')">
        </div>
        <div class="form-group">
          <label class="form-label">New LLC Name</label>
          <input type="text" class="form-input" id="newLLCName" placeholder="New Name LLC" oninput="trackFieldEdit('newLLCName')">
        </div>

        <div class="info-box info-box-warning">
          <div class="info-box-title">Don't Forget</div>
          <p>After amending your Operating Agreement, you'll need to file an Amendment with your state's Secretary of State to officially change the LLC name.</p>
        </div>
      </div>

      <!-- Current Members / Ownership -->
      <div class="builder-section">
        <div class="builder-section-title">
          <span class="icon">üë•</span>
          Current Members & Updated Ownership
        </div>
        <p class="section-description">List all members and their ownership percentages AFTER this amendment takes effect.</p>

        <div id="currentMembersContainer">
          <div class="member-entry" data-member-id="current-1">
            <div class="member-entry-header">
              <span class="member-entry-title">Member #1</span>
              <button type="button" class="member-remove-btn" onclick="removeMember(this)">Remove</button>
            </div>
            <div class="form-group">
              <label class="form-label">Full Legal Name</label>
              <input type="text" class="form-input current-member-name" placeholder="John Smith" oninput="trackFieldEdit('currentMembers')">
            </div>
            <div class="form-group">
              <label class="form-label">Updated Ownership Percentage</label>
              <div class="percentage-input-group">
                <input type="number" class="form-input current-member-percentage" value="50" min="0" max="100" step="0.01" oninput="updateOwnershipBar(this); trackFieldEdit('currentMembers')">
                <span class="percentage-suffix">%</span>
                <div class="percentage-bar">
                  <div class="percentage-fill" style="width: 50%;"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <button type="button" class="add-member-btn" onclick="addCurrentMember()">
          + Add Another Current Member
        </button>

        <div class="info-box info-box-muted" style="margin-top: var(--space-md);">
          <div class="info-box-title">Ownership Total</div>
          <p>Total: <strong id="ownershipTotal">50%</strong> ‚Äî <span id="ownershipStatus">Must equal 100%</span></p>
        </div>
      </div>

      <!-- Effective Date -->
      <div class="builder-section">
        <div class="builder-section-title">
          <span class="icon">üìÖ</span>
          Effective Date
        </div>
        <div class="form-group">
          <input type="date" class="form-input" id="effectiveDate" onchange="trackFieldEdit('effectiveDate')">
          <div class="form-hint">When does this amendment take effect?</div>
        </div>
      </div>

      <!-- Signatures -->
      <div class="builder-section">
        <div class="builder-section-title">
          <span class="icon">‚úçÔ∏è</span>
          Signatures
        </div>
        <p class="section-description">All current members must sign to approve this amendment.</p>

        <!-- Member 1 Signature -->
        <div class="form-group">
          <label class="form-label">Member 1 Signature</label>
          <div class="signature-type-toggle">
            <button type="button" class="sig-toggle-btn active" data-party="1" data-type="draw" onclick="setSignatureType('1', 'draw')">Draw</button>
            <button type="button" class="sig-toggle-btn" data-party="1" data-type="type" onclick="setSignatureType('1', 'type')">Type</button>
          </div>
          <div class="signature-draw-container" id="sigDrawContainer1">
            <canvas id="signatureCanvas1" class="signature-canvas" width="340" height="100"></canvas>
            <button type="button" class="sig-clear-btn" onclick="clearSignature('1')">Clear</button>
          </div>
          <div class="signature-type-container" id="sigTypeContainer1" style="display: none;">
            <input type="text" class="form-input signature-typed-input" id="signatureTyped1" placeholder="Type your name" oninput="updateTypedSignature('1')">
            <div class="signature-typed-preview" id="signatureTypedPreview1"></div>
          </div>
          <div class="form-group" style="margin-top: 12px;">
            <label class="form-label">Printed Name</label>
            <input type="text" class="form-input" id="signerName1" placeholder="John Smith" oninput="trackFieldEdit('signerName1')">
          </div>
        </div>

        <!-- Member 2 Signature -->
        <div class="form-group" style="margin-top: 24px;">
          <label class="form-label">Member 2 Signature</label>
          <div class="signature-type-toggle">
            <button type="button" class="sig-toggle-btn active" data-party="2" data-type="draw" onclick="setSignatureType('2', 'draw')">Draw</button>
            <button type="button" class="sig-toggle-btn" data-party="2" data-type="type" onclick="setSignatureType('2', 'type')">Type</button>
          </div>
          <div class="signature-draw-container" id="sigDrawContainer2">
            <canvas id="signatureCanvas2" class="signature-canvas" width="340" height="100"></canvas>
            <button type="button" class="sig-clear-btn" onclick="clearSignature('2')">Clear</button>
          </div>
          <div class="signature-type-container" id="sigTypeContainer2" style="display: none;">
            <input type="text" class="form-input signature-typed-input" id="signatureTyped2" placeholder="Type your name" oninput="updateTypedSignature('2')">
            <div class="signature-typed-preview" id="signatureTypedPreview2"></div>
          </div>
          <div class="form-group" style="margin-top: 12px;">
            <label class="form-label">Printed Name</label>
            <input type="text" class="form-input" id="signerName2" placeholder="Jane Doe" oninput="trackFieldEdit('signerName2')">
          </div>
        </div>
      </div>

    </aside>

    <!-- RIGHT: Document Preview -->
    <div class="preview-panel">
      <div class="preview-toolbar">
        <div class="preview-title">
          <span class="icon">üìÑ</span>
          Live Document Preview
          <span class="preview-hint">(click any highlighted text to edit inline)</span>
        </div>
        <div class="preview-actions">
          <button class="btn btn-secondary btn-sm" id="editModeBtn" onclick="toggleFullEditMode()">
            ‚úèÔ∏è Edit Mode
          </button>
          <button class="btn btn-secondary btn-sm" onclick="copyDocument()">
            üìã Copy
          </button>
          <button class="btn btn-secondary btn-sm" onclick="downloadWord()">
            üìù .docx
          </button>
          <button class="btn btn-primary btn-sm" onclick="downloadPDF()">
            ‚¨áÔ∏è Download PDF
          </button>
        </div>
      </div>

      <div class="document-container">
        <div class="document-header">
          <div class="document-title">Amendment to LLC Operating Agreement</div>
          <div class="document-status">Ready to download</div>
        </div>
        <div class="document-body" id="documentPreview">
          <!-- Document content will be generated here -->
        </div>
      </div>

      <!-- Attorney CTA -->
      <div class="attorney-cta">
        <div class="attorney-cta-content">
          <h3>Need a more complex amendment?</h3>
          <p>Multiple ownership changes, capital calls, converting membership interests, or unique situations? I can help draft custom provisions.</p>
        </div>
        <div class="attorney-cta-price">
          <a href="mailto:owner@terms.law?subject=LLC%20Amendment%20Help" class="btn btn-primary">
            Email Me for Help ‚Üí
          </a>
          <div class="price-label" style="margin-top: 8px;">Usually $200-400 for custom amendments</div>
        </div>
      </div>

      <!-- Explanation Panel -->
      <div class="explanation-panel">
        <div class="explanation-title">
          üí° Understanding LLC Amendments
        </div>
        <div class="explanation-content">
          <p><strong>What an LLC Amendment does:</strong> Officially modifies your Operating Agreement to reflect changes in membership, ownership, management, or other key terms. It becomes part of your governing documents.</p>

          <p><strong>When you need one:</strong> Any time you add or remove members, change ownership percentages, switch between member-managed and manager-managed, update profit/loss allocations, or change your LLC name.</p>

          <div class="explanation-divider"></div>

          <div class="explanation-subtitle">Key Concepts</div>

          <p><strong>Unanimous Consent</strong> ‚Äî Most Operating Agreements require all members to approve amendments. Check your original agreement for the specific voting threshold.</p>

          <p><strong>Capital Contributions</strong> ‚Äî When adding a new member, they typically contribute cash or property in exchange for their ownership interest.</p>

          <p><strong>Buyout</strong> ‚Äî When a member leaves, remaining members usually buy out their interest based on a valuation formula in the Operating Agreement.</p>

          <p><strong>Member-Managed vs Manager-Managed</strong> ‚Äî Member-managed means all members vote on business decisions. Manager-managed means designated managers run daily operations while other members are passive.</p>

          <div class="explanation-divider"></div>

          <div class="explanation-subtitle">Common Questions</div>

          <p><strong>Do I need to file this with the state?</strong> The amendment itself is an internal document. However, if you change the LLC name or registered agent, you must also file with the Secretary of State.</p>

          <p><strong>What if members disagree?</strong> Check your Operating Agreement for dispute resolution procedures. Some allow majority vote for certain amendments; others require unanimous consent.</p>

          <p><strong>Can I amend multiple things at once?</strong> Yes. This generator lets you combine multiple changes into a single amendment document.</p>
        </div>
      </div>
    </div>
  </main>

  <!-- Scroll to Preview Indicator (Mobile) -->
  <button class="scroll-indicator" onclick="scrollToPreview()">
    üìÑ View Document ‚Üì
  </button>

  <!-- Toast Notification -->
  <div class="toast" id="toast">Copied to clipboard!</div>

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-brand">
          <strong>Sergei Tokmakov, Esq.</strong> ¬∑ California Bar #279869 ¬∑ Licensed since 2011
        </div>
        <div class="footer-links">
          <a href="mailto:owner@terms.law">Email</a>
          <a href="https://www.upwork.com/freelancers/sergeitokmakov" target="_blank">Upwork</a>
          <a href="#" onclick="Calendly.initPopupWidget({url: 'https://calendly.com/sergei-tokmakov/30-minute-zoom-meeting'});return false;">Book a Call</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // ============================================
    // STATE
    // ============================================
    let amendmentTypes = ['add-member'];
    let currentManagementType = 'member';
    let newManagementType = 'manager';
    let newMemberCount = 1;
    let currentMemberCount = 1;

    // Edit mode state (must be before updatePreview)
    let isFullEditMode = false;
    let savedDocumentHTML = '';
    let hasCustomEdits = false; // Track if user made custom edits in full edit mode

    // Signature canvases
    const signatureData = {
      '1': { type: 'draw', data: null },
      '2': { type: 'draw', data: null }
    };

    // ============================================
    // INITIALIZATION
    // ============================================
    document.addEventListener('DOMContentLoaded', function() {
      // Set today's date as default
      const today = new Date().toISOString().split('T')[0];
      document.getElementById('effectiveDate').value = today;

      // Initialize signature canvases
      initSignatureCanvas('1');
      initSignatureCanvas('2');

      updatePreview();
      updateConditionalSections();
    });

    // ============================================
    // AMENDMENT TYPE SELECTION
    // ============================================
    function toggleAmendmentType(card) {
      const type = card.dataset.type;

      if (card.classList.contains('selected')) {
        // Don't allow deselecting if it's the only one
        if (amendmentTypes.length > 1) {
          card.classList.remove('selected');
          amendmentTypes = amendmentTypes.filter(t => t !== type);
        }
      } else {
        card.classList.add('selected');
        amendmentTypes.push(type);
      }

      updateConditionalSections();
      // Track field for scroll-to-view - scroll to amendment content
      lastEditedField = 'amendmentContent';
      updatePreview();
    }

    function updateConditionalSections() {
      // Hide all conditional sections first
      document.querySelectorAll('.conditional-section').forEach(section => {
        section.classList.remove('visible');
      });

      // Show relevant sections based on selected amendment types
      if (amendmentTypes.includes('add-member')) {
        document.getElementById('addMemberSection').classList.add('visible');
      }
      if (amendmentTypes.includes('remove-member')) {
        document.getElementById('removeMemberSection').classList.add('visible');
      }
      if (amendmentTypes.includes('change-management')) {
        document.getElementById('changeManagementSection').classList.add('visible');
      }
      if (amendmentTypes.includes('change-name')) {
        document.getElementById('changeNameSection').classList.add('visible');
      }
    }

    // ============================================
    // MANAGEMENT TYPE
    // ============================================
    function setManagementType(which, type) {
      const container = which === 'current' ?
        document.querySelector('#changeManagementSection .form-group:nth-child(1)') :
        document.querySelector('#changeManagementSection .form-group:nth-child(2)');

      container.querySelectorAll('.toggle-option').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.value === type) {
          btn.classList.add('active');
        }
      });

      if (which === 'current') {
        currentManagementType = type;
      } else {
        newManagementType = type;
        // Show/hide manager name field
        document.getElementById('managerNameGroup').style.display =
          type === 'manager' ? 'block' : 'none';
      }

      updatePreview();
    }

    // ============================================
    // MEMBER MANAGEMENT
    // ============================================
    function addNewMember() {
      newMemberCount++;
      const container = document.getElementById('newMembersContainer');
      const memberHtml = `
        <div class="member-entry" data-member-id="new-${newMemberCount}">
          <div class="member-entry-header">
            <span class="member-entry-title">New Member #${newMemberCount}</span>
            <button type="button" class="member-remove-btn" onclick="removeNewMember(this)">Remove</button>
          </div>
          <div class="form-group">
            <label class="form-label">Full Legal Name</label>
            <input type="text" class="form-input new-member-name" placeholder="Jane Smith" oninput="trackFieldEdit('newMembers')">
          </div>
          <div class="form-group">
            <label class="form-label">Address</label>
            <input type="text" class="form-input new-member-address" placeholder="123 Main St, City, State ZIP" oninput="trackFieldEdit('newMembers')">
          </div>
          <div class="form-group">
            <label class="form-label">Ownership Percentage</label>
            <div class="percentage-input-group">
              <input type="number" class="form-input new-member-percentage" value="10" min="0" max="100" step="0.01" oninput="trackFieldEdit('newMembers')">
              <span class="percentage-suffix">%</span>
              <div class="percentage-bar">
                <div class="percentage-fill" style="width: 10%;"></div>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Capital Contribution</label>
            <input type="text" class="form-input new-member-contribution" placeholder="$25,000" oninput="trackFieldEdit('newMembers')">
          </div>
        </div>
      `;
      container.insertAdjacentHTML('beforeend', memberHtml);
    }

    function removeNewMember(btn) {
      btn.closest('.member-entry').remove();
      updatePreview();
    }

    function addCurrentMember() {
      currentMemberCount++;
      const container = document.getElementById('currentMembersContainer');
      const memberHtml = `
        <div class="member-entry" data-member-id="current-${currentMemberCount}">
          <div class="member-entry-header">
            <span class="member-entry-title">Member #${currentMemberCount}</span>
            <button type="button" class="member-remove-btn" onclick="removeMember(this)">Remove</button>
          </div>
          <div class="form-group">
            <label class="form-label">Full Legal Name</label>
            <input type="text" class="form-input current-member-name" placeholder="Member Name" oninput="trackFieldEdit('currentMembers')">
          </div>
          <div class="form-group">
            <label class="form-label">Updated Ownership Percentage</label>
            <div class="percentage-input-group">
              <input type="number" class="form-input current-member-percentage" value="25" min="0" max="100" step="0.01" oninput="updateOwnershipBar(this); trackFieldEdit('currentMembers')">
              <span class="percentage-suffix">%</span>
              <div class="percentage-bar">
                <div class="percentage-fill" style="width: 25%;"></div>
              </div>
            </div>
          </div>
        </div>
      `;
      container.insertAdjacentHTML('beforeend', memberHtml);
      calculateOwnershipTotal();
    }

    function removeMember(btn) {
      const entries = document.querySelectorAll('#currentMembersContainer .member-entry');
      if (entries.length > 1) {
        btn.closest('.member-entry').remove();
        calculateOwnershipTotal();
        updatePreview();
      }
    }

    function updateOwnershipBar(input) {
      const value = parseFloat(input.value) || 0;
      const bar = input.closest('.percentage-input-group').querySelector('.percentage-fill');
      bar.style.width = Math.min(value, 100) + '%';
      calculateOwnershipTotal();
    }

    function calculateOwnershipTotal() {
      let total = 0;
      document.querySelectorAll('.current-member-percentage').forEach(input => {
        total += parseFloat(input.value) || 0;
      });
      document.querySelectorAll('.new-member-percentage').forEach(input => {
        total += parseFloat(input.value) || 0;
      });

      document.getElementById('ownershipTotal').textContent = total.toFixed(2) + '%';
      const status = document.getElementById('ownershipStatus');
      if (Math.abs(total - 100) < 0.01) {
        status.textContent = '‚úì Valid';
        status.style.color = 'var(--color-success)';
      } else {
        status.textContent = 'Must equal 100%';
        status.style.color = 'var(--color-danger)';
      }
    }

    // ============================================
    // SIGNATURE HANDLING
    // ============================================
    function initSignatureCanvas(party) {
      const canvas = document.getElementById(`signatureCanvas${party}`);
      const ctx = canvas.getContext('2d');
      let isDrawing = false;
      let lastX = 0;
      let lastY = 0;

      ctx.strokeStyle = '#1a365d';
      ctx.lineWidth = 2;
      ctx.lineCap = 'round';
      ctx.lineJoin = 'round';

      function startDrawing(e) {
        isDrawing = true;
        const rect = canvas.getBoundingClientRect();
        const x = (e.clientX || e.touches[0].clientX) - rect.left;
        const y = (e.clientY || e.touches[0].clientY) - rect.top;
        lastX = x;
        lastY = y;
      }

      function draw(e) {
        if (!isDrawing) return;
        e.preventDefault();
        const rect = canvas.getBoundingClientRect();
        const x = (e.clientX || e.touches[0].clientX) - rect.left;
        const y = (e.clientY || e.touches[0].clientY) - rect.top;

        ctx.beginPath();
        ctx.moveTo(lastX, lastY);
        ctx.lineTo(x, y);
        ctx.stroke();

        lastX = x;
        lastY = y;
        signatureData[party].data = canvas.toDataURL();
        updatePreview();
      }

      function stopDrawing() {
        isDrawing = false;
      }

      canvas.addEventListener('mousedown', startDrawing);
      canvas.addEventListener('mousemove', draw);
      canvas.addEventListener('mouseup', stopDrawing);
      canvas.addEventListener('mouseout', stopDrawing);
      canvas.addEventListener('touchstart', startDrawing);
      canvas.addEventListener('touchmove', draw);
      canvas.addEventListener('touchend', stopDrawing);
    }

    function clearSignature(party) {
      const canvas = document.getElementById(`signatureCanvas${party}`);
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      signatureData[party].data = null;
      updatePreview();
    }

    function setSignatureType(party, type) {
      document.querySelectorAll(`[data-party="${party}"]`).forEach(btn => {
        btn.classList.toggle('active', btn.dataset.type === type);
      });

      document.getElementById(`sigDrawContainer${party}`).style.display = type === 'draw' ? 'block' : 'none';
      document.getElementById(`sigTypeContainer${party}`).style.display = type === 'type' ? 'block' : 'none';

      signatureData[party].type = type;
      updatePreview();
    }

    function updateTypedSignature(party) {
      const input = document.getElementById(`signatureTyped${party}`);
      const preview = document.getElementById(`signatureTypedPreview${party}`);
      preview.textContent = input.value;
      signatureData[party].data = input.value;
      updatePreview();
    }

    // ============================================
    // DOCUMENT PREVIEW
    // ============================================

    // Track which field was just edited (must be before updatePreview)
    let lastEditedField = null;

    function trackFieldEdit(fieldId) {
      // Warn user if they have custom edits that will be overwritten
      if (hasCustomEdits) {
        const proceed = confirm(
          'You have custom edits in the document preview.\n\n' +
          'Changing form inputs will regenerate the document and your custom edits will be lost.\n\n' +
          'Click OK to regenerate, or Cancel to keep your edits.'
        );
        if (!proceed) {
          return;
        }
        hasCustomEdits = false;
      }
      lastEditedField = fieldId;
      updatePreview();
    }

    function updatePreview() {
      // Don't update if in full edit mode (preserve user's custom edits)
      if (isFullEditMode) return;

      // Helper function for highlighted editable fields
      const h = (value, placeholder, fieldId) => {
        const isEmpty = !value || value.startsWith('[');
        const displayValue = isEmpty ? `[${placeholder}]` : value;
        const emptyClass = isEmpty ? ' empty' : '';
        return `<span class="doc-highlight${emptyClass}" data-field="${fieldId}" contenteditable="true">${displayValue}</span>`;
      };

      const llcName = document.getElementById('llcName').value || '';
      const llcState = document.getElementById('llcState').value || '';
      const originalDate = document.getElementById('originalDate').value ?
        formatDate(document.getElementById('originalDate').value) : '';
      const amendmentNumber = document.getElementById('amendmentNumber').value;
      const effectiveDate = document.getElementById('effectiveDate').value ?
        formatDate(document.getElementById('effectiveDate').value) : '';

      let html = `
        <div class="doc-title">
          ${amendmentNumber} Amendment to<br>Operating Agreement
        </div>
        <div class="doc-subtitle">
          of ${h(llcName, 'LLC NAME', 'llcName')}
        </div>

        <p class="doc-paragraph">
          This ${amendmentNumber} Amendment to the Operating Agreement (this "<strong>Amendment</strong>")
          of ${h(llcName, 'LLC NAME', 'llcName')}, a ${h(llcState, 'STATE', 'llcState')}
          limited liability company (the "<strong>Company</strong>"), is made and entered into effective
          as of ${h(effectiveDate, 'EFFECTIVE DATE', 'effectiveDate')} (the "<strong>Effective Date</strong>"),
          by and among the undersigned Members of the Company.
        </p>

        <p class="doc-clause-title">Recitals</p>

        <p class="doc-paragraph">
          <strong>WHEREAS</strong>, the Company was formed as a limited liability company under the laws
          of the State of ${h(llcState, 'STATE', 'llcState')};
        </p>

        <p class="doc-paragraph">
          <strong>WHEREAS</strong>, the Members entered into an Operating Agreement dated
          ${h(originalDate, 'ORIGINAL DATE', 'originalDate')} (the "<strong>Original Agreement</strong>"),
          as may have been previously amended;
        </p>

        <p class="doc-paragraph">
          <strong>WHEREAS</strong>, the Members desire to amend the Original Agreement as set forth herein; and
        </p>

        <p class="doc-paragraph">
          <strong>WHEREAS</strong>, the Members have approved this Amendment in accordance with the
          voting requirements set forth in the Original Agreement.
        </p>

        <p class="doc-paragraph">
          <strong>NOW, THEREFORE</strong>, in consideration of the mutual covenants and agreements
          contained herein, and for other good and valuable consideration, the receipt and sufficiency
          of which are hereby acknowledged, the Members agree as follows:
        </p>

        <p class="doc-clause-title">Article 1. Amendments</p>
      `;

      // Wrap amendment content for scroll-to-view
      html += `<div data-field="amendmentContent">`;

      let sectionNum = 1;

      // Add Member Amendment
      if (amendmentTypes.includes('add-member')) {
        const newMembers = [];
        document.querySelectorAll('#newMembersContainer .member-entry').forEach(entry => {
          newMembers.push({
            name: entry.querySelector('.new-member-name').value || '[NEW MEMBER NAME]',
            address: entry.querySelector('.new-member-address').value || '[ADDRESS]',
            percentage: entry.querySelector('.new-member-percentage').value || '0',
            contribution: entry.querySelector('.new-member-contribution').value || '[AMOUNT]'
          });
        });

        html += `
          <p class="doc-paragraph">
            <span class="doc-section-num">1.${sectionNum}</span> <strong>Admission of New Member(s).</strong>
            The following individual(s) or entity(ies) are hereby admitted as Member(s) of the Company,
            effective as of the Effective Date:
          </p>
          <ul class="doc-list">
        `;

        newMembers.forEach(member => {
          html += `
            <li>
              <strong>${h(member.name, 'MEMBER NAME', 'newMembers')}</strong>,
              with an address at ${h(member.address, 'ADDRESS', 'newMembers')},
              in exchange for a capital contribution of ${h(member.contribution, 'AMOUNT', 'newMembers')},
              shall hold a ${h(member.percentage + '%', 'PERCENTAGE', 'newMembers')} Membership Interest in the Company.
            </li>
          `;
        });

        html += `</ul>`;
        sectionNum++;
      }

      // Remove Member Amendment
      if (amendmentTypes.includes('remove-member')) {
        const removedName = document.getElementById('removedMemberName').value || '';
        const reason = document.getElementById('removalReason').value;
        const buyout = document.getElementById('buyoutAmount').value || '';

        const reasonText = {
          'voluntary': 'voluntary withdrawal',
          'buyout': 'buyout by the remaining Members',
          'death': 'death',
          'expulsion': 'expulsion in accordance with the Operating Agreement',
          'other': 'mutual agreement of the Members'
        }[reason];

        html += `
          <p class="doc-paragraph">
            <span class="doc-section-num">1.${sectionNum}</span> <strong>Withdrawal of Member.</strong>
            ${h(removedName, 'REMOVED MEMBER', 'removedMemberName')} is hereby removed as a Member of the Company
            due to ${reasonText}, effective as of the Effective Date.
          </p>
        `;

        if (buyout) {
          html += `
            <p class="doc-paragraph doc-indent">
              In consideration for the transfer of their Membership Interest, the remaining Members shall
              pay ${h(removedName, 'REMOVED MEMBER', 'removedMemberName')} the sum of
              ${h(buyout, 'BUYOUT AMOUNT', 'buyoutAmount')}, payable in accordance with the terms separately
              agreed upon by the parties.
            </p>
          `;
        }
        sectionNum++;
      }

      // Change Management Amendment
      if (amendmentTypes.includes('change-management')) {
        const managers = document.getElementById('managerNames').value || '';

        html += `
          <p class="doc-paragraph">
            <span class="doc-section-num">1.${sectionNum}</span> <strong>Change of Management Structure.</strong>
            The Company shall be converted from a ${currentManagementType}-managed limited liability company
            to a ${newManagementType}-managed limited liability company, effective as of the Effective Date.
          </p>
        `;

        if (newManagementType === 'manager') {
          html += `
            <p class="doc-paragraph doc-indent">
              The following individual(s) are hereby appointed as Manager(s) of the Company:
              ${h(managers, 'MANAGER NAME(S)', 'managerNames')}. The Manager(s) shall have full authority
              to manage the business and affairs of the Company in accordance with the Operating Agreement.
            </p>
          `;
        } else {
          html += `
            <p class="doc-paragraph doc-indent">
              All Members shall have the right to participate in the management of the Company in
              proportion to their Membership Interests, unless otherwise agreed by the Members.
            </p>
          `;
        }
        sectionNum++;
      }

      // Change Name Amendment
      if (amendmentTypes.includes('change-name')) {
        const currentName = document.getElementById('currentLLCName').value || '';
        const newName = document.getElementById('newLLCName').value || '';

        html += `
          <p class="doc-paragraph">
            <span class="doc-section-num">1.${sectionNum}</span> <strong>Change of Company Name.</strong>
            The name of the Company shall be changed from "${h(currentName, 'CURRENT NAME', 'currentLLCName')}"
            to "${h(newName, 'NEW NAME', 'newLLCName')}", effective as of the Effective Date or
            upon approval by the Secretary of State, whichever is later.
          </p>
        `;
        sectionNum++;
      }

      // Updated Ownership
      if (amendmentTypes.includes('add-member') || amendmentTypes.includes('remove-member') ||
          amendmentTypes.includes('change-ownership')) {
        const currentMembers = [];
        document.querySelectorAll('#currentMembersContainer .member-entry').forEach(entry => {
          const name = entry.querySelector('.current-member-name').value;
          const percentage = entry.querySelector('.current-member-percentage').value;
          if (name) {
            currentMembers.push({ name, percentage });
          }
        });

        if (currentMembers.length > 0) {
          html += `
            <p class="doc-paragraph">
              <span class="doc-section-num">1.${sectionNum}</span> <strong>Updated Membership Interests.</strong>
              Following the amendments set forth herein, the Membership Interests in the Company shall be
              held as follows:
            </p>
            <ul class="doc-list">
          `;

          currentMembers.forEach(member => {
            html += `
              <li>${h(member.name, 'MEMBER NAME', 'currentMembers')}:
              ${h(member.percentage + '%', 'PERCENTAGE', 'currentMembers')} Membership Interest</li>
            `;
          });

          // Include new members in the list if adding
          if (amendmentTypes.includes('add-member')) {
            document.querySelectorAll('#newMembersContainer .member-entry').forEach(entry => {
              const name = entry.querySelector('.new-member-name').value;
              const percentage = entry.querySelector('.new-member-percentage').value;
              if (name) {
                html += `
                  <li>${h(name, 'MEMBER NAME', 'newMembers')}:
                  ${h(percentage + '%', 'PERCENTAGE', 'newMembers')} Membership Interest</li>
                `;
              }
            });
          }

          html += `</ul>`;
          sectionNum++;
        }
      }

      // Close amendment content wrapper
      html += `</div>`;

      // Standard clauses
      html += `
        <p class="doc-clause-title">Article 2. General Provisions</p>

        <p class="doc-paragraph">
          <span class="doc-section-num">2.1</span> <strong>Effect of Amendment.</strong>
          Except as specifically amended by this Amendment, the Original Agreement shall remain
          in full force and effect. In the event of any conflict between this Amendment and the
          Original Agreement, this Amendment shall control.
        </p>

        <p class="doc-paragraph">
          <span class="doc-section-num">2.2</span> <strong>Entire Agreement.</strong>
          The Original Agreement, as amended by this Amendment, constitutes the entire agreement
          among the Members with respect to the subject matter hereof and supersedes all prior
          agreements and understandings, whether written or oral.
        </p>

        <p class="doc-paragraph">
          <span class="doc-section-num">2.3</span> <strong>Governing Law.</strong>
          This Amendment shall be governed by and construed in accordance with the laws of the
          State of ${h(llcState, 'STATE', 'llcState')}, without regard to its
          conflict of laws principles.
        </p>

        <p class="doc-paragraph">
          <span class="doc-section-num">2.4</span> <strong>Counterparts.</strong>
          This Amendment may be executed in counterparts, each of which shall be deemed an original,
          and all of which together shall constitute one and the same instrument. Electronic signatures
          shall be deemed valid and binding for all purposes.
        </p>
      `;

      // Signature Block
      html += `
        <p class="doc-paragraph" style="margin-top: 40px; text-align: center;">
          <strong>IN WITNESS WHEREOF</strong>, the undersigned Members have executed this Amendment
          as of the Effective Date.
        </p>

        <div class="doc-signature-block">
      `;

      // Signer 1
      const signer1Name = document.getElementById('signerName1').value || '';
      html += `
        <div class="doc-signature-party">
          <p><strong>MEMBER:</strong></p>
      `;

      if (signatureData['1'].type === 'draw' && signatureData['1'].data) {
        html += `<img src="${signatureData['1'].data}" class="doc-signature-image" alt="Signature">`;
      } else if (signatureData['1'].type === 'type' && signatureData['1'].data) {
        html += `<span class="doc-signature-typed">${signatureData['1'].data}</span>`;
      }

      html += `
          <div class="doc-signature-line">
            ${h(signer1Name, 'MEMBER NAME', 'signerName1')}<br>
            Date: ${h(effectiveDate, 'DATE', 'effectiveDate')}
          </div>
        </div>
      `;

      // Signer 2
      const signer2Name = document.getElementById('signerName2').value || '';
      html += `
        <div class="doc-signature-party">
          <p><strong>MEMBER:</strong></p>
      `;

      if (signatureData['2'].type === 'draw' && signatureData['2'].data) {
        html += `<img src="${signatureData['2'].data}" class="doc-signature-image" alt="Signature">`;
      } else if (signatureData['2'].type === 'type' && signatureData['2'].data) {
        html += `<span class="doc-signature-typed">${signatureData['2'].data}</span>`;
      }

      html += `
          <div class="doc-signature-line">
            ${h(signer2Name, 'MEMBER NAME', 'signerName2')}<br>
            Date: ${h(effectiveDate, 'DATE', 'effectiveDate')}
          </div>
        </div>
      `;

      html += `</div>`;

      document.getElementById('documentPreview').innerHTML = html;
      calculateOwnershipTotal();
      addHighlightClickHandlers();

      // Flash the field that was just updated and scroll to it
      if (lastEditedField) {
        // Use generic selector to find any element with data-field (not just .doc-highlight)
        const highlight = document.querySelector(`[data-field="${lastEditedField}"]`);
        if (highlight) {
          highlight.scrollIntoView({ behavior: 'smooth', block: 'center' });
          highlight.classList.add('flash');
          setTimeout(() => highlight.classList.remove('flash'), 1500);
        }
        lastEditedField = null;
      }
    }

    // ============================================
    // INLINE EDITING IN PREVIEW
    // ============================================

    // Map data-field values to form input IDs and their type
    const fieldInputMap = {
      'llcName': { inputId: 'llcName', type: 'text' },
      'llcState': { inputId: 'llcState', type: 'select' },
      'originalDate': { inputId: 'originalDate', type: 'date' },
      'amendmentNumber': { inputId: 'amendmentNumber', type: 'select' },
      'effectiveDate': { inputId: 'effectiveDate', type: 'date' },
      'removedMemberName': { inputId: 'removedMemberName', type: 'text' },
      'removalReason': { inputId: 'removalReason', type: 'select' },
      'buyoutAmount': { inputId: 'buyoutAmount', type: 'text' },
      'managerNames': { inputId: 'managerNames', type: 'text' },
      'currentLLCName': { inputId: 'currentLLCName', type: 'text' },
      'newLLCName': { inputId: 'newLLCName', type: 'text' },
      'signerName1': { inputId: 'signerName1', type: 'text' },
      'signerName2': { inputId: 'signerName2', type: 'text' },
      'newMembers': { inputId: null, type: 'complex' },
      'currentMembers': { inputId: null, type: 'complex' }
    };

    // Setup inline editing
    function setupInlineEditing() {
      const docPreview = document.getElementById('documentPreview');

      // Event delegation for blur events on contenteditable spans
      docPreview.addEventListener('blur', function(e) {
        if (e.target.classList.contains('doc-highlight') && e.target.dataset.field && !isFullEditMode) {
          handleInlineEdit(e.target);
        }
      }, true);

      // Handle Enter key to blur (submit)
      docPreview.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' && e.target.classList.contains('doc-highlight') && !isFullEditMode) {
          e.preventDefault();
          e.target.blur();
        }
      });

      // Clear placeholder text on focus
      docPreview.addEventListener('focus', function(e) {
        if (e.target.classList.contains('doc-highlight') && e.target.classList.contains('empty')) {
          const text = e.target.textContent;
          if (text.startsWith('[') && text.endsWith(']')) {
            e.target.textContent = '';
            e.target.classList.remove('empty');
          }
        }
      }, true);
    }

    // Handle inline edit - sync back to form inputs
    function handleInlineEdit(element) {
      const fieldId = element.dataset.field;
      const newValue = element.textContent.trim();
      const mapping = fieldInputMap[fieldId];

      if (!mapping) return;

      // Complex fields (members) - just show toast
      if (mapping.type === 'complex') {
        showToast('Use the form fields in the sidebar to edit member details');
        updatePreview();
        return;
      }

      const inputEl = document.getElementById(mapping.inputId);
      if (!inputEl) return;

      // Handle different input types
      if (mapping.type === 'date') {
        const parsedDate = parseDateString(newValue);
        if (parsedDate) {
          inputEl.value = parsedDate;
        } else {
          showToast('Invalid date format');
        }
      } else if (mapping.type === 'select') {
        const options = Array.from(inputEl.options);
        const matchedOption = options.find(opt =>
          opt.text.toLowerCase() === newValue.toLowerCase() ||
          opt.value.toLowerCase() === newValue.toLowerCase()
        );
        if (matchedOption) {
          inputEl.value = matchedOption.value;
        } else {
          showToast('Please select from the dropdown in the sidebar');
        }
      } else {
        // Text input - direct sync
        inputEl.value = newValue;
      }

      updatePreview();
    }

    // Parse date string like "December 8, 2025" back to "2025-12-08"
    function parseDateString(dateStr) {
      try {
        const date = new Date(dateStr);
        if (isNaN(date.getTime())) return null;
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const day = String(date.getDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
      } catch {
        return null;
      }
    }

    // Initialize inline editing
    document.addEventListener('DOMContentLoaded', setupInlineEditing);

    // ============================================
    // FULL EDIT MODE
    // ============================================
    function toggleFullEditMode() {
      const docBody = document.getElementById('documentPreview');
      const toggleBtn = document.getElementById('editModeBtn');
      const toolbar = document.querySelector('.preview-toolbar');

      if (!isFullEditMode) {
        // Enter full edit mode
        isFullEditMode = true;
        savedDocumentHTML = docBody.innerHTML;
        docBody.contentEditable = 'true';
        docBody.classList.add('full-edit-mode');
        toggleBtn.innerHTML = '‚úì Save Edits';
        toggleBtn.classList.add('active');

        // Show edit mode indicator
        showToast('Full Edit Mode: You can now freely edit any text in the document');

        // Add edit toolbar
        if (!document.getElementById('editToolbar')) {
          const editToolbar = document.createElement('div');
          editToolbar.id = 'editToolbar';
          editToolbar.className = 'edit-toolbar';
          editToolbar.innerHTML = `
            <button onclick="document.execCommand('bold')" title="Bold"><strong>B</strong></button>
            <button onclick="document.execCommand('italic')" title="Italic"><em>I</em></button>
            <button onclick="document.execCommand('underline')" title="Underline"><u>U</u></button>
            <span class="toolbar-divider"></span>
            <button onclick="document.execCommand('insertUnorderedList')" title="Bullet List">‚Ä¢</button>
            <button onclick="document.execCommand('insertOrderedList')" title="Numbered List">1.</button>
            <span class="toolbar-divider"></span>
            <button onclick="addNewParagraph()" title="Add Paragraph">¬∂+</button>
            <button onclick="addNewSection()" title="Add Section">¬ß+</button>
            <span class="toolbar-divider"></span>
            <button onclick="cancelEditMode()" class="cancel-btn" title="Cancel">‚úï Cancel</button>
          `;
          toolbar.appendChild(editToolbar);
        }
        document.getElementById('editToolbar').style.display = 'flex';
      } else {
        // Exit full edit mode and save
        saveFullEdits();
      }
    }

    function saveFullEdits() {
      const docBody = document.getElementById('documentPreview');
      const toggleBtn = document.getElementById('editModeBtn');

      isFullEditMode = false;
      hasCustomEdits = true; // Mark that user has custom edits to protect
      docBody.contentEditable = 'false';
      docBody.classList.remove('full-edit-mode');
      toggleBtn.innerHTML = '‚úèÔ∏è Edit Mode';
      toggleBtn.classList.remove('active');

      if (document.getElementById('editToolbar')) {
        document.getElementById('editToolbar').style.display = 'none';
      }

      showToast('Edits saved! Your custom changes have been preserved.');
    }

    function cancelEditMode() {
      const docBody = document.getElementById('documentPreview');
      const toggleBtn = document.getElementById('editModeBtn');

      if (savedDocumentHTML) {
        docBody.innerHTML = savedDocumentHTML;
      }

      isFullEditMode = false;
      hasCustomEdits = false; // Clear custom edits flag since we're restoring original
      docBody.contentEditable = 'false';
      docBody.classList.remove('full-edit-mode');
      toggleBtn.innerHTML = '‚úèÔ∏è Edit Mode';
      toggleBtn.classList.remove('active');

      if (document.getElementById('editToolbar')) {
        document.getElementById('editToolbar').style.display = 'none';
      }

      showToast('Changes discarded');
      addHighlightClickHandlers();
    }

    function addNewParagraph() {
      document.execCommand('insertHTML', false, '<p class="doc-paragraph">New paragraph text here...</p>');
    }

    function addNewSection() {
      const sectionHTML = `
        <p class="doc-clause-title">NEW SECTION TITLE</p>
        <p class="doc-paragraph">
          <span class="doc-section-num">X.X</span> <strong>Section Heading.</strong>
          Enter your custom section text here. You can describe additional terms,
          conditions, or provisions that apply to this amendment.
        </p>
      `;
      document.execCommand('insertHTML', false, sectionHTML);
    }

    // ============================================
    // UTILITY FUNCTIONS
    // ============================================
    function formatDate(dateStr) {
      const date = new Date(dateStr);
      const options = { year: 'numeric', month: 'long', day: 'numeric' };
      return date.toLocaleDateString('en-US', options);
    }

    function scrollToPreview() {
      document.querySelector('.preview-panel').scrollIntoView({ behavior: 'smooth' });
    }

    // Scroll to form field when clicking highlighted text in preview
    function scrollToField(fieldId) {
      const field = document.getElementById(fieldId);
      if (field) {
        field.scrollIntoView({ behavior: 'smooth', block: 'center' });
        field.focus();
        field.classList.add('field-highlight');
        setTimeout(() => field.classList.remove('field-highlight'), 2000);
      }
    }

    // Add click handlers to highlighted elements after preview updates
    function addHighlightClickHandlers() {
      document.querySelectorAll('.doc-highlight[data-field]').forEach(el => {
        el.style.cursor = 'pointer';
        el.addEventListener('click', function() {
          const fieldId = this.dataset.field;
          scrollToField(fieldId);
        });
      });
    }

    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 3000);
    }

    // ============================================
    // DOWNLOAD FUNCTIONS
    // ============================================
    function copyDocument() {
      const docBody = document.getElementById('documentPreview');
      const text = docBody.innerText;
      navigator.clipboard.writeText(text).then(() => {
        showToast('Document copied to clipboard!');
      });
    }

    function downloadWord() {
      const docBody = document.getElementById('documentPreview');
      const html = `
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="utf-8">
          <style>
            body { font-family: 'Times New Roman', serif; font-size: 12pt; line-height: 1.5; margin: 1in; }
            .doc-title { text-align: center; font-size: 14pt; font-weight: bold; margin-bottom: 12pt; }
            .doc-subtitle { text-align: center; margin-bottom: 24pt; }
            .doc-clause-title { font-weight: bold; margin-top: 18pt; margin-bottom: 12pt; text-transform: uppercase; }
            .doc-paragraph { margin-bottom: 12pt; text-align: justify; }
            .doc-indent { margin-left: 0.5in; }
            .doc-list { margin-left: 0.5in; }
            .doc-highlight { background: #fef3c7; padding: 1px 4px; }
            .doc-signature-block { margin-top: 36pt; }
            .doc-signature-party { margin-bottom: 24pt; }
            .doc-signature-line { margin-top: 36pt; border-top: 1px solid black; padding-top: 4pt; }
          </style>
        </head>
        <body>${docBody.innerHTML}</body>
        </html>
      `;

      const blob = new Blob([html], { type: 'application/msword' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'LLC-Amendment.doc';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      showToast('Word document downloaded!');
    }

    function downloadPDF() {
      showToast('Preparing PDF... (Print dialog will open)');
      window.print();
    }

    // Print styles
    const printStyles = document.createElement('style');
    printStyles.textContent = `
      @media print {
        .site-header, .hero, .builder-sidebar, .preview-toolbar, .attorney-cta,
        .explanation-panel, .site-footer, .scroll-indicator, .toast { display: none !important; }
        .builder-layout { display: block !important; }
        .preview-panel { padding: 0 !important; background: white !important; }
        .document-container { box-shadow: none !important; border: none !important; }
        .document-body { max-height: none !important; overflow: visible !important; }
        .doc-highlight { background: transparent !important; border: none !important; }
      }
    `;
    document.head.appendChild(printStyles);
  </script>

</body>
</html>
