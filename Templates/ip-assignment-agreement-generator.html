<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-901N2Y3CDZ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-901N2Y3CDZ');
    </script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IP Assignment Agreement Generator | Intellectual Property Transfer | Terms.Law</title>
  <meta name="description" content="Free IP Assignment Agreement generator for startups. Transfer intellectual property rights from founders to company. Attorney-drafted with real-time preview.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Dancing+Script:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Calendly Widget -->
  <link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
  <script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>

  <style>
    /* ============================================
       CSS VARIABLES - Professional Theme
       ============================================ */
    :root {
      --color-primary: #1e40af;
      --color-primary-dark: #1e3a8a;
      --color-primary-light: #3b82f6;
      --color-accent: #7c3aed;
      --color-accent-light: #8b5cf6;
      --color-success: #059669;
      --color-warning: #d97706;
      --color-danger: #dc2626;

      --color-bg: #f8fafc;
      --color-surface: #ffffff;
      --color-border: #e2e8f0;
      --color-border-light: #f1f5f9;
      --color-text: #0f172a;
      --color-text-secondary: #334155;
      --color-text-muted: #64748b;
      --color-text-light: #94a3b8;

      --color-dark: #0f172a;
      --color-dark-surface: #1e293b;

      /* Document preview colors */
      --doc-bg: #fefefe;
      --doc-border: #d1d5db;
      --doc-highlight: #fef3c7;
      --doc-highlight-border: #fcd34d;
      --doc-text: #1f2937;
      --doc-clause-title: #1e40af;
      --doc-section-num: #6366f1;

      --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);

      --radius-sm: 6px;
      --radius-md: 10px;
      --radius-lg: 14px;
      --radius-xl: 20px;
      --radius-full: 9999px;

      --space-xs: 0.25rem;
      --space-sm: 0.5rem;
      --space-md: 1rem;
      --space-lg: 1.5rem;
      --space-xl: 2rem;
      --space-2xl: 3rem;
      --space-3xl: 4rem;

      --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
      --font-serif: Georgia, 'Times New Roman', serif;
      --max-width: 1280px;

      --transition-fast: 150ms ease;
      --transition-base: 200ms ease;
    }

    /* ============================================
       RESET & BASE
       ============================================ */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
      -webkit-font-smoothing: antialiased;
    }

    body {
      font-family: var(--font-sans);
      font-size: 16px;
      line-height: 1.6;
      color: var(--color-text);
      background: var(--color-bg);
    }

    a {
      color: var(--color-primary);
      text-decoration: none;
      transition: color var(--transition-fast);
    }

    a:hover {
      color: var(--color-primary-dark);
    }

    .container {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 var(--space-lg);
    }

    /* ============================================
       HEADER - Dark Professional
       ============================================ */
    .site-header {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      padding: 0;
      position: sticky;
      top: 0;
      z-index: 100;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }

    .header-content {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 52px;
      max-width: var(--max-width);
      margin: 0 auto;
    }

    .header-nav {
      display: flex;
      align-items: center;
      gap: 0;
      height: 100%;
    }

    .nav-link {
      color: #94a3b8;
      font-size: 0.85rem;
      font-weight: 600;
      padding: 16px 24px;
      transition: all 150ms ease;
      text-decoration: none;
      height: 100%;
      display: flex;
      align-items: center;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      border-bottom: 2px solid transparent;
      margin-bottom: -1px;
    }

    .nav-link:hover {
      color: #ffffff;
      background: rgba(255, 255, 255, 0.05);
    }

    .nav-link.active {
      color: #ffffff;
      background: rgba(255, 255, 255, 0.08);
      border-bottom-color: #3b82f6;
    }

    .nav-link.home-logo {
      padding: 12px 20px;
      font-size: 1.1rem;
      font-weight: 800;
      letter-spacing: -0.02em;
      text-transform: none;
    }

    .nav-link.home-logo .logo-text {
      background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    /* Breadcrumb Navigation */
    .breadcrumb {
      background: var(--color-surface);
      border-bottom: 1px solid var(--color-border);
      padding: var(--space-sm) 0;
    }

    .breadcrumb-content {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      font-size: 0.85rem;
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 var(--space-lg);
    }

    .breadcrumb-link {
      color: var(--color-text-muted);
      text-decoration: none;
      transition: color var(--transition-fast);
    }

    .breadcrumb-link:hover {
      color: var(--color-primary);
    }

    .breadcrumb-separator {
      color: var(--color-text-light);
    }

    .breadcrumb-current {
      color: var(--color-text);
      font-weight: 600;
    }

    /* ============================================
       HERO
       ============================================ */
    .hero {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #312e81 100%);
      padding: var(--space-2xl) 0;
      position: relative;
      overflow: hidden;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 50%;
      height: 100%;
      background: radial-gradient(ellipse at 70% 30%, rgba(124, 58, 237, 0.15) 0%, transparent 60%);
      pointer-events: none;
    }

    .hero-content {
      position: relative;
      z-index: 1;
      max-width: 800px;
    }

    .hero-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 14px 6px 6px;
      background: rgba(124, 58, 237, 0.15);
      border: 1px solid rgba(124, 58, 237, 0.3);
      border-radius: var(--radius-full);
      font-size: 0.8rem;
      color: #c4b5fd;
      margin-bottom: var(--space-lg);
    }

    .hero-badge-icon {
      width: 22px;
      height: 22px;
      background: var(--color-accent);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      color: #fff;
    }

    .hero h1 {
      font-size: 2.25rem;
      font-weight: 800;
      color: #fff;
      line-height: 1.15;
      letter-spacing: -0.025em;
      margin-bottom: var(--space-md);
    }

    .hero h1 .highlight {
      background: linear-gradient(135deg, #a78bfa, #60a5fa);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .hero-subtitle {
      font-size: 1.1rem;
      color: #94a3b8;
      line-height: 1.7;
      margin-bottom: var(--space-lg);
      max-width: 650px;
    }

    .hero-subtitle strong {
      color: #e2e8f0;
    }

    .hero-features {
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-lg);
    }

    .hero-feature {
      display: flex;
      align-items: center;
      gap: 8px;
      color: #94a3b8;
      font-size: 0.9rem;
    }

    .hero-feature-icon {
      color: var(--color-accent-light);
    }

    /* ============================================
       MAIN LAYOUT - Split View
       ============================================ */
    .builder-layout {
      display: grid;
      grid-template-columns: 420px 1fr;
      gap: 0;
      min-height: calc(100vh - 200px);
    }

    @media (max-width: 1024px) {
      .builder-layout {
        grid-template-columns: 1fr;
      }
    }

    /* ============================================
       BUILDER SIDEBAR (Left Panel)
       ============================================ */
    .builder-sidebar {
      background: var(--color-surface);
      border-right: 1px solid var(--color-border);
      padding: var(--space-xl);
      overflow-y: auto;
      max-height: calc(100vh - 150px);
      position: sticky;
      top: 70px;
    }

    @media (max-width: 1024px) {
      .builder-sidebar {
        max-height: none;
        position: static;
      }
    }

    .builder-section {
      margin-bottom: var(--space-xl);
      padding-bottom: var(--space-xl);
      border-bottom: 1px solid var(--color-border-light);
    }

    .builder-section:last-child {
      border-bottom: none;
      margin-bottom: 0;
    }

    .builder-section-title {
      font-size: 0.75rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--color-text-muted);
      margin-bottom: var(--space-md);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    .builder-section-title .icon {
      font-size: 1rem;
    }

    /* Form Elements */
    .form-group {
      margin-bottom: var(--space-lg);
    }

    .form-label {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--color-text);
      margin-bottom: var(--space-sm);
    }

    .form-label .help-trigger {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 16px;
      height: 16px;
      background: var(--color-border);
      color: var(--color-text-muted);
      border-radius: 50%;
      font-size: 10px;
      font-weight: 700;
      cursor: help;
      position: relative;
    }

    .form-label .help-trigger:hover .help-tooltip {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .help-tooltip {
      position: absolute;
      bottom: calc(100% + 8px);
      left: 50%;
      transform: translateX(-50%) translateY(5px);
      width: 280px;
      background: var(--color-dark);
      color: #fff;
      padding: 12px 14px;
      border-radius: var(--radius-md);
      font-size: 0.8rem;
      font-weight: 400;
      line-height: 1.5;
      box-shadow: var(--shadow-xl);
      opacity: 0;
      visibility: hidden;
      transition: all var(--transition-base);
      z-index: 100;
      text-align: left;
    }

    .help-tooltip::after {
      content: '';
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      border: 6px solid transparent;
      border-top-color: var(--color-dark);
    }

    .form-input,
    .form-textarea,
    .form-select {
      width: 100%;
      padding: 12px 14px;
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      font-size: 0.95rem;
      font-family: inherit;
      transition: all var(--transition-fast);
      background: var(--color-surface);
    }

    .form-input:focus,
    .form-textarea:focus,
    .form-select:focus {
      outline: none;
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.1);
    }

    .form-textarea {
      min-height: 100px;
      resize: vertical;
    }

    .form-hint {
      font-size: 0.8rem;
      color: var(--color-text-muted);
      margin-top: 6px;
    }

    /* Info Boxes */
    .info-box {
      margin-top: 12px;
      padding: 12px 14px;
      background: linear-gradient(135deg, rgba(124, 58, 237, 0.08), rgba(59, 130, 246, 0.05));
      border-left: 3px solid var(--color-accent);
      border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
      font-size: 0.85rem;
      line-height: 1.5;
      color: var(--color-text-secondary);
    }

    .info-box-title {
      font-weight: 600;
      color: var(--color-accent);
      margin-bottom: 4px;
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.02em;
    }

    .info-box p {
      margin: 0;
    }

    /* Checkbox styles */
    .checkbox-group {
      display: flex;
      flex-direction: column;
      gap: var(--space-sm);
    }

    .checkbox-item {
      display: flex;
      align-items: flex-start;
      gap: var(--space-sm);
      cursor: pointer;
    }

    .checkbox-item input[type="checkbox"] {
      width: 18px;
      height: 18px;
      margin-top: 2px;
      accent-color: var(--color-primary);
    }

    .checkbox-item label {
      font-size: 0.9rem;
      color: var(--color-text);
      cursor: pointer;
    }

    /* ============================================
       SIGNATURE COMPONENTS
       ============================================ */
    .signature-type-toggle {
      display: flex;
      gap: 4px;
      margin-bottom: 12px;
    }

    .sig-toggle-btn {
      flex: 1;
      padding: 8px 12px;
      background: var(--color-bg);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-sm);
      font-size: 0.85rem;
      font-weight: 500;
      color: var(--color-text-muted);
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .sig-toggle-btn:hover {
      border-color: var(--color-primary-light);
    }

    .sig-toggle-btn.active {
      background: var(--color-primary);
      border-color: var(--color-primary);
      color: #fff;
    }

    .signature-draw-container {
      margin-bottom: 12px;
    }

    .signature-canvas {
      width: 100%;
      height: 100px;
      border: 2px dashed var(--color-border);
      border-radius: var(--radius-md);
      background: #fff;
      cursor: crosshair;
    }

    .signature-actions {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .signature-actions button {
      padding: 6px 12px;
      background: var(--color-bg);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-sm);
      font-size: 0.8rem;
      color: var(--color-text-muted);
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .signature-actions button:hover {
      border-color: var(--color-primary);
      color: var(--color-primary);
    }

    .signature-type-container {
      display: none;
    }

    .signature-typed-input {
      font-family: 'Dancing Script', cursive;
      font-size: 1.5rem;
      text-align: center;
    }

    .signature-typed-preview {
      font-family: 'Dancing Script', cursive;
      font-size: 1.8rem;
      color: var(--color-text);
      text-align: center;
      padding: 10px;
      min-height: 60px;
      border: 2px dashed var(--color-border);
      border-radius: var(--radius-md);
      margin-bottom: 8px;
    }

    /* ============================================
       PREVIEW PANEL (Right Side)
       ============================================ */
    .preview-panel {
      background: var(--color-bg);
      padding: var(--space-xl);
      overflow-y: auto;
    }

    .preview-toolbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--space-md);
      margin-bottom: var(--space-lg);
      flex-wrap: wrap;
    }

    .preview-title {
      font-size: 0.85rem;
      font-weight: 700;
      color: var(--color-text-muted);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    .preview-hint {
      font-size: 0.75rem;
      color: var(--color-text-muted);
      font-weight: 400;
      margin-left: var(--space-sm);
    }

    .preview-actions {
      display: flex;
      gap: var(--space-sm);
      flex-wrap: wrap;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 10px 16px;
      border-radius: var(--radius-md);
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--transition-fast);
      border: none;
    }

    .btn-primary {
      background: var(--color-primary);
      color: #fff;
    }

    .btn-primary:hover {
      background: var(--color-primary-dark);
    }

    .btn-secondary {
      background: var(--color-surface);
      color: var(--color-text);
      border: 1px solid var(--color-border);
    }

    .btn-secondary:hover {
      border-color: var(--color-primary);
      color: var(--color-primary);
    }

    .btn-sm {
      padding: 8px 12px;
      font-size: 0.85rem;
    }

    #editModeBtn.active {
      background: var(--color-primary);
      color: #fff;
      border-color: var(--color-primary);
    }

    /* Edit Toolbar */
    .edit-toolbar {
      display: none;
      align-items: center;
      gap: 4px;
      padding: 8px 12px;
      background: var(--color-dark);
      border-radius: var(--radius-md);
      margin-top: var(--space-sm);
    }

    .edit-toolbar button {
      padding: 6px 10px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: var(--radius-sm);
      color: #fff;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .edit-toolbar button:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .edit-toolbar .cancel-btn {
      background: rgba(220, 38, 38, 0.3);
      border-color: rgba(220, 38, 38, 0.5);
    }

    .edit-toolbar .cancel-btn:hover {
      background: rgba(220, 38, 38, 0.5);
    }

    .toolbar-divider {
      width: 1px;
      height: 20px;
      background: rgba(255, 255, 255, 0.2);
      margin: 0 4px;
    }

    /* Document Container */
    .document-container {
      background: var(--color-surface);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-lg);
      overflow: hidden;
    }

    .document-header {
      background: linear-gradient(135deg, var(--color-dark) 0%, var(--color-dark-surface) 100%);
      padding: var(--space-md) var(--space-lg);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .document-title {
      color: #fff;
      font-size: 0.9rem;
      font-weight: 600;
    }

    .document-status {
      font-size: 0.75rem;
      color: var(--color-accent-light);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .document-body {
      padding: 50px;
      background: var(--doc-bg);
      font-family: var(--font-serif);
      font-size: 14px;
      line-height: 1.8;
      color: var(--doc-text);
    }

    .document-body.full-edit-mode {
      outline: 3px solid var(--color-primary);
      background: #fffef8;
    }

    /* Document Typography */
    .doc-title {
      text-align: center;
      font-size: 18px;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 8px;
      color: var(--doc-text);
    }

    .doc-subtitle {
      text-align: center;
      font-size: 12px;
      color: var(--color-text-muted);
      margin-bottom: 30px;
      font-family: var(--font-sans);
    }

    .doc-section-header {
      font-size: 13px;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-top: 25px;
      margin-bottom: 12px;
      color: var(--doc-clause-title);
      border-bottom: 1px solid var(--color-border);
      padding-bottom: 6px;
    }

    .doc-paragraph {
      margin-bottom: 15px;
      text-align: justify;
    }

    .doc-paragraph.indent {
      text-indent: 40px;
    }

    .doc-list {
      margin: 15px 0 15px 25px;
      padding-left: 20px;
    }

    .doc-list li {
      margin-bottom: 10px;
      text-align: justify;
    }

    /* Highlighted editable fields */
    .doc-highlight {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      padding: 2px 6px;
      border-radius: 4px;
      border-bottom: 2px solid #f59e0b;
      font-weight: 600;
      transition: all 0.3s ease;
      cursor: text;
    }

    .doc-highlight:hover {
      background: linear-gradient(135deg, #fde68a 0%, #fcd34d 100%);
    }

    .doc-highlight:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.3);
    }

    .doc-highlight.empty {
      background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
      border-bottom-color: #ef4444;
      color: #dc2626;
    }

    /* Animation for highlighted fields */
    @keyframes highlightPulse {
      0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.7); }
      50% { transform: scale(1.02); box-shadow: 0 0 0 8px rgba(245, 158, 11, 0); }
      100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(245, 158, 11, 0); }
    }

    .field-highlight-animation {
      animation: highlightPulse 0.6s ease-out;
      background: linear-gradient(135deg, #fde047 0%, #facc15 100%) !important;
    }

    /* Highlight animation for list elements and other non-span elements */
    ul.field-highlight-animation,
    ol.field-highlight-animation,
    div.field-highlight-animation,
    p.field-highlight-animation {
      background: linear-gradient(135deg, rgba(253, 224, 71, 0.3) 0%, rgba(250, 204, 21, 0.3) 100%) !important;
      border-radius: 8px;
      padding: 10px !important;
      margin: 10px 0 !important;
    }

    /* Signature block in document */
    .doc-signature-block {
      margin-top: 40px;
      page-break-inside: avoid;
    }

    .doc-signature-line {
      display: flex;
      align-items: flex-end;
      margin-bottom: 5px;
      min-height: 50px;
    }

    .doc-signature-line .signature-label {
      width: 80px;
      font-size: 12px;
      color: var(--color-text-muted);
    }

    .doc-signature-line .signature-value {
      flex: 1;
      border-bottom: 1px solid #333;
      min-height: 40px;
      display: flex;
      align-items: flex-end;
      padding-bottom: 4px;
    }

    .doc-signature-line .signature-value.has-signature {
      border-bottom: none;
    }

    .doc-signature-line .signature-value img {
      max-height: 50px;
      max-width: 200px;
    }

    .doc-signature-line .signature-value .typed-sig {
      font-family: 'Dancing Script', cursive;
      font-size: 28px;
      color: #1a1a1a;
    }

    .doc-signature-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 60px;
      margin-top: 50px;
    }

    .doc-signature-party {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .doc-signature-party-title {
      font-weight: bold;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--color-text-muted);
      margin-bottom: 10px;
    }

    .doc-signature-field {
      border-bottom: 1px solid #333;
      min-height: 30px;
      margin-bottom: 5px;
    }

    .doc-signature-field-label {
      font-size: 11px;
      color: var(--color-text-muted);
    }

    /* Toast Notification */
    .toast {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: var(--color-dark);
      color: #fff;
      padding: 14px 20px;
      border-radius: var(--radius-md);
      font-size: 0.9rem;
      font-weight: 500;
      box-shadow: var(--shadow-xl);
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.3s ease;
      z-index: 1000;
    }

    .toast.show {
      transform: translateY(0);
      opacity: 1;
    }

    .toast.success {
      background: var(--color-success);
    }

    /* ============================================
       FOOTER
       ============================================ */
    .site-footer {
      background: var(--color-dark);
      color: #94a3b8;
      padding: var(--space-2xl) 0;
      margin-top: var(--space-3xl);
    }

    .footer-content {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 0 var(--space-lg);
      text-align: center;
    }

    .footer-brand {
      font-size: 1.25rem;
      font-weight: 800;
      margin-bottom: var(--space-sm);
    }

    .footer-brand .logo-text {
      background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .footer-tagline {
      font-size: 0.9rem;
      margin-bottom: var(--space-lg);
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: var(--space-lg);
      flex-wrap: wrap;
      margin-bottom: var(--space-lg);
    }

    .footer-links a {
      color: #94a3b8;
      font-size: 0.85rem;
      transition: color var(--transition-fast);
    }

    .footer-links a:hover {
      color: #fff;
    }

    .footer-copyright {
      font-size: 0.8rem;
      color: #64748b;
    }

    /* ============================================
       RESPONSIVE
       ============================================ */
    @media (max-width: 768px) {
      .hero h1 {
        font-size: 1.75rem;
      }

      .document-body {
        padding: 30px 20px;
      }

      .doc-signature-row {
        grid-template-columns: 1fr;
        gap: 40px;
      }
    }
  </style>
</head>
<body>

  <!-- Header -->
  <header class="site-header">
    <div class="header-content">
      <nav class="header-nav">
        <a href="https://terms.law" class="nav-link home-logo">
          <span class="logo-text">Terms.Law</span>
        </a>
        <a href="https://terms.law/#about" class="nav-link">About</a>
        <a href="contract-library-landing.html" class="nav-link active">Contracts</a>
        <a href="https://terms.law/#blog" class="nav-link">Blog</a>
        <a href="https://terms.law/#contact" class="nav-link">Contact</a>
      </nav>
    </div>
  </header>

  <!-- Breadcrumb -->
  <nav class="breadcrumb">
    <div class="breadcrumb-content">
      <a href="contract-library-landing.html" class="breadcrumb-link">Contract Library</a>
      <span class="breadcrumb-separator">‚Ä∫</span>
      <a href="contract-library-landing.html#category-startups" class="breadcrumb-link">Startups & Corporations</a>
      <span class="breadcrumb-separator">‚Ä∫</span>
      <span class="breadcrumb-current">IP Assignment Agreement</span>
    </div>
  </nav>

  <!-- Hero -->
  <section class="hero">
    <div class="container">
      <div class="hero-content">
        <div class="hero-badge">
          <span class="hero-badge-icon">üí°</span>
          Founder Essential
        </div>
        <h1>IP Assignment <span class="highlight">Agreement</span> Generator</h1>
        <p class="hero-subtitle">
          Transfer intellectual property rights from founders, contractors, or employees to your company.
          <strong>Essential for startups</strong> to ensure clean IP ownership before fundraising.
        </p>
        <div class="hero-features">
          <div class="hero-feature">
            <span class="hero-feature-icon">‚úì</span>
            Real-time preview
          </div>
          <div class="hero-feature">
            <span class="hero-feature-icon">‚úì</span>
            Covers patents, copyrights & trade secrets
          </div>
          <div class="hero-feature">
            <span class="hero-feature-icon">‚úì</span>
            Instant download
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Main Builder -->
  <main class="builder-layout">
    <!-- Left Sidebar - Form -->
    <aside class="builder-sidebar">

      <!-- Assignor Information -->
      <div class="builder-section">
        <h3 class="builder-section-title">
          <span class="icon">üë§</span> Assignor Information
        </h3>

        <div class="form-group">
          <label class="form-label">
            Assignor Full Name
            <span class="help-trigger">?
              <span class="help-tooltip">The person or entity transferring their IP rights to the company (founder, contractor, employee, etc.)</span>
            </span>
          </label>
          <input type="text" id="assignorName" class="form-input" placeholder="John Smith" oninput="trackFieldEdit('assignorName')">
        </div>

        <div class="form-group">
          <label class="form-label">Assignor Title/Role</label>
          <input type="text" id="assignorTitle" class="form-input" placeholder="Co-Founder & CTO" oninput="trackFieldEdit('assignorTitle')">
        </div>

        <div class="form-group">
          <label class="form-label">Assignor Address</label>
          <input type="text" id="assignorAddress" class="form-input" placeholder="123 Main St, San Francisco, CA 94102" oninput="trackFieldEdit('assignorAddress')">
        </div>

        <div class="form-group">
          <label class="form-label">Assignor Email</label>
          <input type="email" id="assignorEmail" class="form-input" placeholder="john@example.com" oninput="trackFieldEdit('assignorEmail')">
        </div>
      </div>

      <!-- Company Information -->
      <div class="builder-section">
        <h3 class="builder-section-title">
          <span class="icon">üè¢</span> Company Information
        </h3>

        <div class="form-group">
          <label class="form-label">Company Legal Name</label>
          <input type="text" id="companyName" class="form-input" placeholder="Acme Technologies, Inc." oninput="trackFieldEdit('companyName')">
        </div>

        <div class="form-group">
          <label class="form-label">State of Incorporation</label>
          <select id="companyState" class="form-select" onchange="trackFieldEdit('companyState')">
            <option value="">Select state...</option>
            <option value="Delaware">Delaware</option>
            <option value="California">California</option>
            <option value="New York">New York</option>
            <option value="Texas">Texas</option>
            <option value="Florida">Florida</option>
            <option value="Nevada">Nevada</option>
            <option value="Wyoming">Wyoming</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Company Address</label>
          <input type="text" id="companyAddress" class="form-input" placeholder="456 Tech Blvd, Suite 100, San Francisco, CA 94107" oninput="trackFieldEdit('companyAddress')">
        </div>
      </div>

      <!-- IP Description -->
      <div class="builder-section">
        <h3 class="builder-section-title">
          <span class="icon">üí°</span> Intellectual Property
        </h3>

        <div class="form-group">
          <label class="form-label">
            Description of IP Being Assigned
            <span class="help-trigger">?
              <span class="help-tooltip">Describe the intellectual property being transferred: software code, inventions, designs, business plans, etc. Be specific.</span>
            </span>
          </label>
          <textarea id="ipDescription" class="form-textarea" placeholder="All software code, algorithms, designs, documentation, and related materials developed for the company's mobile application platform, including but not limited to..." oninput="trackFieldEdit('ipDescription')"></textarea>
        </div>

        <div class="form-group">
          <label class="form-label">Types of IP Included</label>
          <div class="checkbox-group">
            <div class="checkbox-item">
              <input type="checkbox" id="ipPatents" checked onchange="trackFieldEdit('ipTypes')">
              <label for="ipPatents">Patents & Patent Applications</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="ipCopyrights" checked onchange="trackFieldEdit('ipTypes')">
              <label for="ipCopyrights">Copyrights (code, content, designs)</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="ipTradeSecrets" checked onchange="trackFieldEdit('ipTypes')">
              <label for="ipTradeSecrets">Trade Secrets & Know-How</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="ipTrademarks" onchange="trackFieldEdit('ipTypes')">
              <label for="ipTrademarks">Trademarks & Service Marks</label>
            </div>
          </div>
        </div>

        <div class="info-box">
          <div class="info-box-title">Why This Matters</div>
          <p>VCs and investors will conduct IP due diligence. Clean IP assignment ensures all company IP is properly owned by the company, not individuals.</p>
        </div>
      </div>

      <!-- Agreement Details -->
      <div class="builder-section">
        <h3 class="builder-section-title">
          <span class="icon">üìã</span> Agreement Details
        </h3>

        <div class="form-group">
          <label class="form-label">Effective Date</label>
          <input type="date" id="effectiveDate" class="form-input" oninput="trackFieldEdit('effectiveDate')">
        </div>

        <div class="form-group">
          <label class="form-label">
            Consideration (Payment)
            <span class="help-trigger">?
              <span class="help-tooltip">What the assignor receives in exchange for the IP. Can be cash, stock, or acknowledgment of prior compensation.</span>
            </span>
          </label>
          <select id="considerationType" class="form-select" onchange="updateConsiderationFields(); trackFieldEdit('considerationType')">
            <option value="stock">Founder Stock / Equity</option>
            <option value="cash">Cash Payment</option>
            <option value="employment">Employment Compensation</option>
            <option value="nominal">$1.00 (Nominal)</option>
          </select>
        </div>

        <div class="form-group" id="considerationAmountGroup" style="display: none;">
          <label class="form-label">Amount</label>
          <input type="text" id="considerationAmount" class="form-input" placeholder="$10,000" oninput="trackFieldEdit('considerationAmount')">
        </div>

        <div class="form-group" id="stockDetailsGroup">
          <label class="form-label">Stock Details</label>
          <input type="text" id="stockDetails" class="form-input" placeholder="100,000 shares of Common Stock" oninput="trackFieldEdit('stockDetails')">
        </div>
      </div>

      <!-- Assignor Signature -->
      <div class="builder-section">
        <h3 class="builder-section-title">
          <span class="icon">‚úçÔ∏è</span> Assignor Signature
        </h3>

        <div class="signature-type-toggle">
          <button type="button" class="sig-toggle-btn active" onclick="setSignatureType('assignor', 'draw')">Draw</button>
          <button type="button" class="sig-toggle-btn" onclick="setSignatureType('assignor', 'type')">Type</button>
        </div>

        <div id="assignorDrawContainer" class="signature-draw-container">
          <canvas id="signatureCanvasAssignor" class="signature-canvas"></canvas>
          <div class="signature-actions">
            <button type="button" onclick="clearSignature('assignor')">Clear</button>
          </div>
        </div>

        <div id="assignorTypeContainer" class="signature-type-container">
          <div class="signature-typed-preview" id="assignorTypedPreview"></div>
          <input type="text" id="assignorTypedSignature" class="form-input signature-typed-input" placeholder="Type your signature" oninput="updateTypedSignature('assignor')">
        </div>
      </div>

      <!-- Company Signature -->
      <div class="builder-section">
        <h3 class="builder-section-title">
          <span class="icon">üèõÔ∏è</span> Company Signature
        </h3>

        <div class="form-group">
          <label class="form-label">Signatory Name</label>
          <input type="text" id="companySignatoryName" class="form-input" placeholder="Jane Doe" oninput="trackFieldEdit('companySignatoryName')">
        </div>

        <div class="form-group">
          <label class="form-label">Signatory Title</label>
          <input type="text" id="companySignatoryTitle" class="form-input" placeholder="CEO" oninput="trackFieldEdit('companySignatoryTitle')">
        </div>

        <div class="signature-type-toggle">
          <button type="button" class="sig-toggle-btn active" onclick="setSignatureType('company', 'draw')">Draw</button>
          <button type="button" class="sig-toggle-btn" onclick="setSignatureType('company', 'type')">Type</button>
        </div>

        <div id="companyDrawContainer" class="signature-draw-container">
          <canvas id="signatureCanvasCompany" class="signature-canvas"></canvas>
          <div class="signature-actions">
            <button type="button" onclick="clearSignature('company')">Clear</button>
          </div>
        </div>

        <div id="companyTypeContainer" class="signature-type-container">
          <div class="signature-typed-preview" id="companyTypedPreview"></div>
          <input type="text" id="companyTypedSignature" class="form-input signature-typed-input" placeholder="Type your signature" oninput="updateTypedSignature('company')">
        </div>
      </div>

    </aside>

    <!-- Right Panel - Preview -->
    <div class="preview-panel">
      <div class="preview-toolbar">
        <div class="preview-title">
          üìÑ Live Preview
          <span class="preview-hint">Click any highlighted text to edit directly</span>
        </div>
        <div class="preview-actions">
          <button class="btn btn-secondary btn-sm" id="editModeBtn" onclick="toggleFullEditMode()">‚úèÔ∏è Edit Mode</button>
          <button class="btn btn-secondary btn-sm" onclick="copyToClipboard()">üìã Copy</button>
          <button class="btn btn-secondary btn-sm" onclick="window.print()">üñ®Ô∏è Print</button>
          <button class="btn btn-primary btn-sm" onclick="downloadDocument()">‚¨áÔ∏è Download</button>
        </div>
      </div>

      <div class="edit-toolbar" id="editToolbar">
        <button onclick="document.execCommand('bold', false, null)"><b>B</b></button>
        <button onclick="document.execCommand('italic', false, null)"><i>I</i></button>
        <button onclick="document.execCommand('underline', false, null)"><u>U</u></button>
        <span class="toolbar-divider"></span>
        <button onclick="addNewParagraph()">+ Paragraph</button>
        <button onclick="addNewSection()">+ Section</button>
        <span class="toolbar-divider"></span>
        <button class="cancel-btn" onclick="cancelEditMode()">Cancel</button>
      </div>

      <div class="document-container">
        <div class="document-header">
          <span class="document-title">IP Assignment Agreement</span>
          <span class="document-status">
            <span>‚óè</span> Live Preview
          </span>
        </div>
        <div class="document-body" id="documentPreview">
          <!-- Content generated by JavaScript -->
        </div>
      </div>
    </div>
  </main>

  <!-- SEO Content Section -->
  <section class="seo-content" style="max-width: 900px; margin: 60px auto; padding: 0 24px;">
    <h2 style="font-size: 1.75rem; color: #1e40af; margin-bottom: 16px;">What is an IP Assignment Agreement?</h2>
    <p style="font-size: 1rem; line-height: 1.7; color: #374151; margin-bottom: 24px;">An IP Assignment Agreement transfers ownership of intellectual property from one party (the assignor) to another (the assignee). For startups, this typically means founders and early contributors assign their IP rights to the company. This ensures the company‚Äînot individual founders‚Äîowns the technology, code, designs, and inventions that make the business valuable. Without proper IP assignment, your company may not actually own what you think it owns.</p>

    <h2 style="font-size: 1.75rem; color: #1e40af; margin-bottom: 16px;">Why Startups Need IP Assignment</h2>
    <p style="font-size: 1rem; line-height: 1.7; color: #374151; margin-bottom: 12px;">IP assignment is critical for several reasons:</p>
    <ul style="font-size: 1rem; line-height: 1.8; color: #374151; margin-bottom: 24px; padding-left: 24px;">
      <li><strong>Investor due diligence</strong> ‚Äî VCs and angels won't invest if founders still personally own key IP</li>
      <li><strong>Acquisition readiness</strong> ‚Äî Buyers need clean IP ownership; missing assignments kill deals</li>
      <li><strong>Founder departures</strong> ‚Äî Without assignment, departing founders take their IP with them</li>
      <li><strong>Work for hire gaps</strong> ‚Äî Copyright law's "work for hire" doctrine doesn't apply to founders or contractors without written agreements</li>
      <li><strong>Patent ownership</strong> ‚Äî Inventors own patents by default; only written assignment changes this</li>
    </ul>

    <h2 style="font-size: 1.75rem; color: #1e40af; margin-bottom: 16px;">What IP Gets Assigned?</h2>
    <p style="font-size: 1rem; line-height: 1.7; color: #374151; margin-bottom: 12px;">A comprehensive IP assignment should cover:</p>
    <ul style="font-size: 1rem; line-height: 1.8; color: #374151; margin-bottom: 24px; padding-left: 24px;">
      <li><strong>Patents and patent applications</strong> ‚Äî Inventions, utility patents, design patents, provisional applications</li>
      <li><strong>Copyrights</strong> ‚Äî Source code, documentation, designs, marketing materials, website content</li>
      <li><strong>Trade secrets</strong> ‚Äî Algorithms, processes, customer lists, business methods</li>
      <li><strong>Trademarks</strong> ‚Äî Company name, logos, product names, slogans</li>
      <li><strong>Domain names</strong> ‚Äî Website domains related to the business</li>
      <li><strong>Know-how</strong> ‚Äî Technical knowledge and expertise developed for the company</li>
    </ul>

    <h2 style="font-size: 1.75rem; color: #1e40af; margin-bottom: 16px;">When to Execute IP Assignment</h2>
    <p style="font-size: 1rem; line-height: 1.7; color: #374151; margin-bottom: 24px;">The best time to handle IP assignment is at company formation‚Äîbefore any code is written or products are developed. However, it's never too late. If your company has been operating without proper IP assignment, execute these agreements now. Many companies discover this gap during their first funding round; addressing it proactively shows investors you take IP seriously. This generator creates assignments for any stage: formation, pre-funding cleanup, or ongoing contributor onboarding.</p>

    <h2 style="font-size: 1.75rem; color: #1e40af; margin-bottom: 16px;">Consideration and "For Value Received"</h2>
    <p style="font-size: 1rem; line-height: 1.7; color: #374151; margin-bottom: 24px;">Valid IP assignment requires consideration‚Äîsomething of value exchanged for the rights transferred. For founders, this is typically their equity stake in the company. For employees, it's their salary and benefits. For contractors, it's payment for their services. The assignment should explicitly state the consideration to ensure enforceability. Our generator includes proper consideration language to create a binding transfer of rights.</p>
  </section>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="footer-content">
      <div class="footer-brand">
        <span class="logo-text">Terms.Law</span>
      </div>
      <p class="footer-tagline">Legal documents for the modern business</p>
      <div class="footer-links">
        <a href="https://terms.law/#about">About</a>
        <a href="contract-library-landing.html">Contract Library</a>
        <a href="https://terms.law/#contact">Contact</a>
        <a href="#">Privacy Policy</a>
        <a href="#">Terms of Service</a>
      </div>
      <p class="footer-copyright">¬© Terms.Law - Sergei Tokmakov, Esq. All rights reserved.</p>
    </div>
  </footer>

  <!-- Toast -->
  <div class="toast" id="toast"></div>

  <script>
    // ============================================
    // STATE VARIABLES
    // ============================================
    let lastEditedField = null;
    let isFullEditMode = false;
    let savedDocumentHTML = '';
    let hasCustomEdits = false; // Track if user made custom edits in full edit mode

    // Signature canvases
    const signatureData = {
      'assignor': { type: 'draw', data: null },
      'company': { type: 'draw', data: null }
    };

    // Field ID to input element mapping (for inline editing)
    const fieldInputMap = {
      'assignorName': 'assignorName',
      'assignorTitle': 'assignorTitle',
      'assignorAddress': 'assignorAddress',
      'assignorEmail': 'assignorEmail',
      'companyName': 'companyName',
      'companyState': 'companyState',
      'companyAddress': 'companyAddress',
      'ipDescription': 'ipDescription',
      'effectiveDate': 'effectiveDate',
      'considerationAmount': 'considerationAmount',
      'stockDetails': 'stockDetails',
      'companySignatoryName': 'companySignatoryName',
      'companySignatoryTitle': 'companySignatoryTitle'
    };

    // ============================================
    // INITIALIZATION
    // ============================================
    document.addEventListener('DOMContentLoaded', function() {
      // Set today's date as default
      const today = new Date().toISOString().split('T')[0];
      document.getElementById('effectiveDate').value = today;

      // Initialize signature canvases
      initSignatureCanvas('assignor');
      initSignatureCanvas('company');

      updatePreview();
    });

    // ============================================
    // CONSIDERATION TYPE HANDLING
    // ============================================
    function updateConsiderationFields() {
      const type = document.getElementById('considerationType').value;
      const amountGroup = document.getElementById('considerationAmountGroup');
      const stockGroup = document.getElementById('stockDetailsGroup');

      if (type === 'cash') {
        amountGroup.style.display = 'block';
        stockGroup.style.display = 'none';
      } else if (type === 'stock') {
        amountGroup.style.display = 'none';
        stockGroup.style.display = 'block';
      } else {
        amountGroup.style.display = 'none';
        stockGroup.style.display = 'none';
      }
    }

    // ============================================
    // SIGNATURE HANDLING
    // ============================================
    function initSignatureCanvas(party) {
      const canvas = document.getElementById(`signatureCanvas${party.charAt(0).toUpperCase() + party.slice(1)}`);
      const ctx = canvas.getContext('2d');

      canvas.width = canvas.offsetWidth;
      canvas.height = canvas.offsetHeight;

      let isDrawing = false;
      let lastX = 0;
      let lastY = 0;

      ctx.strokeStyle = '#1a1a1a';
      ctx.lineWidth = 2;
      ctx.lineCap = 'round';
      ctx.lineJoin = 'round';

      canvas.addEventListener('mousedown', (e) => {
        isDrawing = true;
        [lastX, lastY] = [e.offsetX, e.offsetY];
      });

      canvas.addEventListener('mousemove', (e) => {
        if (!isDrawing) return;
        ctx.beginPath();
        ctx.moveTo(lastX, lastY);
        ctx.lineTo(e.offsetX, e.offsetY);
        ctx.stroke();
        [lastX, lastY] = [e.offsetX, e.offsetY];
      });

      canvas.addEventListener('mouseup', () => {
        isDrawing = false;
        signatureData[party].data = canvas.toDataURL();
        updatePreview();
      });

      canvas.addEventListener('mouseout', () => {
        isDrawing = false;
      });

      // Touch support
      canvas.addEventListener('touchstart', (e) => {
        e.preventDefault();
        const touch = e.touches[0];
        const rect = canvas.getBoundingClientRect();
        isDrawing = true;
        lastX = touch.clientX - rect.left;
        lastY = touch.clientY - rect.top;
      });

      canvas.addEventListener('touchmove', (e) => {
        e.preventDefault();
        if (!isDrawing) return;
        const touch = e.touches[0];
        const rect = canvas.getBoundingClientRect();
        const x = touch.clientX - rect.left;
        const y = touch.clientY - rect.top;
        ctx.beginPath();
        ctx.moveTo(lastX, lastY);
        ctx.lineTo(x, y);
        ctx.stroke();
        lastX = x;
        lastY = y;
      });

      canvas.addEventListener('touchend', () => {
        isDrawing = false;
        signatureData[party].data = canvas.toDataURL();
        updatePreview();
      });
    }

    function clearSignature(party) {
      const canvas = document.getElementById(`signatureCanvas${party.charAt(0).toUpperCase() + party.slice(1)}`);
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      signatureData[party].data = null;
      updatePreview();
    }

    function setSignatureType(party, type) {
      const partyCapitalized = party.charAt(0).toUpperCase() + party.slice(1);
      const drawContainer = document.getElementById(`${party}DrawContainer`);
      const typeContainer = document.getElementById(`${party}TypeContainer`);
      const buttons = drawContainer.parentElement.querySelectorAll('.sig-toggle-btn');

      buttons.forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');

      signatureData[party].type = type;

      if (type === 'draw') {
        drawContainer.style.display = 'block';
        typeContainer.style.display = 'none';
      } else {
        drawContainer.style.display = 'none';
        typeContainer.style.display = 'block';
      }

      updatePreview();
    }

    function updateTypedSignature(party) {
      const input = document.getElementById(`${party}TypedSignature`);
      const preview = document.getElementById(`${party}TypedPreview`);
      preview.textContent = input.value;
      signatureData[party].data = input.value;
      updatePreview();
    }

    // ============================================
    // TRACK FIELD EDIT - CRITICAL FOR SCROLL + HIGHLIGHT
    // ============================================
    function trackFieldEdit(fieldId) {
      // CRITICAL: Warn user if they have custom edits that will be overwritten
      if (hasCustomEdits) {
        const proceed = confirm(
          'You have custom edits in the document preview.\n\n' +
          'Changing form inputs will regenerate the document and your custom edits will be lost.\n\n' +
          'Click OK to regenerate, or Cancel to keep your edits.'
        );
        if (!proceed) {
          return;
        }
        hasCustomEdits = false;
      }

      lastEditedField = fieldId;
      updatePreview();
    }

    // ============================================
    // UPDATE PREVIEW - Main rendering function
    // ============================================
    function updatePreview() {
      // Don't update if in full edit mode (preserve user's custom edits)
      if (isFullEditMode) return;

      // Helper function for highlighted editable fields
      const h = (value, placeholder, fieldId) => {
        const isEmpty = !value || value.startsWith('[');
        const displayValue = isEmpty ? `[${placeholder}]` : value;
        const emptyClass = isEmpty ? ' empty' : '';
        return `<span class="doc-highlight${emptyClass}" data-field="${fieldId}" contenteditable="true">${displayValue}</span>`;
      };

      // Get all form values
      const assignorName = document.getElementById('assignorName').value || '';
      const assignorTitle = document.getElementById('assignorTitle').value || '';
      const assignorAddress = document.getElementById('assignorAddress').value || '';
      const assignorEmail = document.getElementById('assignorEmail').value || '';
      const companyName = document.getElementById('companyName').value || '';
      const companyState = document.getElementById('companyState').value || '';
      const companyAddress = document.getElementById('companyAddress').value || '';
      const ipDescription = document.getElementById('ipDescription').value || '';
      const effectiveDate = document.getElementById('effectiveDate').value || '';
      const considerationType = document.getElementById('considerationType').value;
      const considerationAmount = document.getElementById('considerationAmount').value || '';
      const stockDetails = document.getElementById('stockDetails').value || '';
      const companySignatoryName = document.getElementById('companySignatoryName').value || '';
      const companySignatoryTitle = document.getElementById('companySignatoryTitle').value || '';

      // IP Types
      const ipPatents = document.getElementById('ipPatents').checked;
      const ipCopyrights = document.getElementById('ipCopyrights').checked;
      const ipTradeSecrets = document.getElementById('ipTradeSecrets').checked;
      const ipTrademarks = document.getElementById('ipTrademarks').checked;

      // Format date
      const formattedDate = effectiveDate ? new Date(effectiveDate + 'T00:00:00').toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }) : '';

      // Build consideration text
      let considerationText = '';
      switch(considerationType) {
        case 'stock':
          considerationText = stockDetails ? `the issuance of ${stockDetails}` : 'equity in the Company';
          break;
        case 'cash':
          considerationText = considerationAmount ? `the payment of ${considerationAmount}` : 'cash payment';
          break;
        case 'employment':
          considerationText = 'continued employment with the Company and the compensation received thereunder';
          break;
        case 'nominal':
          considerationText = 'One Dollar ($1.00) and other good and valuable consideration';
          break;
      }

      // Build IP types list
      let ipTypesList = [];
      if (ipPatents) ipTypesList.push('patents, patent applications, and patent rights');
      if (ipCopyrights) ipTypesList.push('copyrights and copyrightable works');
      if (ipTradeSecrets) ipTypesList.push('trade secrets, know-how, and confidential information');
      if (ipTrademarks) ipTypesList.push('trademarks, service marks, and trade dress');

      // Generate document HTML
      let html = `
        <div class="doc-title">INTELLECTUAL PROPERTY ASSIGNMENT AGREEMENT</div>
        <p class="doc-subtitle">Effective as of ${h(formattedDate, 'Effective Date', 'effectiveDate')}</p>

        <p class="doc-paragraph">
          This Intellectual Property Assignment Agreement (this "<strong>Agreement</strong>") is entered into as of the date set forth above,
          by and between ${h(companyName, 'Company Name', 'companyName')}, a ${h(companyState, 'State', 'companyState')} corporation
          (the "<strong>Company</strong>"), and ${h(assignorName, 'Assignor Name', 'assignorName')}${assignorTitle ? `, ${h(assignorTitle, 'Title', 'assignorTitle')}` : ''}
          (the "<strong>Assignor</strong>").
        </p>

        <div class="doc-section-header">Recitals</div>

        <p class="doc-paragraph">
          <strong>WHEREAS</strong>, the Assignor has developed, created, or contributed to certain intellectual property that is useful to and desired by the Company; and
        </p>

        <p class="doc-paragraph">
          <strong>WHEREAS</strong>, the Company desires to acquire all right, title, and interest in and to such intellectual property, and the Assignor desires to assign the same to the Company;
        </p>

        <p class="doc-paragraph">
          <strong>NOW, THEREFORE</strong>, in consideration of ${considerationText}, the receipt and sufficiency of which are hereby acknowledged, the parties agree as follows:
        </p>

        <div class="doc-section-header">1. Assignment of Intellectual Property</div>

        <p class="doc-paragraph">
          <strong>1.1 Assignment.</strong> The Assignor hereby irrevocably assigns, transfers, and conveys to the Company all right, title, and interest in and to the following intellectual property
          (collectively, the "<strong>Assigned IP</strong>"):
        </p>

        <p class="doc-paragraph" style="margin-left: 30px;">
          ${h(ipDescription, 'Description of IP being assigned...', 'ipDescription')}
        </p>

        <p class="doc-paragraph">
          <strong>1.2 Scope of Assignment.</strong> The assignment includes, without limitation, all:
        </p>

        <ul class="doc-list" data-field="ipTypes">
          ${ipTypesList.map(item => `<li>${item}</li>`).join('')}
          <li>any and all rights to apply for, obtain, register, and maintain the foregoing throughout the world;</li>
          <li>any and all renewals, extensions, continuations, divisions, reissues, and reexaminations thereof;</li>
          <li>any and all rights to sue for past, present, and future infringement, misappropriation, or violation thereof.</li>
        </ul>

        <div class="doc-section-header">2. Representations and Warranties</div>

        <p class="doc-paragraph">
          <strong>2.1</strong> The Assignor represents and warrants that:
        </p>

        <ul class="doc-list">
          <li>The Assignor is the sole owner of the Assigned IP and has full right, power, and authority to assign the Assigned IP;</li>
          <li>The Assigned IP is free and clear of all liens, encumbrances, security interests, and adverse claims;</li>
          <li>The Assigned IP does not infringe upon or violate any intellectual property rights or other rights of any third party;</li>
          <li>There are no pending or threatened claims, demands, or proceedings relating to the Assigned IP;</li>
          <li>The Assignor has not previously assigned, transferred, or encumbered the Assigned IP.</li>
        </ul>

        <div class="doc-section-header">3. Further Assurances</div>

        <p class="doc-paragraph">
          The Assignor agrees to execute and deliver any additional documents and take any further actions as the Company may reasonably request
          to effectuate and confirm the assignment of the Assigned IP, including without limitation:
        </p>

        <ul class="doc-list">
          <li>Executing patent applications, copyright registrations, and other filings;</li>
          <li>Providing testimony and evidence in any proceeding relating to the Assigned IP;</li>
          <li>Delivering any tangible embodiments of the Assigned IP in the Assignor's possession or control.</li>
        </ul>

        <div class="doc-section-header">4. Power of Attorney</div>

        <p class="doc-paragraph">
          The Assignor hereby irrevocably appoints the Company and its officers as the Assignor's attorney-in-fact, with full power of substitution,
          to execute any documents and take any actions necessary to evidence, perfect, or enforce the Company's rights in the Assigned IP,
          if the Assignor fails or refuses to do so within a reasonable time after request by the Company.
        </p>

        <div class="doc-section-header">5. Confidentiality</div>

        <p class="doc-paragraph">
          The Assignor agrees to maintain the confidentiality of all trade secrets and confidential information included in the Assigned IP
          and shall not disclose such information to any third party without the prior written consent of the Company.
        </p>

        <div class="doc-section-header">6. General Provisions</div>

        <p class="doc-paragraph">
          <strong>6.1 Governing Law.</strong> This Agreement shall be governed by and construed in accordance with the laws of the State of ${h(companyState || 'Delaware', 'State', 'companyState')},
          without regard to its conflicts of laws principles.
        </p>

        <p class="doc-paragraph">
          <strong>6.2 Entire Agreement.</strong> This Agreement constitutes the entire agreement between the parties with respect to the subject matter hereof
          and supersedes all prior and contemporaneous agreements and understandings.
        </p>

        <p class="doc-paragraph">
          <strong>6.3 Amendments.</strong> This Agreement may not be amended or modified except by a written instrument signed by both parties.
        </p>

        <p class="doc-paragraph">
          <strong>6.4 Severability.</strong> If any provision of this Agreement is held to be invalid or unenforceable, the remaining provisions shall continue in full force and effect.
        </p>

        <p class="doc-paragraph">
          <strong>6.5 Counterparts.</strong> This Agreement may be executed in counterparts, each of which shall be deemed an original and all of which together shall constitute one and the same instrument.
        </p>

        <p class="doc-paragraph" style="margin-top: 30px;">
          <strong>IN WITNESS WHEREOF</strong>, the parties have executed this Agreement as of the date first written above.
        </p>

        <!-- Signature Blocks -->
        <div class="doc-signature-row">
          <!-- Assignor -->
          <div class="doc-signature-party">
            <div class="doc-signature-party-title">ASSIGNOR</div>
            <div class="doc-signature-block">
              <div class="doc-signature-line">
                <span class="signature-label">Signature:</span>
                <span class="signature-value ${getSignatureHTML('assignor') ? 'has-signature' : ''}">${getSignatureHTML('assignor')}</span>
              </div>
              <div class="doc-signature-line">
                <span class="signature-label">Name:</span>
                <span class="signature-value">${assignorName || '______________________'}</span>
              </div>
              <div class="doc-signature-line">
                <span class="signature-label">Title:</span>
                <span class="signature-value">${assignorTitle || '______________________'}</span>
              </div>
              <div class="doc-signature-line">
                <span class="signature-label">Address:</span>
                <span class="signature-value" style="font-size: 11px;">${assignorAddress || '______________________'}</span>
              </div>
              <div class="doc-signature-line">
                <span class="signature-label">Email:</span>
                <span class="signature-value">${assignorEmail || '______________________'}</span>
              </div>
            </div>
          </div>

          <!-- Company -->
          <div class="doc-signature-party">
            <div class="doc-signature-party-title">COMPANY</div>
            <div class="doc-signature-block">
              <div style="font-weight: bold; margin-bottom: 15px;">${companyName || '[Company Name]'}</div>
              <div class="doc-signature-line">
                <span class="signature-label">Signature:</span>
                <span class="signature-value ${getSignatureHTML('company') ? 'has-signature' : ''}">${getSignatureHTML('company')}</span>
              </div>
              <div class="doc-signature-line">
                <span class="signature-label">Name:</span>
                <span class="signature-value">${companySignatoryName || '______________________'}</span>
              </div>
              <div class="doc-signature-line">
                <span class="signature-label">Title:</span>
                <span class="signature-value">${companySignatoryTitle || '______________________'}</span>
              </div>
              <div class="doc-signature-line">
                <span class="signature-label">Address:</span>
                <span class="signature-value" style="font-size: 11px;">${companyAddress || '______________________'}</span>
              </div>
            </div>
          </div>
        </div>
      `;

      document.getElementById('documentPreview').innerHTML = html;

      // Setup inline editing
      setupInlineEditing();

      // CRITICAL: Scroll to and highlight the edited field
      if (lastEditedField) {
        setTimeout(() => {
          const highlight = document.querySelector(`[data-field="${lastEditedField}"]`);
          if (highlight) {
            // Scroll into view
            highlight.scrollIntoView({ behavior: 'smooth', block: 'center' });

            // Add highlight animation
            highlight.classList.add('field-highlight-animation');
            setTimeout(() => {
              highlight.classList.remove('field-highlight-animation');
            }, 1500);
          }
        }, 50);
      }
    }

    function getSignatureHTML(party) {
      const sig = signatureData[party];
      if (!sig.data) return '';

      if (sig.type === 'draw') {
        return `<img src="${sig.data}" alt="Signature">`;
      } else {
        return `<span class="typed-sig">${sig.data}</span>`;
      }
    }

    // ============================================
    // INLINE EDITING
    // ============================================
    function setupInlineEditing() {
      document.querySelectorAll('.doc-highlight[contenteditable="true"]').forEach(el => {
        el.addEventListener('blur', function() {
          handleInlineEdit(this);
        });

        el.addEventListener('keydown', function(e) {
          if (e.key === 'Enter') {
            e.preventDefault();
            this.blur();
          }
        });

        el.addEventListener('focus', function() {
          // Select all text on focus for easier editing
          const selection = window.getSelection();
          const range = document.createRange();
          range.selectNodeContents(this);
          selection.removeAllRanges();
          selection.addRange(range);
        });
      });
    }

    function handleInlineEdit(element) {
      const fieldId = element.dataset.field;
      const newValue = element.textContent.trim();
      const inputId = fieldInputMap[fieldId];

      if (inputId) {
        const input = document.getElementById(inputId);
        if (input) {
          // Don't update if the value is a placeholder
          if (!newValue.startsWith('[') && !newValue.endsWith(']')) {
            input.value = newValue;
          }
        }
      }
    }

    // ============================================
    // FULL EDIT MODE
    // ============================================
    function toggleFullEditMode() {
      const docBody = document.getElementById('documentPreview');
      const toggleBtn = document.getElementById('editModeBtn');

      if (!isFullEditMode) {
        // Entering edit mode
        isFullEditMode = true;
        savedDocumentHTML = docBody.innerHTML;
        docBody.contentEditable = 'true';
        docBody.classList.add('full-edit-mode');
        toggleBtn.innerHTML = 'üíæ Save Edits';
        toggleBtn.classList.add('active');

        document.getElementById('editToolbar').style.display = 'flex';

        showToast('Edit mode enabled. Make any changes you need.');
      } else {
        // Saving edits
        saveFullEdits();
      }
    }

    function saveFullEdits() {
      const docBody = document.getElementById('documentPreview');
      const toggleBtn = document.getElementById('editModeBtn');

      isFullEditMode = false;
      hasCustomEdits = true; // CRITICAL: Mark that user has custom edits to protect
      docBody.contentEditable = 'false';
      docBody.classList.remove('full-edit-mode');
      toggleBtn.innerHTML = '‚úèÔ∏è Edit Mode';
      toggleBtn.classList.remove('active');

      if (document.getElementById('editToolbar')) {
        document.getElementById('editToolbar').style.display = 'none';
      }

      showToast('Edits saved! Your custom changes have been preserved.');
    }

    function cancelEditMode() {
      const docBody = document.getElementById('documentPreview');
      const toggleBtn = document.getElementById('editModeBtn');

      if (savedDocumentHTML) {
        docBody.innerHTML = savedDocumentHTML;
      }

      isFullEditMode = false;
      hasCustomEdits = false; // Clear flag since we're restoring original
      docBody.contentEditable = 'false';
      docBody.classList.remove('full-edit-mode');
      toggleBtn.innerHTML = '‚úèÔ∏è Edit Mode';
      toggleBtn.classList.remove('active');

      if (document.getElementById('editToolbar')) {
        document.getElementById('editToolbar').style.display = 'none';
      }

      showToast('Changes discarded');
      setupInlineEditing();
    }

    function addNewParagraph() {
      document.execCommand('insertHTML', false, '<p class="doc-paragraph">New paragraph text here...</p>');
    }

    function addNewSection() {
      document.execCommand('insertHTML', false, '<div class="doc-section-header">NEW SECTION</div><p class="doc-paragraph">Section content here...</p>');
    }

    // ============================================
    // UTILITIES
    // ============================================
    function showToast(message, type = 'default') {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.className = 'toast show' + (type === 'success' ? ' success' : '');

      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    function copyToClipboard() {
      const docBody = document.getElementById('documentPreview');
      const range = document.createRange();
      range.selectNode(docBody);
      window.getSelection().removeAllRanges();
      window.getSelection().addRange(range);
      document.execCommand('copy');
      window.getSelection().removeAllRanges();
      showToast('Document copied to clipboard!', 'success');
    }

    function downloadDocument() {
      const docBody = document.getElementById('documentPreview');
      const content = docBody.innerHTML;

      const fullHTML = `
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="UTF-8">
          <title>IP Assignment Agreement</title>
          <style>
            body { font-family: Georgia, 'Times New Roman', serif; font-size: 12pt; line-height: 1.6; max-width: 8.5in; margin: 1in auto; padding: 0 0.5in; }
            .doc-title { text-align: center; font-size: 16pt; font-weight: bold; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 8px; }
            .doc-subtitle { text-align: center; font-size: 10pt; color: #666; margin-bottom: 24px; }
            .doc-section-header { font-size: 11pt; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; margin-top: 20px; margin-bottom: 10px; border-bottom: 1px solid #ccc; padding-bottom: 4px; }
            .doc-paragraph { margin-bottom: 12px; text-align: justify; }
            .doc-list { margin: 12px 0 12px 20px; padding-left: 15px; }
            .doc-list li { margin-bottom: 8px; }
            .doc-highlight { background: #fff9c4; padding: 1px 4px; border-radius: 2px; }
            .doc-signature-row { display: flex; justify-content: space-between; margin-top: 40px; }
            .doc-signature-party { width: 45%; }
            .doc-signature-party-title { font-weight: bold; font-size: 10pt; text-transform: uppercase; margin-bottom: 15px; }
            .doc-signature-line { margin-bottom: 8px; }
            .doc-signature-line .signature-label { display: inline-block; width: 70px; font-size: 10pt; }
            .doc-signature-line .signature-value { border-bottom: 1px solid #333; min-width: 150px; display: inline-block; }
            .typed-sig { font-family: 'Brush Script MT', cursive; font-size: 18pt; }
            @media print { body { margin: 0; } }
          </style>
        </head>
        <body>${content}</body>
        </html>
      `;

      const blob = new Blob([fullHTML], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'IP-Assignment-Agreement.html';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);

      showToast('Document downloaded!', 'success');
    }
  </script>
</body>
</html>
