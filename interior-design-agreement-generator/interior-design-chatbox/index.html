<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interior Design Legal Assistant | terms.law</title>
    <meta name="description" content="Get expert legal guidance on interior design contracts, client issues, and business protection from attorney Sergei Tokmakov (CA Bar #279869).">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
    <!-- Calendly CSS and JS -->
    <link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
    <script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f8fafc;
            color: #334155;
        }
        
        .container {
            display: flex;
            height: 100vh;
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        .left-panel {
            width: 400px;
            padding: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            overflow-y: auto;
        }
        
        .right-panel {
            width: 400px;
            display: flex;
            flex-direction: column;
            background: white;
        }
        
        .chat-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e2e8f0;
            background: #1e40af;
            color: white;
        }
        
        .chat-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            max-height: calc(100vh - 200px);
        }
        
        .chat-input-area {
            padding: 1rem;
            border-top: 1px solid #e2e8f0;
            background: #f8fafc;
        }
        
        .message {
            margin-bottom: 1rem;
            padding: 0.75rem;
            border-radius: 8px;
            max-width: 85%;
        }
        
        .message.user {
            background: #3b82f6;
            color: white;
            margin-left: auto;
        }
        
        .message.assistant {
            background: #f1f5f9;
            color: #334155;
        }
        
        .message.assistant strong {
            color: #1e40af;
        }
        
        .quick-questions {
            display: grid;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .quick-question-btn {
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            background: white;
            color: #374151;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.875rem;
        }
        
        .quick-question-btn:hover {
            background: #f3f4f6;
            border-color: #3b82f6;
        }
        
        .chat-input {
            display: flex;
            gap: 0.5rem;
        }
        
        .chat-input input {
            flex: 1;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 0.875rem;
        }
        
        .chat-input button {
            padding: 0.75rem 1.5rem;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
        }
        
        .chat-input button:hover {
            background: #2563eb;
        }
        
        .chat-input button:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }
        
        .key-points h2 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #fbbf24;
        }
        
        .key-points h3 {
            font-size: 1.1rem;
            margin: 1.5rem 0 0.5rem 0;
            color: #fbbf24;
        }
        
        .key-points ul {
            list-style: none;
            padding: 0;
        }
        
        .key-points li {
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .key-points li:before {
            content: "⚖️";
            margin-right: 0.5rem;
        }
        
        .credentials {
            background: rgba(255,255,255,0.1);
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1.5rem;
        }
        
        .credentials h4 {
            color: #fbbf24;
            margin-bottom: 0.5rem;
        }
        
        .consult-btn {
            background: #16a34a;
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 1rem;
            width: 100%;
        }
        
        .consult-btn:hover {
            background: #15803d;
        }
        
        .loading {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #6b7280;
            font-style: italic;
        }
        
        .error-message {
            color: #dc2626;
            background: #fef2f2;
            padding: 0.75rem;
            border-radius: 6px;
            margin-bottom: 1rem;
            font-size: 0.875rem;
        }
        
        .info-message {
            color: #1d4ed8;
            background: #eff6ff;
            padding: 0.75rem;
            border-radius: 6px;
            margin-bottom: 1rem;
            font-size: 0.875rem;
            border-left: 3px solid #3b82f6;
        }
        
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                height: auto;
                min-height: 100vh;
            }
            
            .left-panel,
            .right-panel {
                width: 100%;
            }
            
            .left-panel {
                min-height: 300px;
            }
        }
    </style>
</head>
<body>
    <div id="root">
        <div style="display: flex; align-items: center; justify-content: center; height: 100vh; font-family: Arial, sans-serif;">
            <div style="text-align: center; padding: 20px; color: #666;">
                <div style="font-size: 1.2rem; margin-bottom: 1rem;">Loading Interior Design Legal Assistant...</div>
                <div style="font-size: 0.9rem;">This should only take a moment.</div>
            </div>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const InteriorDesignChatbox = () => {
            const [messages, setMessages] = useState([]);
            const [inputValue, setInputValue] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const [showQuickQuestions, setShowQuickQuestions] = useState(true);
            const [error, setError] = useState('');
            const messagesEndRef = useRef(null);

            const quickQuestions = [
                "Can I terminate a client who rejects 80% of my designs? (Sections 5A.iii, 28A)",
                "How do I legally protect my design fee if client cancels? (Sections 8E, 28C)",
                "What should I do about clients who bypass me to contact vendors? (Section 5A.vi)",
                "How can I enforce payment terms without going to court? (Sections 8A, 9A-B)",
                "Am I required to provide unlimited revisions? (Sections 12B, 3B.a)",
                "Can I keep client deposits if they breach the contract? (Sections 28C, 8E)"
            ];

            const fallbackResponses = {
                "Can I terminate a client who rejects 80% of my designs? (Sections 5A.iii, 28A)": "<strong>Material Breach Protection for Serial Rejection</strong><br><br>According to Section 5A.iii of a properly drafted interior design agreement, <strong>rejecting more than 80% of presented options without reasonable cause constitutes material breach</strong>. This isn't about being harsh - it's about protecting your business from clients who waste your time and resources.<br><br><strong>How This Protection Works:</strong><br>• You track all selections presented vs. approved<br>• Once 80% rejection threshold is reached, you can terminate immediately<br>• You retain all fees paid and aren't required to continue wasting time<br>• Section 28A allows termination with written notice after material breach<br><br><strong>Real-World Application:</strong><br>I've seen designers present 240+ options over months, only to have clients reject 90% without constructive feedback. This clause prevents that scenario - it forces clients to engage constructively or face consequences.<br><br><strong>Key Documentation:</strong><br>Always track: selection date, client response, reason for rejection. This creates the evidence trail you need if termination becomes necessary.",

                "How do I legally protect my design fee if client cancels? (Sections 8E, 28C)": "<strong>Design Fee Protection Strategy</strong><br><br>Section 8E establishes that <strong>all design fees are non-refundable</strong>, while Section 28C ensures you're compensated for work completed even if the client terminates the project. This dual protection is essential for interior design businesses.<br><br><strong>Legal Foundation:</strong><br>• Design work is intellectual property - once created, it has value<br>• Your time and expertise cannot be 'returned' like physical goods<br>• Industry standard recognizes design fees as earned upon completion<br><br><strong>Practical Implementation:</strong><br>• Always collect payment before beginning work (Section 8A)<br>• Document all work performed with timestamps and deliverables<br>• Use clear language that design fees compensate intellectual property creation<br><br><strong>If Client Disputes:</strong><br>Point to specific contract language and document the work completed. Most clients understand they can't return a completed design like they would return a sweater.",

                "What should I do about clients who bypass me to contact vendors? (Section 5A.vi)": "<strong>Vendor Relationship Protection</strong><br><br>Section 5A.vi makes <strong>unauthorized vendor contact a material breach</strong> allowing immediate termination. This protects your professional relationships and prevents clients from undermining your business model.<br><br><strong>Why This Matters:</strong><br>• Maintains your vendor relationships and commission structure<br>• Prevents client confusion about specifications and pricing<br>• Protects your professional reputation with trade partners<br>• Ensures proper project coordination and accountability<br><br><strong>Immediate Response Steps:</strong><br>1. Send written notice citing Section 5A.vi violation<br>2. Demand all vendor communications go through you<br>3. Document the unauthorized contact for your records<br>4. If behavior continues, exercise termination rights under Section 28A<br><br><strong>Professional Boundary Setting:</strong><br>Explain that vendor relationships are part of your professional service - clients wouldn't bypass their attorney to negotiate with opposing counsel, and the same principle applies here."
            };

            const moreFallbackResponses = {
                "How can I enforce payment terms without going to court? (Sections 8A, 9A-B)": "<strong>Payment Enforcement Without Litigation</strong><br><br>Sections 8A and 9A-B create a structured approach to payment enforcement that usually resolves issues without court involvement. <strong>Most clients pay when they understand the consequences are real and immediate.</strong><br><br><strong>Progressive Enforcement Strategy:</strong><br>• Section 8A: Payment due upon receipt (no 30-day delay)<br>• Section 9A: 1.5% monthly interest on overdue amounts<br>• Section 9B: Service suspension after 15 days overdue<br>• Section 9C: Client pays collection costs including attorney fees<br><br><strong>Practical Steps:</strong><br>1. Send payment reminder at day 10<br>2. Add interest charges at day 15<br>3. Suspend all services until payment received<br>4. Send demand letter referencing specific contract sections<br>5. Most clients pay rather than risk further consequences<br><br><strong>Success Rate:</strong><br>In my experience, about 85% of payment issues resolve when clients see you have a professional, legally-backed collection process rather than just asking nicely.",

                "Am I required to provide unlimited revisions? (Sections 12B, 3B.a)": "<strong>Revision Limits and Additional Fee Structure</strong><br><br>Absolutely not. Section 12B limits you to <strong>2 rounds of revisions per item</strong>, while Section 3B.a establishes additional fees for work beyond the included scope. This prevents scope creep and ensures you're compensated for extra work.<br><br><strong>Legal Foundation:</strong><br>• Revisions beyond the agreed scope constitute additional services<br>• You're not required to work indefinitely for the same fee<br>• Client's changing preferences don't create unlimited obligations for you<br><br><strong>How to Handle Revision Requests:</strong><br>• Track revision rounds per item carefully<br>• After 2 rounds, explain additional revisions require change order<br>• Bill additional revisions at your current hourly rate<br>• Section 12C requires client approval for all changes beyond original scope<br><br><strong>Common Client Response:</strong><br>Most clients respect revision limits when they understand you're protecting both parties from endless changes that kill project momentum and profitability.",

                "Can I keep client deposits if they breach the contract? (Sections 28C, 8E)": "<strong>Deposit Retention Rights After Breach</strong><br><br>Yes, Section 28C allows you to retain all fees paid when client breaches, and Section 8E makes design fees non-refundable regardless. <strong>This protects your business from clients who cancel after you've invested significant time and resources.</strong><br><br><strong>Legal Justification:</strong><br>• Deposits compensate for opportunity cost and business disruption<br>• Design work performed has value even if project doesn't complete<br>• Breach by client shouldn't result in financial penalty for designer<br>• Industry standard recognizes deposits as earned compensation<br><br><strong>Documentation Requirements:</strong><br>• Maintain detailed records of work performed<br>• Document all client communications and decisions<br>• Keep evidence of material breach (per Sections 5A.i through 5A.vi)<br>• Show how client's actions prevented project completion<br><br><strong>Professional Best Practice:</strong><br>Most deposit disputes resolve when you can demonstrate specific work performed and explain that deposits compensate intellectual property creation, not just future services."
            };

            // Merge fallback responses
            Object.assign(fallbackResponses, moreFallbackResponses);

            const scrollToBottom = () => {
                messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
            };

            useEffect(() => {
                scrollToBottom();
            }, [messages]);

            const sendMessage = async (message) => {
                const userMessage = { role: 'user', content: message };
                setMessages(prev => [...prev, userMessage]);
                setInputValue('');
                setIsLoading(true);
                setError('');

                try {
                    const response = await fetch('https://template-generator-aob3.vercel.app/api/interior-design-chat', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            messages: [...messages, userMessage],
                        }),
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const data = await response.json();
                    const assistantMessage = { role: 'assistant', content: data.response };
                    setMessages(prev => [...prev, assistantMessage]);
                    
                    // Show notice if chat is getting long (more than 8 messages)
                    if (messages.length > 8) {
                        setTimeout(() => {
                            setError('📝 Chat history is getting long. For complex issues requiring extensive discussion, consider scheduling a consultation for personalized guidance.');
                        }, 2000);
                        
                        // Clear the notice after 10 seconds
                        setTimeout(() => {
                            setError('');
                        }, 12000);
                    }
                } catch (error) {
                    console.error('Error:', error);
                    
                    // Use fallback response if available
                    const fallbackResponse = fallbackResponses[message];
                    if (fallbackResponse) {
                        const assistantMessage = { role: 'assistant', content: fallbackResponse };
                        setMessages(prev => [...prev, assistantMessage]);
                    } else {
                        setError('Unable to get response. Please try again or schedule a consultation for personalized assistance.');
                    }
                } finally {
                    setIsLoading(false);
                }
            };

            const handleQuickQuestion = (question) => {
                setShowQuickQuestions(false);
                sendMessage(question);
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                if (inputValue.trim()) {
                    setShowQuickQuestions(false);
                    sendMessage(inputValue.trim());
                }
            };

            const clearChat = () => {
                setMessages([]);
                setShowQuickQuestions(true);
                setError('');
            };

            return (
                <div className="container">
                    {/* Left Panel - Key Points */}
                    <div className="left-panel">
                        <div className="key-points">
                            <h2>Interior Design Legal Protection</h2>
                            <p style={{marginBottom: '1.5rem', opacity: 0.9}}>
                                Get expert guidance on contracts, difficult clients, and business protection.
                            </p>
                            
                            <h3>Contract Protection Areas</h3>
                            <ul>
                                <li>Material breach and client termination rights</li>
                                <li>Payment terms and late fee enforcement</li>
                                <li>Scope creep prevention and change orders</li>
                                <li>Revision limits and additional fee structures</li>
                                <li>Vendor relationship and boundary protection</li>
                                <li>Intellectual property and design ownership</li>
                            </ul>
                            
                            <h3>Common Client Issues</h3>
                            <ul>
                                <li>Serial rejection of design selections</li>
                                <li>Unrealistic budget expectations</li>
                                <li>Delayed decision-making and approvals</li>
                                <li>Unauthorized vendor communications</li>
                                <li>Payment delays and refund demands</li>
                                <li>Excessive revision requests</li>
                            </ul>
                            
                            <div className="credentials">
                                <h4>Attorney Sergei Tokmakov</h4>
                                <p>CA Bar #279869 • Licensed since 2011</p>
                                <p>13+ years specializing in interior design contracts and business protection</p>
                                
                                <button 
                                    className="consult-btn"
                                    onClick={() => window.Calendly?.initPopupWidget({url: 'https://calendly.com/sergei-tokmakov/30-minute-zoom-meeting?hide_gdpr_banner=1'})}
                                >
                                    Schedule Legal Consultation
                                </button>
                            </div>
                        </div>
                    </div>

                    {/* Right Panel - Chat Interface */}
                    <div className="right-panel">
                        <div className="chat-header">
                            <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}>
                                <div>
                                    <h2>Interior Design Legal Assistant</h2>
                                    <p>Ask about contracts, client issues, and legal protection strategies</p>
                                </div>
                                {messages.length > 0 && (
                                    <button 
                                        onClick={clearChat}
                                        style={{
                                            background: 'rgba(255,255,255,0.2)',
                                            color: 'white',
                                            border: '1px solid rgba(255,255,255,0.3)',
                                            padding: '0.5rem 1rem',
                                            borderRadius: '4px',
                                            cursor: 'pointer',
                                            fontSize: '0.875rem'
                                        }}
                                    >
                                        Clear Chat
                                    </button>
                                )}
                            </div>
                        </div>
                        
                        <div className="chat-messages">
                            {messages.length === 0 && (
                                <div className="message assistant">
                                    <div dangerouslySetInnerHTML={{
                                        __html: "<strong>Welcome!</strong> I'm here to help with interior design legal questions.<br><br>I can advise on <strong>contract protection, difficult clients, payment issues, and business risk management</strong> based on 13+ years of experience with interior design agreements.<br><br>Choose a quick question below or ask your own specific situation."
                                    }} />
                                </div>
                            )}
                            
                            {showQuickQuestions && (
                                <div className="quick-questions">
                                    {quickQuestions.map((question, index) => (
                                        <button
                                            key={index}
                                            className="quick-question-btn"
                                            onClick={() => handleQuickQuestion(question)}
                                        >
                                            {question}
                                        </button>
                                    ))}
                                </div>
                            )}
                            
                            {messages.map((message, index) => (
                                <div key={index} className={`message ${message.role}`}>
                                    {message.role === 'assistant' ? (
                                        <div dangerouslySetInnerHTML={{ __html: message.content }} />
                                    ) : (
                                        message.content
                                    )}
                                </div>
                            ))}
                            
                            {isLoading && (
                                <div className="message assistant">
                                    <div className="loading">
                                        <span>⚖️</span>
                                        <span>Analyzing your legal question...</span>
                                    </div>
                                </div>
                            )}
                            
                            {error && (
                                <div className={error.startsWith('📝') ? 'info-message' : 'error-message'}>
                                    {error}
                                </div>
                            )}
                            
                            <div ref={messagesEndRef} />
                        </div>
                        
                        <div className="chat-input-area">
                            <form onSubmit={handleSubmit} className="chat-input">
                                <input
                                    type="text"
                                    value={inputValue}
                                    onChange={(e) => setInputValue(e.target.value)}
                                    placeholder="Ask about your interior design legal question..."
                                    disabled={isLoading}
                                />
                                <button type="submit" disabled={isLoading || !inputValue.trim()}>
                                    Send
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<InteriorDesignChatbox />, document.getElementById('root'));
    </script>
</body>
</html>