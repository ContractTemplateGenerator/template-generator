<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Terms of Use Clause Generators</title>
  <style>
    /* Base Styles - WordPress Compatible */
    .clause-generator {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
      max-width: 100%;
      margin: 0 auto 20px;
      color: #333;
      box-sizing: border-box;
    }
    
    .clause-generator * {
      box-sizing: border-box;
    }
    
    /* Two-column layout */
    .generator-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }
    
    .form-column {
      flex: 1;
      min-width: 300px;
      max-height: 550px;
      overflow-y: auto;
      padding-right: 10px;
    }
    
    .preview-column {
      flex: 1;
      min-width: 300px;
    }
    
    /* Form Elements - Compact */
    .form-group {
      margin-bottom: 10px;
    }
    
    .form-label {
      display: block;
      font-weight: 500;
      margin-bottom: 3px;
      font-size: 14px;
    }
    
    .form-input, 
    .form-select, 
    .form-textarea {
      width: 100%;
      padding: 6px 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
      line-height: 1.3;
    }
    
    .form-select {
      height: 32px;
    }
    
    .form-hint {
      font-size: 11px;
      color: #666;
      margin-top: 2px;
    }
    
    /* Radio Groups */
    .radio-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 8px;
    }
    
    .radio-item {
      display: flex;
      align-items: center;
      margin-bottom: 0;
    }
    
    .radio-item input[type="radio"] {
      margin-right: 4px;
    }
    
    .radio-label {
      font-size: 13px;
    }
    
    /* Checkbox Groups */
    .checkbox-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-bottom: 8px;
    }
    
    .checkbox-item {
      display: flex;
      align-items: flex-start;
      margin-bottom: 0;
    }
    
    .checkbox-item input[type="checkbox"] {
      margin-right: 6px;
      margin-top: 2px;
    }
    
    .checkbox-label {
      font-size: 13px;
    }
    
    /* Section Headers - Compact */
    .section-header {
      font-size: 15px;
      font-weight: 600;
      color: #2c3e50;
      margin: 12px 0 8px;
      padding-bottom: 4px;
      border-bottom: 1px solid #eee;
    }
    
    /* Preview Section */
    .preview-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      border-bottom: 2px solid #2c3e50;
      padding-bottom: 6px;
    }
    
    .preview-title {
      font-size: 15px;
      font-weight: 600;
      color: #2c3e50;
    }
    
    .preview-note {
      font-size: 11px;
      color: #666;
      font-style: italic;
    }
    
    .preview-content {
      background-color: #fff;
      border: 1px solid #ddd;
      border-radius: 4px;
      padding: 12px;
      margin-bottom: 10px;
      font-size: 14px;
      line-height: 1.4;
      height: 450px;
      overflow-y: auto;
    }
    
    .preview-content p {
      margin-bottom: 8px;
      margin-top: 8px;
    }
    
    .highlight {
      background-color: #ffff00;
      transition: background-color 0.5s ease-in-out;
    }
    
    /* Copy and Word Doc Buttons Container */
    .button-container {
      display: flex;
      gap: 10px;
    }
    
    /* Copy Button */
    .copy-btn {
      flex: 1;
      padding: 8px;
      background-color: #2c3e50;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer !important;
      text-align: center;
      text-decoration: none;
      opacity: 0.6 !important;
      pointer-events: auto !important;
    }
    
    .copy-btn:hover {
      background-color: #1a252f;
    }
    
    .copy-icon {
      display: inline-block;
      margin-right: 6px;
      vertical-align: middle;
    }
    
    /* Industry Presets */
    .industry-presets {
      margin-bottom: 15px;
      padding: 12px;
      background: #f5f7fa;
      border-radius: 6px;
      border: 1px solid #e1e5e9;
    }
    
    .preset-title {
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 14px;
      color: #2c3e50;
    }
    
    .preset-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    
    .preset-btn {
      padding: 6px 12px;
      font-size: 13px;
      background: white;
      border: 1px solid #cfd8dc;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .preset-btn:hover {
      background: #ecf0f1;
      border-color: #b0bec5;
    }
    
    /* Tooltip Styles - Improved and Fixed */
    .tooltip-container {
      position: relative;
      display: inline-block;
    }
    
    .tooltip-trigger {
      display: inline-block;
      margin-left: 5px;
      width: 16px;
      height: 16px;
      background: #3498db;
      color: white;
      font-size: 10px;
      line-height: 16px;
      text-align: center;
      border-radius: 50%;
      cursor: help;
    }
    
    .tooltip-content {
      visibility: hidden;
      position: absolute;
      background: #2c3e50;
      color: white;
      padding: 8px 12px;
      border-radius: 4px;
      width: 250px;
      font-size: 12px;
      line-height: 1.4;
      z-index: 100;
      box-shadow: 0 3px 8px rgba(0,0,0,0.15);
      left: 100%;
      transform: translateX(-25px);
      top: 50%;
      margin-top: 0;
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    /* Position tooltips to the right and center vertically */
    .tooltip-container:hover .tooltip-content {
      visibility: visible;
      opacity: 1;
    }
    
    /* Ensure tooltips don't overflow on small screens */
    @media (max-width: 768px) {
      .tooltip-content {
        width: 200px;
        left: auto;
        right: 0;
        transform: none;
      }
    }
    
    /* Jurisdiction Warning */
    .jurisdiction-warning {
      display: none;
      margin-top: 10px;
      padding: 8px 12px;
      background: #fff9e6;
      border-left: 3px solid #f1c40f;
      font-size: 12px;
      line-height: 1.4;
    }
    
    /* Risk Indicators */
    .risk-container {
      position: relative;
      display: inline-block;
    }
    
    .risk-indicator {
      display: inline-block;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      margin-left: 8px;
    }
    
    .risk-low {
      background-color: #27ae60;
    }
    
    .risk-medium {
      background-color: #f39c12;
    }
    
    .risk-high {
      background-color: #e74c3c;
    }
    
    .risk-tooltip {
      visibility: hidden;
      position: absolute;
      background: #2c3e50;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 10px;
      z-index: 100;
      white-space: nowrap;
      left: 20px;
      top: 0;
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .risk-container:hover .risk-tooltip {
      visibility: visible;
      opacity: 1;
    }
    
    /* Tab Navigation Styles - Fixed */
    .tools-tabs-container {
      margin-bottom: 20px;
    }
    
    .tools-tabs {
      display: flex;
      flex-wrap: wrap;
      border-bottom: 1px solid #ddd;
      margin-bottom: 20px;
      list-style: none;
      padding-left: 0;
    }
    
    .tools-tab {
      padding: 10px 15px;
      cursor: pointer;
      border: 1px solid transparent;
      border-bottom: none;
      margin-right: 5px;
      border-radius: 4px 4px 0 0;
      font-weight: 500;
      color: #555;
      list-style: none;
      background-color: transparent;
    }
    
    .tools-tab:hover {
      background-color: #f5f5f5;
    }
    
    .tools-tab.active {
      background-color: white;
      border-color: #ddd;
      color: #2c3e50;
      margin-bottom: -1px;
      padding-bottom: 11px;
    }
    
    .tools-tab-content {
      display: none;
    }
    
    .tools-tab-content.active {
      display: block;
    }
    
    /* Coming Soon Tab Styles */
    .coming-soon-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 300px;
      padding: 20px;
      text-align: center;
      background: #f5f5f5;
      border-radius: 8px;
    }
    
    .coming-soon-icon {
      font-size: 48px;
      color: #3498db;
      margin-bottom: 20px;
    }
    
    .coming-soon-title {
      font-size: 24px;
      font-weight: bold;
      color: #2c3e50;
      margin-bottom: 10px;
    }
    
    .coming-soon-description {
      font-size: 16px;
      color: #555;
      max-width: 600px;
      margin-bottom: 20px;
    }
    
    .coming-soon-notification {
      display: inline-block;
      padding: 8px 16px;
      background: #ecf0f1;
      border: 1px solid #bdc3c7;
      border-radius: 4px;
      font-size: 14px;
      color: #7f8c8d;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .generator-container {
        flex-direction: column;
      }
      
      .form-column {
        max-height: none;
        overflow-y: visible;
      }
      
      .preview-content {
        height: 300px;
      }
    }
    
    /* Paywall related styles */
    .tou-tools-paywall-container {
      position: relative;
      margin-bottom: 40px;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 20px;
      background: #f9f9f9;
    }
    
    .tou-tools-header {
      text-align: center;
      margin-bottom: 20px;
    }
    
    .tou-tools-header h3 {
      font-size: 22px;
      color: #2c3e50;
      margin-bottom: 10px;
    }
    
    .tou-tools-header p {
      color: #555;
      max-width: 800px;
      margin: 0 auto;
    }
    
    /* Fixed paywall modal styles */
    .paywall-overlay {
      display: none; /* Initially hidden, will be shown via JS */
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 90%;
      max-width: 500px;
      background: white;
      z-index: 1000;
      padding: 25px;
      text-align: center;
      border-radius: 8px;
      box-shadow: 0 5px 30px rgba(0,0,0,0.3);
    }
    
    /* Close button for payment modal */
    .paywall-close {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 25px;
      height: 25px;
      background: #f1f1f1;
      border-radius: 50%;
      text-align: center;
      line-height: 25px;
      font-size: 16px;
      cursor: pointer;
      z-index: 1001;
    }
    
    .paywall-close:hover {
      background: #e1e1e1;
    }
    
    /* Semi-transparent background overlay */
    .paywall-backdrop {
      display: none; /* Initially hidden, will be shown via JS */
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.7);
      z-index: 999;
    }
    
    .premium-badge {
      position: absolute;
      top: 20px;
      right: 20px;
      background: #2c3e50;
      color: white;
      padding: 5px 10px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: bold;
      display: none;
      z-index: 50;
    }
    
    .lock-icon {
      font-size: 40px;
      margin-bottom: 15px;
      color: #2c3e50;
    }
    
    .paywall-title {
      font-size: 22px;
      font-weight: bold;
      margin-bottom: 10px;
      color: #2c3e50;
    }
    
    .paywall-description {
      margin-bottom: 15px;
      max-width: 400px;
      font-size: 14px;
    }
    
    .features-list {
      text-align: left;
      margin: 0 auto 20px;
      max-width: 400px;
      font-size: 14px;
    }
    
    .features-list li {
      margin-bottom: 6px;
      position: relative;
      padding-left: 22px;
    }
    
    .features-list li:before {
      content: "✓";
      position: absolute;
      left: 0;
      color: #27ae60;
      font-weight: bold;
    }
    
    .payment-container {
      margin-bottom: 15px;
    }
    
    /* Transaction ID Recovery Section */
    .recovery-section {
      margin-top: 20px;
      padding: 15px;
      background: #f5f5f5;
      border-radius: 8px;
      text-align: left;
      display: flex;
      flex-direction: column;
      gap: 10px;
      width: 100%;
    }
    
    .recovery-title {
      font-weight: bold;
      font-size: 16px;
      color: #2c3e50;
    }
    
    .recovery-description {
      font-size: 13px;
      color: #555;
    }
    
    .recovery-input {
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
      width: 100%;
    }
    
    .recovery-button {
      background: #3498db;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      margin-top: 5px;
    }
    
    .recovery-button:hover {
      background: #2980b9;
    }
    
    .success-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.8);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }
    
    .success-message {
      background: white;
      padding: 25px;
      border-radius: 8px;
      max-width: 400px;
      text-align: center;
    }
    
    .success-icon {
      font-size: 40px;
      color: #27ae60;
      margin-bottom: 15px;
    }
    
    .success-title {
      font-size: 22px;
      margin-bottom: 15px;
      color: #2c3e50;
    }
    
    .success-description {
      margin-bottom: 20px;
      color: #555;
      font-size: 14px;
    }
    
    .success-button {
      background: #27ae60;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
    }
    
    .success-button:hover {
      background: #219653;
    }
    
    /* Modified preview fade effect */
    .preview-fade {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(to bottom, rgba(255,255,255,0.1) 70%, rgba(255,255,255,0.9) 100%);
      pointer-events: none;
      z-index: 50;
    }
    
    /* Mobile Payment Notice */
    .mobile-payment-notice {
      margin-top: 10px;
      font-size: 12px;
      color: #666;
      text-align: center;
    }
    
    #paypal-container {
      width: 230px;
      margin: 0 auto;
    }
  </style>
</head>
<body>
  <div id="tou-tools-container" class="tou-tools-paywall-container">
    <div class="tou-tools-header">
      <h3>Terms of Use Clause Generators</h3>
      <p>Create customized Terms of Use contract clauses tailored to your specific business situation. All generators are included in one purchase.</p>
    </div>
    
    <!-- Premium Badge (shown after payment) -->
    <div id="premium-badge" class="premium-badge">PREMIUM UNLOCKED</div>
    
    <!-- Tabs for Multiple Generators -->
    <div class="tools-tabs-container">
      <ul class="tools-tabs">
        <li class="tools-tab active" data-tab="warranties">Warranties & Liability</li>
        <li class="tools-tab" data-tab="ip">Intellectual Property</li>
        <li class="tools-tab" data-tab="dispute">Dispute Resolution</li>
        <li class="tools-tab" data-tab="userconduct">User Obligations</li>
        <li class="tools-tab" data-tab="termination">Termination</li>
      </ul>
    </div>
    
    <!-- New backdrop overlay -->
    <div id="paywall-backdrop" class="paywall-backdrop"></div>
    
    <!-- Paywall Overlay - Now a popup with close button -->
    <div id="paywall-overlay" class="paywall-overlay">
      <div id="paywall-close" class="paywall-close">✕</div>
      <div class="lock-icon">🔒</div>
      <h2 class="paywall-title">Unlock All Generators</h2>
      <p class="paywall-description">Get immediate access to all Terms of Use clause generators.</p>
      
      <ul class="features-list">
        <li>Create custom Warranties & Liability clauses</li>
        <li>Generate Intellectual Property provisions</li>
        <li>Draft Dispute Resolution clauses</li>
        <li>Download MS Word documents</li>
        <li>Unlimited use for all contracts</li>
      </ul>
      
      <div id="paypal-container" class="payment-container">
        <!-- PayPal Button -->
        <style>.pp-XM4YBFHQ526AL{text-align:center;border:none;border-radius:0.25rem;min-width:11.625rem;padding:0 2rem;height:2.625rem;font-weight:bold;background-color:#FFD140;color:#000000;font-family:"Helvetica Neue",Arial,sans-serif;font-size:1rem;line-height:1.25rem;cursor:pointer;}</style>
        <form action="https://www.paypal.com/ncp/payment/XM4YBFHQ526AL" method="post" target="_blank" style="display:inline-grid;justify-items:center;align-content:start;gap:0.5rem;">
          <input class="pp-XM4YBFHQ526AL" type="submit" value="Buy Now" />
          <img src=https://www.paypalobjects.com/images/Debit_Credit_APM.svg alt="cards" />
          <section> Powered by <img src="https://www.paypalobjects.com/paypal-ui/logos/svg/paypal-wordmark-color.svg" alt="paypal" style="height:0.875rem;vertical-align:middle;"/></section>
        </form>
      </div>
      
      <div class="mobile-payment-notice">
        On mobile devices: After payment, you may need to manually return to this page. Your form data will be preserved.
      </div>
      
      <!-- Transaction ID Recovery Section -->
      <div class="recovery-section">
        <div class="recovery-title">Already paid?</div>
        <div class="recovery-description">If you've already completed payment but don't see the content, enter your PayPal Transaction ID below:</div>
        <input type="text" id="transaction-id-input" class="recovery-input" placeholder="Enter PayPal Transaction ID">
        <button id="recover-access-btn" class="recovery-button">Unlock Access</button>
      </div>
    </div>
    
    <!-- Success Overlay (shown after successful payment) -->
    <div id="success-overlay" class="success-overlay">
      <div class="success-message">
        <div class="success-icon">✓</div>
        <h2 class="success-title">Payment Successful!</h2>
        <p class="success-description">You now have full access to all Terms of Use clause generators.</p>
        <button id="success-button" class="success-button">Start Using Your Generators</button>
      </div>
    </div>
    
    <!-- Tab Content for Warranties & Liability -->
    <div id="warranties-tab" class="tools-tab-content active">
      <div class="generator-container">
        <!-- Form Column -->
        <div class="form-column">
          <!-- Industry Presets -->
          <div class="industry-presets">
            <div class="preset-title">Quick Start: Select Your Industry</div>
            <div class="preset-buttons">
              <button class="preset-btn" onclick="warrantyLiabilityGenerator.applyPreset('saas')">SaaS/Software</button>
              <button class="preset-btn" onclick="warrantyLiabilityGenerator.applyPreset('ecommerce')">E-commerce</button>
              <button class="preset-btn" onclick="warrantyLiabilityGenerator.applyPreset('content')">Content Platform</button>
              <button class="preset-btn" onclick="warrantyLiabilityGenerator.applyPreset('subscription')">Subscription Service</button>
              <button class="preset-btn" onclick="warrantyLiabilityGenerator.applyPreset('marketplace')">Online Marketplace</button>
            </div>
          </div>
        
          <!-- Agreement Information -->
          <div class="section-header">Agreement Information</div>
          
          <div class="form-group">
            <label class="form-label" for="companyName">Company Name</label>
            <input type="text" id="companyName" class="form-input" value="YourCompany, Inc." placeholder="Enter your company name" onkeyup="warrantyLiabilityGenerator.updatePreview('companyName')">
          </div>
          
          <div class="form-group">
            <label class="form-label" for="serviceType">Service Type</label>
            <select id="serviceType" class="form-select" onchange="warrantyLiabilityGenerator.updatePreview('serviceType')">
              <option value="website" selected>Website</option>
              <option value="mobileApp">Mobile App</option>
              <option value="saas">SaaS Platform</option>
              <option value="marketplace">Online Marketplace</option>
              <option value="subscription">Subscription Service</option>
            </select>
          </div>
          
          <div class="form-group">
            <label class="form-label" for="serviceName">Service/Product Name</label>
            <input type="text" id="serviceName" class="form-input" value="OUR SERVICE" placeholder="Enter service name (ALL CAPS recommended)" onkeyup="warrantyLiabilityGenerator.updatePreview('serviceName')">
          </div>
          
          <!-- Warranty Options -->
          <div class="section-header">Warranty Disclaimer</div>
          
          <div class="form-group">
            <label class="form-label">
              Warranty Level
              <div class="tooltip-container">
                <span class="tooltip-trigger">?</span>
                <div class="tooltip-content">
                  <strong>Strong Disclaimer:</strong> Completely disclaims all warranties.<br>
                  <strong>Moderate Disclaimer:</strong> Disclaims most warranties but offers some limited ones.<br>
                  <strong>Limited Disclaimer:</strong> More user-friendly language with fewer disclaimers.
                </div>
              </div>
            </label>
            <div class="radio-group">
              <label class="radio-item">
                <input type="radio" name="warrantyLevel" id="warrantyStrong" value="strong" checked onclick="warrantyLiabilityGenerator.updatePreview('warrantyLevel')">
                <span class="radio-label">Strong Disclaimer</span>
                <div class="risk-container">
                  <span class="risk-indicator risk-medium"></span>
                  <span class="risk-tooltip">Medium enforceability risk in consumer contexts</span>
                </div>
              </label>
              <label class="radio-item">
                <input type="radio" name="warrantyLevel" id="warrantyModerate" value="moderate" onclick="warrantyLiabilityGenerator.updatePreview('warrantyLevel')">
                <span class="radio-label">Moderate Disclaimer</span>
                <div class="risk-container">
                  <span class="risk-indicator risk-low"></span>
                  <span class="risk-tooltip">Generally enforceable in most jurisdictions</span>
                </div>
              </label>
              <label class="radio-item">
                <input type="radio" name="warrantyLevel" id="warrantyLimited" value="limited" onclick="warrantyLiabilityGenerator.updatePreview('warrantyLevel')">
                <span class="radio-label">Limited Disclaimer</span>
                <div class="risk-container">
                  <span class="risk-indicator risk-low"></span>
                  <span class="risk-tooltip">Most enforceable but provides less protection</span>
                </div>
              </label>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">
              Specific Disclaimers
              <div class="tooltip-container">
                <span class="tooltip-trigger">?</span>
                <div class="tooltip-content">
                  Select specific aspects of your service that you want to explicitly disclaim warranty for. Include only those relevant to your service to avoid overly broad disclaimers.
                </div>
              </div>
            </label>
            <div class="checkbox-group">
              <label class="checkbox-item">
                <input type="checkbox" id="disclaimerUptime" checked onclick="warrantyLiabilityGenerator.updatePreview('disclaimerUptime')">
                <span class="checkbox-label">Uptime & Availability</span>
                <div class="tooltip-container">
                  <span class="tooltip-trigger">?</span>
                  <div class="tooltip-content">
                    Disclaims guarantees about your service being available 24/7 without interruptions. Important for all online services.
                  </div>
                </div>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" id="disclaimerAccuracy" checked onclick="warrantyLiabilityGenerator.updatePreview('disclaimerAccuracy')">
                <span class="checkbox-label">Content Accuracy</span>
                <div class="tooltip-container">
                  <span class="tooltip-trigger">?</span>
                  <div class="tooltip-content">
                    Disclaims guarantees about the accuracy of information provided through your service. Critical for platforms with user-generated content.
                  </div>
                </div>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" id="disclaimerSecurity" checked onclick="warrantyLiabilityGenerator.updatePreview('disclaimerSecurity')">
                <span class="checkbox-label">Security</span>
                <div class="tooltip-container">
                  <span class="tooltip-trigger">?</span>
                  <div class="tooltip-content">
                    Disclaims guarantees about perfect security. Important, but include specific security measures you do take elsewhere in your terms.
                  </div>
                </div>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" id="disclaimerThirdParty" checked onclick="warrantyLiabilityGenerator.updatePreview('disclaimerThirdParty')">
                <span class="checkbox-label">Third-Party Links/Content</span>
                <div class="tooltip-container">
                  <span class="tooltip-trigger">?</span>
                  <div class="tooltip-content">
                    Disclaims responsibility for third-party websites, services, or content accessible through your service.
                  </div>
                </div>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" id="disclaimerProfessional" onclick="warrantyLiabilityGenerator.updatePreview('disclaimerProfessional')">
                <span class="checkbox-label">Professional Advice</span>
                <div class="tooltip-container">
                  <span class="tooltip-trigger">?</span>
                  <div class="tooltip-content">
                    Disclaims that your service provides professional, legal, medical, or financial advice. Essential for informational platforms.
                  </div>
                </div>
              </label>
            </div>
          </div>
          
          <!-- Liability Limitations -->
          <div class="section-header">Liability Limitations</div>
          
          <div class="form-group">
            <label class="form-label">
              Limitation Scope
              <div class="tooltip-container">
                <span class="tooltip-trigger">?</span>
                <div class="tooltip-content">
                  <strong>Broad:</strong> Excludes all types of damages (most protective for you)<br>
                  <strong>Intermediate:</strong> Excludes indirect damages but allows direct damages<br>
                  <strong>Narrow:</strong> Only excludes specific damage types (least protective)
                </div>
              </div>
            </label>
            <select id="liabilityScope" class="form-select" onchange="warrantyLiabilityGenerator.updatePreview('liabilityScope'); warrantyLiabilityGenerator.updateJurisdictionWarning();">
              <option value="broad" selected>Broad (All Damages)</option>
              <option value="intermediate">Intermediate (Most Damages)</option>
              <option value="narrow">Narrow (Direct Damages Only)</option>
            </select>
          </div>
          
          <div class="form-group">
            <label class="form-label">
              Specific Damages Excluded
              <div class="tooltip-container">
                <span class="tooltip-trigger">?</span>
                <div class="tooltip-content">
                  <strong>Direct damages:</strong> Immediate costs/losses directly caused by a breach<br>
                  <strong>Indirect damages:</strong> Secondary losses that flow from the direct damages<br>
                  <strong>Consequential damages:</strong> Damages from special circumstances known to the parties<br>
                  <strong>Punitive damages:</strong> Damages intended to punish wrongdoing<br>
                  <strong>Special damages:</strong> Unusual or special losses known to both parties
                </div>
              </div>
            </label>
            <div class="checkbox-group">
              <label class="checkbox-item">
                <input type="checkbox" id="excludeDirect" onclick="warrantyLiabilityGenerator.updatePreview('excludeDirect')">
                <span class="checkbox-label">Direct Damages</span>
                <div class="risk-container">
                  <span class="risk-indicator risk-high"></span>
                  <span class="risk-tooltip">High risk - often unenforceable in many jurisdictions</span>
                </div>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" id="excludeIndirect" checked onclick="warrantyLiabilityGenerator.updatePreview('excludeIndirect')">
                <span class="checkbox-label">Indirect Damages</span>
                <div class="risk-container">
                  <span class="risk-indicator risk-low"></span>
                  <span class="risk-tooltip">Generally enforceable in commercial contexts</span>
                </div>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" id="excludeConsequential" checked onclick="warrantyLiabilityGenerator.updatePreview('excludeConsequential')">
                <span class="checkbox-label">Consequential Damages</span>
                <div class="risk-container">
                  <span class="risk-indicator risk-low"></span>
                  <span class="risk-tooltip">Generally enforceable in commercial contexts</span>
                </div>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" id="excludePunitive" checked onclick="warrantyLiabilityGenerator.updatePreview('excludePunitive')">
                <span class="checkbox-label">Punitive Damages</span>
                <div class="risk-container">
                  <span class="risk-indicator risk-low"></span>
                  <span class="risk-tooltip">Generally enforceable in most jurisdictions</span>
                </div>
              </label>
              <label class="checkbox-item">
                <input type="checkbox" id="excludeSpecial" checked onclick="warrantyLiabilityGenerator.updatePreview('excludeSpecial')">
                <span class="checkbox-label">Special Damages</span>
                <div class="risk-container">
                  <span class="risk-indicator risk-low"></span>
                  <span class="risk-tooltip">Generally enforceable in commercial contexts</span>
                </div>
              </label>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">
              Liability Cap
              <div class="tooltip-container">
                <span class="tooltip-trigger">?</span>
                <div class="tooltip-content">
                  <strong>No Cap:</strong> No maximum limit on liability (least protective)<br>
                  <strong>Fees Paid:</strong> Cap liability at fees paid by user (recommended)<br>
                  <strong>Fixed Amount:</strong> Set a specific dollar amount as cap
                </div>
              </div>
            </label>
            <div class="radio-group">
              <label class="radio-item">
                <input type="radio" name="liabilityCap" id="capNone" value="none" onclick="warrantyLiabilityGenerator.updatePreview('liabilityCap')">
                <span class="radio-label">No Cap</span>
                <div class="risk-container">
                  <span class="risk-indicator risk-high"></span>
                  <span class="risk-tooltip">High risk - unlimited liability exposure</span>
                </div>
              </label>
              <label class="radio-item">
                <input type="radio" name="liabilityCap" id="capFees" value="fees" checked onclick="warrantyLiabilityGenerator.updatePreview('liabilityCap')">
                <span class="radio-label">Fees Paid</span>
                <div class="risk-container">
                  <span class="risk-indicator risk-low"></span>
                  <span class="risk-tooltip">Generally enforceable in most jurisdictions</span>
                </div>
              </label>
              <label class="radio-item">
                <input type="radio" name="liabilityCap" id="capFixed" value="fixed" onclick="warrantyLiabilityGenerator.updatePreview('liabilityCap')">
                <span class="radio-label">Fixed Amount</span>
                <div class="risk-container">
                  <span class="risk-indicator risk-medium"></span>
                  <span class="risk-tooltip">Medium risk if amount is too low relative to potential damages</span>
                </div>
              </label>
            </div>
          </div>
          
          <div class="form-group" id="fixedCapAmount" style="display: none;">
            <label class="form-label" for="capAmount">Fixed Cap Amount</label>
            <input type="text" id="capAmount" class="form-input" value="$500" placeholder="Enter cap amount" onkeyup="warrantyLiabilityGenerator.updatePreview('capAmount')">
          </div>
          
          <!-- Additional Options -->
          <div class="section-header">Additional Options</div>
          
          <div class="form-group">
            <label class="form-label">
              Severability Clause
              <div class="tooltip-container">
                <span class="tooltip-trigger">?</span>
                <div class="tooltip-content">
                  A severability clause ensures that if any part of these disclaimers is found invalid, the rest remains enforceable. Highly recommended.
                </div>
              </div>
            </label>
            <div class="radio-group">
              <label class="radio-item">
                <input type="radio" name="severability" id="severabilityYes" value="yes" checked onclick="warrantyLiabilityGenerator.updatePreview('severability')">
                <span class="radio-label">Include</span>
              </label>
              <label class="radio-item">
                <input type="radio" name="severability" id="severabilityNo" value="no" onclick="warrantyLiabilityGenerator.updatePreview('severability')">
                <span class="radio-label">Exclude</span>
              </label>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">
              Indemnification Clause
              <div class="tooltip-container">
                <span class="tooltip-trigger">?</span>
                <div class="tooltip-content">
                  An indemnification clause requires users to defend and compensate you for claims resulting from their use of your service or violation of terms.
                </div>
              </div>
            </label>
            <div class="radio-group">
              <label class="radio-item">
                <input type="radio" name="indemnification" id="indemnificationYes" value="yes" checked onclick="warrantyLiabilityGenerator.updatePreview('indemnification')">
                <span class="radio-label">Include</span>
              </label>
              <label class="radio-item">
                <input type="radio" name="indemnification" id="indemnificationNo" value="no" onclick="warrantyLiabilityGenerator.updatePreview('indemnification')">
                <span class="radio-label">Exclude</span>
              </label>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label" for="jurisdiction">
              Jurisdiction Consideration
              <div class="tooltip-container">
                <span class="tooltip-trigger">?</span>
                <div class="tooltip-content">
                  Select the primary jurisdiction where your users are located to get region-specific language that addresses local laws.
                </div>
              </div>
            </label>
            <select id="jurisdiction" class="form-select" onchange="warrantyLiabilityGenerator.updatePreview('jurisdiction'); warrantyLiabilityGenerator.updateJurisdictionWarning();">
              <option value="us" selected>United States</option>
              <option value="eu">European Union</option>
              <option value="uk">United Kingdom</option>
              <option value="ca">Canada</option>
              <option value="au">Australia</option>
              <option value="global">Global</option>
            </select>
            <div id="jurisdiction-warning" class="jurisdiction-warning"></div>
          </div>
        </div>
        
        <!-- Preview Column -->
        <div class="preview-column">
          <div class="preview-header">
            <div class="preview-title">Disclaimer of Warranties & Limitation of Liability Preview</div>
            <div class="preview-note">Updates as you complete the form</div>
          </div>
          
          <div class="preview-content" id="warrantyPreview">
            <!-- Preview content will be populated by JavaScript -->
          </div>
          
          <div id="warrant-preview-fade" class="preview-fade"></div>
          
          <div class="button-container">
            <button id="warrantyCopyBtn" class="copy-btn" onclick="warrantyLiabilityGenerator.handleCopyClick()">
              <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="copy-icon">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </svg>
              COPY CLAUSE
            </button>
            <button id="warrantyWordBtn" class="copy-btn" onclick="warrantyLiabilityGenerator.generateWordDoc()">MS WORD DOC</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Tab Content for Intellectual Property -->
<div id="ip-tab" class="tools-tab-content">
  <div class="generator-container">
    <!-- Form Column -->
    <div class="form-column">
      <!-- Industry Presets -->
      <div class="industry-presets">
        <div class="preset-title">Quick Start: Select Your Industry</div>
        <div class="preset-buttons">
          <button class="preset-btn" onclick="ipGenerator.applyPreset('saas')">SaaS/Software</button>
          <button class="preset-btn" onclick="ipGenerator.applyPreset('ecommerce')">E-commerce</button>
          <button class="preset-btn" onclick="ipGenerator.applyPreset('content')">Content Platform</button>
          <button class="preset-btn" onclick="ipGenerator.applyPreset('educational')">Educational</button>
          <button class="preset-btn" onclick="ipGenerator.applyPreset('marketplace')">Online Marketplace</button>
        </div>
      </div>
    
      <!-- Agreement Information -->
      <div class="section-header">Agreement Information</div>
      
      <div class="form-group">
        <label class="form-label" for="ip_companyName">Company Name</label>
        <input type="text" id="ip_companyName" class="form-input" value="YourCompany, Inc." placeholder="Enter your company name" onkeyup="ipGenerator.updatePreview('companyName')">
      </div>
      
      <div class="form-group">
        <label class="form-label" for="ip_serviceType">Service Type</label>
        <select id="ip_serviceType" class="form-select" onchange="ipGenerator.updatePreview('serviceType')">
          <option value="website" selected>Website</option>
          <option value="mobileApp">Mobile App</option>
          <option value="saas">SaaS Platform</option>
          <option value="marketplace">Online Marketplace</option>
          <option value="content">Content Platform</option>
        </select>
      </div>
      
      <div class="form-group">
        <label class="form-label" for="ip_serviceName">Service/Product Name</label>
        <input type="text" id="ip_serviceName" class="form-input" value="OUR SERVICE" placeholder="Enter service name (ALL CAPS recommended)" onkeyup="ipGenerator.updatePreview('serviceName')">
      </div>
      
      <!-- Company IP Rights -->
      <div class="section-header">Company IP Rights</div>
      
      <div class="form-group">
        <label class="form-label">
          Ownership Statement
          <div class="tooltip-container">
            <span class="tooltip-trigger">?</span>
            <div class="tooltip-content">
              <strong>Strong:</strong> Claims broad ownership of all content and IP.<br>
              <strong>Moderate:</strong> Claims ownership with some exceptions.<br>
              <strong>Limited:</strong> Claims ownership only of specific company materials.
            </div>
          </div>
        </label>
        <div class="radio-group">
          <label class="radio-item">
            <input type="radio" name="ip_ownershipLevel" id="ip_ownershipStrong" value="strong" checked onclick="ipGenerator.updatePreview('ownershipLevel')">
            <span class="radio-label">Strong Claim</span>
          </label>
          <label class="radio-item">
            <input type="radio" name="ip_ownershipLevel" id="ip_ownershipModerate" value="moderate" onclick="ipGenerator.updatePreview('ownershipLevel')">
            <span class="radio-label">Moderate Claim</span>
          </label>
          <label class="radio-item">
            <input type="radio" name="ip_ownershipLevel" id="ip_ownershipLimited" value="limited" onclick="ipGenerator.updatePreview('ownershipLevel')">
            <span class="radio-label">Limited Claim</span>
          </label>
        </div>
      </div>
      
      <div class="form-group">
        <label class="form-label">
          IP Types Specifically Protected
          <div class="tooltip-container">
            <span class="tooltip-trigger">?</span>
            <div class="tooltip-content">
              Select the specific types of intellectual property you want to explicitly protect in your terms.
            </div>
          </div>
        </label>
        <div class="checkbox-group">
          <label class="checkbox-item">
            <input type="checkbox" id="ip_protectCopyright" checked onclick="ipGenerator.updatePreview('protectCopyright')">
            <span class="checkbox-label">Copyrighted Content</span>
          </label>
          <label class="checkbox-item">
            <input type="checkbox" id="ip_protectTrademarks" checked onclick="ipGenerator.updatePreview('protectTrademarks')">
            <span class="checkbox-label">Trademarks & Logos</span>
          </label>
          <label class="checkbox-item">
            <input type="checkbox" id="ip_protectPatents" onclick="ipGenerator.updatePreview('protectPatents')">
            <span class="checkbox-label">Patents</span>
          </label>
          <label class="checkbox-item">
            <input type="checkbox" id="ip_protectTradeSecrets" onclick="ipGenerator.updatePreview('protectTradeSecrets')">
            <span class="checkbox-label">Trade Secrets</span>
          </label>
          <label class="checkbox-item">
            <input type="checkbox" id="ip_protectDesigns" onclick="ipGenerator.updatePreview('protectDesigns')">
            <span class="checkbox-label">Designs & UI Elements</span>
          </label>
        </div>
      </div>
      
      <!-- User License -->
      <div class="section-header">User License</div>
      
      <div class="form-group">
        <label class="form-label">
          License Type
          <div class="tooltip-container">
            <span class="tooltip-trigger">?</span>
            <div class="tooltip-content">
              <strong>Limited Personal:</strong> User can only use the service for personal purposes.<br>
              <strong>Commercial:</strong> User can use the service for both personal and commercial purposes.<br>
              <strong>Custom:</strong> Define specific license terms for your unique needs.
            </div>
          </div>
        </label>
        <select id="ip_licenseType" class="form-select" onchange="ipGenerator.handleLicenseTypeChange(); ipGenerator.updatePreview('licenseType');">
          <option value="limited" selected>Limited Personal License</option>
          <option value="commercial">Commercial License</option>
          <option value="custom">Custom License Terms</option>
        </select>
      </div>
      
      <div id="ip_customLicenseGroup" style="display: none;">
        <div class="form-group">
          <label class="form-label" for="ip_customLicenseTerms">Custom License Terms</label>
          <textarea id="ip_customLicenseTerms" class="form-textarea" rows="3" placeholder="Describe your custom license terms" onkeyup="ipGenerator.updatePreview('customLicenseTerms')">The User is granted a limited, non-exclusive, non-transferable license to use the service subject to these terms.</textarea>
        </div>
      </div>
      
      <div class="form-group">
        <label class="form-label">License Restrictions</label>
        <div class="checkbox-group">
          <label class="checkbox-item">
            <input type="checkbox" id="ip_restrictModification" checked onclick="ipGenerator.updatePreview('restrictModification')">
            <span class="checkbox-label">No Modification</span>
          </label>
          <label class="checkbox-item">
            <input type="checkbox" id="ip_restrictDistribution" checked onclick="ipGenerator.updatePreview('restrictDistribution')">
            <span class="checkbox-label">No Distribution</span>
          </label>
          <label class="checkbox-item">
            <input type="checkbox" id="ip_restrictSublicense" checked onclick="ipGenerator.updatePreview('restrictSublicense')">
            <span class="checkbox-label">No Sublicensing</span>
          </label>
          <label class="checkbox-item">
            <input type="checkbox" id="ip_restrictReverse" checked onclick="ipGenerator.updatePreview('restrictReverse')">
            <span class="checkbox-label">No Reverse Engineering</span>
          </label>
          <label class="checkbox-item">
            <input type="checkbox" id="ip_restrictCompete" onclick="ipGenerator.updatePreview('restrictCompete')">
            <span class="checkbox-label">No Competing Services</span>
          </label>
        </div>
      </div>
      
      <!-- User Content -->
      <div class="section-header">User-Generated Content</div>
      
      <div class="form-group">
        <label class="form-label">
          Does Your Service Allow User Content?
          <div class="tooltip-container">
            <span class="tooltip-trigger">?</span>
            <div class="tooltip-content">
              If your service allows users to upload, create, or share content, select Yes to include user content provisions.
            </div>
          </div>
        </label>
        <div class="radio-group">
          <label class="radio-item">
            <input type="radio" name="ip_userContent" id="ip_userContentYes" value="yes" checked onclick="ipGenerator.handleUserContentChange(); ipGenerator.updatePreview('userContent');">
            <span class="radio-label">Yes</span>
          </label>
          <label class="radio-item">
            <input type="radio" name="ip_userContent" id="ip_userContentNo" value="no" onclick="ipGenerator.handleUserContentChange(); ipGenerator.updatePreview('userContent');">
            <span class="radio-label">No</span>
          </label>
        </div>
      </div>
      
      <div id="ip_userContentOptions">
        <div class="form-group">
          <label class="form-label">
            User Content License to Company
            <div class="tooltip-container">
              <span class="tooltip-trigger">?</span>
              <div class="tooltip-content">
                The license that users grant to your company for content they upload or create. This allows you to display, store, or use their content.
              </div>
            </div>
          </label>
          <select id="ip_userLicenseType" class="form-select" onchange="ipGenerator.updatePreview('userLicenseType')">
            <option value="broad" selected>Broad License</option>
            <option value="moderate">Moderate License</option>
            <option value="limited">Limited License</option>
          </select>
        </div>
        
        <div class="form-group">
          <label class="form-label">User Content Ownership</label>
          <div class="radio-group">
            <label class="radio-item">
              <input type="radio" name="ip_userOwnership" id="ip_userOwnershipUser" value="user" checked onclick="ipGenerator.updatePreview('userOwnership')">
              <span class="radio-label">User Retains Ownership</span>
            </label>
            <label class="radio-item">
              <input type="radio" name="ip_userOwnership" id="ip_userOwnershipCompany" value="company" onclick="ipGenerator.updatePreview('userOwnership')">
              <span class="radio-label">Company Claims Ownership</span>
            </label>
            <label class="radio-item">
              <input type="radio" name="ip_userOwnership" id="ip_userOwnershipJoint" value="joint" onclick="ipGenerator.updatePreview('userOwnership')">
              <span class="radio-label">Joint Ownership</span>
            </label>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">Specific User Content Rights</label>
          <div class="checkbox-group">
            <label class="checkbox-item">
              <input type="checkbox" id="ip_rightDisplay" checked onclick="ipGenerator.updatePreview('rightDisplay')">
              <span class="checkbox-label">Display/Publish</span>
            </label>
            <label class="checkbox-item">
              <input type="checkbox" id="ip_rightModify" checked onclick="ipGenerator.updatePreview('rightModify')">
              <span class="checkbox-label">Modify/Edit</span>
            </label>
            <label class="checkbox-item">
              <input type="checkbox" id="ip_rightDistribute" checked onclick="ipGenerator.updatePreview('rightDistribute')">
              <span class="checkbox-label">Distribute</span>
            </label>
            <label class="checkbox-item">
              <input type="checkbox" id="ip_rightPromote" checked onclick="ipGenerator.updatePreview('rightPromote')">
              <span class="checkbox-label">Use in Promotion</span>
            </label>
            <label class="checkbox-item">
              <input type="checkbox" id="ip_rightSublicense" onclick="ipGenerator.updatePreview('rightSublicense')">
              <span class="checkbox-label">Sublicense</span>
            </label>
          </div>
        </div>
      </div>
      
      <!-- DMCA -->
      <div class="section-header">Additional IP Provisions</div>
      
      <div class="form-group">
        <label class="form-label">
          Include DMCA Policy
          <div class="tooltip-container">
            <span class="tooltip-trigger">?</span>
            <div class="tooltip-content">
              The Digital Millennium Copyright Act (DMCA) provides a safe harbor for online service providers if they have a process for handling copyright infringement notices.
            </div>
          </div>
        </label>
        <div class="radio-group">
          <label class="radio-item">
            <input type="radio" name="ip_dmcaPolicy" id="ip_dmcaPolicyYes" value="yes" checked onclick="ipGenerator.updatePreview('dmcaPolicy')">
            <span class="radio-label">Yes</span>
          </label>
          <label class="radio-item">
            <input type="radio" name="ip_dmcaPolicy" id="ip_dmcaPolicyNo" value="no" onclick="ipGenerator.updatePreview('dmcaPolicy')">
            <span class="radio-label">No</span>
          </label>
        </div>
      </div>
      
      <div class="form-group">
        <label class="form-label" for="ip_dmcaEmail">DMCA Contact Email</label>
        <input type="text" id="ip_dmcaEmail" class="form-input" value="copyright@yourcompany.com" placeholder="Email for copyright issues" onkeyup="ipGenerator.updatePreview('dmcaEmail')">
      </div>
      
      <div class="form-group">
        <label class="form-label">
          Feedback Ownership
          <div class="tooltip-container">
            <span class="tooltip-trigger">?</span>
            <div class="tooltip-content">
              Determines who owns the intellectual property rights to feedback, suggestions, or ideas that users provide about your service.
            </div>
          </div>
        </label>
        <div class="radio-group">
          <label class="radio-item">
            <input type="radio" name="ip_feedbackOwnership" id="ip_feedbackOwnershipCompany" value="company" checked onclick="ipGenerator.updatePreview('feedbackOwnership')">
            <span class="radio-label">Company Owns</span>
          </label>
          <label class="radio-item">
            <input type="radio" name="ip_feedbackOwnership" id="ip_feedbackOwnershipLicense" value="license" onclick="ipGenerator.updatePreview('feedbackOwnership')">
            <span class="radio-label">Company License Only</span>
          </label>
          <label class="radio-item">
            <input type="radio" name="ip_feedbackOwnership" id="ip_feedbackOwnershipUser" value="user" onclick="ipGenerator.updatePreview('feedbackOwnership')">
            <span class="radio-label">User Retains Rights</span>
          </label>
        </div>
      </div>
    </div>
    
    <!-- Preview Column -->
    <div class="preview-column">
      <div class="preview-header">
        <div class="preview-title">Intellectual Property Clause Preview</div>
        <div class="preview-note">Updates as you complete the form</div>
      </div>
      
      <div class="preview-content" id="ipPreview">
        <!-- Preview content will be populated by JavaScript -->
      </div>
      
      <div id="ip-preview-fade" class="preview-fade"></div>
      
      <div class="button-container">
        <button id="ipCopyBtn" class="copy-btn" onclick="ipGenerator.handleCopyClick()">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="copy-icon">
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
          </svg>
          COPY CLAUSE
        </button>
        <button id="ipWordBtn" class="copy-btn" onclick="ipGenerator.generateWordDoc()">MS WORD DOC</button>
      </div>
    </div>
  </div>
</div>

<script>
  // Create a namespace to avoid global scope pollution in WordPress
  var ipGenerator = {
    // Initialize the generator
    init: function() {
      this.handleLicenseTypeChange();
      this.handleUserContentChange();
      this.updatePreview();
    },
    
    // Apply industry preset
    applyPreset: function(preset) {
      // SaaS/Software preset
      if (preset === 'saas') {
        document.getElementById('ip_serviceType').value = 'saas';
        document.getElementById('ip_serviceName').value = 'OUR SOFTWARE';
        document.getElementById('ip_ownershipStrong').checked = true;
        document.getElementById('ip_protectCopyright').checked = true;
        document.getElementById('ip_protectTrademarks').checked = true;
        document.getElementById('ip_protectPatents').checked = true;
        document.getElementById('ip_protectTradeSecrets').checked = true;
        document.getElementById('ip_protectDesigns').checked = true;
        document.getElementById('ip_licenseType').value = 'commercial';
        document.getElementById('ip_restrictModification').checked = true;
        document.getElementById('ip_restrictDistribution').checked = true;
        document.getElementById('ip_restrictSublicense').checked = true;
        document.getElementById('ip_restrictReverse').checked = true;
        document.getElementById('ip_restrictCompete').checked = true;
        document.getElementById('ip_userContentNo').checked = true;
        document.getElementById('ip_dmcaPolicyYes').checked = true;
        document.getElementById('ip_feedbackOwnershipCompany').checked = true;
      }
      // E-commerce preset
      else if (preset === 'ecommerce') {
        document.getElementById('ip_serviceType').value = 'website';
        document.getElementById('ip_serviceName').value = 'OUR STORE';
        document.getElementById('ip_ownershipStrong').checked = true;
        document.getElementById('ip_protectCopyright').checked = true;
        document.getElementById('ip_protectTrademarks').checked = true;
        document.getElementById('ip_protectPatents').checked = false;
        document.getElementById('ip_protectTradeSecrets').checked = false;
        document.getElementById('ip_protectDesigns').checked = true;
        document.getElementById('ip_licenseType').value = 'limited';
        document.getElementById('ip_restrictModification').checked = true;
        document.getElementById('ip_restrictDistribution').checked = true;
        document.getElementById('ip_restrictSublicense').checked = true;
        document.getElementById('ip_restrictReverse').checked = true;
        document.getElementById('ip_restrictCompete').checked = false;
        document.getElementById('ip_userContentNo').checked = true;
        document.getElementById('ip_dmcaPolicyYes').checked = true;
        document.getElementById('ip_feedbackOwnershipCompany').checked = true;
      }
      // Content Platform preset
      else if (preset === 'content') {
        document.getElementById('ip_serviceType').value = 'content';
        document.getElementById('ip_serviceName').value = 'OUR PLATFORM';
        document.getElementById('ip_ownershipModerate').checked = true;
        document.getElementById('ip_protectCopyright').checked = true;
        document.getElementById('ip_protectTrademarks').checked = true;
        document.getElementById('ip_protectPatents').checked = false;
        document.getElementById('ip_protectTradeSecrets').checked = false;
        document.getElementById('ip_protectDesigns').checked = true;
        document.getElementById('ip_licenseType').value = 'limited';
        document.getElementById('ip_restrictModification').checked = true;
        document.getElementById('ip_restrictDistribution').checked = true;
        document.getElementById('ip_restrictSublicense').checked = true;
        document.getElementById('ip_restrictReverse').checked = false;
        document.getElementById('ip_restrictCompete').checked = false;
        document.getElementById('ip_userContentYes').checked = true;
        document.getElementById('ip_userLicenseType').value = 'broad';
        document.getElementById('ip_userOwnershipUser').checked = true;
        document.getElementById('ip_rightDisplay').checked = true;
        document.getElementById('ip_rightModify').checked = true;
        document.getElementById('ip_rightDistribute').checked = true;
        document.getElementById('ip_rightPromote').checked = true;
        document.getElementById('ip_rightSublicense').checked = true;
        document.getElementById('ip_dmcaPolicyYes').checked = true;
        document.getElementById('ip_feedbackOwnershipLicense').checked = true;
      }
      // Educational preset
      else if (preset === 'educational') {
        document.getElementById('ip_serviceType').value = 'website';
        document.getElementById('ip_serviceName').value = 'OUR EDUCATIONAL PLATFORM';
        document.getElementById('ip_ownershipModerate').checked = true;
        document.getElementById('ip_protectCopyright').checked = true;
        document.getElementById('ip_protectTrademarks').checked = true;
        document.getElementById('ip_protectPatents').checked = false;
        document.getElementById('ip_protectTradeSecrets').checked = false;
        document.getElementById('ip_protectDesigns').checked = false;
        document.getElementById('ip_licenseType').value = 'limited';
        document.getElementById('ip_restrictModification').checked = true;
        document.getElementById('ip_restrictDistribution').checked = true;
        document.getElementById('ip_restrictSublicense').checked = true;
        document.getElementById('ip_restrictReverse').checked = false;
        document.getElementById('ip_restrictCompete').checked = false;
        document.getElementById('ip_userContentYes').checked = true;
        document.getElementById('ip_userLicenseType').value = 'limited';
        document.getElementById('ip_userOwnershipUser').checked = true;
        document.getElementById('ip_rightDisplay').checked = true;
        document.getElementById('ip_rightModify').checked = false;
        document.getElementById('ip_rightDistribute').checked = false;
        document.getElementById('ip_rightPromote').checked = false;
        document.getElementById('ip_rightSublicense').checked = false;
        document.getElementById('ip_dmcaPolicyYes').checked = true;
        document.getElementById('ip_feedbackOwnershipUser').checked = true;
      }
      // Online Marketplace preset
      else if (preset === 'marketplace') {
        document.getElementById('ip_serviceType').value = 'marketplace';
        document.getElementById('ip_serviceName').value = 'OUR MARKETPLACE';
        document.getElementById('ip_ownershipStrong').checked = true;
        document.getElementById('ip_protectCopyright').checked = true;
        document.getElementById('ip_protectTrademarks').checked = true;
        document.getElementById('ip_protectPatents').checked = false;
        document.getElementById('ip_protectTradeSecrets').checked = true;
        document.getElementById('ip_protectDesigns').checked = true;
        document.getElementById('ip_licenseType').value = 'commercial';
        document.getElementById('ip_restrictModification').checked = true;
        document.getElementById('ip_restrictDistribution').checked = true;
        document.getElementById('ip_restrictSublicense').checked = true;
        document.getElementById('ip_restrictReverse').checked = true;
        document.getElementById('ip_restrictCompete').checked = true;
        document.getElementById('ip_userContentYes').checked = true;
        document.getElementById('ip_userLicenseType').value = 'moderate';
        document.getElementById('ip_userOwnershipUser').checked = true;
        document.getElementById('ip_rightDisplay').checked = true;
        document.getElementById('ip_rightModify').checked = false;
        document.getElementById('ip_rightDistribute').checked = true;
        document.getElementById('ip_rightPromote').checked = true;
        document.getElementById('ip_rightSublicense').checked = false;
        document.getElementById('ip_dmcaPolicyYes').checked = true;
        document.getElementById('ip_feedbackOwnershipCompany').checked = true;
      }
      
      // Update the DOM based on the presets
      this.handleLicenseTypeChange();
      this.handleUserContentChange();
      this.updatePreview();
    },
    
    // Generate clause text
    generateClause: function() {
      const companyName = document.getElementById('ip_companyName').value;
      const serviceType = document.getElementById('ip_serviceType').value;
      const serviceTypeText = document.getElementById('ip_serviceType').options[document.getElementById('ip_serviceType').selectedIndex].text;
      const serviceName = document.getElementById('ip_serviceName').value.toUpperCase();
      
      // Get ownership level
      let ownershipLevel = '';
      const ownershipRadios = document.getElementsByName('ip_ownershipLevel');
      for (let i = 0; i < ownershipRadios.length; i++) {
        if (ownershipRadios[i].checked) {
          ownershipLevel = ownershipRadios[i].value;
          break;
        }
      }
      
      // Get protected IP types
      const protectCopyright = document.getElementById('ip_protectCopyright').checked;
      const protectTrademarks = document.getElementById('ip_protectTrademarks').checked;
      const protectPatents = document.getElementById('ip_protectPatents').checked;
      const protectTradeSecrets = document.getElementById('ip_protectTradeSecrets').checked;
      const protectDesigns = document.getElementById('ip_protectDesigns').checked;
      
      // Build protected IP types list
      let protectedTypes = [];
      if (protectCopyright) protectedTypes.push("copyrights");
      if (protectTrademarks) protectedTypes.push("trademarks");
      if (protectPatents) protectedTypes.push("patents");
      if (protectTradeSecrets) protectedTypes.push("trade secrets");
      if (protectDesigns) protectedTypes.push("designs and user interface elements");
      
      // Format protected types string
      let protectedTypesText = '';
      if (protectedTypes.length > 0) {
        if (protectedTypes.length === 1) {
          protectedTypesText = protectedTypes[0];
        } else if (protectedTypes.length === 2) {
          protectedTypesText = protectedTypes.join(" and ");
        } else {
          const lastType = protectedTypes.pop();
          protectedTypesText = protectedTypes.join(", ") + ", and " + lastType;
        }
      }
      
      // Get license type
      const licenseType = document.getElementById('ip_licenseType').value;
      const customLicenseTerms = document.getElementById('ip_customLicenseTerms').value;
      
      // Get license restrictions
      const restrictModification = document.getElementById('ip_restrictModification').checked;
      const restrictDistribution = document.getElementById('ip_restrictDistribution').checked;
      const restrictSublicense = document.getElementById('ip_restrictSublicense').checked;
      const restrictReverse = document.getElementById('ip_restrictReverse').checked;
      const restrictCompete = document.getElementById('ip_restrictCompete').checked;
      
      // Build license restrictions list
      let restrictions = [];
      if (restrictModification) restrictions.push("modify, adapt, or create derivative works");
      if (restrictDistribution) restrictions.push("distribute, sell, rent, lease, or transfer");
      if (restrictSublicense) restrictions.push("sublicense");
      if (restrictReverse) restrictions.push("reverse engineer, decompile, or disassemble");
      if (restrictCompete) restrictions.push("use the Service to create a competing product or service");
      
      // Format restrictions string
      let restrictionsText = '';
      if (restrictions.length > 0) {
        if (restrictions.length === 1) {
          restrictionsText = restrictions[0];
        } else if (restrictions.length === 2) {
          restrictionsText = restrictions.join(" or ");
        } else {
          const lastRestriction = restrictions.pop();
          restrictionsText = restrictions.join(", ") + ", or " + lastRestriction;
        }
      }
      
      // Get user content options
      let hasUserContent = document.querySelector('input[name="ip_userContent"]:checked').value === 'yes';
      let userLicenseType = document.getElementById('ip_userLicenseType').value;
      
      let userOwnership = '';
      const userOwnershipRadios = document.getElementsByName('ip_userOwnership');
      for (let i = 0; i < userOwnershipRadios.length; i++) {
        if (userOwnershipRadios[i].checked) {
          userOwnership = userOwnershipRadios[i].value;
          break;
        }
      }
      
      // Get user content rights
      const rightDisplay = document.getElementById('ip_rightDisplay').checked;
      const rightModify = document.getElementById('ip_rightModify').checked;
      const rightDistribute = document.getElementById('ip_rightDistribute').checked;
      const rightPromote = document.getElementById('ip_rightPromote').checked;
      const rightSublicense = document.getElementById('ip_rightSublicense').checked;
      
      // Build user content rights list
      let userRights = [];
      if (rightDisplay) userRights.push("display, publish, and host");
      if (rightModify) userRights.push("modify, edit, and adapt");
      if (rightDistribute) userRights.push("distribute and make available to others");
      if (rightPromote) userRights.push("use in promotional materials and advertising");
      if (rightSublicense) userRights.push("sublicense to affiliates and service providers");
      
      // Format user rights string
      let userRightsText = '';
      if (userRights.length > 0) {
        if (userRights.length === 1) {
          userRightsText = userRights[0];
        } else if (userRights.length === 2) {
          userRightsText = userRights.join(" and ");
        } else {
          const lastRight = userRights.pop();
          userRightsText = userRights.join(", ") + ", and " + lastRight;
        }
      }
      
      // Get additional options
      const includeDMCA = document.querySelector('input[name="ip_dmcaPolicy"]:checked').value === 'yes';
      const dmcaEmail = document.getElementById('ip_dmcaEmail').value;
      
      let feedbackOwnership = '';
      const feedbackOwnershipRadios = document.getElementsByName('ip_feedbackOwnership');
      for (let i = 0; i < feedbackOwnershipRadios.length; i++) {
        if (feedbackOwnershipRadios[i].checked) {
          feedbackOwnership = feedbackOwnershipRadios[i].value;
          break;
        }
      }
      
      // Build clause sections
      
      // 1. Ownership and IP rights section
      let ownershipLanguage = '';
      if (ownershipLevel === 'strong') {
        ownershipLanguage = `Unless otherwise indicated, ${serviceName} and all content, features, and functionality (including but not limited to all information, software, text, displays, images, video, audio, and the design, selection, and arrangement thereof) are owned by ${companyName}, its licensors, or other providers of such material and are protected by United States and international copyright, trademark, patent, trade secret, and other intellectual property or proprietary rights laws.`;
      } else if (ownershipLevel === 'moderate') {
        ownershipLanguage = `Unless otherwise indicated, ${serviceName}, including all content and materials made available on or through the service that are specifically created or provided by ${companyName}, are owned by ${companyName}, its licensors, or other providers of such material and are protected by applicable intellectual property laws.`;
      } else {
        ownershipLanguage = `${companyName} owns and retains all rights to the ${serviceName} branding, logos, and original content created and provided by ${companyName} through the service.`;
      }
      
      // Add specific IP types if selected
      let specificIPLanguage = '';
      if (protectedTypesText) {
        specificIPLanguage = `This includes, but is not limited to, all ${protectedTypesText} associated with ${serviceName}.`;
      }
      
      // 2. User License section
      let licenseLanguage = '';
      if (licenseType === 'limited') {
        licenseLanguage = `Subject to these Terms, ${companyName} grants you a limited, non-exclusive, non-transferable, non-sublicensable, revocable license to access and use ${serviceName} solely for your personal, non-commercial purposes.`;
      } else if (licenseType === 'commercial') {
        licenseLanguage = `Subject to these Terms, ${companyName} grants you a limited, non-exclusive, non-transferable license to access and use ${serviceName} for your personal or commercial purposes, as permitted through the functionality of the service and these Terms.`;
      } else {
        licenseLanguage = customLicenseTerms;
      }
      
      // Add license restrictions if selected
      let restrictionsLanguage = '';
      if (restrictionsText) {
        restrictionsLanguage = `You may not ${restrictionsText} any portion of ${serviceName} without the prior written consent of ${companyName}.`;
      }
      
      // 3. User-generated content section
      let userContentLanguage = '';
      if (hasUserContent) {
        // User content ownership statement
        if (userOwnership === 'user') {
          userContentLanguage = `<p><strong>User-Generated Content</strong></p><p>When you create, upload, post, send, receive, store, or otherwise make available any content on or through ${serviceName} ("User Content"), you retain all rights that you had in your User Content before uploading it.`;
        } else if (userOwnership === 'company') {
          userContentLanguage = `<p><strong>User-Generated Content</strong></p><p>Any content that you create, upload, post, send, receive, store, or otherwise make available on or through ${serviceName} ("User Content") shall become the property of ${companyName} and you hereby assign all rights, title, and interest in and to such User Content to ${companyName}.`;
        } else {
          userContentLanguage = `<p><strong>User-Generated Content</strong></p><p>When you create, upload, post, send, receive, store, or otherwise make available any content on or through ${serviceName} ("User Content"), you and ${companyName} each maintain your respective ownership rights in such content.`;
        }
        
        // User license to company
        if (userOwnership === 'user' || userOwnership === 'joint') {
          if (userLicenseType === 'broad') {
            userContentLanguage += ` However, by creating or providing User Content, you grant ${companyName} and its affiliates a worldwide, perpetual, irrevocable, royalty-free, fully-paid, non-exclusive, transferable, and sublicensable license to use, copy, modify, adapt, prepare derivative works from, distribute, perform, display, and otherwise exploit your User Content in connection with ${serviceName} and ${companyName}'s business, including for the purpose of promoting and redistributing part or all of ${serviceName} in any media formats and through any media channels.`;
          } else if (userLicenseType === 'moderate') {
            userContentLanguage += ` However, by creating or providing User Content, you grant ${companyName} a worldwide, non-exclusive, royalty-free license to use, reproduce, display, and distribute your User Content in connection with the operation and provision of ${serviceName}.`;
          } else {
            userContentLanguage += ` However, by creating or providing User Content, you grant ${companyName} a limited license to use your User Content solely for the purpose of providing ${serviceName} to you and other users.`;
          }
        }
        
        // Add specific rights if applicable
        if (userRightsText && (userOwnership === 'user' || userOwnership === 'joint')) {
          userContentLanguage += ` This license allows ${companyName} to ${userRightsText} your User Content.`;
        }
        
        // Add representations and warranties for user content
        userContentLanguage += `</p><p>You represent and warrant that: (i) you own your User Content or have the right to grant the rights and licenses described in these Terms; (ii) your User Content does not violate these Terms, applicable law, or the rights (intellectual property rights or otherwise) of any third party; and (iii) your User Content will not cause ${companyName} to violate any applicable laws or rights of any third party.</p>`;
      }
      
      // 4. DMCA Policy section
      let dmcaLanguage = '';
      if (includeDMCA) {
        dmcaLanguage = `
<p><strong>DMCA Copyright Policy</strong></p>
<p>${companyName} respects the intellectual property rights of others and expects its users to do the same. In accordance with the Digital Millennium Copyright Act of 1998 ("DMCA"), ${companyName} will respond promptly to valid notices of copyright infringement and will terminate the accounts of repeat infringers as appropriate.</p>
<p>If you believe that your work has been copied in a way that constitutes copyright infringement, please provide ${companyName}'s copyright agent with the following information:</p>
<ol>
  <li>An electronic or physical signature of the person authorized to act on behalf of the owner of the copyright interest;</li>
  <li>A description of the copyrighted work that you claim has been infringed;</li>
  <li>A description of where the material that you claim is infringing is located on the service;</li>
  <li>Your address, telephone number, and email address;</li>
  <li>A statement by you that you have a good faith belief that the disputed use is not authorized by the copyright owner, its agent, or the law; and</li>
  <li>A statement by you, made under penalty of perjury, that the above information in your notice is accurate and that you are the copyright owner or authorized to act on the copyright owner's behalf.</li>
</ol>
<p>${companyName}'s designated copyright agent can be reached at: ${dmcaEmail}</p>
`;
      }
      
      // 5. Feedback section
      let feedbackLanguage = '';
      if (feedbackOwnership === 'company') {
        feedbackLanguage = `
<p><strong>Feedback</strong></p>
<p>If you provide ${companyName} with any comments, suggestions, recommendations, requests, or any other feedback related to ${serviceName} ("Feedback"), you hereby assign to ${companyName} all rights, title, and interest in and to the Feedback. ${companyName} will be free to use, disclose, reproduce, license, and otherwise distribute and exploit the Feedback as it sees fit, without any obligation or restriction of any kind.</p>
`;
      } else if (feedbackOwnership === 'license') {
        feedbackLanguage = `
<p><strong>Feedback</strong></p>
<p>If you provide ${companyName} with any comments, suggestions, recommendations, requests, or any other feedback related to ${serviceName} ("Feedback"), you grant ${companyName} a perpetual, irrevocable, worldwide, royalty-free license to use, disclose, reproduce, license, distribute, and exploit the Feedback without any obligation or restriction of any kind. This license does not grant ${companyName} any ownership rights to your Feedback.</p>
`;
      } else {
        feedbackLanguage = `
<p><strong>Feedback</strong></p>
<p>If you provide ${companyName} with any comments, suggestions, recommendations, requests, or any other feedback related to ${serviceName} ("Feedback"), you retain all rights to your Feedback. Nothing in these Terms limits your right to use your Feedback in any way.</p>
`;
      }
      
      // Build the complete clause
      let clause = `
<p><strong>INTELLECTUAL PROPERTY RIGHTS</strong></p>
<p>${ownershipLanguage} ${specificIPLanguage}</p>

<p><strong>USER LICENSE</strong></p>
<p>${licenseLanguage} ${restrictionsLanguage}</p>
`;

      // Add user content section if applicable
      if (hasUserContent) {
        clause += userContentLanguage;
      }

      // Add DMCA section if selected
      if (includeDMCA) {
        clause += dmcaLanguage;
      }

      // Add feedback section
      clause += feedbackLanguage;

      // Add general prohibition
      clause += `
<p><strong>PROHIBITED USES</strong></p>
<p>You may use ${serviceName} only for lawful purposes and in accordance with these Terms. You agree not to infringe upon or violate the intellectual property rights or any other rights of ${companyName} or any third party.</p>
`;

      return clause;
    },
    
    // Handle license type change
    handleLicenseTypeChange: function() {
      const licenseType = document.getElementById('ip_licenseType').value;
      
      // Show/hide custom license terms field
      document.getElementById('ip_customLicenseGroup').style.display = licenseType === 'custom' ? 'block' : 'none';
      
      // Update preview
      this.updatePreview('licenseType');
    },
    
    // Handle user content change
    handleUserContentChange: function() {
      const hasUserContent = document.querySelector('input[name="ip_userContent"]:checked').value === 'yes';
      
      // Show/hide user content options
      document.getElementById('ip_userContentOptions').style.display = hasUserContent ? 'block' : 'none';
      
      // Update preview
      this.updatePreview('userContent');
    },
    
    // Update the preview
    updatePreview: function(changedField) {
      // Clear previous highlights
      this.clearHighlights();
      
      // Generate new clause text
      const clauseText = this.generateClause();
      
      // Update preview
      document.getElementById('ipPreview').innerHTML = clauseText;
      
      // If a field was changed, highlight the relevant text
      if (changedField) {
        this.highlightChangedText(changedField);
      }
    },
    
    // Clear highlights
    clearHighlights: function() {
      const highlightElements = document.getElementsByClassName('highlight');
      while (highlightElements.length > 0) {
        const element = highlightElements[0];
        const text = element.textContent;
        const textNode = document.createTextNode(text);
        element.parentNode.replaceChild(textNode, element);
      }
    },
    
    // Find text in document and highlight it
    findAndHighlightText: function(searchText) {
      if (!searchText) return;
      
      const previewElement = document.getElementById('ipPreview');
      const previewHTML = previewElement.innerHTML;
      
      // A simpler approach for WordPress compatibility
      if (previewHTML.indexOf(searchText) >= 0) {
        const newHTML = previewHTML.replace(
          new RegExp(this.escapeRegExp(searchText), 'g'),
          '<span class="highlight">' + searchText + '</span>'
        );
        
        previewElement.innerHTML = newHTML;
        
        // Try to scroll to the highlighted element
        setTimeout(function() {
          const highlightElements = document.getElementsByClassName('highlight');
          if (highlightElements.length > 0) {
            const firstHighlight = highlightElements[0];
            if (firstHighlight) {
              firstHighlight.scrollIntoView({behavior: 'smooth', block: 'center'});
            }
          }
        }, 100);
      }
    },
    
    // Escape special regex characters
    escapeRegExp: function(string) {
      return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    },
    
    // Highlight changed text based on field
    highlightChangedText: function(changedField) {
      const self = this;
      
      switch (changedField) {
        case 'companyName':
          this.findAndHighlightText(document.getElementById('ip_companyName').value);
          break;
        case 'serviceType':
          // Highlight the service type text
          const serviceTypeElement = document.getElementById('ip_serviceType');
          const serviceTypeText = serviceTypeElement.options[serviceTypeElement.selectedIndex].text;
          this.findAndHighlightText(serviceTypeText);
          break;
        case 'serviceName':
          this.findAndHighlightText(document.getElementById('ip_serviceName').value.toUpperCase());
          break;
        case 'ownershipLevel':
          // Highlight ownership language based on level
          const ownershipLevel = document.querySelector('input[name="ip_ownershipLevel"]:checked').value;
          if (ownershipLevel === 'strong') {
            this.findAndHighlightText("all content, features, and functionality");
          } else if (ownershipLevel === 'moderate') {
            this.findAndHighlightText("all content and materials made available on or through the service that are specifically created or provided");
          } else {
            this.findAndHighlightText("owns and retains all rights to the");
          }
          break;
        case 'protectCopyright':
        case 'protectTrademarks':
        case 'protectPatents':
        case 'protectTradeSecrets':
        case 'protectDesigns':
          // Build protected IP types list
          let protectedTypes = [];
          if (document.getElementById('ip_protectCopyright').checked) protectedTypes.push("copyrights");
          if (document.getElementById('ip_protectTrademarks').checked) protectedTypes.push("trademarks");
          if (document.getElementById('ip_protectPatents').checked) protectedTypes.push("patents");
          if (document.getElementById('ip_protectTradeSecrets').checked) protectedTypes.push("trade secrets");
          if (document.getElementById('ip_protectDesigns').checked) protectedTypes.push("designs and user interface elements");
          
          // Format protected types string
          if (protectedTypes.length > 0) {
            this.findAndHighlightText("This includes, but is not limited to, all");
            
            // Also highlight the specific type that was changed
            if (changedField === 'protectCopyright' && document.getElementById('ip_protectCopyright').checked) {
              this.findAndHighlightText("copyrights");
            } else if (changedField === 'protectTrademarks' && document.getElementById('ip_protectTrademarks').checked) {
              this.findAndHighlightText("trademarks");
            } else if (changedField === 'protectPatents' && document.getElementById('ip_protectPatents').checked) {
              this.findAndHighlightText("patents");
            } else if (changedField === 'protectTradeSecrets' && document.getElementById('ip_protectTradeSecrets').checked) {
              this.findAndHighlightText("trade secrets");
            } else if (changedField === 'protectDesigns' && document.getElementById('ip_protectDesigns').checked) {
              this.findAndHighlightText("designs and user interface elements");
            }
          }
          break;
        case 'licenseType':
          const licenseType = document.getElementById('ip_licenseType').value;
          if (licenseType === 'limited') {
            this.findAndHighlightText("for your personal, non-commercial purposes");
          } else if (licenseType === 'commercial') {
            this.findAndHighlightText("for your personal or commercial purposes");
          } else {
            this.findAndHighlightText(document.getElementById('ip_customLicenseTerms').value);
          }
          break;
        case 'customLicenseTerms':
          this.findAndHighlightText(document.getElementById('ip_customLicenseTerms').value);
          break;
        case 'restrictModification':
        case 'restrictDistribution':
        case 'restrictSublicense':
        case 'restrictReverse':
        case 'restrictCompete':
          // Highlight the specific restriction that was changed
          if (changedField === 'restrictModification' && document.getElementById('ip_restrictModification').checked) {
            this.findAndHighlightText("modify, adapt, or create derivative works");
          } else if (changedField === 'restrictDistribution' && document.getElementById('ip_restrictDistribution').checked) {
            this.findAndHighlightText("distribute, sell, rent, lease, or transfer");
          } else if (changedField === 'restrictSublicense' && document.getElementById('ip_restrictSublicense').checked) {
            this.findAndHighlightText("sublicense");
          } else if (changedField === 'restrictReverse' && document.getElementById('ip_restrictReverse').checked) {
            this.findAndHighlightText("reverse engineer, decompile, or disassemble");
          } else if (changedField === 'restrictCompete' && document.getElementById('ip_restrictCompete').checked) {
            this.findAndHighlightText("use the Service to create a competing product or service");
          }
          break;
        case 'userContent':
          const hasUserContent = document.querySelector('input[name="ip_userContent"]:checked').value === 'yes';
          if (hasUserContent) {
            this.findAndHighlightText("User-Generated Content");
          } else {
            // If user content is turned off, highlight the section that would have contained it
            this.findAndHighlightText("USER LICENSE");
          }
          break;
        case 'userLicenseType':
          const userLicenseType = document.getElementById('ip_userLicenseType').value;
          if (userLicenseType === 'broad') {
            this.findAndHighlightText("worldwide, perpetual, irrevocable, royalty-free, fully-paid, non-exclusive, transferable, and sublicensable license");
          } else if (userLicenseType === 'moderate') {
            this.findAndHighlightText("worldwide, non-exclusive, royalty-free license");
          } else {
            this.findAndHighlightText("limited license");
          }
          break;
        case 'userOwnership':
          const userOwnership = document.querySelector('input[name="ip_userOwnership"]:checked').value;
          if (userOwnership === 'user') {
            this.findAndHighlightText("you retain all rights that you had in your User Content");
          } else if (userOwnership === 'company') {
            this.findAndHighlightText("shall become the property of");
          } else {
            this.findAndHighlightText("you and");
          }
          break;
        case 'rightDisplay':
        case 'rightModify':
        case 'rightDistribute':
        case 'rightPromote':
        case 'rightSublicense':
          // Highlight the specific right that was changed
          if (changedField === 'rightDisplay' && document.getElementById('ip_rightDisplay').checked) {
            this.findAndHighlightText("display, publish, and host");
          } else if (changedField === 'rightModify' && document.getElementById('ip_rightModify').checked) {
            this.findAndHighlightText("modify, edit, and adapt");
          } else if (changedField === 'rightDistribute' && document.getElementById('ip_rightDistribute').checked) {
            this.findAndHighlightText("distribute and make available to others");
          } else if (changedField === 'rightPromote' && document.getElementById('ip_rightPromote').checked) {
            this.findAndHighlightText("use in promotional materials and advertising");
          } else if (changedField === 'rightSublicense' && document.getElementById('ip_rightSublicense').checked) {
            this.findAndHighlightText("sublicense to affiliates and service providers");
          }
          break;
        case 'dmcaPolicy':
          const includeDMCA = document.querySelector('input[name="ip_dmcaPolicy"]:checked').value === 'yes';
          if (includeDMCA) {
            this.findAndHighlightText("DMCA Copyright Policy");
          }
          break;
        case 'dmcaEmail':
          this.findAndHighlightText(document.getElementById('ip_dmcaEmail').value);
          break;
        case 'feedbackOwnership':
          const feedbackOwnership = document.querySelector('input[name="ip_feedbackOwnership"]:checked').value;
          if (feedbackOwnership === 'company') {
            this.findAndHighlightText("you hereby assign to");
          } else if (feedbackOwnership === 'license') {
            this.findAndHighlightText("you grant");
          } else {
            this.findAndHighlightText("you retain all rights to your Feedback");
          }
          break;
      }
      
      // Remove highlights after 3 seconds
      setTimeout(function() {
        self.clearHighlights();
      }, 3000);
    },
    
    // Generate MS Word document
    generateWordDoc: function() {
      const header = "<html xmlns:o='urn:schemas-microsoft-com:office:office' " +
                   "xmlns:w='urn:schemas-microsoft-com:office:word' " +
                   "xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><title>Word Document</title></head><body>";
      const footer = "</body></html>";
      const content = document.getElementById('ipPreview').innerHTML;
      const sourceHTML = header + content + footer;
      const source = 'data:application/vnd.ms-word;charset=utf-8,' + encodeURIComponent(sourceHTML);
      
      // Create a download link and trigger it
      const fileDownload = document.createElement("a");
      document.body.appendChild(fileDownload);
      fileDownload.href = source;
      fileDownload.download = 'IntellectualPropertyClause.doc';
      fileDownload.click();
      document.body.removeChild(fileDownload);
    },
    
    // Handle copy button click
    handleCopyClick: function() {
      const text = document.getElementById('ipPreview').innerText;
      
      try {
        // Modern approach
        if (navigator.clipboard) {
          navigator.clipboard.writeText(text)
            .then(function() {
              const copyBtn = document.getElementById('ipCopyBtn');
              const originalText = copyBtn.innerHTML;
              copyBtn.innerHTML = 'COPIED!';
              setTimeout(function() {
                copyBtn.innerHTML = originalText;
              }, 2000);
            })
            .catch(function(err) {
              console.error('Could not copy text: ', err);
              fallbackCopyTextToClipboard(text);
            });
        } 
        // Fallback approach
        else {
          fallbackCopyTextToClipboard(text);
        }
      } catch(err) {
        console.error('Copy failed: ', err);
        alert('Please select and copy the text manually.');
      }
      
      function fallbackCopyTextToClipboard(text) {
        const textArea = document.createElement('textarea');
        textArea.value = text;
        
        // Make the textarea out of viewport
        textArea.style.position = 'fixed';
        textArea.style.left = '-999999px';
        textArea.style.top = '-999999px';
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        
        try {
          const successful = document.execCommand('copy');
          const copyBtn = document.getElementById('ipCopyBtn');
          const originalText = copyBtn.innerHTML;
          copyBtn.innerHTML = successful ? 'COPIED!' : 'FAILED!';
          setTimeout(function() {
            copyBtn.innerHTML = originalText;
          }, 2000);
        } catch (err) {
          console.error('Fallback: Could not copy text: ', err);
          alert('Please select and copy the text manually.');
        }
        
        document.body.removeChild(textArea);
      }
    }
  };
  
  // Initialize when the page loads
  document.addEventListener('DOMContentLoaded', function() {
    ipGenerator.init();
  });
  
  // Initialize immediately as well (for WordPress)
  ipGenerator.init();
</script>
    
    
    <!-- Tab Content for Dispute Resolution -->
    <div id="dispute-tab" class="tools-tab-content">
      <div class="coming-soon-container">
        <div class="coming-soon-icon">🔜</div>
        <h3 class="coming-soon-title">Dispute Resolution Generator</h3>
        <p class="coming-soon-description">Generate customized dispute resolution clauses with arbitration, jurisdiction, class action waiver, and attorney's fees provisions tailored to your jurisdiction and business requirements.</p>
        <div class="coming-soon-notification">Coming Soon!</div>
      </div>
    </div>
    
    <!-- Tab Content for User Obligations -->
    <div id="userconduct-tab" class="tools-tab-content">
      <div class="coming-soon-container">
        <div class="coming-soon-icon">🔜</div>
        <h3 class="coming-soon-title">User Obligations & Code of Conduct Generator</h3>
        <p class="coming-soon-description">Create detailed user obligation clauses including acceptable use policies, prohibited activities, account security requirements, and content standards for your platform or service.</p>
        <div class="coming-soon-notification">Coming Soon!</div>
      </div>
    </div>
    
    <!-- Tab Content for Termination -->
    <div id="termination-tab" class="tools-tab-content">
      <div class="coming-soon-container">
        <div class="coming-soon-icon">🔜</div>
        <h3 class="coming-soon-title">Termination & Account Suspension Generator</h3>
        <p class="coming-soon-description">Generate comprehensive termination clauses covering termination rights, procedures, post-termination obligations, and account suspension conditions tailored to your business model.</p>
        <div class="coming-soon-notification">Coming Soon!</div>
      </div>
    </div>
  </div>

  <script>
    // Create a namespace to avoid global scope pollution in WordPress
    var warrantyLiabilityGenerator = {
      // Initialize the generator
      init: function() {
        this.handleLiabilityCapChange();
        this.updateJurisdictionWarning();
        this.updatePreview();
        this.setupTabNavigation();
      },
      
      // Set up tab navigation
      setupTabNavigation: function() {
        const tabs = document.querySelectorAll('.tools-tab');
        
        tabs.forEach(tab => {
          tab.addEventListener('click', () => {
            // Remove active class from all tabs
            document.querySelectorAll('.tools-tab').forEach(t => {
              t.classList.remove('active');
            });
            
            // Add active class to clicked tab
            tab.classList.add('active');
            
            // Get the tab data-tab attribute
            const tabName = tab.getAttribute('data-tab');
            
            // Hide all tab content
            document.querySelectorAll('.tools-tab-content').forEach(content => {
              content.classList.remove('active');
            });
            
            // Show the corresponding tab content
            document.getElementById(tabName + '-tab').classList.add('active');
          });
        });
      },
      
      // Apply industry preset
      applyPreset: function(preset) {
        // SaaS/Software preset
        if (preset === 'saas') {
          document.getElementById('serviceType').value = 'saas';
          document.getElementById('serviceName').value = 'OUR SOFTWARE';
          document.getElementById('warrantyStrong').checked = true;
          document.getElementById('disclaimerUptime').checked = true;
          document.getElementById('disclaimerAccuracy').checked = true;
          document.getElementById('disclaimerSecurity').checked = true;
          document.getElementById('disclaimerThirdParty').checked = true;
          document.getElementById('disclaimerProfessional').checked = false;
          document.getElementById('liabilityScope').value = 'intermediate';
          document.getElementById('excludeDirect').checked = false;
          document.getElementById('excludeIndirect').checked = true;
          document.getElementById('excludeConsequential').checked = true;
          document.getElementById('excludePunitive').checked = true;
          document.getElementById('excludeSpecial').checked = true;
          document.getElementById('capFees').checked = true;
          document.getElementById('severabilityYes').checked = true;
          document.getElementById('indemnificationYes').checked = true;
        }
        // E-commerce preset
        else if (preset === 'ecommerce') {
          document.getElementById('serviceType').value = 'website';
          document.getElementById('serviceName').value = 'OUR STORE';
          document.getElementById('warrantyModerate').checked = true;
          document.getElementById('disclaimerUptime').checked = true;
          document.getElementById('disclaimerAccuracy').checked = true;
          document.getElementById('disclaimerSecurity').checked = true;
          document.getElementById('disclaimerThirdParty').checked = true;
          document.getElementById('disclaimerProfessional').checked = false;
          document.getElementById('liabilityScope').value = 'intermediate';
          document.getElementById('excludeDirect').checked = false;
          document.getElementById('excludeIndirect').checked = true;
          document.getElementById('excludeConsequential').checked = true;
          document.getElementById('excludePunitive').checked = true;
          document.getElementById('excludeSpecial').checked = true;
          document.getElementById('capFees').checked = true;
          document.getElementById('severabilityYes').checked = true;
          document.getElementById('indemnificationYes').checked = true;
        }
        // Content Platform preset
        else if (preset === 'content') {
          document.getElementById('serviceType').value = 'website';
          document.getElementById('serviceName').value = 'OUR PLATFORM';
          document.getElementById('warrantyStrong').checked = true;
          document.getElementById('disclaimerUptime').checked = true;
          document.getElementById('disclaimerAccuracy').checked = true;
          document.getElementById('disclaimerSecurity').checked = true;
          document.getElementById('disclaimerThirdParty').checked = true;
          document.getElementById('disclaimerProfessional').checked = true;
          document.getElementById('liabilityScope').value = 'broad';
          document.getElementById('excludeDirect').checked = false;
          document.getElementById('excludeIndirect').checked = true;
          document.getElementById('excludeConsequential').checked = true;
          document.getElementById('excludePunitive').checked = true;
          document.getElementById('excludeSpecial').checked = true;
          document.getElementById('capFees').checked = true;
          document.getElementById('severabilityYes').checked = true;
          document.getElementById('indemnificationYes').checked = true;
        }
        // Subscription Service preset
        else if (preset === 'subscription') {
          document.getElementById('serviceType').value = 'subscription';
          document.getElementById('serviceName').value = 'OUR SUBSCRIPTION SERVICE';
          document.getElementById('warrantyModerate').checked = true;
          document.getElementById('disclaimerUptime').checked = true;
          document.getElementById('disclaimerAccuracy').checked = true;
          document.getElementById('disclaimerSecurity').checked = true;
          document.getElementById('disclaimerThirdParty').checked = true;
          document.getElementById('disclaimerProfessional').checked = false;
          document.getElementById('liabilityScope').value = 'intermediate';
          document.getElementById('excludeDirect').checked = false;
          document.getElementById('excludeIndirect').checked = true;
          document.getElementById('excludeConsequential').checked = true;
          document.getElementById('excludePunitive').checked = true;
          document.getElementById('excludeSpecial').checked = true;
          document.getElementById('capFees').checked = true;
          document.getElementById('severabilityYes').checked = true;
          document.getElementById('indemnificationYes').checked = true;
        }
        // Online Marketplace preset
        else if (preset === 'marketplace') {
          document.getElementById('serviceType').value = 'marketplace';
          document.getElementById('serviceName').value = 'OUR MARKETPLACE';
          document.getElementById('warrantyStrong').checked = true;
          document.getElementById('disclaimerUptime').checked = true;
          document.getElementById('disclaimerAccuracy').checked = true;
          document.getElementById('disclaimerSecurity').checked = true;
          document.getElementById('disclaimerThirdParty').checked = true;
          document.getElementById('disclaimerProfessional').checked = false;
          document.getElementById('liabilityScope').value = 'broad';
          document.getElementById('excludeDirect').checked = false;
          document.getElementById('excludeIndirect').checked = true;
          document.getElementById('excludeConsequential').checked = true;
          document.getElementById('excludePunitive').checked = true;
          document.getElementById('excludeSpecial').checked = true;
          document.getElementById('capFees').checked = true;
          document.getElementById('severabilityYes').checked = true;
          document.getElementById('indemnificationYes').checked = true;
        }
        
        // Update the preview after applying preset
        this.handleLiabilityCapChange();
        this.updateJurisdictionWarning();
        this.updatePreview();
      },

      // Update jurisdiction warning
      updateJurisdictionWarning: function() {
        const jurisdiction = document.getElementById('jurisdiction').value;
        const liabilityScope = document.getElementById('liabilityScope').value;
        const excludeDirect = document.getElementById('excludeDirect').checked;
        const warningElement = document.getElementById('jurisdiction-warning');
        
        let warningText = '';
        
        if (jurisdiction === 'eu') {
          if (liabilityScope === 'broad' || excludeDirect) {
            warningText = '<strong>Warning:</strong> EU consumer protection laws may limit the enforceability of broad liability exclusions. Under the EU Consumer Rights Directive and national laws, you cannot exclude liability for direct damages to consumers in many circumstances.';
          } else {
            warningText = '<strong>Note:</strong> EU law requires specific protections for consumers that override terms of service. Your clause addresses this, but you should consult with local counsel to ensure compliance with EU member state laws.';
          }
        } else if (jurisdiction === 'uk') {
          if (liabilityScope === 'broad' || excludeDirect) {
            warningText = '<strong>Warning:</strong> UK Consumer Rights Act and Unfair Contract Terms Act may limit the enforceability of broad liability exclusions, particularly for direct damages to consumers.';
          }
        } else if (jurisdiction === 'au') {
          if (liabilityScope === 'broad' || excludeDirect) {
            warningText = '<strong>Warning:</strong> The Australian Consumer Law provides non-excludable consumer guarantees that override broad liability disclaimers for consumers.';
          }
        } else if (jurisdiction === 'ca') {
          if (liabilityScope === 'broad' && jurisdiction === 'ca') {
            warningText = '<strong>Warning:</strong> Canadian provinces like Quebec have consumer protection laws that may limit the enforceability of broad liability exclusions.';
          }
        } else if (jurisdiction === 'us') {
          if (liabilityScope === 'broad' && excludeDirect) {
            warningText = '<strong>Note:</strong> Some U.S. states limit the enforceability of clauses that exclude all liability, including direct damages. Consider a more moderate approach for consumer-facing services.';
          }
        }
        
        if (warningText) {
          warningElement.innerHTML = warningText;
          warningElement.style.display = 'block';
        } else {
          warningElement.style.display = 'none';
        }
      },
      
      // Generate clause text
      generateClause: function() {
        const companyName = document.getElementById('companyName').value;
        const serviceType = document.getElementById('serviceType').value;
        const serviceTypeText = document.getElementById('serviceType').options[document.getElementById('serviceType').selectedIndex].text.toUpperCase();
        const serviceName = document.getElementById('serviceName').value.toUpperCase();
        
        // Get warranty level
        let warrantyLevel = '';
        const warrantyRadios = document.getElementsByName('warrantyLevel');
        for (let i = 0; i < warrantyRadios.length; i++) {
          if (warrantyRadios[i].checked) {
            warrantyLevel = warrantyRadios[i].value;
            break;
          }
        }
        
        // Get specific disclaimers
        const disclaimerUptime = document.getElementById('disclaimerUptime').checked;
        const disclaimerAccuracy = document.getElementById('disclaimerAccuracy').checked;
        const disclaimerSecurity = document.getElementById('disclaimerSecurity').checked;
        const disclaimerThirdParty = document.getElementById('disclaimerThirdParty').checked;
        const disclaimerProfessional = document.getElementById('disclaimerProfessional').checked;
        
        // Get liability scope
        const liabilityScope = document.getElementById('liabilityScope').value;
        
        // Get specific damages excluded
        const excludeDirect = document.getElementById('excludeDirect').checked;
        const excludeIndirect = document.getElementById('excludeIndirect').checked;
        const excludeConsequential = document.getElementById('excludeConsequential').checked;
        const excludePunitive = document.getElementById('excludePunitive').checked;
        const excludeSpecial = document.getElementById('excludeSpecial').checked;
        
        // Get liability cap
        let liabilityCap = '';
        const liabilityCapRadios = document.getElementsByName('liabilityCap');
        for (let i = 0; i < liabilityCapRadios.length; i++) {
          if (liabilityCapRadios[i].checked) {
            liabilityCap = liabilityCapRadios[i].value;
            break;
          }
        }
        
        const capAmount = document.getElementById('capAmount').value;
        
        // Get additional options
        let severability = '';
        const severabilityRadios = document.getElementsByName('severability');
        for (let i = 0; i < severabilityRadios.length; i++) {
          if (severabilityRadios[i].checked) {
            severability = severabilityRadios[i].value;
            break;
          }
        }
        
        let indemnification = '';
        const indemnificationRadios = document.getElementsByName('indemnification');
        for (let i = 0; i < indemnificationRadios.length; i++) {
          if (indemnificationRadios[i].checked) {
            indemnification = indemnificationRadios[i].value;
            break;
          }
        }
        
        const jurisdiction = document.getElementById('jurisdiction').value;
        
        // Build clause sections
        
        // Build warranty disclaimer heading
        let disclaimerHeading = '';
        if (warrantyLevel === 'strong') {
          disclaimerHeading = "DISCLAIMER OF WARRANTIES";
        } else if (warrantyLevel === 'moderate') {
          disclaimerHeading = "LIMITED WARRANTY";
        } else {
          disclaimerHeading = "WARRANTY DISCLAIMER";
        }
        
        // Build warranty disclaimer language
        let disclaimerLanguage = '';
        if (warrantyLevel === 'strong') {
          disclaimerLanguage = `${serviceName} IS PROVIDED "AS IS" AND "AS AVAILABLE," WITHOUT WARRANTY OF ANY KIND. TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW, ${companyName} EXPRESSLY DISCLAIMS ALL WARRANTIES, WHETHER EXPRESS, IMPLIED, OR STATUTORY, INCLUDING BUT NOT LIMITED TO WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE, NON-INFRINGEMENT, AND ANY WARRANTIES ARISING FROM COURSE OF DEALING OR COURSE OF PERFORMANCE.`;
        } else if (warrantyLevel === 'moderate') {
          disclaimerLanguage = `${serviceName} IS PROVIDED "AS IS" AND "AS AVAILABLE," WITH CERTAIN LIMITED WARRANTIES. ${companyName} DISCLAIMS, TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW, ALL OTHER WARRANTIES, WHETHER EXPRESS, IMPLIED, OR STATUTORY, INCLUDING BUT NOT LIMITED TO WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE, AND NON-INFRINGEMENT.`;
        } else {
          disclaimerLanguage = `${companyName} strives to provide ${serviceName} in a professional manner, but we cannot guarantee that it will always be error-free or meet your specific requirements. Certain warranties may be provided as expressly stated in our agreements with you, but otherwise, ${serviceName} is provided with limited warranties.`;
        }
        
        // Build specific disclaimers
        let specificDisclaimers = [];
        
        if (disclaimerUptime) {
          if (warrantyLevel === 'strong' || warrantyLevel === 'moderate') {
            specificDisclaimers.push(`${companyName} DOES NOT WARRANT THAT ${serviceName} WILL BE UNINTERRUPTED, ERROR-FREE, SECURE, ACCURATE, RELIABLE, OR AVAILABLE AT ALL TIMES. YOU UNDERSTAND THAT THE ${serviceTypeText} MAY BE SUBJECT TO LIMITATIONS, DELAYS, AND OTHER ISSUES INHERENT IN THE USE OF THE INTERNET AND ELECTRONIC COMMUNICATIONS.`);
          } else {
            specificDisclaimers.push(`While we strive for high availability, ${companyName} does not guarantee that ${serviceName} will be uninterrupted, error-free, or available at all times. The ${serviceTypeText} may be subject to limitations, delays, and other issues inherent in the use of the internet and electronic communications.`);
          }
        }
        
        if (disclaimerAccuracy) {
          if (warrantyLevel === 'strong' || warrantyLevel === 'moderate') {
            specificDisclaimers.push(`${companyName} MAKES NO WARRANTY REGARDING THE ACCURACY, COMPLETENESS, OR RELIABILITY OF ANY CONTENT AVAILABLE THROUGH ${serviceName}.`);
          } else {
            specificDisclaimers.push(`${companyName} does not guarantee the accuracy, completeness, or reliability of any content available through ${serviceName}.`);
          }
        }
        
        if (disclaimerSecurity) {
          if (warrantyLevel === 'strong' || warrantyLevel === 'moderate') {
            specificDisclaimers.push(`${companyName} DOES NOT WARRANT THAT ${serviceName} WILL BE SECURE OR FREE FROM VIRUSES, MALWARE, OR OTHER HARMFUL COMPONENTS.`);
          } else {
            specificDisclaimers.push(`While we implement reasonable security measures, ${companyName} cannot guarantee that ${serviceName} will be completely secure or free from viruses, malware, or other harmful components.`);
          }
        }
        
        if (disclaimerThirdParty) {
          if (warrantyLevel === 'strong' || warrantyLevel === 'moderate') {
            specificDisclaimers.push(`${companyName} DISCLAIMS ALL WARRANTIES AND LIABILITIES RELATED TO ANY THIRD-PARTY CONTENT, SERVICES, OR LINKS ACCESSIBLE THROUGH ${serviceName}.`);
          } else {
            specificDisclaimers.push(`${companyName} is not responsible for any third-party content, services, or links accessible through ${serviceName} and disclaims all warranties related to such third-party elements.`);
          }
        }
        
        if (disclaimerProfessional) {
          if (warrantyLevel === 'strong' || warrantyLevel === 'moderate') {
            specificDisclaimers.push(`${serviceName} IS NOT INTENDED TO PROVIDE PROFESSIONAL, LEGAL, MEDICAL, ACCOUNTING, OR FINANCIAL ADVICE. ANY INFORMATION PROVIDED THROUGH ${serviceName} SHOULD NOT BE CONSIDERED A SUBSTITUTE FOR PROFESSIONAL ADVICE.`);
          } else {
            specificDisclaimers.push(`${serviceName} is not intended to provide professional, legal, medical, accounting, or financial advice. You should consult with qualified professionals for advice tailored to your specific situation.`);
          }
        }
        
        // Format specific disclaimers
        let specificDisclaimersText = '';
        if (specificDisclaimers.length > 0) {
          specificDisclaimersText = specificDisclaimers.join(' ');
        }
        
        // Build liability limitation heading
        let liabilityHeading = "LIMITATION OF LIABILITY";
        
        // Build excluded damages list for all liability scopes
        let excludedDamagesArray = [];
        
        if (excludeDirect) {
          excludedDamagesArray.push("direct");
        }
        
        if (excludeIndirect) {
          excludedDamagesArray.push("indirect");
        }
        
        if (excludeConsequential) {
          excludedDamagesArray.push("consequential");
        }
        
        if (excludePunitive) {
          excludedDamagesArray.push("punitive");
        }
        
        if (excludeSpecial) {
          excludedDamagesArray.push("special");
        }
        
        // Format excluded damages for all liability scopes
        let formattedExcludedDamages = '';
        if (excludedDamagesArray.length > 0) {
          if (excludedDamagesArray.length === 1) {
            formattedExcludedDamages = excludedDamagesArray[0].toUpperCase();
          } else {
            let lastDamage = excludedDamagesArray.pop();
            formattedExcludedDamages = excludedDamagesArray.join(', ').toUpperCase() + ', OR ' + lastDamage.toUpperCase();
          }
        }
        
        // Build liability limitation language based on scope and excluded damages
        let liabilityLanguage = '';
        if (liabilityScope === 'broad') {
          // For broad scope, we'll exclude only the selected damages
          if (excludedDamagesArray.length > 0) {
            liabilityLanguage = `TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW, IN NO EVENT SHALL ${companyName} OR ITS DIRECTORS, OFFICERS, EMPLOYEES, AGENTS, PARTNERS, OR SUPPLIERS BE LIABLE FOR ANY ${formattedExcludedDamages} DAMAGES, INCLUDING BUT NOT LIMITED TO DAMAGES FOR LOSS OF PROFITS, GOODWILL, USE, DATA, OR OTHER INTANGIBLE LOSSES, ARISING OUT OF OR RELATED TO YOUR USE OF OR INABILITY TO USE ${serviceName}, REGARDLESS OF THE FORM OF ACTION AND WHETHER OR NOT ${companyName} HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.`;
          } else {
            liabilityLanguage = `TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW, IN NO EVENT SHALL ${companyName} OR ITS DIRECTORS, OFFICERS, EMPLOYEES, AGENTS, PARTNERS, OR SUPPLIERS BE LIABLE FOR ANY DAMAGES WHATSOEVER, WHETHER DIRECT, INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, PUNITIVE, EXEMPLARY, OR OTHERWISE, INCLUDING BUT NOT LIMITED TO DAMAGES FOR LOSS OF PROFITS, GOODWILL, USE, DATA, OR OTHER INTANGIBLE LOSSES, ARISING OUT OF OR RELATED TO YOUR USE OF OR INABILITY TO USE ${serviceName}, REGARDLESS OF THE FORM OF ACTION AND WHETHER OR NOT ${companyName} HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.`;
          }
        } else if (liabilityScope === 'intermediate') {
          // For intermediate scope, we'll exclude only the selected damages
          if (excludedDamagesArray.length > 0) {
            liabilityLanguage = `TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW, ${companyName} WILL NOT BE LIABLE FOR ANY ${formattedExcludedDamages} DAMAGES, INCLUDING BUT NOT LIMITED TO DAMAGES FOR LOSS OF PROFITS, GOODWILL, USE, DATA, OR OTHER INTANGIBLE LOSSES, ARISING OUT OF OR RELATED TO YOUR USE OF OR INABILITY TO USE ${serviceName}, REGARDLESS OF THE FORM OF ACTION.`;
          } else {
            liabilityLanguage = `TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW, ${companyName} WILL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, PUNITIVE, OR EXEMPLARY DAMAGES, INCLUDING BUT NOT LIMITED TO DAMAGES FOR LOSS OF PROFITS, GOODWILL, USE, DATA, OR OTHER INTANGIBLE LOSSES, ARISING OUT OF OR RELATED TO YOUR USE OF OR INABILITY TO USE ${serviceName}, REGARDLESS OF THE FORM OF ACTION.`;
          }
        } else {
          // For narrow scope
          if (excludedDamagesArray.length > 0) {
            liabilityLanguage = `${companyName}'s liability is limited to direct damages arising out of or related to your use of ${serviceName}, subject to the exclusions and limitations set forth in this section. WITHOUT LIMITING THE FOREGOING, ${companyName} WILL NOT BE LIABLE FOR ANY ${formattedExcludedDamages} DAMAGES.`;
          } else {
            liabilityLanguage = `${companyName}'s liability is limited to direct damages arising out of or related to your use of ${serviceName}, subject to the exclusions and limitations set forth in this section.`;
          }
        }
        
        // Build liability cap language
        let liabilityCapLanguage = '';
        if (liabilityCap === 'none') {
          liabilityCapLanguage = '';
        } else if (liabilityCap === 'fees') {
          liabilityCapLanguage = `IN ANY CASE, ${companyName}'S MAXIMUM AGGREGATE LIABILITY UNDER THESE TERMS SHALL BE LIMITED TO THE AMOUNT YOU HAVE PAID ${companyName} FOR USE OF ${serviceName} IN THE TWELVE (12) MONTHS PRECEDING THE EVENT GIVING RISE TO THE LIABILITY. IF YOU HAVE NOT PAID ${companyName} FOR THE USE OF ${serviceName}, THEN ${companyName}'S MAXIMUM AGGREGATE LIABILITY SHALL BE LIMITED TO ONE HUNDRED DOLLARS ($100).`;
        } else if (liabilityCap === 'fixed') {
          liabilityCapLanguage = `IN ANY CASE, ${companyName}'S MAXIMUM AGGREGATE LIABILITY UNDER THESE TERMS SHALL BE LIMITED TO ${capAmount}.`;
        }
        
        // Build severability language
        let severabilityLanguage = '';
        if (severability === 'yes') {
          severabilityLanguage = `<p>If any provision of these disclaimer and limitation sections is found to be unenforceable or invalid under applicable law, such provision shall be limited or eliminated to the minimum extent necessary, and the remaining provisions shall remain in full force and effect.</p>`;
        }
        
        // Build indemnification language
        let indemnificationLanguage = '';
        if (indemnification === 'yes') {
          indemnificationLanguage = `<p><strong>INDEMNIFICATION</strong></p>
<p>You agree to defend, indemnify, and hold harmless ${companyName}, its officers, directors, employees, and agents, from and against any claims, liabilities, damages, losses, and expenses, including without limitation reasonable attorney's fees and costs, arising out of or in any way connected with your access to or use of ${serviceName} or your violation of these Terms. ${companyName} reserves the right to assume the exclusive defense and control of any matter otherwise subject to indemnification by you, in which event you will cooperate with ${companyName} in asserting any available defenses.</p>`;
        }
        
        // Build jurisdiction-specific language
        let jurisdictionLanguage = '';
        if (jurisdiction === 'eu' || jurisdiction === 'uk') {
          jurisdictionLanguage = `<p>Nothing in these Terms shall exclude or limit ${companyName}'s liability for death or personal injury caused by negligence, fraud, or any other liability that cannot be excluded or limited by applicable law. Consumer statutory rights that cannot be waived or limited are not affected by these Terms.</p>`;
        } else if (jurisdiction === 'au') {
          jurisdictionLanguage = `<p>Nothing in these Terms excludes, restricts, or modifies any consumer guarantee, right, or remedy conferred on you by the Australian Consumer Law or any other applicable law that cannot be excluded, restricted, or modified by agreement.</p>`;
        } else if (jurisdiction === 'ca') {
          jurisdictionLanguage = `<p>Some jurisdictions, including Quebec, do not allow the exclusion or limitation of implied warranties or the limitation of certain damages, so some of the above disclaimers and limitations may not apply to residents of these jurisdictions.</p>`;
        }
        
        // Build the complete clause
        let clause = `
<p><strong>${disclaimerHeading}</strong></p>
<p>${disclaimerLanguage} ${specificDisclaimersText}</p>

<p><strong>${liabilityHeading}</strong></p>
<p>${liabilityLanguage} ${liabilityCapLanguage}</p>
`;

        // Add severability paragraph if included
        if (severability === 'yes') {
          clause += severabilityLanguage;
        }

        // Add indemnification section if included
        if (indemnification === 'yes') {
          clause += indemnificationLanguage;
        }

        // Add jurisdiction-specific paragraph if needed
        if (jurisdictionLanguage) {
          clause += jurisdictionLanguage;
        }

        return clause;
      },
      
      // Handle liability cap change
      handleLiabilityCapChange: function() {
        const liabilityCapRadios = document.getElementsByName('liabilityCap');
        let selectedCap = '';
        
        for (let i = 0; i < liabilityCapRadios.length; i++) {
          if (liabilityCapRadios[i].checked) {
            selectedCap = liabilityCapRadios[i].value;
            break;
          }
        }
        
        // Show/hide fixed cap amount field
        document.getElementById('fixedCapAmount').style.display = selectedCap === 'fixed' ? 'block' : 'none';
        
        // Update preview
        this.updatePreview('liabilityCap');
      },
      
      // Update the preview
      updatePreview: function(changedField) {
        // Clear previous highlights
        this.clearHighlights();
        
        // Generate new clause text
        const clauseText = this.generateClause();
        
        // Update preview
        document.getElementById('warrantyPreview').innerHTML = clauseText;
        
        // If a field was changed, highlight the relevant text
        if (changedField) {
          this.highlightChangedText(changedField);
        }
        
        // Setup listeners for cap change
        const liabilityCapRadios = document.getElementsByName('liabilityCap');
        for (let i = 0; i < liabilityCapRadios.length; i++) {
          liabilityCapRadios[i].onclick = this.handleLiabilityCapChange.bind(this);
        }
      },
      
      // Clear highlights
      clearHighlights: function() {
        const highlightElements = document.getElementsByClassName('highlight');
        while (highlightElements.length > 0) {
          const element = highlightElements[0];
          const text = element.textContent;
          const textNode = document.createTextNode(text);
          element.parentNode.replaceChild(textNode, element);
        }
      },
      
      // Find text in document and highlight it
      findAndHighlightText: function(searchText) {
        if (!searchText) return;
        
        const previewElement = document.getElementById('warrantyPreview');
        const previewHTML = previewElement.innerHTML;
        
        // A simpler approach for WordPress compatibility
        if (previewHTML.indexOf(searchText) >= 0) {
          const newHTML = previewHTML.replace(
            new RegExp(this.escapeRegExp(searchText), 'g'),
            '<span class="highlight">' + searchText + '</span>'
          );
          
          previewElement.innerHTML = newHTML;
          
          // Try to scroll to the highlighted element
          setTimeout(function() {
            const highlightElements = document.getElementsByClassName('highlight');
            if (highlightElements.length > 0) {
              const firstHighlight = highlightElements[0];
              if (firstHighlight) {
                firstHighlight.scrollIntoView({behavior: 'smooth', block: 'center'});
              }
            }
          }, 100);
        }
      },
      
      // Escape special regex characters
      escapeRegExp: function(string) {
        return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
      },
      
      // Highlight changed text based on field
      highlightChangedText: function(changedField) {
        const self = this;
        
        switch (changedField) {
          case 'companyName':
            this.findAndHighlightText(document.getElementById('companyName').value);
            break;
          case 'serviceType':
            // Highlight the service type text
            const serviceTypeElement = document.getElementById('serviceType');
            const serviceTypeText = serviceTypeElement.options[serviceTypeElement.selectedIndex].text.toUpperCase();
            this.findAndHighlightText(serviceTypeText);
            break;
          case 'serviceName':
            this.findAndHighlightText(document.getElementById('serviceName').value.toUpperCase());
            break;
          case 'warrantyLevel':
            // Highlight the warranty heading
            const warrantyLevel = document.querySelector('input[name="warrantyLevel"]:checked').value;
            if (warrantyLevel === 'strong') {
              this.findAndHighlightText("DISCLAIMER OF WARRANTIES");
            } else if (warrantyLevel === 'moderate') {
              this.findAndHighlightText("LIMITED WARRANTY");
            } else {
              this.findAndHighlightText("WARRANTY DISCLAIMER");
            }
            break;
          case 'disclaimerUptime':
            if (document.getElementById('disclaimerUptime').checked) {
              this.findAndHighlightText("uninterrupted, error-free");
            }
            break;
          case 'disclaimerAccuracy':
            if (document.getElementById('disclaimerAccuracy').checked) {
              this.findAndHighlightText("accuracy, completeness, or reliability");
            }
            break;
          case 'disclaimerSecurity':
            if (document.getElementById('disclaimerSecurity').checked) {
              this.findAndHighlightText("secure or free from viruses");
            }
            break;
          case 'disclaimerThirdParty':
            if (document.getElementById('disclaimerThirdParty').checked) {
              this.findAndHighlightText("third-party content");
            }
            break;
          case 'disclaimerProfessional':
            if (document.getElementById('disclaimerProfessional').checked) {
              this.findAndHighlightText("professional, legal, medical");
            }
            break;
          case 'liabilityScope':
          case 'excludeDirect':
          case 'excludeIndirect':
          case 'excludeConsequential':
          case 'excludePunitive':
          case 'excludeSpecial':
            // Get excluded damages
            const excludedDamages = [];
            
            if (document.getElementById('excludeDirect').checked) excludedDamages.push("direct");
            if (document.getElementById('excludeIndirect').checked) excludedDamages.push("indirect");
            if (document.getElementById('excludeConsequential').checked) excludedDamages.push("consequential");
            if (document.getElementById('excludePunitive').checked) excludedDamages.push("punitive");
            if (document.getElementById('excludeSpecial').checked) excludedDamages.push("special");
            
            if (excludedDamages.length > 0) {
              if (excludedDamages.length === 1) {
                this.findAndHighlightText(excludedDamages[0].toUpperCase());
              } else {
                const lastDamage = excludedDamages[excludedDamages.length - 1];
                const otherDamages = excludedDamages.slice(0, -1);
                const damageText = otherDamages.join(', ').toUpperCase() + ', OR ' + lastDamage.toUpperCase();
                this.findAndHighlightText(damageText);
              }
            } else {
              // Highlight basic scope text if no specific damages are excluded
              const liabilityScope = document.getElementById('liabilityScope').value;
              if (liabilityScope === 'broad') {
                this.findAndHighlightText("ANY DAMAGES WHATSOEVER");
              } else if (liabilityScope === 'intermediate') {
                this.findAndHighlightText("ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, PUNITIVE, OR EXEMPLARY DAMAGES");
              } else {
                this.findAndHighlightText("limited to direct damages");
              }
            }
            break;
          case 'liabilityCap':
            const liabilityCap = document.querySelector('input[name="liabilityCap"]:checked').value;
            if (liabilityCap === 'fees') {
              this.findAndHighlightText("limited to the amount you have paid");
            } else if (liabilityCap === 'fixed') {
              this.findAndHighlightText("limited to " + document.getElementById('capAmount').value);
            }
            break;
          case 'capAmount':
            this.findAndHighlightText(document.getElementById('capAmount').value);
            break;
          case 'severability':
            if (document.querySelector('input[name="severability"]:checked').value === 'yes') {
              this.findAndHighlightText("If any provision of these disclaimer and limitation sections is found to be unenforceable");
            }
            break;
          case 'indemnification':
            if (document.querySelector('input[name="indemnification"]:checked').value === 'yes') {
              this.findAndHighlightText("INDEMNIFICATION");
            }
            break;
          case 'jurisdiction':
            const jurisdiction = document.getElementById('jurisdiction').value;
            if (jurisdiction === 'eu' || jurisdiction === 'uk') {
              this.findAndHighlightText("Nothing in these Terms shall exclude or limit");
            } else if (jurisdiction === 'au') {
              this.findAndHighlightText("Nothing in these Terms excludes, restricts, or modifies any consumer guarantee");
            } else if (jurisdiction === 'ca') {
              this.findAndHighlightText("Some jurisdictions, including Quebec");
            }
            break;
        }
        
        // Remove highlights after 3 seconds
        setTimeout(function() {
          self.clearHighlights();
        }, 3000);
      },
      
      // Generate MS Word document
      generateWordDoc: function() {
        const header = "<html xmlns:o='urn:schemas-microsoft-com:office:office' " +
                     "xmlns:w='urn:schemas-microsoft-com:office:word' " +
                     "xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><title>Word Document</title></head><body>";
        const footer = "</body></html>";
        const content = document.getElementById('warrantyPreview').innerHTML;
        const sourceHTML = header + content + footer;
        const source = 'data:application/vnd.ms-word;charset=utf-8,' + encodeURIComponent(sourceHTML);
        
        // Create a download link and trigger it
        const fileDownload = document.createElement("a");
        document.body.appendChild(fileDownload);
        fileDownload.href = source;
        fileDownload.download = 'WarrantyAndLiabilityClause.doc';
        fileDownload.click();
        document.body.removeChild(fileDownload);
      },
      
      // Handle copy button click
      handleCopyClick: function() {
        const text = document.getElementById('warrantyPreview').innerText;
        
        try {
          // Modern approach
          if (navigator.clipboard) {
            navigator.clipboard.writeText(text)
              .then(function() {
                const copyBtn = document.getElementById('warrantyCopyBtn');
                const originalText = copyBtn.innerHTML;
                copyBtn.innerHTML = 'COPIED!';
                setTimeout(function() {
                  copyBtn.innerHTML = originalText;
                }, 2000);
              })
              .catch(function(err) {
                console.error('Could not copy text: ', err);
                fallbackCopyTextToClipboard(text);
              });
          } 
          // Fallback approach
          else {
            fallbackCopyTextToClipboard(text);
          }
        } catch(err) {
          console.error('Copy failed: ', err);
          alert('Please select and copy the text manually.');
        }
        
        function fallbackCopyTextToClipboard(text) {
          const textArea = document.createElement('textarea');
          textArea.value = text;
          
          // Make the textarea out of viewport
          textArea.style.position = 'fixed';
          textArea.style.left = '-999999px';
          textArea.style.top = '-999999px';
          document.body.appendChild(textArea);
          textArea.focus();
          textArea.select();
          
          try {
            const successful = document.execCommand('copy');
            const copyBtn = document.getElementById('warrantyCopyBtn');
            const originalText = copyBtn.innerHTML;
            copyBtn.innerHTML = successful ? 'COPIED!' : 'FAILED!';
            setTimeout(function() {
              copyBtn.innerHTML = originalText;
            }, 2000);
          } catch (err) {
            console.error('Fallback: Could not copy text: ', err);
            alert('Please select and copy the text manually.');
          }
          
          document.body.removeChild(textArea);
        }
      }
    };
    
    // Paywall System Code
    var paywallSystem = {
      // Initialize the paywall system
      init: function() {
        // State variables
        this.isPaid = false;
        
        // Check if already paid
        this.checkPaidStatus();
        
        // Check for payment in URL (auto-return)
        this.checkPaymentInUrl();
        
        // Set up paywall buttons and handlers
        this.setupPaywallEvents();
        
        // Disable copy and MS Word buttons until paid
        this.disableButtonsUntilPaid();
      },
      
      // Check if user has already paid
      checkPaidStatus: function() {
        if (localStorage.getItem('touGeneratorsPaid') === 'true') {
          this.isPaid = true;
          this.markAsPaid();
        }
      },
      
      // Check for payment in URL parameters (auto-return)
      checkPaymentInUrl: function() {
        const urlParams = new URLSearchParams(window.location.search);
        const paymentParam = urlParams.get('pmt_token48432s');
        
        if (paymentParam || urlParams.get('tx') || urlParams.get('token') || urlParams.get('paymentId')) {
          console.log('Payment detected in URL');
          this.isPaid = true;
          this.markAsPaid();
          this.showSuccess();
          
          // Store the transaction ID if available
          if (urlParams.get('tx')) {
            localStorage.setItem('touGeneratorTransactionId', urlParams.get('tx'));
          }
        }
      },
      
      // Set up paywall event listeners
      setupPaywallEvents: function() {
        const self = this;
        
        // Set up paywall close button
        const paywallClose = document.getElementById('paywall-close');
        if (paywallClose) {
          paywallClose.addEventListener('click', function() {
            self.hidePaywall();
          });
        }
        
        // Set up backdrop click
        const paywallBackdrop = document.getElementById('paywall-backdrop');
        if (paywallBackdrop) {
          paywallBackdrop.addEventListener('click', function() {
            self.hidePaywall();
          });
        }
        
        // Set up success button
        const successButton = document.getElementById('success-button');
        if (successButton) {
          successButton.addEventListener('click', function() {
            self.hideSuccess();
          });
        }
        
        // Set up recovery button
        const recoverAccessBtn = document.getElementById('recover-access-btn');
        if (recoverAccessBtn) {
          recoverAccessBtn.addEventListener('click', function() {
            const txnIdInput = document.getElementById('transaction-id-input');
            if (txnIdInput) {
              const txnId = txnIdInput.value.trim();
              
              if (txnId && /^[a-zA-Z0-9\-]{10,30}$/.test(txnId)) {
                self.markAsPaid(txnId);
                self.hidePaywall();
                self.showSuccess();
              } else {
                alert('Please enter a valid PayPal Transaction ID');
              }
            }
          });
        }
      },
      
      // Disable copy and MS Word buttons until paid
      disableButtonsUntilPaid: function() {
        const self = this;
        
        // Using event capturing to prevent default behavior
        document.addEventListener('click', function(e) {
          if (!self.isPaid && (e.target.classList.contains('copy-btn') || e.target.closest('.copy-btn'))) {
            e.preventDefault();
            e.stopPropagation();
            self.showPaywall();
            return false;
          }
        }, true);
      },
      
      // Show paywall popup
      showPaywall: function() {
        const overlay = document.getElementById('paywall-overlay');
        const backdrop = document.getElementById('paywall-backdrop');
        
        if (overlay) overlay.style.display = 'flex';
        if (backdrop) backdrop.style.display = 'block';
      },
      
      // Hide paywall popup
      hidePaywall: function() {
        const overlay = document.getElementById('paywall-overlay');
        const backdrop = document.getElementById('paywall-backdrop');
        
        if (overlay) overlay.style.display = 'none';
        if (backdrop) backdrop.style.display = 'none';
      },
      
      // Show success message
      showSuccess: function() {
        const successOverlay = document.getElementById('success-overlay');
        if (successOverlay) successOverlay.style.display = 'flex';
      },
      
      // Hide success message
      hideSuccess: function() {
        const successOverlay = document.getElementById('success-overlay');
        if (successOverlay) successOverlay.style.display = 'none';
      },
      
      // Mark as paid
      markAsPaid: function(transactionId) {
        this.isPaid = true;
        localStorage.setItem('touGeneratorsPaid', 'true');
        
        // Store transaction ID if provided
        if (transactionId) {
          localStorage.setItem('touGeneratorTransactionId', transactionId);
        }
        
        // Update UI
        const premiumBadge = document.getElementById('premium-badge');
        if (premiumBadge) premiumBadge.style.display = 'block';
        
        // Remove fade overlays
        const fadeElements = document.querySelectorAll('.preview-fade');
        fadeElements.forEach(function(el) {
          el.style.display = 'none';
        });
        
        // Enable buttons
        const copyButtons = document.querySelectorAll('.copy-btn');
        copyButtons.forEach(function(btn) {
          btn.style.opacity = '1';
          btn.style.cursor = 'pointer';
        });
        
        // Enable preview text selection
        const previewContents = document.querySelectorAll('.preview-content');
        previewContents.forEach(function(preview) {
          preview.style.userSelect = 'text';
        });
      }
    };
    
    // Initialize when the page loads
    document.addEventListener('DOMContentLoaded', function() {
      warrantyLiabilityGenerator.init();
      paywallSystem.init();
    });
    
    // Initialize immediately as well (for WordPress)
    warrantyLiabilityGenerator.init();
    paywallSystem.init();
  </script>
</body>
</html>
